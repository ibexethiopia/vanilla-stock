import{a as bt,f as we,d as lt,u as el,t as tl,h as at,b as Ye,c as Ce,e as te,r as E,g as pe,o as ee,i as et,n as Ee,m as Oe,_ as B,j as Z,S as al,k as o,l as r,p as S,q as t,w as a,s as i,v as s,F as O,x as w,y as A,z as C,A as qe,B as Se,C as Qe,D as Tn,E as Ve,G as Jt,H as Qt,I as Xt,J as me,K as de,L as En,M as nl,N as G,O as gt,P as Xe,Q as La,R as ne,T as Ie,U as he,V as $e,W as fe,X as On,Y as Et,Z as vt,$ as ol,a0 as Zt,a1 as Ze,a2 as In,a3 as Te,a4 as ll,a5 as Pn,a6 as ze,a7 as fa,a8 as ga,a9 as Un,aa as sl,ab as Fn,ac as Ot,ad as rl,ae as We,af as st,ag as dl,ah as il,ai as qn,aj as ul,ak as It,al as ml,am as cl,an as xt,ao as ya,ap as Mn,aq as ht,ar as ha,as as pl,at as pt,au as _l,av as fl,aw as gl,ax as Rn,ay as yl,az as Kn,aA as Ba,aB as Wa,aC as ba,aD as Vn,aE as ca,aF as nt,aG as rt,aH as zn,aI as Wt,aJ as hl,aK as yt,aL as Ln,aM as va,aN as bl,aO as vl,aP as kl,aQ as wl,aR as Cl,aS as Sl,aT as $l,aU as Dl,aV as Al,aW as ka,aX as Tl,aY as El,aZ as Bn,a_ as jt,a$ as Ol,b0 as Il,b1 as Wn,b2 as Pl,b3 as wa,b4 as Ca,b5 as Ul,b6 as Fl,b7 as ql,b8 as Dt,b9 as Ml,ba as ra,bb as Rl,bc as dt,bd as jn,be as Kl,bf as Vl,bg as zl,bh as Sa,bi as Ll,bj as Bl,bk as Wl,bl as jl,bm as Hl,bn as Nl,bo as Hn,bp as Yl,bq as Gl,br as Jl,bs as Nn,bt as Yn,bu as Ql,bv as Gn,bw as Xl,bx as Zl,by as $a,bz as Kt,bA as xl,bB as es,bC as ts,bD as as,bE as ns,bF as os,bG as ls,bH as ss,bI as rs,bJ as ds,bK as is}from"./vendor-2f9b4e38.js";const pa=(e,l)=>{const c=e[l];return c?typeof c=="function"?c():Promise.resolve(c):new Promise((n,h)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(h.bind(null,new Error("Unknown variable dynamic import: "+l)))})};var Ht=bt.create({baseURL:window.config.path+"/api/v1"});Ht.defaults.headers.Accept="application/json";Ht.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Ht.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;Ht.interceptors.response.use(function(e){return e.data},function(e){if(e.response.status===401)window.location.href=window.config.path;else return Promise.reject(e.response)});window.axiosBase=Ht;const Jn=(e,l)=>{var c=l.role.name=="admin";return we(l.role.perms,n=>{n.name==e&&(c=!0)}),c},Pt=e=>{if(e.details.sales_tax_type=="exclusive"&&e.details.tax_id!=""&&e.details.tax){var l=e.details.tax.rate,c=e.details.sales_price,n=c*(l/100),h=c+n;return h}else return e.details.sales_price},Da=e=>`${e.address}, ${e.city}, ${e.state}, ${e.zipcode}, ${e.country}`,Re=e=>window.config.app_type=="non-saas"?e:`superadmin/${e}`;at.suppressDeprecationWarnings=!0;lt.extend(el);lt.extend(tl);const Y=()=>{const e=Ye(),l=Ce(),{t:c}=te(),n=E(e.meta.orderType),h=window.config.invoice_url,y=window.config.download_lang_csv_url,u=window.config.app_type,d=pe(()=>l.state.auth.menuCollapsed),m=pe(()=>l.state.auth.cssSettings),p=pe(()=>l.state.auth.activeModules),_=pe(()=>l.state.auth.visibleSubscriptionModules),f=pe(()=>l.state.auth.globalSetting),g=pe(()=>l.state.auth.appSetting),b=pe(()=>l.state.auth.addMenus),v=pe(()=>l.state.auth.lang),k=pe(()=>l.state.auth.user),$=pe(()=>l.state.auth.warehouse),D=pe(()=>l.state.auth.all_warehouses),I=pe(()=>l.state.front.appSetting),F=pe(()=>window.config.frontStoreWarehouse);ee(()=>{e.meta&&e.meta.orderType?n.value=e.meta.orderType:n.value="online-orders"});const P={enabled:"success",disabled:"error"},T=[{key:"enabled",value:c("common.enabled")},{key:"disabled",value:c("common.disabled")}],U=[{key:"inclusive",value:c("product.inclusive")},{key:"exclusive",value:c("product.exclusive")}],M=x=>x&&x>at().endOf("day"),W=x=>x==null?lt().tz(g.value.timezone):lt(x).tz(g.value.timezone),V=x=>x==null?lt().tz(g.value.timezone).format(`${g.value.date_format}`):lt(x).tz(g.value.timezone).format(`${g.value.date_format}`),K=x=>x==null?lt().tz(g.value.timezone).format(`${g.value.date_format} ${g.value.time_format}`):lt(x).tz(g.value.timezone).format(`${g.value.date_format} ${g.value.time_format}`),q=x=>x!=null?lt(x).tz(g.value.timezone).format(`${g.value.time_format}`):"",L=x=>parseInt(x),X=x=>parseFloat(parseFloat(x).toFixed(2)),J=x=>{const ye=parseFloat(Math.abs(x)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(g.value.currency.position=="front")var Ae=`${g.value.currency.symbol}${ye}`;else var Ae=`${ye}${g.value.currency.symbol}`;return x<0?`- ${Ae}`:Ae},le=(x,ye)=>{const Ae=parseFloat(Math.abs(x)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(ye.position=="front")var Fe=`${ye.symbol}${Ae}`;else var Fe=`${Ae}${ye.symbol}`;return x<0?`- ${Fe}`:Fe},H=x=>{var ye="";return x.payment_status!=null&&x.payment_status!="all"&&(x.payment_status=="pending"?ye+=`(payment_status eq "${x.payment_status}" or payment_status eq "partially_paid" or payment_status eq "unpaid")`:ye+=`payment_status eq "${x.payment_status}"`),x.order_status!=null&&x.order_status!="all"&&(n.value=="online-orders"?x.order_status=="cancelled"?ye+="cancelled eq 1":x.order_status=="pending"?ye+='((order_status eq "ordered" or order_status eq "confirmed" or order_status eq "processing" or order_status eq "shipping") and cancelled ne 1)':ye+=`(order_status eq "${x.order_status}" and cancelled ne 1)`:ye+=`order_status eq "${x.order_status}"`),ye},N=x=>{var ye="";return we(x,(Ae,Fe)=>{Ae!=null&&(ye+=`${Fe} eq "${Ae}" and `)}),ye.length>0&&(ye=ye.substring(0,ye.length-4)),ye},z=x=>Jn(x,k.value),Q=x=>{l.commit("auth/updatePageTitle",c(`menu.${x}`))},j=pe(()=>{const x=k&&k.value&&k.value.role?[k.value.role.name]:[];return k&&k.value&&k.value.role&&we(k.value.role.perms,ye=>{x.push(ye.name)}),x}),oe=pe(()=>{var x={};return n.value=="purchases"?x={type:"purchases",langKey:"purchase",menuKey:"purchases",userType:"suppliers",permission:"purchases"}:n.value=="sales"?x={type:"sales",langKey:"sales",menuKey:"sales",userType:"customers",permission:"sales"}:n.value=="purchase-returns"?x={type:"purchase-returns",langKey:"purchase_returns",menuKey:"purchase_returns",userType:"suppliers",permission:"purchase_returns"}:n.value=="sales-returns"?x={type:"sales-returns",langKey:"sales_returns",menuKey:"sales_returns",userType:"customers",permission:"sales_returns"}:n.value=="online-orders"?x={type:"online-orders",langKey:"online_orders",menuKey:"online_orders",userType:"customers",permission:"online_orders"}:n.value=="quotations"?x={type:"quotations",langKey:"quotation",menuKey:"quotation",userType:"customers",permission:"quotations"}:n.value=="stock-transfers"&&(x={type:"stock-transfers",langKey:"stock_transfer",menuKey:"stock_transfer",userType:"customers",permission:"stock_transfers"}),x}),R=x=>{const ye=x.replace("-","_");return c(`menu.${ye}`)},ae=[{key:"pending",value:c("common.unpaid")},{key:"paid",value:c("common.paid")}],ue=[{key:"pending",value:c("common.pending")},{key:"paid",value:c("common.paid")},{key:"cancelled",value:c("common.cancelled")}],re={received:"green",pending:"orange",ordered:"blue",completed:"green",pending:"orange",delivered:"green",shipping:"purple",processing:"pink",confirmed:"cyan",ordered:"blue",received:"green",pending:"orange"},be=[{key:"received",value:c("common.received")},{key:"pending",value:c("common.pending")},{key:"ordered",value:c("common.ordered")}],ie=[{key:"completed",value:c("common.completed")},{key:"pending",value:c("common.pending")}],_e=[{key:"confirmed",value:c("common.confirmed")},{key:"processing",value:c("common.processing")},{key:"shipping",value:c("common.shipping")}],Ue=[{key:"ordered",value:c("common.ordered")},..._e,{key:"delivered",value:c("common.delivered")}],Je=[{key:"received",value:c("common.received")},{key:"pending",value:c("common.pending")}];return{menuCollapsed:d,appSetting:g,appType:u,addMenus:b,selectedLang:v,user:k,selectedWarehouse:$,allWarehouses:D,checkPermission:z,permsArray:j,statusColors:P,orderStatusColors:re,userStatus:T,taxTypes:U,barcodeSymbology:[{key:"CODE128",value:"CODE128"},{key:"CODE39",value:"CODE39"}],frontAppSetting:I,disabledDate:M,formatQuantity:L,formatAmount:X,formatAmountCurrency:J,formatAmountUsingCurrencyObject:le,convertToPositive:x=>x<0?x*-1:x,calculateOrderFilterString:H,calculateFilterString:N,updatePageTitle:Q,orderType:n,orderPageObject:oe,orderStatus:ae,paymentStatus:ue,purchaseOrderStatus:be,onlineOrderChangeStatus:_e,salesOrderStatus:Ue,purchaseReturnStatus:ie,salesReturnStatus:Je,getRecursiveCategories:(x,ye=null)=>{const Ae=[],Fe=[];return x.data.map(Ne=>{(ye==null||ye!=null&&Ne.x_parent_id!=ye)&&Fe.push({xid:Ne.xid,x_parent_id:Ne.x_parent_id,title:Ne.name,value:Ne.xid})}),Fe.forEach(Ne=>{if(!Ne.x_parent_id)return Ae.push(Ne);const Le=Fe.findIndex(Rt=>Rt.xid===Ne.x_parent_id);if(!Fe[Le].children)return Fe[Le].children=[Ne];Fe[Le].children.push(Ne)}),Ae},filterTreeNode:(x,ye)=>ye.props.title.toLowerCase().includes(x.toLowerCase()),getOrderTypeFromstring:R,invoiceBaseUrl:h,downloadLangCsvUrl:y,appModules:p,dayjs:lt,formatDate:V,formatDateTime:K,formatTime:q,dayjsObject:W,slugify:x=>{var ye=Math.random().toString(36).slice(5),Ae=x.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");return Ae+"-"+ye},cssSettings:m,frontWarehouse:F,globalSetting:f,willSubscriptionModuleVisible:x=>u=="non-saas"?!0:g.value.subscription_plan&&g.value.subscription_plan.modules?et(g.value.subscription_plan.modules,x):!1,visibleSubscriptionModules:_}},ve=()=>{const e=E(!1),l=E({}),{t:c}=te(),{appSetting:n}=Y();return{loading:e,rules:l,addEditRequestAdmin:u=>{e.value=!0;const{url:d,data:m,success:p}=u;var _={};we(m,function(f,g){f==null?_[g]=null:_[g]=f}),axiosAdmin.post(d,_).then(f=>{u.successMessage&&Ee.success({placement:n.value.rtl?"bottomLeft":"bottomRight",message:c("common.success"),description:u.successMessage}),p(f.data),e.value=!1,l.value={}}).catch(f=>{var g=f.data;const b=f.status;var v={};if(b==422){if(g.error&&typeof g.error.details<"u")for(var k=Object.keys(g.error.details),$=0;$<k.length;$++){var D=k[$].replace(".","\\.");v[D]={required:!0,message:g.error.details[k[$]][0]}}l.value=v,Oe.error(c("common.fix_errors"))}g&&g.message&&(Oe.error(g.message),g={error:{...g}}),u.error&&u.error(g),e.value=!1})},addEditFileRequestAdmin:u=>{e.value=!0;const{url:d,data:m,success:p}=u,_=new FormData;we(m,function(f,g){f==null?_.append(g,null):_.append(g,f.originFileObj)}),axiosAdmin.post(d,_,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{u.successMessage&&Ee.success({placement:n.value.rtl?"bottomLeft":"bottomRight",message:c("common.success"),description:u.successMessage}),p(f.data),e.value=!1,l.value={}}).catch(f=>{var g=f.data;const b=f.status;var v={};if(b==422){if(g.error&&typeof g.error.details<"u")for(var k=Object.keys(g.error.details),$=0;$<k.length;$++){var D=k[$].replace(".","\\.");v[D]={required:!0,message:g.error.details[k[$]][0]}}l.value=v,Oe.error(c("common.fix_errors"))}g&&g.message&&(Oe.error(g.message),g={error:{...g}}),u.error&&u.error(g),e.value=!1})}}},us=Z({props:["credentials"],components:{SnippetsOutlined:al},setup(){const e=window.config.app_env,l=window.config.app_type,c=E([{title:"Details",dataIndex:"details"},{title:"action",dataIndex:"action"}]),n=E([{name:"Admin",email:"admin@example.com",password:12345678},{name:"StockManager",email:"stockmanager@example.com",password:12345678},{name:"Salesman",email:"salesman@example.com",password:12345678}]);return ee(()=>{l=="saas"&&(n.value=[{name:"SuperAdmin",email:"superadmin@example.com",password:12345678},...n.value])}),{appEnv:e,demoCredentials:n,demoCredentialsColumns:c}}}),ms={key:0},cs=w("br",null,null,-1),ps=w("br",null,null,-1);function _s(e,l,c,n,h,y){const u=o("a-divider"),d=o("SnippetsOutlined"),m=o("a-tooltip"),p=o("a-table");return e.appEnv!="envato"?(r(),S("div",ms,[t(u,null,{default:a(()=>[i(s(e.$t("common.demo_account_credentials")),1)]),_:1}),t(p,{pagination:!1,dataSource:e.demoCredentials,columns:e.demoCredentialsColumns},{bodyCell:a(({column:_,record:f})=>[_.dataIndex==="details"?(r(),S(O,{key:0},[w("b",null,s(f.name),1),i(),cs,i(" Email : "+s(f.email)+" ",1),ps,i(" Password : "+s(f.password),1)],64)):A("",!0),_.dataIndex==="action"?(r(),C(m,{key:1,onClick:()=>{e.credentials.email=f.email,e.credentials.password=f.password}},{title:a(()=>[i(s(e.$t("popover.click_here_to_copy_credentials",[f.name])),1)]),default:a(()=>[t(d)]),_:2},1032,["onClick"])):A("",!0)]),_:1},8,["dataSource","columns"])])):A("",!0)}const fs=B(us,[["render",_s]]);const gs=Z({components:{DemoCredentials:fs},setup(){const{addEditRequestAdmin:e,loading:l,rules:c}=ve(),{globalSetting:n,appType:h}=Y(),y=n.value.login_image_url,u=Ce(),d=qe(),m=Se({email:null,password:null}),p=E({error:"",success:""});return{loading:l,rules:c,credentials:m,onSubmit:()=>{p.value={error:"",success:!1},e({url:"auth/login",data:m,success:f=>{const g=f.user;u.commit("auth/updateUser",g),u.commit("auth/updateToken",f.token),u.commit("auth/updateExpires",f.expires_in),u.commit("auth/updateVisibleSubscriptionModules",f.visible_subscription_modules),h=="non-saas"?(u.dispatch("auth/updateAllWarehouses"),u.commit("auth/updateWarehouse",f.user.warehouse),d.push({name:"admin.dashboard.index",params:{success:!0}})):g.is_superadmin&&g.user_type=="super_admins"?(u.commit("auth/updateApp",f.app),u.commit("auth/updateEmailVerifiedSetting",f.email_setting_verified),d.push({name:"superadmin.dashboard.index",params:{success:!0}})):(u.commit("auth/updateApp",f.app),u.commit("auth/updateEmailVerifiedSetting",f.email_setting_verified),u.commit("auth/updateAddMenus",f.shortcut_menus.credentials),u.dispatch("auth/updateAllWarehouses"),u.commit("auth/updateWarehouse",f.user.warehouse),d.push({name:"admin.dashboard.index",params:{success:!0}}))},error:f=>{p.value={error:f.error.message?f.error.message:"",success:!1}}})},onRequestSend:p,globalSetting:n,loginBackground:y,innerWidth:window.innerWidth}}}),ys={class:"login-main-container"},hs={class:"login-logo mb-30"},bs=["src"],vs={class:"right-login-div"},ks=["src"];function ws(e,l,c,n,h,y){const u=o("a-alert"),d=o("a-input"),m=o("a-form-item"),p=o("a-input-password"),_=o("a-button"),f=o("a-form"),g=o("DemoCredentials"),b=o("a-card"),v=o("a-col"),k=o("a-row");return r(),S("div",ys,[t(k,{class:"main-container-div"},{default:a(()=>[t(v,{xs:24,sm:24,md:24,lg:8},{default:a(()=>[t(k,{class:"login-left-div"},{default:a(()=>[t(v,{xs:{span:20,offset:2},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:16,offset:4}},{default:a(()=>[t(b,{title:null,class:"login-div",bordered:e.innerWidth<=768},{default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[w("div",hs,[w("img",{class:"login-img-logo",src:e.globalSetting.light_logo_url},null,8,bs)]),e.onRequestSend.error!=""?(r(),C(u,{key:0,message:e.onRequestSend.error,type:"error","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):A("",!0),e.onRequestSend.success?(r(),C(u,{key:1,message:e.$t("messages.login_success"),type:"success","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):A("",!0),t(m,{label:e.$t("user.email_phone"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:a(()=>[t(d,{value:e.credentials.email,"onUpdate:value":l[0]||(l[0]=$=>e.credentials.email=$),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email_phone")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(m,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null},{default:a(()=>[t(p,{value:e.credentials.password,"onUpdate:value":l[1]||(l[1]=$=>e.credentials.password=$),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(m,{class:"mt-30"},{default:a(()=>[t(_,{loading:e.loading,onClick:e.onSubmit,class:"login-btn",block:"",type:"primary"},{default:a(()=>[i(s(e.$t("menu.login")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1}),t(g,{credentials:e.credentials},null,8,["credentials"])]),_:1},8,["bordered"])]),_:1})]),_:1})]),_:1}),t(v,{xs:0,sm:0,md:24,lg:16},{default:a(()=>[w("div",vs,[w("img",{class:"right-image",src:e.loginBackground},null,8,ks)])]),_:1})]),_:1})])}const Cs=B(gs,[["render",ws]]),Aa=()=>{const e=E([]),l=E({}),c=E(""),n=E(""),h=E(""),y=E(!1),{t:u}=te(),d=E(window.config.product_name),m=E(window.config.product_version),p=Ce(),_=E([]),f=E([]),g=E(!1),b=E(!1),v=E(""),k=E(0);var $;const D=()=>{g.value=!0;const T=window.config.product_name,U=axiosAdmin.get(Re("modules")),M=bt.post("https://envato.codeifly.com/product",{verified_name:T,domain:"demo.stockifly.in"});var W=[];Promise.all([U,M]).then(([V,K])=>{const q=K.data.product,L=window.config.installed_modules,X=window.config.modules;_.value=K.data.offers,f.value=K.data.settings,we(q.modules,J=>{const le=Qe(L,["verified_name",J.verified_name]);if(W.push({...J,current_version:le?le.current_version:"-",status:et(X,J.verified_name),installed:le!=null}),!J.verified||J.other_domain_verified){var H=[...window.config.modules],N=Tn(H,function(z){return z!=J.verified_name});p.commit("auth/updateActiveModules",N),window.config.modules=N}}),e.value=W,g.value=!1})},I=T=>{const{success:U}=T;y.value=!0,l.value={},n.value="",bt.post("https://envato.codeifly.com/verify",{verified_name:d.value,purchase_code:c.value,domain:"demo.stockifly.in",app_url:"https://demo.stockifly.in/",version:m.value}).then(M=>{y.value=!1,M.data.status=="success"?(y.value=!1,Ee.success({message:u("common.success")}),h.value=u("messages.verify_success"),U(M.data)):(Ee.error({message:u("common.error")}),n.value=M.data.message)}).catch(M=>{y.value=!1;const W=M.response.data,V=M.response.status;var K={};if(V==422){if(W.errors&&typeof W.errors<"u")for(var q=Object.keys(W.errors),L=0;L<q.length;L++){var X=q[L].replace(".","\\.");K[X]={required:!0,message:W.errors[q[L]][0]}}l.value=K,Oe.error(u("common.fix_errors"))}else n.value=W.message?W.message:u("messages.somehing_went_wrong")})},F=T=>{b.value=!0,k.value=0,v.value="";const U={verified_name:T,domain:window.location.host};$=window.setInterval(function(){P()},1500),axiosAdmin.post(Re("modules/install"),U).then(M=>{b.value=!1,k.value=100,v.value="started",axiosAdmin.post(Re("modules/extract"),U).then(W=>{v.value="completed",bt.post("https://envato.codeifly.com/version-update",{verified_name:W.data.verified_name,version:W.data.version,domain:"demo.stockifly.in"}),p.commit("auth/updateActiveModules",W.data.enabled_modules),window.config.modules=W.data.enabled_modules,window.config.installed_modules=W.data.installed_modules}).catch(W=>{v.value="failed"})}).catch(M=>{b.value=!1,k.value=0,clearInterval($)})},P=()=>{axiosAdmin(Re("modules/download-percentage")).then(T=>{k.value=parseInt(T.data.percentage),k.value>=100&&clearInterval($)})};return{allModules:e,getModuleData:D,install:F,dataLoading:g,verifyPurchase:I,rules:l,purchaseCode:c,errorMessage:n,successMessage:h,loading:y,productName:d,version:m,offers:_,settings:f,downloading:b,downloadPercentage:k,extracting:v}};const Ss=Z({setup(){const e=window.config.verify_purchase_background,l=qe(),{rules:c,purchaseCode:n,errorMessage:h,successMessage:y,loading:u,verifyPurchase:d}=Aa();return{rules:c,purchaseCode:n,loading:u,verify:()=>d({success:p=>{l.push({name:"admin.login"})}}),errorMessage:h,successMessage:y,verifyPurchaseBackground:e}}}),$s={class:"container-content"},Ds={class:"text-center"},As=["innerHTML"],Ts=["innerHTML"];function Es(e,l,c,n,h,y){const u=o("a-typography-title"),d=o("a-divider"),m=o("a-alert"),p=o("a-input"),_=o("a-form-item"),f=o("a-button"),g=o("a-form"),b=o("a-col"),v=o("a-row");return r(),S("div",{class:"main-container",style:Ve({backgroundImage:`url(${e.verifyPurchaseBackground})`})},[w("div",$s,[t(v,{type:"flex",justify:"center"},{default:a(()=>[t(b,{span:8},{default:a(()=>[w("div",Ds,[t(u,{level:4},{default:a(()=>[i(s(e.$t("common.verify_purchase")),1)]),_:1})]),t(d),e.successMessage!=""?(r(),C(m,{key:0,type:"success","show-icon":"",banner:""},{message:a(()=>[w("span",{innerHTML:e.successMessage},null,8,As)]),_:1})):A("",!0),e.errorMessage!=""?(r(),C(m,{key:1,type:"error","show-icon":"",banner:""},{message:a(()=>[w("span",{innerHTML:e.errorMessage},null,8,Ts)]),_:1})):A("",!0),t(g,{layout:"vertical",class:"mt-20"},{default:a(()=>[t(_,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:a(()=>[t(p,{value:e.purchaseCode,"onUpdate:value":l[0]||(l[0]=k=>e.purchaseCode=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(_,null,{default:a(()=>[t(f,{type:"primary",onClick:e.verify,loading:e.loading},{default:a(()=>[i(s(e.$t("common.verify_purchase")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})])],4)}const Os=B(Ss,[["render",Es]]),Is=[{path:"/admin/login",component:Cs,name:"admin.login",meta:{requireUnauth:!0,menuKey:e=>"login"}},{path:"/admin/verify",component:Os,name:"verify.main",meta:{requireUnauth:!0,menuKey:e=>"verify_product"}}];Jt.register(...Qt);const Ps={props:["data"],components:{DoughnutChart:Xt.DoughnutChart},setup(e){const l=E(),c=E({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Doughnut Chart"}}}),n=E({});return me(e,(h,y)=>{n.value={labels:h.data.topSellingProducts?h.data.topSellingProducts.labels:[],datasets:[{data:h.data.topSellingProducts?h.data.topSellingProducts.values:[],backgroundColor:h.data.topSellingProducts?h.data.topSellingProducts.colors:[]}]}}),{chartRef:l,testData:n,options:c}}};function Us(e,l,c,n,h,y){const u=o("DoughnutChart");return r(),C(u,{ref:"chartRef",chartData:n.testData,options:n.options},null,8,["chartData","options"])}const Fs=B(Ps,[["render",Us]]);Jt.register(...Qt);const qs={props:["data"],components:{BarChart:Xt.BarChart},setup(e){const l=E(),{t:c}=te(),n=E({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Doughnut Chart"}}}),h=E({});return me(e,(y,u)=>{h.value={labels:y.data.purchaseSales.dates?y.data.purchaseSales.dates:[],datasets:[{label:c("menu.purchases"),data:y.data.purchaseSales.purchases?y.data.purchaseSales.purchases:[],backgroundColor:"#20C997"},{label:c("menu.sales"),data:y.data.purchaseSales.sales?y.data.purchaseSales.sales:[],backgroundColor:"#FFCD56"}]}}),{chartRef:l,testData:h,options:n}}};function Ms(e,l,c,n,h,y){const u=o("BarChart");return r(),C(u,{ref:"chartRef",chartData:n.testData,options:n.options},null,8,["chartData","options"])}const Rs=B(qs,[["render",Ms]]);Jt.register(...Qt);const Ks={props:["data"],components:{LineChart:Xt.LineChart},setup(e){const l=E(),{t:c}=te(),n=E({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}}}),h=E({});return me(e,(y,u)=>{h.value={labels:y.data.paymentChartData?y.data.paymentChartData.dates:[],datasets:[{label:c("dashboard.payment_sent"),data:y.data.paymentChartData.sent?y.data.paymentChartData.sent:[],borderColor:"#20C997",backgroundColor:"#20C997"},{label:c("dashboard.payment_received"),data:y.data.paymentChartData.received?y.data.paymentChartData.received:[],borderColor:"#FFCD56",backgroundColor:"#FFCD56"}]}}),{chartRef:l,testData:h,options:n}}};function Vs(e,l,c,n,h,y){const u=o("LineChart");return r(),C(u,{ref:"chartRef",chartData:n.testData,options:n.options},null,8,["chartData","options"])}const zs=B(Ks,[["render",Vs]]),Ls={props:{bgColor:{default:"#5F63F2"}}},Bs={class:"custom-card-widget"};function Ws(e,l,c,n,h,y){const u=o("a-space"),d=o("a-card");return r(),C(d,{bordered:!1},{default:a(()=>[w("figure",Bs,[t(u,null,{default:a(()=>[w("div",{class:"custom-card-widget-icon",style:Ve({background:c.bgColor})},[de(e.$slots,"image")],4),w("figcaption",null,[de(e.$slots,"description")])]),_:3})])]),_:3})}const Qn=B(Ls,[["render",Ws]]);Jt.register(...Qt);const js={props:["data","title"],components:{DoughnutChart:Xt.DoughnutChart},setup(e){const l=E(),c=E({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:e.title!="",text:e.title}}}),n=E({labels:e.data.labels,datasets:[{data:e.data.values,backgroundColor:e.data.colors}]});return me(e,(h,y)=>{n.value={labels:h.data.labels,datasets:[{data:h.data.values,backgroundColor:h.data.colors}]}}),{chartRef:l,testData:n,options:c}}};function Hs(e,l,c,n,h,y){const u=o("DoughnutChart");return r(),C(u,{ref:"chartRef",chartData:n.testData,options:n.options},null,8,["chartData","options"])}const Ns=B(js,[["render",Hs]]),Ys=Z({props:["itemDetails","visible"],components:{Doughnut:Ns},setup(e,{emit:l}){const{formatAmountCurrency:c,getOrderTypeFromstring:n,formatDate:h,formatDateTime:y}=Y();te();const u=E("product_orders"),d=E({}),m=pe(()=>e.itemDetails.warehouse_stocks.filter(f=>f.stock_quantity<e.itemDetails.stock_quantitiy_alert));return me(e,(_,f)=>{if(u.value="product_orders",_.itemDetails.warehouse_stocks){var g=[],b=[],v=["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"];we(_.itemDetails.warehouse_stocks,(k,$)=>{g.push(k.warehouse.name),b.push(k.stock_quantity)}),d.value={labels:g,values:b,colors:v}}else d.value={labels:[],values:[],colors:[]}}),{onClose:()=>{l("closed")},formatDate:h,formatDateTime:y,formatAmountCurrency:c,warehouseStockColumns,stockHistoryColumns,productOrderColumns,warehouseStockChartData:d,activeKey:u,getOrderTypeFromstring:n,drawerWidth:window.innerWidth<=991?"90%":"60%",outOfStockWarehouses:m}}}),Gs=w("hr",{style:{height:"1px",border:"none",color:"#f0f0f0","background-color":"#f0f0f0"},class:"mt-10 mb-10"},null,-1);function Js(e,l,c,n,h,y){const u=o("a-image"),d=o("a-col"),m=o("a-row"),p=o("a-statistic"),_=o("a-typography-title"),f=o("Doughnut"),g=o("a-table"),b=o("a-tab-pane"),v=o("a-tabs"),k=o("a-drawer");return r(),C(k,{title:e.itemDetails.name,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose},{default:a(()=>[t(m,null,{default:a(()=>[e.itemDetails.product_type=="single"?(r(),C(d,{key:0,xs:24,sm:24,md:8,lg:6},{default:a(()=>[t(u,{width:150,src:e.itemDetails.image_url},null,8,["src"])]),_:1})):A("",!0),t(d,{xs:24,sm:24,md:8,lg:18},{default:a(()=>[e.itemDetails.description?(r(),C(m,{key:0,class:"mb-10 mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[i(s(e.itemDetails.description),1)]),_:1})]),_:1})):A("",!0),t(m,{class:"mb-10 mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(p,{title:e.$t("product.mrp"),value:e.formatAmountCurrency(e.itemDetails.mrp),style:{"margin-right":"50px"}},null,8,["title","value"])]),_:1}),t(d,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(p,{title:e.$t("product.purchase_price"),value:e.formatAmountCurrency(e.itemDetails.purchase_price),style:{"margin-right":"50px"}},null,8,["title","value"])]),_:1}),t(d,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(p,{title:e.$t("product.sales_price"),value:e.formatAmountCurrency(e.itemDetails.sales_price)},null,8,["title","value"])]),_:1})]),_:1}),Gs,t(m,null,{default:a(()=>[t(d,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(_,{level:5},{default:a(()=>[i(s(e.$t("product.stocks")),1)]),_:1}),t(f,{data:e.warehouseStockChartData,style:{height:"200px"}},null,8,["data"])]),_:1}),t(d,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(g,{columns:e.warehouseStockColumns,"row-key":$=>$.id,"data-source":e.itemDetails.warehouse_stocks,pagination:!1,class:"mt-30"},{bodyCell:a(({column:$,record:D})=>{var I;return[$.dataIndex==="warehouse_id"?(r(),S(O,{key:0},[i(s(D.warehouse.name),1)],64)):A("",!0),$.dataIndex==="stock_quantity"?(r(),S(O,{key:1},[i(s(D.stock_quantity)+" "+s((I=e.itemDetails.unit)==null?void 0:I.short_name),1)],64)):A("",!0)]}),_:1},8,["columns","row-key","data-source"])]),_:1})]),_:1})]),_:1})]),_:1}),t(m,{class:"mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{activeKey:e.activeKey,"onUpdate:activeKey":l[0]||(l[0]=$=>e.activeKey=$)},{default:a(()=>[t(b,{key:"product_orders",tab:e.$t("product.product_orders")},{default:a(()=>[t(g,{columns:e.productOrderColumns,"row-key":$=>$.id,"data-source":e.itemDetails.items,pagination:!1},{bodyCell:a(({column:$,record:D})=>[$.dataIndex==="order_type"?(r(),S(O,{key:0},[i(s(e.getOrderTypeFromstring(D.order.order_type)),1)],64)):A("",!0),$.dataIndex==="order_date"?(r(),S(O,{key:1},[i(s(e.formatDateTime(D.order.order_date)),1)],64)):A("",!0),$.dataIndex==="single_unit_price"?(r(),S(O,{key:2},[i(s(e.formatAmountCurrency(D.single_unit_price)),1)],64)):A("",!0),$.dataIndex==="total_discount"?(r(),S(O,{key:3},[i(s(e.formatAmountCurrency(D.total_discount))+" ("+s(D.discount_rate)+"%) ",1)],64)):A("",!0),$.dataIndex==="total_tax"?(r(),S(O,{key:4},[i(s(e.formatAmountCurrency(D.total_tax))+" ("+s(D.tax_rate)+"%) ",1)],64)):A("",!0),$.dataIndex==="subtotal"?(r(),S(O,{key:5},[i(s(e.formatAmountCurrency(D.subtotal)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:1},8,["tab"]),t(b,{key:"stock_history",tab:e.$t("product.stock_history")},{default:a(()=>[t(g,{columns:e.stockHistoryColumns,"row-key":$=>$.id,"data-source":e.itemDetails.stock_history,pagination:!1},{bodyCell:a(({column:$,record:D})=>[$.dataIndex==="created_at"?(r(),S(O,{key:0},[i(s(e.formatDateTime(D.created_at)),1)],64)):A("",!0),$.dataIndex==="order_type"?(r(),S(O,{key:1},[i(s(e.getOrderTypeFromstring(D.order_type)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:1},8,["tab"])]),_:1},8,["activeKey"])]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Qs=B(Ys,[["render",Js]]),Xs={props:["data"],components:{CloudDownloadOutlined:En,CloudUploadOutlined:nl,Details:Qs},setup(e){const{formatDateTime:l}=Y(),c=E(!1),n=E({});return{formatDateTime:l,viewData:n,detailsVisible:c,viewItem:y=>{n.value=y,c.value=!0}}}};function Zs(e,l,c,n,h,y){const u=o("Details"),d=o("CloudDownloadOutlined"),m=o("CloudUploadOutlined"),p=o("a-typography-link"),_=o("a-timeline-item"),f=o("a-timeline");return r(),S(O,null,[t(u,{visible:n.detailsVisible,onClosed:l[0]||(l[0]=g=>n.detailsVisible=!1),itemDetails:n.viewData},null,8,["visible","itemDetails"]),t(f,null,{default:a(()=>[(r(!0),S(O,null,G(c.data,g=>(r(),C(_,{key:g.id},{dot:a(()=>[g.stock_type=="out"?(r(),C(d,{key:0,style:{"font-size":"20px"}})):(r(),C(m,{key:1,style:{"font-size":"20px"}}))]),default:a(()=>[w("span",null,[t(p,{onClick:b=>n.viewItem(g.product)},{default:a(()=>[i(s(g.product.name),1)]),_:2},1032,["onClick"]),i(" with "),w("strong",null,s(g.quantity)+" "+s(g.product.unit.short_name),1),i(" "+s(g.order_type)+" on "+s(n.formatDateTime(g.created_at)),1)])]),_:2},1024))),128))]),_:1})],64)}const xs=B(Xs,[["render",Zs]]),ea=()=>{const{dayjs:e}=Y();Ce();const{t:l}=te(),c=Ye(),n=E(c.meta.orderType),h=E([]),y=["user_id","warehouse_id"];ee(()=>{c.meta&&c.meta.orderType?n.value=c.meta.orderType:n.value="online-orders"});const u={order_date:e().utc().format("YYYY-MM-DDTHH:mm:ssZ"),user_id:void 0,notes:"",order_status:void 0,tax_id:void 0,warehouse_id:void 0,discount:0,shipping:0,subtotal:0},d={date:void 0,payment_mode_id:void 0,amount:"",notes:""},m=[{title:"#",dataIndex:"sn"},{title:l("product.name"),dataIndex:"name"},{title:l("product.quantity"),dataIndex:"unit_quantity"},{title:l("product.unit_price"),dataIndex:"single_unit_price"},{title:l("product.discount"),dataIndex:"total_discount"},{title:l("product.tax"),dataIndex:"total_tax"},{title:l("product.subtotal"),dataIndex:"subtotal"},{title:l("common.action"),dataIndex:"action"}],p=[{title:l("product.product"),dataIndex:"product_id"},{title:l("product.quantity"),dataIndex:"quantity"},{title:l("product.unit_price"),dataIndex:"single_unit_price"},{title:l("product.discount"),dataIndex:"total_discount"},{title:l("product.tax"),dataIndex:"total_tax"},{title:l("product.subtotal"),dataIndex:"subtotal"}],_=[{key:"invoice_number",value:l("stock.invoice_number")}],f=pe(()=>{var v={};return n.value=="purchases"?v={type:"purchases",langKey:"purchase",menuKey:"purchases",userType:"suppliers",permission:"purchases"}:n.value=="sales"?v={type:"sales",langKey:"sales",menuKey:"sales",userType:"customers",permission:"sales"}:n.value=="purchase-returns"?v={type:"purchase-returns",langKey:"purchase_returns",menuKey:"purchase_returns",userType:"suppliers",permission:"purchase_returns"}:n.value=="sales-returns"?v={type:"sales-returns",langKey:"sales_returns",menuKey:"sales_returns",userType:"customers",permission:"sales_returns"}:n.value=="online-orders"?v={type:"online-orders",langKey:"online_orders",menuKey:"online_orders",userType:"customers",permission:"online_orders"}:n.value=="quotations"?v={type:"quotations",langKey:"quotation",menuKey:"sales",userType:"customers",permission:"quotations"}:n.value=="stock-transfers"&&(v={type:"stock-transfers",langKey:"stock_transfer",menuKey:"stock_transfer",userType:"customers",permission:"stock_transfers"}),v}),g=()=>{var v=[{title:l("stock.invoice_number"),dataIndex:"invoice_number"}];f.value.type=="stock-transfers"&&v.push({title:l("stock_transfer.warehouse"),dataIndex:"warehouse"}),v.push({title:l(`${f.value.langKey}.${f.value.langKey}_date`),dataIndex:"order_date"}),f.value.type!="stock-transfers"&&v.push({title:l(`${f.value.langKey}.user`),dataIndex:"user_id"}),h.value=[...v,{title:l(`${f.value.langKey}.${f.value.langKey}_status`),dataIndex:"order_status"},{title:l("payments.paid_amount"),dataIndex:"paid_amount"},{title:l("payments.total_amount"),dataIndex:"total_amount"},{title:l("payments.payment_status"),dataIndex:"payment_status"},{title:l("common.action"),dataIndex:"action"}]},b=[{title:l("payments.date"),dataIndex:"date"},{title:l("payments.amount"),dataIndex:"amount"},{title:l("payments.payment_mode"),dataIndex:"payment_mode_id"}];return{initData:u,initPaymentData:d,columns:h,hashableColumns:y,setupTableColumns:g,filterableColumns:_,pageObject:f,orderType:n,orderItemColumns:m,orderPaymentsColumns:b,orderItemDetailsColumns:p}},je=()=>{const e=Ce(),l=Se({data:[],pagination:{pageSize:10,showSizeChanger:!0},loading:!1,sorter:{},searchColumn:void 0,searchString:"",searchStatus:void 0,filterLoading:!1,filterableColumns:[],selectedRowKeys:[],tableColumns:[]}),c=E(1),n=E({}),h=E([]),y=E(""),u=E({allowExport:!1,exportType:""}),d=b=>{const v=b.limit,k=(b.page-1)*v,$=m(v,k);return y.value=$,axiosAdmin.get($)},m=(b,v)=>{var k=n.value.url,$="",D="",I=!1,F=!1;if("filterString"in n.value&&n.value.filterString!=""&&typeof n.value.filterString=="string"&&($+=`${n.value.filterString} and `,I=!0),typeof n.value.filters=="object"&&La(n.value.filters,(T,U)=>{T!=null&&T!=""&&($+=`${U} eq "${T}" and `,I=!0,et(h.value,U)&&(D+=`${T},`,F=!0))}),l.searchColumn!=null&&l.searchString!="")$+=`${l.searchColumn} lk "%${l.searchString}%" and `,I=!0,l.filterLoading=!0;else if(l.searchString!=""&&l.filterableColumns.length>0){var P="";we(l.filterableColumns,T=>{P+=`${T.key} lk "%${l.searchString}%" or `}),P.length>0&&($+=`(${P.substring(0,P.length-3)})`,I=!1),l.filterLoading=!0}if($.length>0&&I==!0?k+=`&filters=${encodeURIComponent($.substring(0,$.length-5))}`:$.length>0&&I==!1&&(k+=`&filters=${encodeURIComponent($)}`),n.value.extraFilters&&typeof n.value.extraFilters=="object"&&La(n.value.extraFilters,(T,U)=>{T!=null&&T!=""&&(k+=`&${U}=${T}`,et(h.value,U)&&(D+=`${T},`,F=!0))}),l.sorter&&l.sorter.field){const T=l.sorter.order=="ascend"||l.sorter.order=="asc"?"asc":"desc";k+=`&order=${l.sorter.field} ${T}`}else k+="&order=id desc";return k+=`&offset=${v}&limit=${b}`,F&&(D=D.substring(0,D.length-1),k+=`&hashable=${D}`),k},p=(b,v,k)=>{const $={...l.pagination};$.current=b.current,$.pageSize=b.pageSize,l.pagination=$,c.value=b.current,k=l.sorter,_({limit:b.pageSize,page:b.current,sortField:k.field,sortOrder:k.order,...v})},_=(b={})=>{l.loading=!0,d({limit:l.pagination.pageSize,page:c.value,...b}).then(v=>{const k=v.data,$={...l.pagination};if($.total=v.meta.paging.total,l.loading=!1,l.data=k,l.pagination=$,l.filterLoading=!1,l.selectedRowKeys=[],u.value.allowExport){var D=u.value.exportType;if(D!=""){var I=e.state.auth.allExportData,F=Xe(I,P=>P.export_type!=D);e.commit("auth/updatAllExportData",[...F,{export_type:D,data:k,url:y.value}])}}b.success!=null&&b.success(k)})},f=gt(()=>{_({page:1})},400);return{table:l,tableUrl:n,exportDetails:u,currentPage:c,hashable:h,handleTableChange:p,fetch:_,onTableSearch:f,onRowSelectChange:b=>{l.selectedRowKeys=b}}},er={props:["paymentStatus"]};function tr(e,l,c,n,h,y){const u=o("a-tag");return r(),S("span",null,[c.paymentStatus=="paid"?(r(),C(u,{key:0,color:"success"},{default:a(()=>[i(s(e.$t(`payments.${c.paymentStatus}`)),1)]),_:1})):c.paymentStatus=="partially_paid"?(r(),C(u,{key:1,color:"warning"},{default:a(()=>[i(s(e.$t(`payments.${c.paymentStatus}`)),1)]),_:1})):(r(),C(u,{key:2,color:"error"},{default:a(()=>[i(s(e.$t(`payments.${c.paymentStatus}`)),1)]),_:1}))])}const it=B(er,[["render",tr]]),ar={props:["data"],setup(){const{orderStatusColors:e}=Y();return{orderStatusColors:e}}};function nr(e,l,c,n,h,y){const u=o("a-tag");return c.data.cancelled?(r(),C(u,{key:0,color:"#f50"},{default:a(()=>[i(s(e.$t("common.cancelled")),1)]),_:1})):(r(),C(u,{key:1,color:n.orderStatusColors[c.data.order_status]},{default:a(()=>[i(s(e.$t(`common.${c.data.order_status}`)),1)]),_:1},8,["color"]))}const ta=B(ar,[["render",nr]]),or={props:["user","size"]},lr={key:0},sr={key:1};function rr(e,l,c,n,h,y){const u=o("a-avatar"),d=o("a-badge");return c.user?(r(),S("div",lr,[t(d,null,{default:a(()=>[t(u,{size:30,src:c.user.profile_image_url},null,8,["src"]),i(" "+s(c.user.name),1)]),_:1})])):(r(),S("div",sr,[w("span",null,s(e.$t("user.walk_in_customer")),1)]))}const He=B(or,[["render",rr]]),Ta=()=>{const e="payment-modes?fields=id,xid,name,mode_type",l="payment-modes",{t:c}=te(),n={name:"",mode_type:"bank"},h=[{title:c("payment_mode.name"),dataIndex:"name"},{title:c("payment_mode.mode_type"),dataIndex:"mode_type"},{title:c("common.action"),dataIndex:"action"}],y=[{key:"name",value:c("payment_mode.name")}];return{url:e,addEditUrl:l,initData:n,columns:h,filterableColumns:y}},dr=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve();return{loading:n,rules:h,onClose:()=>{h.value={},l("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:d=>{l("addEditSuccess",d.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function ir(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-radio-button"),f=o("a-radio-group"),g=o("a-form"),b=o("SaveOutlined"),v=o("a-button"),k=o("a-modal");return r(),C(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(v,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(v,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(g,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payment_mode.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=$=>e.formData.name=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("payment_mode.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payment_mode.mode_type"),mode_type:"mode_type",help:e.rules.mode_type?e.rules.mode_type.message:null,validateStatus:e.rules.mode_type?"error":null},{default:a(()=>[t(f,{value:e.formData.mode_type,"onUpdate:value":l[1]||(l[1]=$=>e.formData.mode_type=$),size:"small","button-style":"solid"},{default:a(()=>[t(_,{value:"cash"},{default:a(()=>[i(s(e.$t("payment_mode.cash")),1)]),_:1}),t(_,{value:"bank"},{default:a(()=>[i(s(e.$t("payment_mode.bank")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Ea=B(dr,[["render",ir]]),ur=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:Ea},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=Ta(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),mr={key:0};function cr(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("payment_modes_view")||e.permsArray.includes("admin")?(r(),S("div",mr,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("payment_mode.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("payment_mode.add"),successMessage:e.$t("payment_mode.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Xn=B(ur,[["render",cr]]),pr=Z({props:["formData","data","visible","url","addEditType","editItemAmount","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,PaymentModeAddButton:Xn},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{disabledDate:y,appSetting:u,formatAmountCurrency:d}=Y(),m=E([]);ee(()=>{p()});const p=()=>{axiosAdmin.get("payment-modes?limit=10000").then(b=>{m.value=b.data})};return{paymentModes:m,appSetting:u,formatAmountCurrency:d,disabledDate:y,loading:n,rules:h,onClose:()=>{h.value={},l("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:b=>{l("addEditSuccess",b.xid)}})},paymentModeAdded:()=>{p()}}}}),_r={style:{display:"flex"}},fr={style:{color:"#7c8db5 !important"}},gr={key:0},yr={key:1};function hr(e,l,c,n,h,y){const u=o("a-date-picker"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-select-option"),f=o("a-select"),g=o("PaymentModeAddButton"),b=o("a-input"),v=o("a-textarea"),k=o("a-form"),$=o("SaveOutlined"),D=o("a-button"),I=o("a-modal");return r(),C(I,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(D,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t($)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(D,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(k,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payments.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.date,"onUpdate:value":l[0]||(l[0]=F=>e.formData.date=F),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD","disabled-date":e.disabledDate,style:{width:"100%"}},null,8,["value","format","disabled-date"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payments.payment_mode"),name:"payment_mode_id",help:e.rules.payment_mode_id?e.rules.payment_mode_id.message:null,validateStatus:e.rules.payment_mode_id?"error":null,class:"required"},{default:a(()=>[w("span",_r,[t(f,{value:e.formData.payment_mode_id,"onUpdate:value":l[1]||(l[1]=F=>e.formData.payment_mode_id=F),placeholder:e.$t("common.select_default_text",[e.$t("payments.payment_mode")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(e.paymentModes,F=>(r(),C(_,{key:F.xid,value:F.xid},{default:a(()=>[i(s(F.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(g,{onOnAddSuccess:e.paymentModeAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payments.amount"),name:"amount",help:e.rules.amount?e.rules.amount.message:null,validateStatus:e.rules.amount?"error":null,class:"required"},{default:a(()=>[t(b,{prefix:e.appSetting.currency.symbol,value:e.formData.amount,"onUpdate:value":l[2]||(l[2]=F=>e.formData.amount=F),placeholder:e.$t("common.placeholder_default_text",[e.$t("payments.amount")])},null,8,["prefix","value","placeholder"]),w("small",fr,[i(s(e.$t("common.max_amount"))+" ",1),e.addEditType=="edit"?(r(),S("span",gr,s(e.formatAmountCurrency(e.data.due_amount+e.editItemAmount)),1)):(r(),S("span",yr,s(e.formatAmountCurrency(e.data.due_amount)),1))])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payments.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[t(v,{value:e.formData.notes,"onUpdate:value":l[3]||(l[3]=F=>e.formData.notes=F),placeholder:e.$t("payments.notes"),rows:5},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const br=B(pr,[["render",hr]]);const vr={props:["selectedItem"],components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,LeftOutlined:On,UserInfo:He,AddEdit:br,PaymentStatus:it,OrderStatus:ta},setup(e,{emit:l}){const{initPaymentData:c,orderPaymentsColumns:n,orderItemDetailsColumns:h}=ea(),{formatAmountCurrency:y,permsArray:u,formatDate:d,formatDateTime:m}=Y(),{t:p}=te(),_=E(!1),f=E("add"),g=E("order-payments"),b=E({}),v=E({}),k=E(0),$=u.value.includes("order_payments_view")||u.value.includes("admin")?"payments":"order_items",D=E($),I=pe(()=>f.value=="add"?p("payments.add"):p("payments.edit")),F=pe(()=>f.value=="add"?p("payments.created"):p("payments.updated"));return{onClose:()=>{l("goBack")},formatDate:d,formatDateTime:m,formatAmountCurrency:y,orderPaymentsColumns:n,orderItemDetailsColumns:h,activeKey:D,addEditSuccess:W=>{l("reloadOrder"),f.value=="add"&&(b.value={order_id:e.selectedItem.xid,date:void 0,payment_mode_id:void 0,amount:"",notes:""}),_.value=!1},formData:b,addEditVisible:_,addItem:()=>{g.value="order-payments",f.value="add",b.value={...c,order_id:e.selectedItem.xid},_.value=!0,k.value=0},onCloseAddEdit:()=>{b.value={...c,order_id:e.selectedItem.xid},_.value=!1,k.value=0},addEditUrl:g,addEditType:f,viewData:v,permsArray:u,editItemAmount:k,pageTitle:I,successMessage:F}}},kr={class:"order-details"},wr={class:"table-responsive"},Cr={class:"table-responsive"};function Sr(e,l,c,n,h,y){const u=o("AddEdit"),d=o("a-descriptions-item"),m=o("OrderStatus"),p=o("PaymentStatus"),_=o("a-descriptions"),f=o("a-col"),g=o("a-row"),b=o("EditOutlined"),v=o("a-button"),k=o("DeleteOutlined"),$=o("a-table"),D=o("a-tab-pane"),I=o("a-avatar"),F=o("a-badge"),P=o("a-tabs");return r(),S("div",null,[t(u,{addEditType:n.addEditType,visible:n.addEditVisible,url:n.addEditUrl,onAddEditSuccess:n.addEditSuccess,onClosed:n.onCloseAddEdit,formData:n.formData,data:c.selectedItem,editItemAmount:n.editItemAmount,pageTitle:n.pageTitle,successMessage:n.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","editItemAmount","pageTitle","successMessage"]),w("div",kr,[t(g,{class:"mt-10"},{default:a(()=>[t(f,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(_,{title:null,layout:"vertical",contentStyle:{fontWeight:500,marginBottom:"20px"}},{default:a(()=>[t(d,{label:e.$t("stock.order_date")},{default:a(()=>[i(s(n.formatDateTime(c.selectedItem.order_date)),1)]),_:1},8,["label"]),t(d,{label:e.$t("stock.invoice_number")},{default:a(()=>[i(s(c.selectedItem.invoice_number),1)]),_:1},8,["label"]),c.selectedItem.user&&c.selectedItem.user.name?(r(),C(d,{key:0,label:c.selectedItem.order_type=="purchases"||c.selectedItem.order_type=="purchase-returns"?e.$t("stock.supplier"):e.$t("stock.customer")},{default:a(()=>[i(s(c.selectedItem.user.name),1)]),_:1},8,["label"])):A("",!0),c.selectedItem.order_type=="stock-transfers"&&c.selectedItem.warehouse&&c.selectedItem.warehouse.name?(r(),C(d,{key:1,label:e.$t("stock_transfer.to_warehouse")},{default:a(()=>[i(s(c.selectedItem.warehouse.name),1)]),_:1},8,["label"])):A("",!0),c.selectedItem.from_warehouse&&c.selectedItem.from_warehouse.name?(r(),C(d,{key:2,label:e.$t("stock_transfer.from_warehouse")},{default:a(()=>[i(s(c.selectedItem.from_warehouse.name),1)]),_:1},8,["label"])):A("",!0),t(d,{label:e.$t("stock.status")},{default:a(()=>[t(m,{data:c.selectedItem},null,8,["data"])]),_:1},8,["label"]),t(d,{label:e.$t("payments.payment_status")},{default:a(()=>[t(p,{paymentStatus:c.selectedItem.payment_status},null,8,["paymentStatus"])]),_:1},8,["label"]),t(d,{label:e.$t("stock.order_taken_by")},{default:a(()=>[i(s(c.selectedItem.staff_member&&c.selectedItem.staff_member.name?c.selectedItem.staff_member.name:"-"),1)]),_:1},8,["label"]),t(d,{label:e.$t("payments.total_amount")},{default:a(()=>[i(s(n.formatAmountCurrency(c.selectedItem.total)),1)]),_:1},8,["label"]),t(d,{label:e.$t("payments.paid_amount")},{default:a(()=>[i(s(n.formatAmountCurrency(c.selectedItem.paid_amount)),1)]),_:1},8,["label"]),t(d,{label:e.$t("payments.due_amount")},{default:a(()=>[i(s(n.formatAmountCurrency(c.selectedItem.due_amount)),1)]),_:1},8,["label"]),t(d,{label:e.$t("stock.discount")},{default:a(()=>[i(s(n.formatAmountCurrency(c.selectedItem.discount)),1)]),_:1},8,["label"]),t(d,{label:e.$t("stock.shipping")},{default:a(()=>[i(s(n.formatAmountCurrency(c.selectedItem.shipping)),1)]),_:1},8,["label"]),t(d,{label:e.$t("stock.order_tax")},{default:a(()=>[i(s(c.selectedItem.tax_rate>0?`${c.selectedItem.tax_rate}%`:"-"),1)]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),t(g,null,{default:a(()=>[t(f,{span:24},{default:a(()=>[t(P,{activeKey:n.activeKey,"onUpdate:activeKey":l[0]||(l[0]=T=>n.activeKey=T)},{default:a(()=>[n.permsArray.includes("order_payments_view")||n.permsArray.includes("admin")?(r(),C(D,{key:"payments",tab:e.$t("payments.payments")},{default:a(()=>[t(g,null,{default:a(()=>[t(f,{span:24},{default:a(()=>[w("div",wr,[t($,{"row-key":T=>T.xid,columns:n.orderPaymentsColumns,"data-source":c.selectedItem.order_payments,pagination:!1},{bodyCell:a(({column:T,record:U})=>[T.dataIndex==="date"?(r(),S(O,{key:0},[i(s(n.formatDate(U.payment.date)),1)],64)):A("",!0),T.dataIndex==="amount"?(r(),S(O,{key:1},[i(s(n.formatAmountCurrency(U.amount)),1)],64)):A("",!0),T.dataIndex==="payment_mode_id"?(r(),S(O,{key:2},[i(s(U.payment.payment_mode.name),1)],64)):A("",!0),T.dataIndex==="action"?(r(),S(O,{key:3},[n.permsArray.includes("order_payments_edit")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:M=>e.editItem(U),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("order_payments_delete")||n.permsArray.includes("admin")?(r(),C(v,{key:1,type:"primary",onClick:M=>e.showDeleteConfirm(U.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-key","columns","data-source"])])]),_:1})]),_:1})]),_:1},8,["tab"])):A("",!0),t(D,{key:"order_items",tab:e.$t("product.order_items")},{default:a(()=>[t(g,null,{default:a(()=>[t(f,{span:24},{default:a(()=>[w("div",Cr,[t($,{"row-key":T=>T.xid,columns:n.orderItemDetailsColumns,"data-source":c.selectedItem.items,pagination:!1},{bodyCell:a(({column:T,record:U})=>[T.dataIndex==="product_id"?(r(),C(F,{key:0},{default:a(()=>[t(I,{shape:"square",src:U.product.image_url},null,8,["src"]),i(" "+s(U.product.name),1)]),_:2},1024)):A("",!0),T.dataIndex==="single_unit_price"?(r(),S(O,{key:1},[i(s(n.formatAmountCurrency(U.single_unit_price)),1)],64)):A("",!0),T.dataIndex==="total_discount"?(r(),S(O,{key:2},[i(s(n.formatAmountCurrency(U.total_discount)),1)],64)):A("",!0),T.dataIndex==="total_tax"?(r(),S(O,{key:3},[i(s(n.formatAmountCurrency(U.total_tax)),1)],64)):A("",!0),T.dataIndex==="subtotal"?(r(),S(O,{key:4},[i(s(n.formatAmountCurrency(U.subtotal)),1)],64)):A("",!0)]),_:1},8,["row-key","columns","data-source"])])]),_:1})]),_:1})]),_:1},8,["tab"])]),_:1},8,["activeKey"])]),_:1})]),_:1})])])}const _a=B(vr,[["render",Sr]]);const $r=Z({props:["visible","order"],emits:["close","restSelectedItem","reloadOrder"],components:{PaymentStatus:it,Details:_a,PlusOutlined:ne,DownloadOutlined:Et},setup(e,{emit:l}){const{formatAmountCurrency:c,permsArray:n,invoiceBaseUrl:h,selectedWarehouse:y}=Y();te();const u=E(null),d=()=>{l("close")},m=()=>{l("goBack")},p=()=>{l("reloadOrder")},_=()=>{};return{detailsRef:u,formatAmountCurrency:c,invoiceBaseUrl:h,permsArray:n,selectedWarehouse:y,onClose:d,restSelectedItem:m,paymentSuccess:p,drawerWidth:window.innerWidth<=991?"90%":"60%",downloadInvoice:_}}}),Dr={style:{width:"50%"}},Ar={key:0};function Tr(e,l,c,n,h,y){const u=o("PaymentStatus"),d=o("a-page-header"),m=o("a-progress"),p=o("a-breadcrumb"),_=o("PlusOutlined"),f=o("a-button"),g=o("DownloadOutlined"),b=o("a-typography-link"),v=o("a-space"),k=o("Details"),$=o("a-drawer");return r(),C($,{width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose},{title:a(()=>[t(d,{style:{padding:"0px"}},{title:a(()=>[i(" #"+s(e.order.invoice_number)+" ",1),t(u,{paymentStatus:e.order.payment_status},null,8,["paymentStatus"])]),_:1}),t(p,null,{default:a(()=>[w("div",Dr,[t(m,{percent:parseFloat(parseFloat(parseFloat(e.order.paid_amount)/parseFloat(e.order.total)*100).toFixed(2))},null,8,["percent"])])]),_:1})]),extra:a(()=>[t(v,null,{default:a(()=>[(e.permsArray.includes("order_payments_create")||e.permsArray.includes("admin"))&&e.order.payment_status!="paid"&&e.order.order_type!="stock-transfers"&&e.detailsRef?(r(),C(f,{key:0,type:"primary",onClick:e.detailsRef.addItem},{default:a(()=>[t(_),i(" "+s(e.$t("payments.add")),1)]),_:1},8,["onClick"])):(e.permsArray.includes("order_payments_create")||e.permsArray.includes("admin"))&&e.order.payment_status!="paid"&&e.order.order_type=="stock-transfers"&&e.order.from_warehouse&&e.order.from_warehouse.xid&&e.order.from_warehouse.xid==e.selectedWarehouse.xid&&e.detailsRef?(r(),C(f,{key:1,type:"primary",onClick:e.detailsRef.addItem},{default:a(()=>[t(_),i(" "+s(e.$t("payments.add")),1)]),_:1},8,["onClick"])):A("",!0),t(b,{href:`${e.invoiceBaseUrl}/${e.order.unique_id}`,target:"_blank"},{default:a(()=>[t(f,{type:"primary"},{default:a(()=>[t(g),i(" "+s(e.$t("sales.invoice")),1)]),_:1})]),_:1},8,["href"])]),_:1})]),default:a(()=>[e.order&&e.order.xid?(r(),S("div",Ar,[t(k,{ref:"detailsRef",selectedItem:e.order,onGoBack:e.restSelectedItem,onReloadOrder:e.paymentSuccess},null,8,["selectedItem","onGoBack","onReloadOrder"])])):A("",!0)]),_:1},8,["width","open","onClose"])}const Er=B($r,[["render",Tr]]),Or=Z({props:["data","visible"],emits:["confirmSuccess","closed"],components:{LoadingOutlined:Ie,CheckOutlined:vt},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{t:y}=te(),u=E([{title:y("product.product"),dataIndex:"product_id"},{title:y("product.quantity"),dataIndex:"quantity"},{title:y("stock_adjustment.current_stock"),dataIndex:"current_stock"}]);return{rules:h,loading:n,onClose:()=>{h.value={},l("closed")},onSubmit:()=>{c({url:`online-orders/confirm/${e.data.unique_id}`,data:{},successMessage:y("online_orders.order_confirmed"),success:p=>{l("closed"),l("confirmSuccess")}})},confirmOrderTableColumns:u}}});function Ir(e,l,c,n,h,y){const u=o("a-typography-text"),d=o("a-table"),m=o("a-col"),p=o("a-row"),_=o("a-form"),f=o("CheckOutlined"),g=o("a-button"),b=o("a-modal");return r(),C(b,{open:e.visible,closable:!1,centered:!0,title:e.$t("online_orders.update_orders_status"),onOk:e.onSubmit},{footer:a(()=>[t(g,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(f)]),default:a(()=>[i(" "+s(e.$t("common.confirm")),1)]),_:1},8,["loading","onClick"]),t(g,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(_,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{columns:e.confirmOrderTableColumns,"data-source":e.data.items,"row-key":v=>v.id,pagination:!1},{bodyCell:a(({column:v,record:k})=>[v.dataIndex==="product_id"?(r(),S(O,{key:0},[i(s(k.product.name),1)],64)):A("",!0),v.dataIndex==="quantity"?(r(),S(O,{key:1},[i(s(`${k.quantity} ${k.product.unit.short_name}`),1)],64)):A("",!0),v.dataIndex==="current_stock"?(r(),S(O,{key:2},[k.product.details.current_stock<k.quantity?(r(),C(u,{key:0,type:"danger",strong:""},{default:a(()=>[i(s(`${k.product.details.current_stock} ${k.product.unit.short_name}`),1)]),_:2},1024)):k.product.details.current_stock>=k.quantity?(r(),C(u,{key:1,type:"success",strong:""},{default:a(()=>[i(s(`${k.product.details.current_stock} ${k.product.unit.short_name}`),1)]),_:2},1024)):A("",!0)],64)):A("",!0)]),_:1},8,["columns","data-source","row-key"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Pr=B(Or,[["render",Ir]]),kt=()=>{const e=Ye(),l=Ce(),c=pe(()=>l.getters["front/storeCartItems"]),{formatAmountUsingCurrencyObject:n}=Y(),h=l.state.auth.appSetting,y=l.state.auth.user,{t:u}=te(),d=E(e.params.type),m=pe(()=>l.state.front.warehouseCurrency),p=pe(()=>window.config.frontStoreWarehouse),_=pe(()=>l.state.front.appSetting),f={enabled:"success",disabled:"error"},g=[{key:"enabled",value:u("common.enabled")},{key:"disabled",value:u("common.disabled")}],b=[{key:"inclusive",value:u("product.inclusive")},{key:"exclusive",value:u("product.exclusive")}],v=Q=>Q&&Q>moment().endOf("day"),k=Q=>parseFloat(parseFloat(Q).toFixed(2)),$=Q=>n(Q,m.value),D=Q=>{var j="";return we(Q,(oe,R)=>{oe!=null&&(j+=`${R} eq "${oe}" and `)}),j.length>0&&(j=j.substring(0,j.length-4)),j},I=Q=>checkUserPermission(Q,y),F=Q=>{l.commit("auth/updatePageTitle",u(`menu.${Q}`))},P=pe(()=>{const Q=[l.state.auth.user.role.name];return we(l.state.auth.user.role.perms,j=>{Q.push(j.name)}),Q}),T=pe(()=>{var Q={};return d.value=="purchases"?Q={type:"purchases",langKey:"purchase",menuKey:"purchases",userType:"suppliers"}:d.value=="sales"?Q={type:"sales",langKey:"sales",menuKey:"sales",userType:"customers"}:d.value=="purchase-returns"?Q={type:"purchase-returns",langKey:"purchase_returns",menuKey:"purchase_returns",userType:"suppliers"}:d.value=="sales-returns"&&(Q={type:"sales-returns",langKey:"sales_returns",menuKey:"sales_returns",userType:"customers"}),Q}),U=Q=>{const j=Q.replace("-","_");return u(`menu.${j}`)},M=[{key:"pending",value:u("common.pending")},{key:"paid",value:u("common.paid")},{key:"cancelled",value:u("common.cancelled")}],W=[{key:"pending",value:u("common.pending")},{key:"paid",value:u("common.paid")},{key:"cancelled",value:u("common.cancelled")}],V=[{key:"received",value:u("common.received")},{key:"pending",value:u("common.pending")},{key:"ordered",value:u("common.ordered")}],K=[{key:"completed",value:u("common.completed")},{key:"pending",value:u("common.pending")}],q=[{key:"ordered",value:u("common.ordered")},{key:"confirmed",value:u("common.confirmed")},{key:"processing",value:u("common.processing")},{key:"shipping",value:u("common.shipping")},{key:"delivered",value:u("common.delivered")}],L=[{key:"received",value:u("common.received")},{key:"pending",value:u("common.pending")}],X=[{key:"CODE128",value:"CODE128"},{key:"CODE39",value:"CODE39"}],J=(Q,j=null)=>{const oe=[],R=[];return Q.data.map(ae=>{(j==null||j!=null&&ae.parent_id!=j)&&R.push({id:ae.id,parent_id:ae.parent_id,title:ae.name,value:ae.id})}),R.forEach(ae=>{if(!ae.parent_id)return oe.push(ae);const ue=R.findIndex(re=>re.id===ae.parent_id);if(!R[ue].children)return R[ue].children=[ae];R[ue].children.push(ae)}),oe},le=(Q,j)=>j.props.title.toLowerCase().includes(Q.toLowerCase()),H=pe(()=>{let Q=0;return we(c.value,j=>{Q+=j.cart_quantity*j.details.sales_price}),Q});return{appSetting:h,user:y,checkPermission:I,permsArray:P,statusColors:f,userStatus:g,taxTypes:b,barcodeSymbology:X,disabledDate:v,formatAmount:k,formatAmountCurrency:$,calculateFilterString:D,updatePageTitle:F,orderType:d,orderPageObject:T,orderStatus:M,paymentStatus:W,purchaseOrderStatus:V,salesOrderStatus:q,purchaseReturnStatus:K,salesReturnStatus:L,getRecursiveCategories:J,filterTreeNode:le,getOrderTypeFromstring:U,products:c,total:H,updateCart:()=>{l.commit("front/addCartItems",c.value)},removeItem:Q=>{const j=Xe(c.value,oe=>oe.xid!=Q);l.commit("front/addCartItems",j)},frontAppSetting:_,warehouseCurrency:m,frontWarehouse:p}},Ur=Z({props:["orderStatus"],setup(e){const{salesOrderStatus:l}=Y(),{orderStatus:c}=e,n=E(0);return ee(()=>{var h=ol(l,["key",c]);n.value=h+1}),{current:n,salesOrderStatus:l}}});function Fr(e,l,c,n,h,y){const u=o("a-step"),d=o("a-steps");return r(),C(d,{current:e.current,status:"wait"},{default:a(()=>[(r(!0),S(O,null,G(e.salesOrderStatus,m=>(r(),C(u,{key:m.key,title:m.value},null,8,["title"]))),128))]),_:1},8,["current"])}const Zn=B(Ur,[["render",Fr]]);const qr=Z({props:{order:{default:{}},detailView:{default:"front"}},components:{OrderStatus:Zn,PaymentStatus:it,StopOutlined:Zt,OrderStatusTag:ta},setup(e,{emit:l}){const c=kt(),n=Y(),h=Ce(),y=pe(()=>h.state.front.warehouseCurrency);return{columns:[{title:"#",dataIndex:"id"},{title:"Product",dataIndex:"product_id"},{title:"Quantity",dataIndex:"quantity"},{title:"Price",dataIndex:"unit_price"},{title:"Total",dataIndex:"subtotal"}],formatAmountCurrency:m=>e.detailView=="admin"?n.formatAmountCurrency(m):c.formatAmountCurrency(m),buildAddress:Da,warehouseCurrency:y}}}),Mr={key:0},Rr={key:1},Kr={class:"item-desc mt-40"},Vr={class:"mt-20 pl-15"},zr={class:"pd-10"},Lr={class:"item-total pd-10"};function Br(e,l,c,n,h,y){const u=o("stop-outlined"),d=o("a-alert"),m=o("order-status"),p=o("a-descriptions-item"),_=o("PaymentStatus"),f=o("OrderStatusTag"),g=o("a-descriptions"),b=o("a-avatar"),v=o("a-list-item-meta"),k=o("a-list-item"),$=o("a-table"),D=o("a-col"),I=o("a-row");return r(),S(O,null,[e.order.cancelled?(r(),S("div",Mr,[t(d,{message:e.$t("online_orders.order_cancelled"),description:e.$t("online_orders.order_cancelled_message"),type:"error","show-icon":""},{icon:a(()=>[t(u)]),_:1},8,["message","description"])])):(r(),S("div",Rr,[t(m,{orderStatus:e.order.order_status},null,8,["orderStatus"])])),w("div",Kr,[w("span",null,s(e.$t("online_orders.order_summary")),1)]),w("div",Vr,[t(g,{title:null,column:2,labelStyle:{fontWeight:"bold"}},{default:a(()=>[t(p,{label:e.$t("stock.order_id")},{default:a(()=>[i(s(e.order.invoice_number),1)]),_:1},8,["label"]),t(p,{label:e.$t("common.total")},{default:a(()=>[i(s(e.formatAmountCurrency(e.order.total)),1)]),_:1},8,["label"]),t(p,{label:e.$t("user.name")},{default:a(()=>[i(s(e.order.shipping_address.name),1)]),_:1},8,["label"]),t(p,{label:e.$t("user.email")},{default:a(()=>[i(s(e.order.shipping_address.email),1)]),_:1},8,["label"]),t(p,{label:e.$t("user.phone")},{default:a(()=>[i(s(e.order.shipping_address.phone),1)]),_:1},8,["label"]),t(p,{label:e.$t("payments.payment_status")},{default:a(()=>[t(_,{paymentStatus:e.order.payment_status},null,8,["paymentStatus"])]),_:1},8,["label"]),t(p,{label:e.$t("stock.status")},{default:a(()=>[t(f,{data:e.order},null,8,["data"])]),_:1},8,["label"]),t(p,{label:e.$t("stock.shipping_address")},{default:a(()=>[i(s(e.order.shipping_address.shipping_address),1)]),_:1},8,["label"]),t(p,{label:e.$t("stock.billing_address")},{default:a(()=>[i(s(e.order.shipping_address.address),1)]),_:1},8,["label"])]),_:1})]),t(I,{class:"mt-20"},{default:a(()=>[t(D,{span:24},{default:a(()=>[t($,{columns:e.columns,"row-key":F=>F.id,"data-source":e.order.items,pagination:!1},{bodyCell:a(({index:F,column:P,record:T})=>[P.dataIndex==="id"?(r(),S(O,{key:0},[i(s(F+1),1)],64)):A("",!0),P.dataIndex==="product_id"?(r(),C(k,{key:1},{default:a(()=>[t(v,null,{avatar:a(()=>[t(b,{src:T.product.image_url,size:"large",shape:"square"},null,8,["src"])]),title:a(()=>[i(s(T.product.name),1)]),_:2},1024)]),_:2},1024)):A("",!0),P.dataIndex==="unit_price"?(r(),S(O,{key:2},[i(s(e.formatAmountCurrency(T.unit_price)),1)],64)):A("",!0),P.dataIndex==="subtotal"?(r(),S(O,{key:3},[i(s(e.formatAmountCurrency(T.subtotal)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:1})]),_:1}),t(I,{class:"mt-30"},{default:a(()=>[t(D,{span:18}),t(D,{span:6},{default:a(()=>[w("div",zr,[t(I,null,{default:a(()=>[t(D,{span:12},{default:a(()=>[i(s(e.$t("product.subtotal")),1)]),_:1}),t(D,{span:12,class:"text-right"},{default:a(()=>[i(s(e.formatAmountCurrency(e.order.subtotal)),1)]),_:1})]),_:1}),t(I,{class:"mt-10"},{default:a(()=>[t(D,{span:12},{default:a(()=>[i(s(e.$t("product.discount")),1)]),_:1}),t(D,{span:12,class:"text-right"},{default:a(()=>[i(s(e.formatAmountCurrency(e.order.discount)),1)]),_:1})]),_:1}),t(I,{class:"mt-10"},{default:a(()=>[t(D,{span:12},{default:a(()=>[i(s(e.$t("stock.order_tax")),1)]),_:1}),t(D,{span:12,class:"text-right"},{default:a(()=>[i(s(e.formatAmountCurrency(e.order.tax_amount)),1)]),_:1})]),_:1}),t(I,{class:"mt-10"},{default:a(()=>[t(D,{span:12},{default:a(()=>[i(s(e.$t("stock.shipping")),1)]),_:1}),t(D,{span:12,class:"text-right"},{default:a(()=>[i(s(e.formatAmountCurrency(e.order.shipping)),1)]),_:1})]),_:1})]),w("div",Lr,[t(I,{class:"mt-10"},{default:a(()=>[t(D,{span:12},{default:a(()=>[i(s(e.$t("stock.grand_total")),1)]),_:1}),t(D,{span:12,class:"text-right"},{default:a(()=>[i(s(e.formatAmountCurrency(e.order.total)),1)]),_:1})]),_:1})])]),_:1})]),_:1})],64)}const xn=B(qr,[["render",Br]]),Wr=Z({props:["order","visible"],emits:["closed"],components:{OrderDetails:xn},setup(e,{emit:l}){return{onClose:()=>{l("closed")}}}});function jr(e,l,c,n,h,y){const u=o("OrderDetails"),d=o("a-modal");return r(),C(d,{open:e.visible,centered:!0,title:e.$t("online_orders.update_orders_status"),onCancel:e.onClose,width:"70%",footer:!1},{default:a(()=>[t(u,{order:e.order,detailView:"admin"},null,8,["order"])]),_:1},8,["open","title","onCancel"])}const Hr=B(Wr,[["render",jr]]),Nr={props:{selectable:{default:!1},tableSize:{default:"large"},bordered:{default:!1},orderType:{default:""},filters:{default:{}},perPageItems:Number},emits:["onRowSelection"],components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,MoreOutlined:In,DownloadOutlined:Et,ExclamationCircleOutlined:Te,SisternodeOutlined:ll,CheckOutlined:vt,StopOutlined:Zt,SendOutlined:Pn,Details:_a,UserInfo:He,Details:_a,PaymentStatus:it,OrderStatus:ta,OrderDetails:Er,ConfirmOrder:Pr,ViewOrder:Hr},setup(e,{emit:l}){const c=Ce(),{columns:n,hashableColumns:h,setupTableColumns:y,filterableColumns:u,pageObject:d,orderType:m,orderStatus:p,orderItemDetailsColumns:_}=ea(),f=je(),{formatAmountCurrency:g,invoiceBaseUrl:b,permsArray:v,calculateOrderFilterString:k,formatDate:$,selectedWarehouse:D,selectedLang:I,orderStatusColors:F}=Y();Ye();const{t:P}=te(),T=E(!1),U=E({}),M=E(!1),W=E(!1),V=E({});ee(()=>{q()});const K=ie=>{var _e=!1;return(ie.order_type=="stock-transfers"&&e.filters.transfer_type=="transfered"&&(v.value.includes(`${d.value.permission}_delete`)||v.value.includes("admin"))&&ie.payment_status=="unpaid"||ie.order_type!="online-orders"&&(v.value.includes(`${d.value.permission}_delete`)||v.value.includes("admin"))&&ie.payment_status=="unpaid")&&(_e=!0),{disabled:!_e,name:ie.xid}},q=()=>{m.value=e.orderType,e.perPageItems&&(f.table.pagination.pageSize=e.perPageItems),f.table.pagination.current=1,f.table.pagination.currentPage=1,f.hashable.value=h,y(),L()},L=()=>{const ie=e.filters,_e=k(ie);var Ue={};ie.dates&&(Ue.dates=ie.dates),ie.transfer_type&&(Ue.transfer_type=ie.transfer_type),f.tableUrl.value={url:`${e.orderType}?fields=id,xid,unique_id,warehouse_id,x_warehouse_id,warehouse{id,xid,name},from_warehouse_id,x_from_warehouse_id,fromWarehouse{id,xid,name},invoice_number,order_type,order_date,tax_amount,discount,shipping,subtotal,paid_amount,due_amount,order_status,payment_status,total,tax_rate,staff_user_id,x_staff_user_id,staffMember{id,xid,name,profile_image,profile_image_url,user_type},user_id,x_user_id,user{id,xid,user_type,name,profile_image,profile_image_url,phone},orderPayments{id,xid,amount,payment_id,x_payment_id},orderPayments:payment{id,xid,amount,payment_mode_id,x_payment_mode_id,date,notes},orderPayments:payment:paymentMode{id,xid,name},items{id,xid,product_id,x_product_id,single_unit_price,unit_price,quantity,tax_rate,total_tax,tax_type,total_discount,subtotal},items:product{id,xid,name,image,image_url,unit_id,x_unit_id},items:product:unit{id,xid,name,short_name},items:product:details{id,xid,warehouse_id,x_warehouse_id,product_id,x_product_id,current_stock},items:orderItemTaxes{id,xid,order_item_id,order_item_id,tax_name,tax_amount},cancelled,terms_condition,shippingAddress{id,xid,order_id,name,email,phone,address,shipping_address,city,state,country,zipcode}`,filterString:_e,filters:{user_id:ie.user_id?ie.user_id:void 0,warehouse_id:ie.warehouse_id?ie.warehouse_id:void 0},extraFilters:Ue},f.table.filterableColumns=u,ie.searchColumn&&ie.searchString&&ie.searchString!=""?(f.table.searchColumn=ie.searchColumn,f.table.searchString=ie.searchString):(f.table.searchColumn=void 0,f.table.searchString=""),f.fetch({page:f.table.pagination.currentPage})},X=ie=>{ze.confirm({title:P("common.delete")+"?",icon:t(Te),content:P(`${d.value.langKey}.delete_message`),centered:!0,okText:P("common.yes"),okType:"danger",cancelText:P("common.no"),onOk(){axiosAdmin.delete(`${e.orderType}/${ie}`).then(()=>{le(),L(),Ee.success({message:P("common.success"),description:P(`${d.value.langKey}.deleted`)})})},onCancel(){}})},J=()=>{ze.confirm({title:P("common.delete")+"?",icon:t(Te),content:P(`${d.value.langKey}.selected_delete_message`),centered:!0,okText:P("common.yes"),okType:"danger",cancelText:P("common.no"),onOk(){const ie=[];we(f.table.selectedRowKeys,_e=>{ie.push(axiosAdmin.delete(`${e.orderType}/${_e}`))}),Promise.all(ie).then(_e=>{le(),be(),L(),Ee.success({message:P("common.success"),description:P(`${d.value.langKey}.deleted`),placement:"bottomRight"})})},onCancel(){}})},le=()=>{c.dispatch("auth/updateVisibleSubscriptionModules")},H=ie=>{U.value=ie,T.value=!0},N=()=>{U.value={}},z=()=>{f.fetch({page:f.currentPage.value,success:ie=>{const _e=Qe(ie,Ue=>Ue.xid==U.value.xid);_e!=null&&(U.value=_e)}})},Q=()=>{T.value=!1},j=ie=>{V.value=ie,M.value=!0},oe=ie=>{V.value=ie,W.value=!0},R=ie=>{processRequest({url:`online-orders/change-status/${ie.unique_id}`,data:{order_status:ie.order_status},success:_e=>{Ee.success({placement:"bottomRight",message:P("common.success"),description:P("online_orders.order_status_changed")})},error:_e=>{}})},ae=ie=>{ze.confirm({title:P("quotation.convert_to_sale")+"?",icon:t(Te),content:P("quotation.convert_message"),centered:!0,okText:P("common.yes"),okType:"danger",cancelText:P("common.no"),onOk(){axiosAdmin.post(`quotations/convert-to-sale/${ie.unique_id}`).then(()=>{f.fetch(),Ee.success({placement:"bottomRight",message:P("common.success"),description:P("quotation.quotation_converted_to_sales")})})},onCancel(){}})},ue=ie=>{ze.confirm({title:P("online_orders.cancel_order")+"?",icon:t(Te),content:P("online_orders.cancel_message"),centered:!0,okText:P("common.yes"),okType:"danger",cancelText:P("common.no"),onOk(){axiosAdmin.post(`online-orders/cancel/${ie.unique_id}`).then(()=>{q(),Ee.success({message:P("common.success"),description:P("online_orders.order_cancelled"),placement:"bottomRight"})})},onCancel(){}})},re=ie=>{ze.confirm({title:P("common.delivered")+"?",icon:t(Te),content:P("online_orders.deliver_message"),centered:!0,okText:P("common.yes"),okType:"danger",cancelText:P("common.no"),onOk(){axiosAdmin.post(`online-orders/delivered/${ie.unique_id}`).then(()=>{q(),Ee.success({message:P("common.success"),description:P("online_orders.order_delivered"),placement:"bottomRight"})})},onCancel(){}})},be=()=>{f.table.selectedRowKeys=[],l("onRowSelection",[])};return me(e,(ie,_e)=>{be(),q(),N()}),me(D,(ie,_e)=>{be(),f.table.pagination.current=1,L()}),{columns:n,...f,filterableColumns:u,pageObject:d,formatDate:$,orderStatus:p,orderStatusColors:F,setUrlData:L,formatAmountCurrency:g,invoiceBaseUrl:b,permsArray:v,selectedItem:U,viewItem:H,restSelectedItem:N,paymentSuccess:z,showDeleteConfirm:X,showSelectedDeleteConfirm:J,detailsDrawerVisible:T,onDetailDrawerClose:Q,orderItemDetailsColumns:_,selectedLang:I,initialSetup:q,convertToSale:ae,confirmOrder:j,cancelOrder:ue,viewOrder:oe,confirmDelivery:re,changeOrderStatus:R,confirmModalVisible:M,viewModalVisible:W,modalData:V,getCheckboxProps:K}}},Yr={class:"table-responsive"},Gr={key:0},Jr={key:0},Qr=w("br",null,null,-1),Xr={key:1};function Zr(e,l,c,n,h,y){const u=o("user-info"),d=o("PaymentStatus"),m=o("OrderStatus"),p=o("EyeOutlined"),_=o("a-button"),f=o("a-tooltip"),g=o("CheckOutlined"),b=o("SendOutlined"),v=o("StopOutlined"),k=o("a-space"),$=o("MoreOutlined"),D=o("a-menu-item"),I=o("EditOutlined"),F=o("DeleteOutlined"),P=o("DownloadOutlined"),T=o("a-typography-link"),U=o("a-menu"),M=o("a-dropdown"),W=o("SisternodeOutlined"),V=o("a-avatar"),K=o("a-badge"),q=o("a-table"),L=o("a-col"),X=o("a-row"),J=o("OrderDetails"),le=o("ConfirmOrder"),H=o("ViewOrder");return r(),S(O,null,[t(X,null,{default:a(()=>[t(L,{span:24},{default:a(()=>[w("div",Yr,[t(q,{"row-selection":c.selectable&&c.orderType!="online-orders"?{selectedRowKeys:e.table.selectedRowKeys,onChange:(N,z)=>{e.onRowSelectChange(N),e.$emit("onRowSelection",N)},getCheckboxProps:n.getCheckboxProps}:null,columns:n.columns,"row-key":N=>N.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:c.bordered,size:c.tableSize},{bodyCell:a(({column:N,record:z})=>[N.dataIndex==="order_date"?(r(),S(O,{key:0},[i(s(n.formatDate(z.order_date)),1)],64)):A("",!0),N.dataIndex==="warehouse"?(r(),S(O,{key:1},[z.warehouse&&z.warehouse.xid?(r(),S("span",Gr,s(z.warehouse.name),1)):A("",!0)],64)):A("",!0),N.dataIndex==="user_id"?(r(),C(u,{key:2,user:z.user},null,8,["user"])):A("",!0),N.dataIndex==="paid_amount"?(r(),S(O,{key:3},[i(s(n.formatAmountCurrency(z.paid_amount)),1)],64)):A("",!0),N.dataIndex==="total_amount"?(r(),S(O,{key:4},[i(s(n.formatAmountCurrency(z.total)),1)],64)):A("",!0),N.dataIndex==="payment_status"?(r(),C(d,{key:5,paymentStatus:z.payment_status},null,8,["paymentStatus"])):A("",!0),N.dataIndex==="order_status"?(r(),C(m,{key:6,data:z},null,8,["data"])):A("",!0),N.dataIndex==="action"?(r(),S(O,{key:7},[z.order_type=="online-orders"&&z.order_status!="delivered"&&!z.cancelled?(r(),C(k,{key:0},{default:a(()=>[t(f,{placement:"topLeft",title:e.$t("stock.view_order")},{default:a(()=>[t(_,{type:"primary",onClick:Q=>n.viewOrder(z)},{icon:a(()=>[t(p)]),_:2},1032,["onClick"])]),_:2},1032,["title"]),z.order_status=="ordered"&&!z.cancelled?(r(),C(f,{key:0,placement:"topLeft",title:e.$t("common.confirm")},{default:a(()=>[t(_,{type:"primary",onClick:Q=>n.confirmOrder(z)},{icon:a(()=>[t(g)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):A("",!0),!z.cancelled&&z.order_status!="ordered"&&z.order_status!="delivered"?(r(),C(f,{key:1,placement:"topLeft",title:e.$t("online_orders.confirm_delivery")},{default:a(()=>[t(_,{type:"primary",onClick:Q=>n.confirmDelivery(z)},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):A("",!0),!z.cancelled&&z.order_status!="delivered"?(r(),C(f,{key:2,placement:"topLeft",title:e.$t("common.cancel")},{default:a(()=>[t(_,{type:"primary",onClick:Q=>n.cancelOrder(z),danger:""},{icon:a(()=>[t(v)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):A("",!0)]),_:2},1024)):z.order_type=="stock-transfers"?(r(),C(M,{key:1,placement:"bottomRight"},{overlay:a(()=>[t(U,null,{default:a(()=>[n.permsArray.includes(`${n.pageObject.permission}_view`)||n.permsArray.includes("admin")?(r(),C(D,{key:"view",onClick:Q=>n.viewItem(z)},{default:a(()=>[t(p),i(" "+s(e.$t("common.view")),1)]),_:2},1032,["onClick"])):A("",!0),c.filters.transfer_type=="transfered"&&(n.permsArray.includes(`${n.pageObject.permission}_edit`)||n.permsArray.includes("admin"))?(r(),C(D,{key:"edit",onClick:()=>e.$router.push({name:`admin.stock.${n.pageObject.type}.edit`,params:{id:z.xid}})},{default:a(()=>[t(I),i(" "+s(e.$t("common.edit")),1)]),_:2},1032,["onClick"])):A("",!0),c.filters.transfer_type=="transfered"&&(n.permsArray.includes(`${n.pageObject.permission}_delete`)||n.permsArray.includes("admin"))&&z.payment_status=="unpaid"?(r(),C(D,{key:"delete",onClick:Q=>n.showDeleteConfirm(z.xid)},{default:a(()=>[t(F),i(" "+s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])):A("",!0),t(D,{key:"download"},{default:a(()=>[t(T,{href:`${n.invoiceBaseUrl}/${z.unique_id}/${n.selectedLang}`,target:"_blank"},{default:a(()=>[t(P),i(" "+s(e.$t("common.download")),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[t($)]),_:2},1024)):(r(),C(M,{key:2,placement:"bottomRight"},{overlay:a(()=>[t(U,null,{default:a(()=>[(n.permsArray.includes(`${n.pageObject.permission}_view`)||n.permsArray.includes("admin"))&&z.order_type=="quotations"?(r(),C(D,{key:"view",onClick:Q=>n.convertToSale(z)},{default:a(()=>[t(W),i(" "+s(e.$t("quotation.convert_to_sale")),1)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes(`${n.pageObject.permission}_view`)||n.permsArray.includes("admin")?(r(),C(D,{key:"view",onClick:Q=>n.viewItem(z)},{default:a(()=>[t(p),i(" "+s(e.$t("common.view")),1)]),_:2},1032,["onClick"])):A("",!0),z.order_type!="online-orders"&&(n.permsArray.includes(`${n.pageObject.permission}_edit`)||n.permsArray.includes("admin"))?(r(),C(D,{key:"edit",onClick:()=>e.$router.push({name:`admin.stock.${n.pageObject.type}.edit`,params:{id:z.xid}})},{default:a(()=>[t(I),i(" "+s(e.$t("common.edit")),1)]),_:2},1032,["onClick"])):A("",!0),z.order_type!="online-orders"&&(n.permsArray.includes(`${n.pageObject.permission}_delete`)||n.permsArray.includes("admin"))&&z.payment_status=="unpaid"?(r(),C(D,{key:"delete",onClick:Q=>n.showDeleteConfirm(z.xid)},{default:a(()=>[t(F),i(" "+s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])):A("",!0),t(D,{key:"download"},{default:a(()=>[t(T,{href:`${n.invoiceBaseUrl}/${z.unique_id}/${n.selectedLang}`,target:"_blank"},{default:a(()=>[t(P),i(" "+s(e.$t("common.download")),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[t($)]),_:2},1024))],64)):A("",!0)]),expandedRowRender:a(N=>[N&&N.record&&N.record.items?(r(),C(q,{key:0,"row-key":z=>z.xid,columns:n.orderItemDetailsColumns,"data-source":N.record.items,pagination:!1},{bodyCell:a(({column:z,record:Q})=>[z.dataIndex==="product_id"?(r(),C(K,{key:0},{default:a(()=>[t(V,{shape:"square",src:Q.product.image_url},null,8,["src"]),i(" "+s(Q.product.name),1)]),_:2},1024)):A("",!0),z.dataIndex==="quantity"?(r(),S(O,{key:1},[i(s(`${Q.quantity} ${Q.product.unit.short_name}`),1)],64)):A("",!0),z.dataIndex==="single_unit_price"?(r(),S(O,{key:2},[i(s(n.formatAmountCurrency(Q.single_unit_price)),1)],64)):A("",!0),z.dataIndex==="total_discount"?(r(),S(O,{key:3},[i(s(n.formatAmountCurrency(Q.total_discount)),1)],64)):A("",!0),z.dataIndex==="total_tax"?(r(),S(O,{key:4},[Q.order_item_taxes.length>0?(r(),S("span",Jr,[(r(!0),S(O,null,G(Q.order_item_taxes,j=>(r(),S("span",{key:j.xid},[w("span",null,s(j.tax_name)+" : "+s(n.formatAmountCurrency(j.tax_amount)),1),Qr]))),128))])):(r(),S("span",Xr,s(n.formatAmountCurrency(Q.total_tax)),1))],64)):A("",!0),z.dataIndex==="subtotal"?(r(),S(O,{key:5},[i(s(n.formatAmountCurrency(Q.subtotal)),1)],64)):A("",!0)]),_:2},1032,["row-key","columns","data-source"])):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange","bordered","size"])])]),_:1})]),_:1}),t(J,{visible:n.detailsDrawerVisible,order:n.selectedItem,onClose:n.onDetailDrawerClose,onGoBack:n.restSelectedItem,onReloadOrder:n.paymentSuccess},null,8,["visible","order","onClose","onGoBack","onReloadOrder"]),t(le,{visible:n.confirmModalVisible,data:n.modalData,onClosed:l[0]||(l[0]=N=>n.confirmModalVisible=!1),onConfirmSuccess:n.initialSetup},null,8,["visible","data","onConfirmSuccess"]),t(H,{visible:n.viewModalVisible,order:n.modalData,onClosed:l[1]||(l[1]=N=>n.viewModalVisible=!1)},null,8,["visible","order"])],64)}const Nt=B(Nr,[["render",Zr]]),xr=Z({props:{dateRange:{default:[]},formatType:{default:"YYYY-MM-DD HH:mm:ss"}},emits:["dateTimeChanged"],setup(e,{emit:l}){const c=E([]),{appSetting:n,dayjs:h}=Y();return ee(()=>{e.dateRange&&e.dateRange.length>0&&(c.value=[h(e.dateRange[0]),h(e.dateRange[1])])}),{appSetting:n,dateRangeValue:c,dateTimeChanged:d=>{d?l("dateTimeChanged",[d[0].tz(n.value.timezone).startOf("day").utc().format(e.formatType),d[1].tz(n.value.timezone).endOf("day").utc().format(e.formatType)]):l("dateTimeChanged",[])},resetPicker:()=>{c.value=[]}}}});function ed(e,l,c,n,h,y){const u=o("a-range-picker");return r(),C(u,{value:e.dateRangeValue,"onUpdate:value":l[0]||(l[0]=d=>e.dateRangeValue=d),format:e.appSetting.date_format,placeholder:[e.$t("common.start_date"),e.$t("common.end_date")],style:{width:"100%"},onChange:e.dateTimeChanged},null,8,["value","format","placeholder","onChange"])}const tt=B(xr,[["render",ed]]),td=Z({setup(){return{}}}),ad={class:"breadcrumb-header"};function nd(e,l,c,n,h,y){const u=o("a-col"),d=o("a-row"),m=o("a-card");return r(),S("div",ad,[t(m,{class:"page-content-sub-header breadcrumb-left-border"},{default:a(()=>[t(d,null,{default:a(()=>[t(u,{span:24},{default:a(()=>[de(e.$slots,"header",{key:"header"})]),_:3}),t(u,{span:24},{default:a(()=>[de(e.$slots,"breadcrumb",{key:"breadcrumb"})]),_:3})]),_:3})]),_:3})])}const ge=B(td,[["render",nd]]);const od={components:{EyeOutlined:Ze,ArrowUpOutlined:fa,ArrowDownOutlined:ga,DoubleRightOutlined:Un,StateWidget:Qn,TopProducts:Fs,PurchaseSales:Rs,PaymentsChart:zs,OrderTable:Nt,UserInfo:He,Tiimeline:xs,LineChartOutlined:sl,BankOutlined:Fn,ShoppingOutlined:Ot,TagOutlined:rl,DateRangePicker:tt,AdminPageHeader:ge},setup(){const{t:e}=te(),{formatQuantity:l,formatAmountCurrency:c,appSetting:n,user:h,permsArray:y,selectedWarehouse:u}=Y(),d=E(""),m=Se({dates:[]}),p=E([]),_=Ye(),f=[{title:e("product.product"),dataIndex:"product_name"},{title:e("product.quantity"),dataIndex:"current_stock"},{title:e("product.quantitiy_alert"),dataIndex:"stock_quantitiy_alert"}],g=[{title:e("stock.customer"),dataIndex:"customer_id"},{title:e("payments.total_amount"),dataIndex:"total_amount"}];return ee(()=>{const b=axiosAdmin.post("dashboard",m);y.value.includes("purchases_view")?d.value="purchases":y.value.includes("purchase_returns_view")?d.value="purchase-returns":y.value.includes("sales_returns_view")?d.value="sales-returns":d.value="sales",_.params&&_.params.success&&Ee.success({message:e("common.welcome_back",[h.value.name]),description:e("messages.login_success_dashboard"),placement:"topRight"}),Promise.all([b]).then(([v])=>{p.value=v.data})}),me([m,u],(b,v)=>{axiosAdmin.post("dashboard",m).then(k=>{p.value=k.data})}),{filters:m,activeOrderType:d,responseData:p,stockQuantityColumns:f,topCustomerColumns:g,formatQuantity:l,formatAmountCurrency:c,permsArray:y,appSetting:n}}},ld={class:"dashboard-page-content-container"},sd={class:"mt-30 mb-20"},rd={key:0},dd={key:0},id={key:0},ud={key:0},md=w("br",null,null,-1);function cd(e,l,c,n,h,y){const u=o("a-page-header"),d=o("AdminPageHeader"),m=o("DateRangePicker"),p=o("a-col"),_=o("a-row"),f=o("LineChartOutlined"),g=o("StateWidget"),b=o("ShoppingOutlined"),v=o("TagOutlined"),k=o("BankOutlined"),$=o("TopProducts"),D=o("a-card"),I=o("PurchaseSales"),F=o("DoubleRightOutlined"),P=o("a-button"),T=o("a-tab-pane"),U=o("a-tabs"),M=o("a-statistic"),W=o("OrderTable"),V=o("PaymentsChart"),K=o("a-table"),q=o("user-info");return r(),S(O,null,[t(d,null,{header:a(()=>[t(u,{title:e.$t("menu.dashboard"),style:{padding:"0px"}},null,8,["title"])]),_:1}),w("div",ld,[t(_,{gutter:[8,8],class:"mt-30 mb-10"},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(m,{ref:"serachDateRangePicker",onDateTimeChanged:l[0]||(l[0]=L=>n.filters.dates=L)},null,512)]),_:1}),t(p,{xs:24,sm:24,md:12,lg:18,xl:18,style:{display:"flex","justify-content":"space-around","align-items":"center"}},{default:a(()=>[w("div",null,[i("Stock Purchase Value: "),w("strong",null,s(n.responseData.stockPurchaseValue),1)]),w("div",null,[i("Stock Sales Value: "),w("strong",null,s(n.responseData.stockSalesValue),1)])]),_:1})]),_:1}),w("div",sd,[t(_,{gutter:[15,15]},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(g,null,{image:a(()=>[t(f,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(r(),S("h2",rd,s(n.formatAmountCurrency(n.responseData.stateData.totalSales)),1)):A("",!0),w("p",null,s(e.$t("dashboard.total_sales")),1)]),_:1})]),_:1}),t(p,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(g,null,{image:a(()=>[t(b,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(r(),S("h2",dd,s(n.formatAmountCurrency(n.responseData.stateData.totalExpenses)),1)):A("",!0),w("p",null,s(e.$t("dashboard.total_expenses")),1)]),_:1})]),_:1}),t(p,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(g,null,{image:a(()=>[t(v,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(r(),S("h2",id,s(n.formatAmountCurrency(n.responseData.stateData.paymentSent)),1)):A("",!0),w("p",null,s(e.$t("dashboard.payment_sent")),1)]),_:1})]),_:1}),t(p,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(g,null,{image:a(()=>[t(k,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(r(),S("h2",ud,s(n.formatAmountCurrency(n.responseData.stateData.paymentReceived)),1)):A("",!0),w("p",null,s(e.$t("dashboard.payment_received")),1)]),_:1})]),_:1})]),_:1})]),t(_,{gutter:[18,18],class:"mt-30 mb-20"},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(D,{title:e.$t("dashboard.top_selling_product")},{default:a(()=>[t($,{data:n.responseData},null,8,["data"])]),_:1},8,["title"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:18,xl:18},{default:a(()=>[t(D,{title:e.$t("dashboard.sales_purchases")},We({default:a(()=>[t(I,{data:n.responseData},null,8,["data"])]),_:2},[n.permsArray.includes("sales_view")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(P,{class:"mt-10",type:"link",onClick:l[1]||(l[1]=L=>e.$router.push({name:"admin.stock.sales.index"}))},{default:a(()=>[i(s(e.$t("common.view_all"))+" ",1),t(F)]),_:1})]),key:"0"}:void 0]),1032,["title"])]),_:1})]),_:1}),(n.permsArray.includes("purchases_view")||n.permsArray.includes("sales_view")||n.permsArray.includes("purchase_returns_view")||n.permsArray.includes("sales_returns_view")||n.permsArray.includes("admin"))&&n.activeOrderType!=""?(r(),C(_,{key:0,class:"mt-30 mb-20"},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(D,{title:e.$t("dashboard.recent_stock_history"),bodyStyle:{paddingTop:"0px"}},{extra:a(()=>[t(U,{activeKey:n.activeOrderType,"onUpdate:activeKey":l[2]||(l[2]=L=>n.activeOrderType=L)},{default:a(()=>[n.permsArray.includes("sales_view")||n.permsArray.includes("admin")?(r(),C(T,{key:"sales",tab:e.$t("menu.sales")},null,8,["tab"])):A("",!0),n.permsArray.includes("purchases_view")||n.permsArray.includes("admin")?(r(),C(T,{key:"purchases",tab:e.$t("menu.purchases")},null,8,["tab"])):A("",!0),n.permsArray.includes("purchase_returns_view")||n.permsArray.includes("admin")?(r(),C(T,{key:"purchase-returns",tab:e.$t("menu.purchase_returns")},null,8,["tab"])):A("",!0),n.permsArray.includes("sales_returns_view")||n.permsArray.includes("admin")?(r(),C(T,{key:"sales-returns",tab:e.$t("menu.sales_returns")},null,8,["tab"])):A("",!0)]),_:1},8,["activeKey"])]),default:a(()=>[t(_,null,{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:6,xl:6,class:"col-border-right pt-30"},{default:a(()=>[n.responseData.stockHistoryStatsData?(r(),C(_,{key:0,style:Ve(n.appSetting.rtl?{marginLeft:"24px"}:{marginRight:"24px"}),class:"stock-history-stats"},{default:a(()=>[t(p,{span:24,class:"sales mb-20"},{default:a(()=>[t(M,{title:e.$t("dashboard.total_sales_items"),value:n.formatQuantity(n.responseData.stockHistoryStatsData.totalSales)},null,8,["title","value"])]),_:1}),t(p,{span:24,class:"sales-returns mb-20"},{default:a(()=>[t(M,{title:e.$t("dashboard.total_sales_returns_items"),value:n.formatQuantity(n.responseData.stockHistoryStatsData.totalSalesReturn)},null,8,["title","value"])]),_:1}),t(p,{span:24,class:"purchases mb-20"},{default:a(()=>[t(M,{title:e.$t("dashboard.total_purchases_items"),value:n.formatQuantity(n.responseData.stockHistoryStatsData.totalPurchases)},null,8,["title","value"])]),_:1}),t(p,{span:24,class:"purchase-returns mb-20"},{default:a(()=>[t(M,{title:e.$t("dashboard.total_purchase_returns_items"),value:n.formatQuantity(n.responseData.stockHistoryStatsData.totalPurchaseReturn)},null,8,["title","value"])]),_:1})]),_:1},8,["style"])):A("",!0)]),_:1}),t(p,{xs:24,sm:24,md:12,lg:18,xl:18},{default:a(()=>[t(W,{orderType:n.activeOrderType,filters:n.filters,perPageItems:5},null,8,["orderType","filters"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):A("",!0),t(_,{gutter:[18,18],class:"mt-30 mb-20"},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[t(D,{title:e.$t("payments.payments")},We({default:a(()=>[t(V,{data:n.responseData},null,8,["data"])]),_:2},[n.permsArray.includes("order_payments_view")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(P,{class:"mt-10",type:"link",onClick:l[3]||(l[3]=L=>e.$router.push({name:"admin.reports.payments.index"}))},{default:a(()=>[i(s(e.$t("common.view_all"))+" ",1),t(F)]),_:1})]),key:"0"}:void 0]),1032,["title"])]),_:1})]),_:1}),t(_,{gutter:[18,18],class:"mt-30 mb-20"},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:16,xl:16},{default:a(()=>[n.responseData&&n.responseData.stockAlerts?(r(),C(D,{key:0,title:e.$t("menu.stock_alert"),bodyStyle:{padding:"0px"}},We({default:a(()=>[t(K,{columns:n.stockQuantityColumns,"row-key":L=>L.xid,"data-source":n.responseData.stockAlerts,pagination:!1},{bodyCell:a(({column:L,record:X})=>[L.dataIndex==="current_stock"?(r(),S(O,{key:0},[i(s(`${X.current_stock} ${X.short_name}`),1)],64)):A("",!0),L.dataIndex==="stock_quantitiy_alert"?(r(),S(O,{key:1},[i(s(`${X.stock_quantitiy_alert} ${X.short_name}`),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:2},[n.permsArray.includes("warehouses_view")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(P,{class:"mt-10",type:"link",onClick:l[4]||(l[4]=L=>e.$router.push({name:"admin.reports.stock.index"}))},{default:a(()=>[i(s(e.$t("common.view_all"))+" ",1),t(F)]),_:1})]),key:"0"}:void 0]),1032,["title"])):A("",!0)]),_:1}),t(p,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[n.responseData&&n.responseData.topCustomers?(r(),C(D,{key:0,title:e.$t("dashboard.top_customers"),bodyStyle:{padding:"0px"}},We({default:a(()=>[t(K,{columns:n.topCustomerColumns,"row-key":L=>L.customer_id,"data-source":n.responseData.topCustomers,pagination:!1},{bodyCell:a(({column:L,record:X})=>[L.dataIndex=="customer_id"?(r(),C(q,{key:0,user:X.customer},null,8,["user"])):A("",!0),L.dataIndex=="total_amount"?(r(),S(O,{key:1},[i(s(n.formatAmountCurrency(X.total_amount))+" ",1),md,i(" "+s(e.$t("dashboard.total_sales"))+" : "+s(X.total_sales),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:2},[n.permsArray.includes("users_view")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(P,{class:"mt-10",type:"link",onClick:l[5]||(l[5]=L=>e.$router.push({name:"admin.reports.users.index"}))},{default:a(()=>[i(s(e.$t("common.view_all"))+" ",1),t(F)]),_:1})]),key:"0"}:void 0]),1032,["title"])):A("",!0)]),_:1})]),_:1})])],64)}const pd=B(od,[["render",cd]]),_d=[{path:"/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/dashboard",component:pd,name:"admin.dashboard.index",meta:{requireAuth:!0,menuParent:"dashboard",menuKey:e=>"dashboard"}}]}],eo=()=>{const e="brands",{t:l}=te(),c={name:"",slug:"",image:void 0,image_url:void 0},n=[{title:l("brand.name"),dataIndex:"name"},{title:l("brand.logo"),dataIndex:"image_url"},{title:l("common.action"),dataIndex:"action"}],h=[{key:"name",value:l("brand.name")}];return{addEditUrl:e,initData:c,columns:n,filterableColumns:h}},Me=()=>{const{table:e,tableUrl:l,hashable:c,currentPage:n,handleTableChange:h,fetch:y,onTableSearch:u,onRowSelectChange:d,exportDetails:m}=je(),p=E(!1),_=E({}),f=E(""),g=E(""),b=E({}),v=E([]),k=E({}),$=E(!1),D=E("add"),I=E(""),F=E({}),{t:P}=te(),T=Ce(),U=R=>{p.value=!0,_.value=R},M=()=>{I.value=f.value,D.value="add",$.value=!0,_.value={}},W=()=>{z(),$.value=!1},V=()=>{p.value=!1,_.value={}},K=R=>{const ae={};var ue=k.value;Object.keys(b.value).forEach(re=>{if(dl(ue,re)){const be=ue[re];ae[re]=il(R,be)}else et(v.value,re)?ae[re]=R[`x_${re}`]:ae[re]=R[re]}),ae._method="PUT",F.value=ae,_.value=R,I.value=`${f.value}/${R.xid}`,D.value="edit",$.value=!0},q=()=>{T.dispatch("auth/updateVisibleSubscriptionModules")},L=R=>{le(R,"add-edit")},X=R=>{le(R,"add-new")},J=R=>{le(R,"add-continue")},le=(R,ae="add-edit")=>{if(D.value=="add"){const ue={...e.pagination};ue.current=1,n.value=1,e.pagination=ue}q(),(ae=="add-edit"||ae=="add-new")&&z(),y({page:D.value=="add"?1:n.value,limit:10}),ae=="add-edit"&&($.value=!1)},H=R=>{ze.confirm({title:P("common.delete")+"?",icon:t(Te),content:P(`${g.value}.delete_message`),centered:!0,okText:P("common.yes"),okType:"danger",cancelText:P("common.no"),onOk(){return axiosAdmin.delete(`${f.value}/${R}`).then(ae=>{q(),y({page:n.value}),Ee.success({message:P("common.success"),description:P(`${g.value}.deleted`),placement:"bottomRight"})}).catch(()=>{})},onCancel(){}})},N=()=>{ze.confirm({title:P("common.delete")+"?",icon:t(Te),content:P(`${g.value}.selected_delete_message`),centered:!0,okText:P("common.yes"),okType:"danger",cancelText:P("common.no"),onOk(){const R=[];we(e.selectedRowKeys,ae=>{R.push(axiosAdmin.delete(`${f.value}/${ae}`))}),Promise.all(R).then(ae=>{q(),y({page:n.value}),Ee.success({message:P("common.success"),description:P(`${g.value}.deleted`),placement:"bottomRight"})})},onCancel(){}})},z=()=>{F.value={...b.value}},Q=R=>{F.value={...F.value,...R}},j=pe(()=>g.value!=""?D.value=="add"?P(`${g.value}.add`):P(`${g.value}.edit`):""),oe=pe(()=>g.value!=""?D.value=="add"?P(`${g.value}.created`):P(`${g.value}.updated`):"");return me(v,(R,ae)=>{c.value=R}),{detailsVisible:p,viewData:_,onCloseDetails:V,addEditVisible:$,addEditType:D,addEditUrl:I,currentPage:n,formData:F,initData:b,crudUrl:f,langKey:g,hashableColumns:v,multiDimensalObjectColumns:k,pageTitle:j,successMessage:oe,viewItem:U,addItem:M,editItem:K,onCloseAddEdit:W,showDeleteConfirm:H,addEditSuccess:L,addAndNewSuccess:X,addAndContinueSuccess:J,restFormData:z,assignNewFormData:Q,showSelectedDeleteConfirm:N,table:e,tableUrl:l,handleTableChange:h,fetch:y,onTableSearch:u,onRowSelectChange:d,exportDetails:m}};const fd=Z({props:{formData:null,folder:String,imageField:{default:"image",type:String},url:{default:"upload-file",type:String}},components:{LoadingOutlined:Ie,PlusOutlined:ne},setup(e,{emit:l}){const c=E([]),n=E(!1),{t:h}=te();return{fileList:c,loading:n,customRequest:u=>{const d=new FormData;d.append("image",u.file),d.append("folder",e.folder),n.value=!0,axiosAdmin.post(e.url,d,{headers:{"Content-Type":"multipart/form-data"}}).then(m=>{c.value=[],n.value=!1,l("onFileUploaded",{file:m.data.file,file_url:m.data.file_url})}).catch(()=>{n.value=!1,Oe.error(h("messages.uploading_failed"))})}}}}),gd={key:0},yd=["src"],hd={key:1},bd={class:"ant-upload-text"};function vd(e,l,c,n,h,y){const u=o("loading-outlined"),d=o("plus-outlined"),m=o("a-upload");return r(),C(m,{accept:"image/*","file-list":e.fileList,"onUpdate:fileList":l[0]||(l[0]=p=>e.fileList=p),name:"image","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,customRequest:e.customRequest},{default:a(()=>[e.formData[e.imageField]!=null?(r(),S("div",gd,[w("img",{style:{width:"128px"},src:e.formData[`${e.imageField}_url`],alt:"avatar"},null,8,yd)])):(r(),S("div",hd,[e.loading?(r(),C(u,{key:0})):(r(),C(d,{key:1})),w("div",bd,s(e.$t("common.upload")),1)]))]),_:1},8,["file-list","customRequest"])}const ot=B(fd,[["render",vd]]),kd=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,Upload:ot},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{slugify:y}=Y();return{loading:n,rules:h,onClose:()=>{h.value={},l("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:m=>{l("addEditSuccess",m.xid)}})},slugify:y,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function wd(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("Upload"),f=o("a-form"),g=o("SaveOutlined"),b=o("a-button"),v=o("a-modal");return r(),C(v,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(g)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(b,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("brand.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=k=>e.formData.name=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("brand.name")]),onKeyup:l[1]||(l[1]=k=>e.formData.slug=e.slugify(k.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("brand.slug"),name:"slug",help:e.rules.slug?e.rules.slug.message:null,validateStatus:e.rules.slug?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.slug,"onUpdate:value":l[2]||(l[2]=k=>e.formData.slug=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("brand.slug")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("brand.logo"),name:"logo",help:e.rules.logo?e.rules.logo.message:null,validateStatus:e.rules.logo?"error":null},{default:a(()=>[t(_,{formData:e.formData,folder:"brand",onOnFileUploaded:l[3]||(l[3]=k=>{e.formData.image=k.file,e.formData.image_url=k.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const to=B(kd,[["render",wd]]),Cd=Z({props:{acceptFormat:{default:"image/*,.pdf",type:String},formData:null,folder:String,uploadField:{default:"file",type:String}},components:{UploadOutlined:qn,DownloadOutlined:Et,DeleteOutlined:fe},setup(e,{emit:l}){const c=E([]),n=E(!1),{t:h}=te();return{fileList:c,loading:n,customRequest:u=>{const d=new FormData;d.append("file",u.file),d.append("folder",e.folder),n.value=!0,axiosAdmin.post("upload-file",d,{headers:{"Content-Type":"multipart/form-data"}}).then(m=>{c.value=[],n.value=!1,l("onFileUploaded",{file:m.data.file,file_url:m.data.file_url})}).catch(m=>{n.value=!1;var p=h("messages.uploading_failed");m.status==422&&(m.data&&m.data.error&&m.data.error.details&&m.data.error.details.file[0]||m.data&&m.data.error&&m.data.error.details&&m.data.error.details.image[0])&&(p=m.data.error.details.file[0]),Oe.error(p)})}}}}),Sd={key:0},$d={key:1};function Dd(e,l,c,n,h,y){const u=o("UploadOutlined"),d=o("a-button"),m=o("a-upload"),p=o("DownloadOutlined"),_=o("a-tag"),f=o("a-typography-link"),g=o("DeleteOutlined");return e.formData[e.uploadField]==null?(r(),S("div",Sd,[t(m,{accept:e.acceptFormat,"file-list":e.fileList,"onUpdate:fileList":l[0]||(l[0]=b=>e.fileList=b),name:"file",customRequest:e.customRequest},{default:a(()=>[t(d,{loading:e.loading},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["accept","file-list","customRequest"])])):(r(),S("div",$d,[t(f,{href:e.formData[`${e.uploadField}_url`],target:"_blank"},{default:a(()=>[t(_,{color:"success"},{icon:a(()=>[t(p)]),default:a(()=>[i(" "+s(e.$t("common.download")),1)]),_:1})]),_:1},8,["href"]),t(f,{onClick:l[1]||(l[1]=()=>{e.formData[e.uploadField]=void 0,e.formData[`${e.uploadField}_url`]=void 0})},{default:a(()=>[t(_,{color:"error"},{icon:a(()=>[t(g)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1})]),_:1})]))}const ao=B(Cd,[["render",Dd]]),Ad=Z({props:["pageTitle","sampleFileUrl","importUrl"],emits:["onUploadSuccess"],components:{CloudDownloadOutlined:En,UploadFile:ao,UploadOutlined:qn},setup(e,{emit:l}){const{addEditFileRequestAdmin:c,loading:n,rules:h}=ve(),{t:y}=te(),u=E([]),d=E(!1),m=g=>(u.value=[...u.value,g],!1),p=()=>{const g={};u&&u.value&&u.value[0]!=null&&(g.file=u.value[0]),n.value=!0,c({url:e.importUrl,data:g,successMessage:y("messages.imported_successfully"),success:b=>{f(),l("onUploadSuccess")}})},_=()=>{d.value=!0},f=g=>{u.value=[],d.value=!1};return{fileList:u,rules:h,loading:n,visible:d,showModal:_,handleCancel:f,importItems:p,beforeUpload:m}}});function Td(e,l,c,n,h,y){const u=o("CloudDownloadOutlined"),d=o("a-button"),m=o("a-typography-link"),p=o("a-typography-paragraph"),_=o("a-col"),f=o("a-row"),g=o("UploadOutlined"),b=o("a-upload"),v=o("a-form-item"),k=o("a-form"),$=o("a-modal");return r(),S("div",null,[t(d,{type:"primary",onClick:e.showModal},{default:a(()=>[t(u),i(" "+s(e.pageTitle),1)]),_:1},8,["onClick"]),t($,{open:e.visible,"onUpdate:open":l[1]||(l[1]=D=>e.visible=D),title:e.pageTitle},{footer:a(()=>[t(d,{type:"primary",loading:e.loading,onClick:e.importItems},{default:a(()=>[i(s(e.$t("common.import")),1)]),_:1},8,["loading","onClick"]),t(d,{key:"back",onClick:e.handleCancel},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{gutter:16,class:"mb-10"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,null,{default:a(()=>[w("ul",null,[w("li",null,[t(m,{href:e.sampleFileUrl,target:"_blank"},{default:a(()=>[i(s(e.$t("messages.click_here_to_download_sample_file")),1)]),_:1},8,["href"])])])]),_:1})]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{layout:"vertical"},{default:a(()=>[t(v,{label:e.$t("common.file"),name:"file",help:e.rules.file?e.rules.file.message:null,validateStatus:e.rules.file?"error":null},{default:a(()=>[t(b,{accept:".xlsx,.csv","file-list":e.fileList,"onUpdate:fileList":l[0]||(l[0]=D=>e.fileList=D),name:"file","before-upload":e.beforeUpload,maxCount:1},{default:a(()=>[t(d,{loading:e.loading},{icon:a(()=>[t(g)]),default:a(()=>[i(" "+s(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["accept","file-list","before-upload"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])])}const Ut=B(Ad,[["render",Td]]),Ed={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:to,AdminPageHeader:ge,ImportBrands:Ut},setup(){const{addEditUrl:e,initData:l,columns:c,filterableColumns:n}=eo(),h=Me(),{permsArray:y}=Y(),u=window.config.brand_sample_file;ee(()=>{d()});const d=()=>{h.tableUrl.value={url:"brands?fields=id,xid,name,slug,image,image_url"},h.table.filterableColumns=n,h.fetch({page:1}),h.crudUrl.value=e,h.langKey.value="brand",h.initData.value={...l},h.formData.value={...l}};return{columns:c,filterableColumns:n,permsArray:y,...h,sampleFileUrl:u,setUrlData:d}}},Od={class:"table-responsive"};function Id(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("ImportBrands"),v=o("a-space"),k=o("DeleteOutlined"),$=o("a-col"),D=o("a-select-option"),I=o("a-select"),F=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),U=o("admin-page-filters"),M=o("AddEdit"),W=o("a-image"),V=o("EditOutlined"),K=o("a-table"),q=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.brands"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.product_manager")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.brands")),1)]),_:1})]),_:1})]),_:1}),t(U,null,{default:a(()=>[t(T,{gutter:[16,16]},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[n.permsArray.includes("brands_create")||n.permsArray.includes("admin")?(r(),C(v,{key:0},{default:a(()=>[t(g,{type:"primary",onClick:e.addItem},{default:a(()=>[t(f),i(" "+s(e.$t("brand.add")),1)]),_:1},8,["onClick"]),t(b,{pageTitle:e.$t("brand.import_brands"),sampleFileUrl:n.sampleFileUrl,importUrl:"brands/import",onOnUploadSuccess:n.setUrlData},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])]),_:1})):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("brands_delete")||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t($,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(T,{gutter:[16,16],justify:"end"},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[t(P,{compact:""},{default:a(()=>[t(I,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=L=>e.table.searchColumn=L),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,L=>(r(),C(D,{key:L.key},{default:a(()=>[i(s(L.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=L=>e.table.searchString=L),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(q,null,{default:a(()=>[t(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(T,null,{default:a(()=>[t($,{span:24},{default:a(()=>[w("div",Od,[t(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:L=>({disabled:!1,name:L.xid})},columns:n.columns,"row-key":L=>L.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:L,text:X,record:J})=>[L.dataIndex==="image_url"?(r(),C(W,{key:0,width:32,src:X},null,8,["src"])):A("",!0),L.dataIndex==="action"?(r(),S(O,{key:1},[n.permsArray.includes("brands_edit")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:le=>e.editItem(J),style:{"margin-left":"4px"}},{icon:a(()=>[t(V)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("brands_delete")||n.permsArray.includes("admin")?(r(),C(g,{key:1,type:"primary",onClick:le=>e.showDeleteConfirm(J.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Pd=B(Ed,[["render",Id]]),no=()=>{const e="categories",{t:l}=te(),c=["parent_id"],n={name:"",slug:"",image:void 0,image_url:void 0,parent_id:null},h=[{title:l("category.name"),dataIndex:"name"},{title:l("category.logo"),dataIndex:"image_url"},{title:l("common.action"),dataIndex:"action"}];return{hashableColumns:c,addEditUrl:e,initData:n,columns:h}},Ud=Z({props:["formData","data","visible","url","addEditType"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,Upload:ot},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{getRecursiveCategories:y,slugify:u}=Y(),{t:d}=te(),m=E([]),p=(b=null)=>{var v="categories?fields=id,xid,name,parent_id,x_parent_id&limit=10000";b!=null&&(v+=`&filters=id ne ${b}&hashable=${b}`),axiosAdmin.get(v).then(k=>{m.value=y(k,b)})},_=pe(()=>e.addEditType=="add"?d("category.add"):d("category.edit")),f=()=>{var b={parent_id:null,...e.formData};const v=e.addEditType=="add"?d("category.created"):d("category.updated");c({url:e.url,data:b,successMessage:v,success:k=>{p(),l("addEditSuccess",k.xid)}})},g=()=>{h.value={},l("closed")};return me(e,(b,v)=>{b.addEditType=="add"?p():p(b.data.xid)}),{loading:n,rules:h,onClose:g,onSubmit:f,pageTitle:_,allCategories:m,slugify:u}}}),Fd={class:"small-text-message"};function qd(e,l,c,n,h,y){const u=o("a-tree-select"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-input"),f=o("Upload"),g=o("a-form"),b=o("SaveOutlined"),v=o("a-button"),k=o("a-modal");return r(),C(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(v,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(v,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(g,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("category.parent_category"),name:"parent_id",help:e.rules.parent_id?e.rules.parent_id.message:null,validateStatus:e.rules.parent_id?"error":null},{default:a(()=>[t(u,{value:e.formData.parent_id,"onUpdate:value":l[0]||(l[0]=$=>e.formData.parent_id=$),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),"tree-data":e.allCategories,"allow-clear":"","tree-default-expand-all":""},null,8,["value","placeholder","tree-data"]),w("small",Fd,s(e.$t("messages.leave_blank_to_create_parent_category")),1)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("category.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(_,{value:e.formData.name,"onUpdate:value":l[1]||(l[1]=$=>e.formData.name=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("category.name")]),onKeyup:l[2]||(l[2]=$=>e.formData.slug=e.slugify($.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("category.slug"),name:"slug",help:e.rules.slug?e.rules.slug.message:null,validateStatus:e.rules.slug?"error":null,class:"required"},{default:a(()=>[t(_,{value:e.formData.slug,"onUpdate:value":l[3]||(l[3]=$=>e.formData.slug=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("category.slug")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("category.logo"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:a(()=>[t(f,{formData:e.formData,folder:"category",onOnFileUploaded:l[4]||(l[4]=$=>{e.formData.image=$.file,e.formData.image_url=$.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const oo=B(Ud,[["render",qd]]),Md={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,ExclamationCircleOutlined:Te,AddEdit:oo,AdminPageHeader:ge,ImportCategories:Ut},setup(){const e=Ce(),{initData:l,columns:c}=no(),{permsArray:n}=Y(),{t:h}=te(),y=window.config.category_sample_file,u=E(!1),d=E({}),m=E(!1),p=E("add"),_=E("categories"),f=E([]),g=E({}),b=E([]);ee(()=>{D()});const v=V=>{b.value=V},k=V=>({disabled:!(!V.children||V.children.length==0),name:V.xid}),$=pe(()=>({selectedRowKeys:ul(b),onChange:v,getCheckboxProps:k})),D=()=>{axiosAdmin.get("categories?fields=id,xid,name,slug,parent_id,x_parent_id,image,image_url&order=parent_id asc&limit=10000").then(V=>{const K=[];var q=V.data;q.forEach(L=>{if(!L.x_parent_id)return K.push(L);const X=q.findIndex(J=>J.xid===L.x_parent_id);if(!q[X].children)return q[X].children=[L];q[X].children.push(L)}),f.value=K})};return{columns:c,addEditSuccess:V=>{p.value=="add"&&(g.value={name:"",slug:"",image:void 0,image_url:void 0,parent_id:null}),D(),m.value=!1},formData:g,editItem:V=>{g.value={name:V.name,slug:V.slug,image:V.image,image_url:V.image_url,parent_id:V.x_parent_id,_method:"PUT"},d.value=V,_.value=`categories/${V.xid}`,p.value="edit",m.value=!0},addEditVisible:m,addItem:()=>{_.value="categories",p.value="add",m.value=!0},onCloseAddEdit:()=>{g.value={...l},m.value=!1},addEditUrl:_,addEditType:p,showDeleteConfirm:V=>{ze.confirm({title:h("common.delete")+"?",icon:t(Te),content:h("category.delete_message"),centered:!0,okText:h("common.yes"),okType:"danger",cancelText:h("common.no"),onOk(){axiosAdmin.delete(`categories/${V}`).then(()=>{D(),Ee.success({message:h("common.success"),description:h("category.deleted")})})},onCancel(){}})},detailsVisible:u,viewItem:V=>{d.value=V,u.value=!0},viewData:d,allCategories:f,permsArray:n,sampleFileUrl:y,getCategories:D,selectedRowKeys:b,rowSelection:$,showSelectedDeleteConfirm:()=>{ze.confirm({title:h("common.delete")+"?",icon:t(Te),content:h("category.delete_message"),centered:!0,okText:h("common.yes"),okType:"danger",cancelText:h("common.no"),onOk(){const V=[];we(b.value,K=>{V.push(axiosAdmin.delete(`categories/${K}`))}),Promise.all(V).then(K=>{e.dispatch("auth/updateVisibleSubscriptionModules"),D(),Ee.success({message:h("common.success"),description:h("category.deleted"),placement:"bottomRight"})})},onCancel(){}})}}}},Rd={class:"table-responsive"};function Kd(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("ImportCategories"),v=o("a-space"),k=o("DeleteOutlined"),$=o("a-col"),D=o("a-row"),I=o("admin-page-filters"),F=o("AddEdit"),P=o("a-image"),T=o("EditOutlined"),U=o("a-table"),M=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.categories"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.product_manager")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.categories")),1)]),_:1})]),_:1})]),_:1}),t(I,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[n.permsArray.includes("categories_create")||n.permsArray.includes("admin")?(r(),C(v,{key:0},{default:a(()=>[t(g,{type:"primary",onClick:n.addItem},{default:a(()=>[t(f),i(" "+s(e.$t("category.add")),1)]),_:1},8,["onClick"]),t(b,{pageTitle:e.$t("category.import_categories"),sampleFileUrl:n.sampleFileUrl,importUrl:"categories/import",onOnUploadSuccess:n.getCategories},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])]),_:1})):A("",!0),n.selectedRowKeys.length>0&&(n.permsArray.includes("categories_delete")||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:n.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t($,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(D,{gutter:[16,16],justify:"end"})]),_:1})]),_:1})]),_:1}),t(M,null,{default:a(()=>[t(F,{addEditType:n.addEditType,visible:n.addEditVisible,url:n.addEditUrl,onAddEditSuccess:n.addEditSuccess,onClosed:n.onCloseAddEdit,formData:n.formData,data:n.viewData,destroyOnClose:!0},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data"]),t(D,null,{default:a(()=>[t($,{span:24},{default:a(()=>[w("div",Rd,[t(U,{"row-selection":n.rowSelection,columns:n.columns,"row-key":W=>W.xid,"data-source":n.allCategories,defaultExpandAllRows:!0,bordered:"",size:"middle"},{bodyCell:a(({column:W,text:V,record:K})=>[W.dataIndex==="image_url"?(r(),C(P,{key:0,width:32,src:V},null,8,["src"])):A("",!0),W.dataIndex==="action"?(r(),S(O,{key:1},[n.permsArray.includes("categories_edit")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:q=>n.editItem(K),style:{"margin-left":"4px"}},{icon:a(()=>[t(T)]),_:2},1032,["onClick"])):A("",!0),(n.permsArray.includes("categories_delete")||n.permsArray.includes("admin"))&&(!K.children||K.children.length==0)?(r(),C(g,{key:1,type:"primary",onClick:q=>n.showDeleteConfirm(K.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})],64)}const Vd=B(Md,[["render",Kd]]),lo=()=>{const e="products",{t:l}=te(),c=["unit_id","category_id","brand_id","tax_id"],n={stock_quantitiy_alert:"details.stock_quantitiy_alert",mrp:"details.mrp",purchase_price:"details.purchase_price",sales_price:"details.sales_price",tax_id:"details.x_tax_id",purchase_tax_type:"details.purchase_tax_type",sales_tax_type:"details.sales_tax_type",opening_stock:"details.opening_stock",opening_stock_date:"details.opening_stock_date",wholesale_price:"details.wholesale_price",wholesale_quantity:"details.wholesale_quantity"},h={warehouse_id:void 0,name:"",slug:"",image:void 0,image_url:void 0,barcode_symbology:"CODE128",item_code:"",stock_quantitiy_alert:null,category_id:void 0,brand_id:void 0,mrp:0,purchase_price:0,sales_price:0,tax_id:void 0,unit_id:void 0,description:"",purchase_tax_type:"exclusive",sales_tax_type:"exclusive",custom_fields:[],opening_stock:void 0,opening_stock_date:void 0,wholesale_price:void 0,wholesale_quantity:void 0,product_type:"single",variations:[]},y=[{title:"",dataIndex:"status"},{title:l("product.product"),dataIndex:"name"},{title:l("product.category"),dataIndex:"category_id"},{title:l("product.brand"),dataIndex:"brand_id"},{title:l("product.sales_price"),dataIndex:"sales_price"},{title:l("product.purchase_price"),dataIndex:"purchase_price"},{title:l("product.current_stock"),dataIndex:"current_stock"},{title:l("common.action"),dataIndex:"action"}],u=[{title:l("product.product"),dataIndex:"name"},{title:l("product.category"),dataIndex:"category_id"},{title:l("product.brand"),dataIndex:"brand_id"},{title:l("common.action"),dataIndex:"action"}],d=[{title:l("product.product"),dataIndex:"name"},{title:l("product.item_code"),dataIndex:"item_code"},{title:l("product.sales_price"),dataIndex:"sales_price"},{title:l("product.purchase_price"),dataIndex:"purchase_price"},{title:l("product.current_stock"),dataIndex:"current_stock"},{title:l("common.action"),dataIndex:"action"}],m=[{key:"name",value:l("product.name")}];return{addEditUrl:e,initData:h,columns:y,variableProductcolumns:u,variantColumns:d,filterableColumns:m,hashableColumns:c,multiDimensalObjectColumns:n}};const zd={props:["product"]},Ld={class:"user-info"},Bd={class:"user-name"},Wd={key:0,class:"user-designation"};function jd(e,l,c,n,h,y){const u=o("a-avatar");return r(),S("div",Ld,[w("figure",null,[t(u,{size:40,src:c.product.image_url},null,8,["src"])]),w("figcaption",null,[w("h1",Bd,s(c.product.name),1),c.product.category_id?(r(),S("span",Wd,s(c.product.category.name),1)):A("",!0)])])}const Hd=B(zd,[["render",jd]]),Nd={},Yd=w("hr",{style:{"margin-bottom":"20px"}},null,-1);function Gd(e,l,c,n,h,y){const u=o("a-typography-title");return r(),S(O,null,[t(u,{level:5},{default:a(()=>[de(e.$slots,"default")]),_:3}),Yd],64)}const aa=B(Nd,[["render",Gd]]),Jd={props:["label","content"],components:{InfoCircleOutlined:It},setup(){return{escapeSctipyTab:l=>l.replace(/<script.*?>.*?<\/script>/gi,"")}}},Qd=["innerHTML"];function Xd(e,l,c,n,h,y){const u=o("InfoCircleOutlined"),d=o("a-popover");return r(),S("span",null,[i(s(c.label)+" ",1),t(d,{trigger:"hover"},{title:a(()=>[i(s(c.label),1)]),content:a(()=>[w("div",{innerHTML:n.escapeSctipyTab(c.content)},null,8,Qd)]),default:a(()=>[t(u)]),_:1})])}const so=B(Jd,[["render",Xd]]),ro={name:"BarcodeGenerator",props:{value:[String,Number],format:[String],width:[String,Number],height:[String,Number],displayValue:{type:[String,Boolean],default:!0},text:[String,Number],fontOptions:[String],font:[String],textAlign:[String],textPosition:[String],textMargin:[String,Number],fontSize:[String,Number],background:[String],lineColor:[String],margin:[String,Number],marginTop:[String,Number],marginBottom:[String,Number],marginLeft:[String,Number],marginRight:[String,Number],flat:[Boolean],ean128:[String,Boolean],elementTag:{type:String,default:"svg",validator:function(e){return["canvas","svg","img"].indexOf(e)!==-1}}},render(){return ml(this.elementTag,{})},mounted:function(){Zd.call(this)}};function Zd(){var e=this,l={format:this.format,width:this.width,height:this.height,displayValue:this.displayValue,text:this.text,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,lineColor:this.lineColor,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,flat:this.flat,ean128:this.ean128,valid:function(c){e.valid=c},elementTag:this.elementTag};xd(l),cl(this.$el,this.value,l)}function xd(e){Object.keys(e).forEach(l=>e[l]===void 0?delete e[l]:{})}const ei=Z({props:["itemCode","barcodeSymbology"],components:{BarcodeOutlined:xt,PrinterOutlined:ya,BarcodeGenerator:ro},setup(){const e=E(!1);return{visible:e,showModal:()=>{e.value=!0},handleOk:h=>{e.value=!1},printDiv:h=>{var y=document.getElementById(h).innerHTML,u=window.open("","","height=500, width=500");u.document.write("<body >"),u.document.write(y),u.document.write("</body></html>"),u.document.close(),u.print()}}}}),ti={id:"printThis",style:{display:"none"}},ai={style:{"text-align":"center"}};function ni(e,l,c,n,h,y){const u=o("BarcodeOutlined"),d=o("a-button"),m=o("BarcodeGenerator"),p=o("PrinterOutlined"),_=o("a-modal");return r(),S("div",null,[t(d,{type:"text",size:"small",onClick:e.showModal},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("product.view_barcode")),1)]),_:1},8,["onClick"]),w("div",ti,[(r(),S(O,null,G(24,f=>t(m,{key:f,value:e.itemCode+"",format:e.barcodeSymbology,height:75,elementTag:"svg"},null,8,["value","format"])),64))]),t(_,{open:e.visible,"onUpdate:open":l[1]||(l[1]=f=>e.visible=f),title:e.$t("product.barcode"),footer:!1,onOk:e.handleOk},{default:a(()=>[w("p",ai,[t(m,{value:e.itemCode+"",format:e.barcodeSymbology,height:75,elementTag:"svg"},null,8,["value","format"])]),t(d,{type:"primary",onClick:l[0]||(l[0]=f=>e.printDiv("printThis")),block:""},{icon:a(()=>[t(p)]),default:a(()=>[i(" "+s(e.$t("product.print_barcode")),1)]),_:1})]),_:1},8,["open","title","onOk"])])}const io=B(ei,[["render",ni]]),oi=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:to},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=eo(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),li={key:0};function si(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("brands_create")||e.permsArray.includes("admin")?(r(),S("div",li,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"brands"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("brand.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("brand.add"),successMessage:e.$t("brand.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const ri=B(oi,[["render",si]]),di=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:oo},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=no(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),ii={key:0};function ui(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("categories_create")||e.permsArray.includes("admin")?(r(),S("div",ii,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("category.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("category.add"),successMessage:e.$t("category.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const mi=B(di,[["render",ui]]),uo=()=>{const e="units?fields=id,xid,name,short_name,operator,operator_value,is_deletable",l="units",{t:c}=te(),n={name:"",short_name:"",parent_id:null,operator:"multiply",operator_value:1},h=[{title:c("unit.name"),dataIndex:"name"},{title:c("unit.short_name"),dataIndex:"short_name"},{title:c("common.action"),dataIndex:"action"}],y=[{key:"name",value:c("unit.name")}];return{url:e,addEditUrl:l,initData:n,columns:h,filterableColumns:y}},ci=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve();return{loading:n,rules:h,onClose:()=>{h.value={},l("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:d=>{l("addEditSuccess",d.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function pi(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-form"),f=o("SaveOutlined"),g=o("a-button"),b=o("a-modal");return r(),C(b,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(g,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(f)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(g,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(_,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("unit.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=v=>e.formData.name=v),placeholder:e.$t("common.placeholder_default_text",[e.$t("unit.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("unit.short_name"),name:"short_name",help:e.rules.short_name?e.rules.short_name.message:null,validateStatus:e.rules.short_name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.short_name,"onUpdate:value":l[1]||(l[1]=v=>e.formData.short_name=v),placeholder:e.$t("common.placeholder_default_text",[e.$t("unit.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const mo=B(ci,[["render",pi]]),_i=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:mo},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=uo(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),fi={key:0};function gi(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("units_create")||e.permsArray.includes("admin")?(r(),S("div",fi,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("unit.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("unit.add"),successMessage:e.$t("unit.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const yi=B(_i,[["render",gi]]),co=()=>{const e="taxes?fields=id,xid,name,rate,tax_type,x_parent_id,parent_id,multipleTax{id,xid,name,rate,tax_type,x_parent_id,parent_id}&filters=parent_id eq null",l="taxes",{t:c}=te(),n=["parent_id"],h={name:"",rate:"",tax_type:"single"},y=[{title:c("tax.name"),dataIndex:"name"},{title:c("tax.tax_type"),dataIndex:"tax_type"},{title:c("tax.rate"),dataIndex:"rate"},{title:c("common.action"),dataIndex:"action"}],u=[{key:"name",value:c("tax.name")}];return{url:e,addEditUrl:l,initData:h,columns:y,filterableColumns:u,hashableColumns:n}},hi=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,MinusSquareOutlined:Mn,FormItemHeading:aa},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),y=E([]),u=E([{tax_name:"",rate:"",id:void 0}]),d=()=>{var g=Xe(u.value,function(v){return v.tax_name!=""&&v.rate&&v.rate>0}),b={...e.formData,multiple_taxes:g,removed_fields:y.value};c({url:e.url,data:b,successMessage:e.successMessage,success:v=>{l("addEditSuccess",v.xid)}})},m=pe(()=>u.value.length==0?!1:ht(u.value,{tax_name:""})||ht(u.value,{tax_name:null})||ht(u.value,{rate:""})||ht(u.value,{rate:null})),p=()=>{u.value.push({tax_name:"",rate:"",id:""})},_=g=>{let b=u.value.indexOf(g);b!==-1&&u.value.splice(b,1),g.id!=""&&y.value.push(g.id)},f=()=>{h.value={},l("closed")};return me(()=>e.visible,(g,b)=>{e.visible&&(u.value=[],e.addEditType=="add"?u.value.push({tax_name:"",rate:"",id:""}):we(e.data.multiple_tax,v=>{u.value.push({tax_name:v.name,rate:v.rate,id:v.xid})}))}),{loading:n,rules:h,onClose:f,onSubmit:d,removeFormField:_,formFields:u,addFormField:p,addFormButtonStatus:m,sumBy:ha,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),bi={key:2,class:"ant-form-item-explain-error",style:{marginTop:"-15px"}};function vi(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-select-option"),f=o("a-select"),g=o("a-input-number"),b=o("form-item-heading"),v=o("MinusSquareOutlined"),k=o("PlusOutlined"),$=o("a-button"),D=o("a-form"),I=o("SaveOutlined"),F=o("a-modal");return r(),C(F,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t($,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(I)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t($,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(D,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("tax.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=P=>e.formData.name=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("tax.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("tax.tax_type"),name:"tax_type",help:e.rules.tax_type?e.rules.tax_type.message:null,validateStatus:e.rules.tax_type?"error":null,class:"required"},{default:a(()=>[t(f,{value:e.formData.tax_type,"onUpdate:value":l[1]||(l[1]=P=>e.formData.tax_type=P),placeholder:e.$t("common.select_default_text",[e.$t("tax.tax_type")]),onChange:l[2]||(l[2]=P=>{e.formData.rate=P=="multiple"?e.sumBy(e.formFields,"rate"):void 0})},{default:a(()=>[t(_,{value:"single"},{default:a(()=>[i(s(e.$t("tax.single")),1)]),_:1}),t(_,{value:"multiple"},{default:a(()=>[i(s(e.$t("tax.multiple")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("tax.rate"),name:"rate",help:e.rules.rate?e.rules.rate.message:null,validateStatus:e.rules.rate?"error":null,class:"required"},{default:a(()=>[t(g,{value:e.formData.rate,"onUpdate:value":l[3]||(l[3]=P=>e.formData.rate=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("tax.rate")]),min:"0",style:{width:"100%"},disabled:e.formData.tax_type=="multiple"},{addonAfter:a(()=>[i("%")]),_:1},8,["value","placeholder","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.formData.tax_type=="multiple"?(r(),C(b,{key:0},{default:a(()=>[i(s(e.$t("tax.multiple_tax")),1)]),_:1})):A("",!0),e.formData.tax_type=="multiple"?(r(!0),S(O,{key:1},G(e.formFields,(P,T)=>(r(),C(p,{gutter:16,key:P.id,style:{display:"flex","align-items":"center"}},{default:a(()=>[t(m,{xs:24,sm:24,md:e.addEditType=="add"?11:12,lg:e.addEditType=="add"?11:12},{default:a(()=>[t(d,{name:"tax_name",help:e.rules.tax_name?e.rules.tax_name.message:null,validateStatus:e.rules.tax_name?"error":null,class:"required"},{default:a(()=>[t(u,{value:P.tax_name,"onUpdate:value":U=>P.tax_name=U,placeholder:e.$t("common.placeholder_default_text",[e.$t("tax.name")]),min:"0",style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["help","validateStatus"])]),_:2},1032,["md","lg"]),t(m,{xs:24,sm:24,md:e.addEditType=="add"?11:12,lg:e.addEditType=="add"?11:12},{default:a(()=>[t(d,{name:"rate",class:"required"},{default:a(()=>[t(g,{value:P.rate,"onUpdate:value":U=>P.rate=U,placeholder:e.$t("common.placeholder_default_text",[e.$t("tax.rate")]),style:{width:"100%"},onChange:l[4]||(l[4]=()=>{e.formData.rate=e.sumBy(e.formFields,"rate")})},{addonAfter:a(()=>[i("%")]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1024)]),_:2},1032,["md","lg"]),e.addEditType=="add"?(r(),C(m,{key:0,span:2,style:{"margin-bottom":"20px"}},{default:a(()=>[t(v,{onClick:()=>{e.removeFormField(P),e.formData.rate=e.sumBy(e.formFields,"rate")}},null,8,["onClick"])]),_:2},1024)):A("",!0)]),_:2},1024))),128)):A("",!0),e.rules&&e.rules.multiple_taxes?(r(),S("p",bi,s(e.rules.multiple_taxes.message),1)):A("",!0),e.formData.tax_type=="multiple"?(r(),C(p,{key:3,gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(d,null,{default:a(()=>[t($,{type:"primary",onClick:e.addFormField,disabled:e.addFormButtonStatus},{default:a(()=>[t(k),i(" "+s(e.$t("tax.add")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1},8,["open","title","onOk"])}const po=B(hi,[["render",vi]]),ki=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:po},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=co(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),wi={key:0};function Ci(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("taxes_create")||e.permsArray.includes("admin")?(r(),S("div",wi,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("tax.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("tax.add"),successMessage:e.$t("tax.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Oa=B(ki,[["render",Ci]]),Ia=()=>{const e="warehouses",l="warehouses?fields=id,xid,company_id,x_company_id,logo,logo_url,dark_logo,dark_logo_url,name,slug,email,phone,address,show_email_on_invoice,show_phone_on_invoice,show_mrp_on_invoice,show_discount_tax_on_invoice,terms_condition,bank_details,signature,signature_url,online_store_enabled,default_pos_order_status,customers_visibility,suppliers_visibility,products_visibility,barcode_type",{t:c}=te(),n={name:"",slug:"",email:"",phone:"",logo:void 0,logo_url:void 0,dark_logo:void 0,dark_logo_url:void 0,show_email_on_invoice:0,show_phone_on_invoice:0,show_mrp_on_invoice:1,show_discount_tax_on_invoice:1,address:"",terms_condition:`1. Goods once sold will not be taken back or exchanged
2. All disputes are subject to [ENTER_YOUR_CITY_NAME] jurisdiction only`,bank_details:"",signature:void 0,signature_url:void 0,default_pos_order_status:"delivered",customers_visibility:"all",suppliers_visibility:"all",products_visibility:"all",barcode_type:"barcode"},h=[{title:c("warehouse.logo"),dataIndex:"logo"},{title:c("warehouse.name"),dataIndex:"name",sorter:!0},{title:c("warehouse.email"),dataIndex:"email",sorter:!0},{title:c("warehouse.phone"),dataIndex:"phone"},{title:c("warehouse.online_store"),dataIndex:"online_store_enabled"},{title:c("common.action"),dataIndex:"action"}],y=[{key:"name",value:c("warehouse.name")},{key:"email",value:c("warehouse.email")},{key:"phone",value:c("warehouse.phone")}];return{url:l,addEditUrl:e,initData:n,columns:h,filterableColumns:y}},Si=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],emits:["addEditSuccess"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,FileTextOutlined:pl,EyeOutlined:Ze,SettingOutlined:pt,Upload:ot},setup(e,{emit:l}){const c=Ce(),{addEditRequestAdmin:n,loading:h,rules:y}=ve(),{slugify:u,salesOrderStatus:d,selectedWarehouse:m}=Y(),p=E("basic_details"),_=Se({display:"flex",height:"30px",lineHeight:"30px"});return{loading:h,rules:y,onClose:()=>{p.value="basic_details",y.value={},l("closed")},onSubmit:()=>{n({url:e.url,data:e.formData,successMessage:e.successMessage,success:b=>{c.dispatch("auth/updateAllWarehouses"),m.value&&m.value.xid&&m.value.xid==b.xid&&axiosAdmin.post("change-warehouse",{warehouse_id:b.xid}).then(v=>{c.commit("auth/updateWarehouse",v.data.warehouse)}),l("addEditSuccess",b.xid),p.value="basic_details",y.value={}}})},slugify:u,activeKey:p,salesOrderStatus:d,radioStyle:_,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function $i(e,l,c,n,h,y){const u=o("FileTextOutlined"),d=o("a-input"),m=o("a-form-item"),p=o("a-col"),_=o("a-row"),f=o("a-switch"),g=o("Upload"),b=o("a-textarea"),v=o("a-typography-paragraph"),k=o("a-tab-pane"),$=o("EyeOutlined"),D=o("a-radio"),I=o("a-radio-group"),F=o("SettingOutlined"),P=o("a-select-option"),T=o("a-select"),U=o("a-radio-button"),M=o("a-tabs"),W=o("a-form"),V=o("SaveOutlined"),K=o("a-button"),q=o("a-drawer");return r(),C(q,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(K,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t(V)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(K,{onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(W,{layout:"vertical"},{default:a(()=>[t(M,{activeKey:e.activeKey,"onUpdate:activeKey":l[20]||(l[20]=L=>e.activeKey=L)},{default:a(()=>[t(k,{key:"basic_details"},{tab:a(()=>[w("span",null,[t(u),i(" "+s(e.$t("warehouse.basic_details")),1)])]),default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("warehouse.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=L=>e.formData.name=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.name")]),onKeyup:l[1]||(l[1]=L=>e.formData.slug=e.slugify(L.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("warehouse.slug"),name:"slug",help:e.rules.slug?e.rules.slug.message:null,validateStatus:e.rules.slug?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.slug,"onUpdate:value":l[2]||(l[2]=L=>e.formData.slug=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.slug")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(m,{label:e.$t("warehouse.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.email,"onUpdate:value":l[3]||(l[3]=L=>e.formData.email=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(m,{label:e.$t("warehouse.show_email_on_invoice"),name:"show_email_on_invoice",help:e.rules.show_email_on_invoice?e.rules.show_email_on_invoice.message:null,validateStatus:e.rules.show_email_on_invoice?"error":null},{default:a(()=>[t(f,{checked:e.formData.show_email_on_invoice,"onUpdate:checked":l[4]||(l[4]=L=>e.formData.show_email_on_invoice=L),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(m,{label:e.$t("warehouse.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.phone,"onUpdate:value":l[5]||(l[5]=L=>e.formData.phone=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(m,{label:e.$t("warehouse.show_phone_on_invoice"),name:"show_phone_on_invoice",help:e.rules.show_phone_on_invoice?e.rules.show_phone_on_invoice.message:null,validateStatus:e.rules.show_phone_on_invoice?"error":null},{default:a(()=>[t(f,{checked:e.formData.show_phone_on_invoice,"onUpdate:checked":l[6]||(l[6]=L=>e.formData.show_phone_on_invoice=L),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{label:e.$t("warehouse.logo"),name:"logo",help:e.rules.logo?e.rules.logo.message:null,validateStatus:e.rules.logo?"error":null},{default:a(()=>[t(g,{formData:e.formData,folder:"warehouses",imageField:"logo",onOnFileUploaded:l[7]||(l[7]=L=>{e.formData.logo=L.file,e.formData.logo_url=L.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{label:e.$t("warehouse.dark_logo"),name:"dark_logo",help:e.rules.dark_logo?e.rules.dark_logo.message:null,validateStatus:e.rules.dark_logo?"error":null},{default:a(()=>[t(g,{formData:e.formData,folder:"warehouses",imageField:"dark_logo",onOnFileUploaded:l[8]||(l[8]=L=>{e.formData.dark_logo=L.file,e.formData.dark_logo_url=L.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("warehouse.address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:a(()=>[t(b,{value:e.formData.address,"onUpdate:value":l[9]||(l[9]=L=>e.formData.address=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,null,{default:a(()=>[t(v,{type:"warning",strong:""},{default:a(()=>[w("blockquote",null,s(e.$t("warehouse.details_will_be_shown_on_invoice")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("warehouse.bank_details"),name:"bank_details",help:e.rules.bank_details?e.rules.bank_details.message:null,validateStatus:e.rules.bank_details?"error":null},{default:a(()=>[t(b,{value:e.formData.bank_details,"onUpdate:value":l[10]||(l[10]=L=>e.formData.bank_details=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.bank_details")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("warehouse.terms_condition"),name:"terms_condition",help:e.rules.terms_condition?e.rules.terms_condition.message:null,validateStatus:e.rules.terms_condition?"error":null},{default:a(()=>[t(b,{value:e.formData.terms_condition,"onUpdate:value":l[11]||(l[11]=L=>e.formData.terms_condition=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.terms_condition")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{label:e.$t("warehouse.signature"),name:"signature",help:e.rules.signature?e.rules.signature.message:null,validateStatus:e.rules.signature?"error":null},{default:a(()=>[t(g,{formData:e.formData,folder:"warehouses",imageField:"signature",onOnFileUploaded:l[12]||(l[12]=L=>{e.formData.signature=L.file,e.formData.signature_url=L.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(k,{key:"visibility"},{tab:a(()=>[w("span",null,[t($),i(" "+s(e.$t("warehouse.visibility")),1)])]),default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("warehouse.customers_visibility"),name:"customers_visibility",help:e.rules.customers_visibility?e.rules.customers_visibility.message:null,validateStatus:e.rules.customers_visibility?"error":null},{default:a(()=>[t(I,{value:e.formData.customers_visibility,"onUpdate:value":l[13]||(l[13]=L=>e.formData.customers_visibility=L)},{default:a(()=>[t(D,{style:Ve(e.radioStyle),value:"all"},{default:a(()=>[i(s(e.$t("warehouse.view_all_customers")),1)]),_:1},8,["style"]),t(D,{style:Ve(e.radioStyle),value:"warehouse"},{default:a(()=>[i(s(e.$t("warehouse.view_warehouse_customers")),1)]),_:1},8,["style"])]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("warehouse.suppliers_visibility"),name:"suppliers_visibility",help:e.rules.suppliers_visibility?e.rules.suppliers_visibility.message:null,validateStatus:e.rules.suppliers_visibility?"error":null},{default:a(()=>[t(I,{value:e.formData.suppliers_visibility,"onUpdate:value":l[14]||(l[14]=L=>e.formData.suppliers_visibility=L)},{default:a(()=>[t(D,{style:Ve(e.radioStyle),value:"all"},{default:a(()=>[i(s(e.$t("warehouse.view_all_suppliers")),1)]),_:1},8,["style"]),t(D,{style:Ve(e.radioStyle),value:"warehouse"},{default:a(()=>[i(s(e.$t("warehouse.view_warehouse_suppliers")),1)]),_:1},8,["style"])]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("warehouse.products_visibility"),name:"products_visibility",help:e.rules.products_visibility?e.rules.products_visibility.message:null,validateStatus:e.rules.products_visibility?"error":null},{default:a(()=>[t(I,{value:e.formData.products_visibility,"onUpdate:value":l[15]||(l[15]=L=>e.formData.products_visibility=L)},{default:a(()=>[t(D,{style:Ve(e.radioStyle),value:"all"},{default:a(()=>[i(s(e.$t("warehouse.view_all_products")),1)]),_:1},8,["style"]),t(D,{style:Ve(e.radioStyle),value:"warehouse"},{default:a(()=>[i(s(e.$t("warehouse.view_warehouse_products")),1)]),_:1},8,["style"])]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(k,{key:"pos_settings"},{tab:a(()=>[w("span",null,[t(F),i(" "+s(e.$t("menu.pos_settings")),1)])]),default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("warehouse.default_pos_order_status"),name:"default_pos_order_status",help:e.rules.default_pos_order_status?e.rules.default_pos_order_status.message:null,validateStatus:e.rules.default_pos_order_status?"error":null},{default:a(()=>[t(T,{value:e.formData.default_pos_order_status,"onUpdate:value":l[16]||(l[16]=L=>e.formData.default_pos_order_status=L),placeholder:e.$t("warehouse.default_pos_order_status"),style:{width:"100%"}},{default:a(()=>[(r(!0),S(O,null,G(e.salesOrderStatus,L=>(r(),C(P,{key:L.key,value:L.key},{default:a(()=>[i(s(L.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{label:e.$t("warehouse.show_mrp_on_invoice"),name:"show_mrp_on_invoice",help:e.rules.show_mrp_on_invoice?e.rules.show_mrp_on_invoice.message:null,validateStatus:e.rules.show_mrp_on_invoice?"error":null},{default:a(()=>[t(I,{value:e.formData.show_mrp_on_invoice,"onUpdate:value":l[17]||(l[17]=L=>e.formData.show_mrp_on_invoice=L),size:"small",buttonStyle:"solid"},{default:a(()=>[t(U,{value:1},{default:a(()=>[i(s(e.$t("common.yes")),1)]),_:1}),t(U,{value:0},{default:a(()=>[i(s(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{label:e.$t("warehouse.show_discount_tax_on_invoice"),name:"show_discount_tax_on_invoice",help:e.rules.show_discount_tax_on_invoice?e.rules.show_discount_tax_on_invoice.message:null,validateStatus:e.rules.show_discount_tax_on_invoice?"error":null},{default:a(()=>[t(I,{value:e.formData.show_discount_tax_on_invoice,"onUpdate:value":l[18]||(l[18]=L=>e.formData.show_discount_tax_on_invoice=L),size:"small",buttonStyle:"solid"},{default:a(()=>[t(U,{value:1},{default:a(()=>[i(s(e.$t("common.yes")),1)]),_:1}),t(U,{value:0},{default:a(()=>[i(s(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("warehouse.barcode_type"),name:"barcode_type",help:e.rules.barcode_type?e.rules.barcode_type.message:null,validateStatus:e.rules.barcode_type?"error":null,class:"required"},{default:a(()=>[t(T,{value:e.formData.barcode_type,"onUpdate:value":l[19]||(l[19]=L=>e.formData.barcode_type=L),style:{width:"100%"}},{default:a(()=>[t(P,{value:"barcode"},{default:a(()=>[i(s(e.$t("warehouse.barcode")),1)]),_:1}),t(P,{value:"qrcode"},{default:a(()=>[i(s(e.$t("warehouse.qrcode")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1},8,["title","width","open","onClose"])}const Pa=B(Si,[["render",$i]]),Di=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:Pa},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=Ia(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Ai={key:0};function Ti(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("warehouses_create")||e.permsArray.includes("admin")?(r(),S("div",Ai,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"customers"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("warehouse.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("warehouse.add"),successMessage:e.$t("warehouse.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Ft=B(Di,[["render",Ti]]),Ei=Z({props:["formData","variations","selectedUnit","showTable"],emits:["variant_added"],components:{PlusOutlined:ne,SaveOutlined:he,EditOutlined:$e,BarcodeOutlined:xt,Upload:ot,Barcode:io,InputLabelPopover:so},setup(e,{emit:l}){const{appSetting:c,formatAmountCurrency:n}=Y(),{addEditRequestAdmin:h,loading:y,rules:u}=ve(),d=E([]),m=E([]),p=E([]),_=E([]),{t:f}=te(),g=E("add"),b=E(!1),v=E({}),k=E([]),$=E([{title:f("product.image"),dataIndex:"image"},{title:f("variations.variation"),dataIndex:"variant_id"},{title:f("variations.variant_value"),dataIndex:"variant_value_id"},{title:f("product.item_code"),dataIndex:"item_code"},{title:f("product.purchase_price"),dataIndex:"purchase_price"},{title:f("product.sales_price"),dataIndex:"sales_price"},{title:f("product.mrp"),dataIndex:"mrp"},{title:f("product.opening_stock"),dataIndex:"opening_stock"},{title:f("common.action"),dataIndex:"action"}]),D=E([]);ee(()=>{axiosAdmin.get("taxes?limit=10000").then(J=>{D.value=J.data}),T(),I(e.formData.variations)});const I=J=>{var le=[];we(J,H=>{var N=[],z=[];we(H.product_variations,Q=>{N.push(Q.x_variant_id),z.push(Q.x_variant_value_id)}),le.push({unique_id:P(),image:H.image,image_url:H.image_url,variant_id:N,variant_value_id:z,xid:H.xid,item_code:H.item_code,tax_id:H.details.x_tax_id,purchase_price:H.details.purchase_price,purchase_tax_type:H.details.purchase_tax_type,sales_price:H.details.sales_price,sales_tax_type:H.details.sales_tax_type,mrp:H.details.mrp,opening_stock:H.details.opening_stock,opening_stock_date:H.details.opening_stock_date,stock_quantitiy_alert:H.details.stock_quantitiy_alert})}),k.value=le,l("variant_added",k.value)},F=J=>{k.value=J},P=()=>Math.random().toString(36).slice(2),T=()=>{var J=[];we(e.variations,le=>{le.x_parent_id==null&&J.push(le)}),p.value=J},U=(J,le)=>{_.value=[];var H=[],N=[];we(e.variations,z=>{if(et(J,z.xid)&&z.sub_variations.length>0){var Q=[];we(z.sub_variations,j=>{Q.push({label:j.name,value:j.xid,parentId:z.xid}),et(m.value,j.xid)&&N.push(j.xid)}),H.push({label:z.name,value:z.xid,parentId:void 0,children:Q,disabled:!1})}}),m.value=N,_.value=H},M=J=>{const le=Qe(e.variations,["xid",J]);return le?le.name:"-"},W=()=>{v.value={unique_id:P(),image:void 0,image_url:void 0,variant_id:d.value,variant_value_id:m.value,xid:"",item_code:"",purchase_price:"",purchase_tax_type:"exclusive",sales_price:"",sales_tax_type:"exclusive",mrp:"",opening_stock:0,tax_id:void 0,opening_stock_date:void 0,stock_quantitiy_alert:null},b.value=!0},V=J=>{console.log(J),v.value={unique_id:J.unique_id,image:J.image,image_url:J.image_url,variant_id:J.x_variant_id?J.x_variant_id:J.variant_id,variant_value_id:J.x_variant_value_id?J.x_variant_value_id:J.variant_value_id,xid:J.xid,item_code:J.item_code,purchase_price:J.purchase_price,purchase_tax_type:J.purchase_tax_type,sales_price:J.sales_price,sales_tax_type:J.sales_tax_type,mrp:J.mrp,opening_stock:J.opening_stock,tax_id:J.tax_id,opening_stock_date:J.opening_stock_date,stock_quantitiy_alert:J.stock_quantitiy_alert},g.value="edit",b.value=!0},K=()=>{h({url:"/products/check-variants",data:v.value,success:J=>{ht(k.value,["unique_id",v.value.unique_id])?k.value=_l(k.value,le=>le.unique_id==v.value.unique_id?v.value:le):k.value=[{...v.value},...k.value],l("variant_added",k.value),d.value=[],m.value=[],b.value=!1}})},q=()=>{u.value={},b.value=!1};me(()=>e.showTable,(J,le)=>{I(J.formData.variations)});const L=(J,le)=>{var H=Qe(e.variations,["xid",le.parentId]),N=[];we(m.value,z=>{var Q=Qe(H.sub_variations,{xid:z});Q==null&&N.push(z)}),N.push(J),m.value=N},X=(J,le)=>{m.value=Xe(m.value,H=>H!=J)};return{appSetting:c,formatAmountCurrency:n,variantId:d,variantValueId:m,varaitionTypes:p,varaitionTypeValues:_,getValueByVariation:U,addNewVariant:W,addEditType:g,addEditForm:v,visible:b,onSubmit:K,onClose:q,variantTableData:k,variantTableColumns:$,generateRandomTableKey:P,getVariantNameById:M,editItem:V,rules:u,loading:y,modalWidth:window.innerWidth<=991?"90%":"35%",variantValueSelected:L,variantValueDeselected:X,setVariantTableData:I,setDirectVariantTableData:F,taxes:D}}}),Oi={key:1},Ii={key:2};function Pi(e,l,c,n,h,y){const u=o("a-select-option"),d=o("a-select"),m=o("a-col"),p=o("PlusOutlined"),_=o("a-button"),f=o("a-row"),g=o("a-avatar"),b=o("a-badge"),v=o("EditOutlined"),k=o("a-table"),$=o("Upload"),D=o("a-form-item"),I=o("BarcodeOutlined"),F=o("Barcode"),P=o("a-input"),T=o("InputLabelPopover"),U=o("a-input-number"),M=o("a-date-picker"),W=o("a-form"),V=o("SaveOutlined"),K=o("a-modal");return r(),S(O,null,[e.formData.product_type=="variable"?(r(),C(f,{key:0,gutter:16,style:{"margin-bottom":"20px"}},{default:a(()=>[t(m,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(d,{value:e.variantId,"onUpdate:value":l[0]||(l[0]=q=>e.variantId=q),placeholder:e.$t("common.select_default_text",[e.$t("variations.variation")]),onChange:e.getValueByVariation,style:{width:"100%"},allowClear:!1,mode:"multiple"},{default:a(()=>[(r(!0),S(O,null,G(e.varaitionTypes,q=>(r(),C(u,{key:q.xid,value:q.xid},{default:a(()=>[i(s(q.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(m,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(d,{value:e.variantValueId,placeholder:e.$t("common.select_default_text",[e.$t("variations.variant_value")]),allowClear:!1,style:{width:"100%"},disabled:e.variantId==null,options:e.varaitionTypeValues,mode:"multiple","field-names":{label:"label",value:"value",parentId:"parentId",options:"children"},onSelect:e.variantValueSelected,onDeselect:e.variantValueDeselected},null,8,["value","placeholder","disabled","options","onSelect","onDeselect"])]),_:1}),t(m,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(_,{type:"primary",onClick:e.addNewVariant,disabled:e.variantValueId.length<=0},{icon:a(()=>[t(p)]),default:a(()=>[i(s(e.$t("variations.add"))+" ",1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})):A("",!0),e.formData.product_type=="variable"?(r(),C(k,{key:1,dataSource:e.variantTableData,columns:e.variantTableColumns,"row-key":q=>q.xid&&q.xid!=""?q.xid:e.generateRandomTableKey(),size:"middle",pagination:!1,class:"mb-20"},{bodyCell:a(({column:q,text:L,record:X})=>[q.dataIndex==="image"?(r(),C(b,{key:0},{default:a(()=>[t(g,{shape:"square",src:X.image_url},null,8,["src"])]),_:2},1024)):A("",!0),q.dataIndex==="variant_id"?(r(),S("ul",Oi,[(r(!0),S(O,null,G(X.variant_id,J=>(r(),S("li",{key:J},s(e.getVariantNameById(J)),1))),128))])):A("",!0),q.dataIndex==="variant_value_id"?(r(),S("ul",Ii,[(r(!0),S(O,null,G(X.variant_value_id,J=>(r(),S("li",{key:J},s(e.getVariantNameById(J)),1))),128))])):A("",!0),q.dataIndex==="purchase_price"&&X&&X.purchase_price?(r(),S(O,{key:3},[i(s(e.formatAmountCurrency(X.purchase_price)),1)],64)):A("",!0),q.dataIndex==="sales_price"&&X&&X.sales_price?(r(),S(O,{key:4},[i(s(e.formatAmountCurrency(X.sales_price)),1)],64)):A("",!0),q.dataIndex==="mrp"&&X&&X.mrp?(r(),S(O,{key:5},[i(s(e.formatAmountCurrency(X.mrp)),1)],64)):A("",!0),q.dataIndex==="action"?(r(),C(_,{key:6,type:"primary",onClick:J=>e.editItem(X)},{icon:a(()=>[t(v)]),_:2},1032,["onClick"])):A("",!0)]),_:1},8,["dataSource","columns","row-key"])):A("",!0),t(K,{open:e.visible,closable:!1,centered:!0,title:e.addEditType=="add"?e.$t("variations.add"):e.$t("variations.edit"),onOk:e.onSubmit,width:e.modalWidth},{footer:a(()=>[t(_,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(V)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(_,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(W,{layout:"vertical"},{default:a(()=>[t(f,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(D,{label:e.$t("product.image"),name:"image"},{default:a(()=>[t($,{formData:e.addEditForm,folder:"product",onOnFileUploaded:l[1]||(l[1]=q=>{e.addEditForm.image=q.file,e.addEditForm.image_url=q.file_url})},null,8,["formData"])]),_:1},8,["label"])]),_:1}),t(m,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(f,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(D,{label:e.$t("product.item_code"),name:"item_code",help:e.rules.item_code?e.rules.item_code.message:null,validateStatus:e.rules.item_code?"error":null,class:"required"},{default:a(()=>[t(P,{value:e.addEditForm.item_code,"onUpdate:value":l[3]||(l[3]=q=>e.addEditForm.item_code=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.item_code")])},{addonAfter:a(()=>[e.addEditForm.item_code==""?(r(),C(_,{key:0,type:"text",size:"small",onClick:l[2]||(l[2]=()=>{e.addEditForm.item_code=parseInt(Math.random()*1e10)})},{icon:a(()=>[t(I)]),default:a(()=>[i(" "+s(e.$t("product.generate_barcode")),1)]),_:1})):(r(),C(F,{key:1,itemCode:e.addEditForm.item_code,barcodeSymbology:e.formData.barcode_symbology},null,8,["itemCode","barcodeSymbology"]))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{name:"stock_quantitiy_alert"},{label:a(()=>[t(T,{label:e.$t("product.quantitiy_alert"),content:e.$t("popover.quantitiy_alert")},null,8,["label","content"])]),default:a(()=>[t(U,{value:e.addEditForm.stock_quantitiy_alert,"onUpdate:value":l[4]||(l[4]=q=>e.addEditForm.stock_quantitiy_alert=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.quantitiy_alert")]),min:"0",style:{width:"100%"}},null,8,["value","placeholder"])]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("product.mrp"),name:"mrp"},{default:a(()=>[t(U,{value:e.addEditForm.mrp,"onUpdate:value":l[5]||(l[5]=q=>e.addEditForm.mrp=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.mrp")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(D,{label:e.$t("product.tax"),name:"tax_id",help:e.rules.tax_id?e.rules.tax_id.message:null,validateStatus:e.rules.tax_id?"error":null},{default:a(()=>[t(d,{value:e.addEditForm.tax_id,"onUpdate:value":l[6]||(l[6]=q=>e.addEditForm.tax_id=q),placeholder:e.$t("common.select_default_text",[e.$t("product.tax")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(e.taxes,q=>(r(),C(u,{key:q.xid,value:q.xid},{default:a(()=>[i(s(q.name)+" ("+s(q.rate)+"%) ",1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("product.purchase_price"),name:"purchase_price",help:e.rules.purchase_price?e.rules.purchase_price.message:null,validateStatus:e.rules.purchase_price?"error":null,class:"required"},{default:a(()=>[t(U,{value:e.addEditForm.purchase_price,"onUpdate:value":l[8]||(l[8]=q=>e.addEditForm.purchase_price=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.purchase_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(d,{value:e.addEditForm.purchase_tax_type,"onUpdate:value":l[7]||(l[7]=q=>e.addEditForm.purchase_tax_type=q),style:{width:"100px"}},{default:a(()=>[t(u,{value:"inclusive"},{default:a(()=>[i(s(e.$t("common.with_tax")),1)]),_:1}),t(u,{value:"exclusive"},{default:a(()=>[i(s(e.$t("common.without_tax")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("product.sales_price"),name:"sales_price",help:e.rules.sales_price?e.rules.sales_price.message:null,validateStatus:e.rules.sales_price?"error":null,class:"required"},{default:a(()=>[t(U,{value:e.addEditForm.sales_price,"onUpdate:value":l[10]||(l[10]=q=>e.addEditForm.sales_price=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.sales_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(d,{value:e.addEditForm.sales_tax_type,"onUpdate:value":l[9]||(l[9]=q=>e.addEditForm.sales_tax_type=q),style:{width:"100px"}},{default:a(()=>[t(u,{value:"inclusive"},{default:a(()=>[i(s(e.$t("common.with_tax")),1)]),_:1}),t(u,{value:"exclusive"},{default:a(()=>[i(s(e.$t("common.without_tax")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("product.opening_stock"),name:"opening_stock",class:"required"},{default:a(()=>[t(U,{value:e.addEditForm.opening_stock,"onUpdate:value":l[11]||(l[11]=q=>e.addEditForm.opening_stock=q),placeholder:"0",style:{width:"100%"}},{addonAfter:a(()=>[i(s(e.selectedUnit&&e.selectedUnit.short_name?e.selectedUnit.short_name:""),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("product.opening_stock_date"),name:"opening_stock_date"},{default:a(()=>[t(M,{value:e.addEditForm.opening_stock_date,"onUpdate:value":l[12]||(l[12]=q=>e.addEditForm.opening_stock_date=q),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD",style:{width:"100%"}},null,8,["value","format"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk","width"])],64)}const Ui=B(Ei,[["render",Pi]]),Fi=Z({components:{StreamBarcodeReader:fl,CameraOutlined:gl},emits:["closed"],setup(e,{emit:l}){const c=E(!1);return{visible:c,openModal:()=>{c.value=!0},onLoaded:()=>{console.log("load")},onDecode:d=>{c.value=!1,l("closed",d)},closeModal:()=>{c.value=!1},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function qi(e,l,c,n,h,y){const u=o("CameraOutlined"),d=o("a-button"),m=o("StreamBarcodeReader"),p=o("a-col"),_=o("a-row"),f=o("a-form"),g=o("a-modal");return r(),S(O,null,[t(d,{type:"text",onClick:e.openModal},{icon:a(()=>[t(u)]),_:1},8,["onClick"]),t(g,{open:e.visible,closable:!1,destroyOnClose:!0,centered:!0,title:"BarCodeScanner"},{footer:a(()=>[t(d,{key:"back",onClick:e.closeModal},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{onDecode:e.onDecode,onLoaded:e.onLoaded},null,8,["onDecode","onLoaded"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64)}const Mi=B(Fi,[["render",qi]]);const Ri=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,Upload:ot,UserInfo:He,FormItemHeading:aa,InputLabelPopover:so,BarcodeOutlined:xt,Barcode:io,BrandAddButton:ri,CategoryAddButton:mi,UnitAddButton:yi,TaxAddButton:Oa,WarehouseAddButton:Ft,AddEditVariant:Ui,BarCodeScan:Mi},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{permsArray:y,taxTypes:u,barcodeSymbology:d,appSetting:m,slugify:p,selectedWarehouse:_}=Y();te();const f=E([]),g=E([]),b=E([]),v=E([]),k=E([]),$=E([]),D=E({}),I=E({});Ce();const F="brands?limit=10000",P="categories?limit=10000",T="units?limit=10000",U="taxes?limit=10000",M="custom-fields?limit=10000",W="warehouses?limit=10000",V=E(void 0),K=E(null),q=E([]),L="variations?fields=id,xid,parent_id,x_parent_id,name,subVariations{id,xid,parent_id,x_parent_id,name}&limit=10000";ee(()=>{at.suppressDeprecationWarnings=!0;const re=axiosAdmin.get(F),be=axiosAdmin.get(P),ie=axiosAdmin.get(T),_e=axiosAdmin.get(U),Ue=axiosAdmin.get(M),Je=axiosAdmin.get(W),ut=axiosAdmin.get(L);Promise.all([re,be,ie,_e,Ue,Je,ut]).then(([ft,se,ce,De,Pe,x,ye])=>{f.value=ft.data,b.value=ce.data,v.value=De.data,k.value=Pe.data,$.value=x.data,q.value=ye.data,I.value=Qe(b.value,["xid",e.formData.unit_id]),X(se.data)})});const X=re=>{const be=[],ie=[];re.map(_e=>{ie.push({xid:_e.xid,x_parent_id:_e.x_parent_id,title:_e.name,value:_e.xid,disabled:!1})}),ie.forEach(_e=>{if(!_e.x_parent_id)return be.push(_e);const Ue=ie.findIndex(Je=>Je.xid===_e.x_parent_id);if(!ie[Ue].children)return ie[Ue].children=[_e];ie[Ue].children.push(_e)}),g.value=be},J=re=>re&&re>at().endOf("day"),le=()=>{e.formData.item_code=parseInt(Math.random()*1e10)},H=re=>{e.formData.item_code=re},N=(re="add-edit")=>{const be={...e.formData,tax_id:e.formData.tax_id==null?"":e.formData.tax_id,custom_fields:D.value,warehouse_id:V.value};c({url:e.url,data:be,successMessage:e.successMessage,success:ie=>{if(re=="add-new")l("addAndNewSuccess",ie.xid),ue();else if(re=="add-continue"){l("addAndContinueSuccess",ie.xid),e.formData.slug=p(e.formData.name),le();var _e=[],Ue=e.formData.variations;we(Ue,Je=>{_e.push({...Je,item_code:parseInt(Math.random()*1e10),unique_id:Math.random().toString(36).slice(2)})}),e.formData.variations=_e,K.value.setDirectVariantTableData(_e)}else l("addEditSuccess",ie.xid)}})},z=()=>{h.value={},l("closed")},Q=()=>{axiosAdmin.get(F).then(re=>{f.value=re.data})},j=()=>{axiosAdmin.get(P).then(re=>{X(re.data)})},oe=()=>{axiosAdmin.get(T).then(re=>{b.value=re.data})},R=()=>{axiosAdmin.get(U).then(re=>{v.value=re.data})},ae=()=>{axiosAdmin.get(W).then(re=>{$.value=re.data})},ue=()=>{var re={};we(k.value,be=>{if(e.addEditType=="add"||e.formData.custom_fields.length==0)re[be.name]="";else{var ie=Qe(e.formData.custom_fields,["field_name",be.name]);re[be.name]=ie===void 0?"":ie.field_value}}),D.value={...re},I.value=Qe(b.value,["xid",e.formData.unit_id]),V.value=e.addEditType=="add"?_.value.xid:e.data.warehouse&&e.data.warehouse.xid?e.data.warehouse.xid:void 0};return me(()=>e.visible,(re,be)=>{re==!0&&ue()}),{loading:n,rules:h,onClose:z,onSubmit:N,disabledDate:J,brands:f,categories:g,taxes:v,units:b,warehouses:$,selectedWarehouse:_,slugify:p,generateBarCode:le,drawerWidth:window.innerWidth<=991?"90%":"70%",appSetting:m,customFields:k,customFieldsData:D,taxTypes:u,barcodeSymbology:d,selectedUnit:I,brandAdded:Q,categoryAdded:j,unitAdded:oe,taxAdded:R,warehouseAdded:ae,permsArray:y,waehouseId:V,variations:q,variableTypeTable:K,storeScanCode:H}}}),Ki={key:0,style:{display:"flex"}},Vi={key:1},zi={style:{display:"flex"}},Li={style:{display:"flex"}},Bi={style:{display:"flex"}},Wi={style:{display:"flex"}};function ji(e,l,c,n,h,y){const u=o("a-select-option"),d=o("a-select"),m=o("a-form-item"),p=o("a-col"),_=o("a-row"),f=o("Upload"),g=o("WarehouseAddButton"),b=o("a-input"),v=o("a-tree-select"),k=o("CategoryAddButton"),$=o("BrandAddButton"),D=o("UnitAddButton"),I=o("InputLabelPopover"),F=o("a-input-number"),P=o("BarcodeOutlined"),T=o("a-button"),U=o("Barcode"),M=o("a-space"),W=o("BarCodeScan"),V=o("form-item-heading"),K=o("TaxAddButton"),q=o("a-date-picker"),L=o("a-alert"),X=o("AddEditVariant"),J=o("a-textarea"),le=o("a-form"),H=o("SaveOutlined"),N=o("a-drawer");return r(),C(N,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(T,{type:"primary",loading:e.loading,onClick:e.onSubmit,style:{"margin-right":"8px"}},{icon:a(()=>[t(H)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),e.addEditType=="add"?(r(),C(T,{key:0,type:"primary",loading:e.loading,onClick:l[23]||(l[23]=z=>e.onSubmit("add-continue")),style:{"margin-right":"8px"}},{icon:a(()=>[t(H)]),default:a(()=>[i(" "+s(e.$t("common.save_and_continue")),1)]),_:1},8,["loading"])):A("",!0),t(T,{onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(le,{layout:"vertical"},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("product.product_type"),name:"product_type",help:e.rules.product_type?e.rules.product_type.message:null,validateStatus:e.rules.product_type?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.product_type,"onUpdate:value":l[0]||(l[0]=z=>e.formData.product_type=z),style:{width:"100%"},disabled:e.addEditType=="edit"},{default:a(()=>[t(u,{value:"single"},{default:a(()=>[i(s(e.$t("variations.single_type_product")),1)]),_:1}),t(u,{value:"variable"},{default:a(()=>[i(s(e.$t("variations.variant_type_product")),1)]),_:1})]),_:1},8,["value","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{label:e.$t("product.image"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:a(()=>[t(f,{formData:e.formData,folder:"product",onOnFileUploaded:l[1]||(l[1]=z=>{e.formData.image=z.file,e.formData.image_url=z.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(p,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{name:"warehouse_id",help:e.rules.warehouse_id?e.rules.warehouse_id.message:null,validateStatus:e.rules.warehouse_id?"error":null,class:"required"},{label:a(()=>[i(s(e.$t("warehouse.warehouse")),1)]),default:a(()=>[e.permsArray.includes("admin")?(r(),S("span",Ki,[t(d,{value:e.waehouseId,"onUpdate:value":l[2]||(l[2]=z=>e.waehouseId=z),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")])},{default:a(()=>[(r(!0),S(O,null,G(e.warehouses,z=>(r(),C(u,{key:z.xid,value:z.xid},{default:a(()=>[i(s(z.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(g,{onOnAddSuccess:e.warehouseAdded},null,8,["onOnAddSuccess"])])):(r(),S("span",Vi,[t(d,{value:e.selectedWarehouse.xid,placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),disabled:""},{default:a(()=>[t(u,{value:e.selectedWarehouse.xid},{default:a(()=>[i(s(e.selectedWarehouse.name),1)]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]))]),_:1},8,["help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("product.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(b,{value:e.formData.name,"onUpdate:value":l[3]||(l[3]=z=>e.formData.name=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.name")]),onKeyup:l[4]||(l[4]=z=>e.formData.slug=e.slugify(z.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("product.slug"),name:"slug",help:e.rules.slug?e.rules.slug.message:null,validateStatus:e.rules.slug?"error":null,class:"required"},{default:a(()=>[t(b,{value:e.formData.slug,"onUpdate:value":l[5]||(l[5]=z=>e.formData.slug=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.slug")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("product.category"),name:"category_id",help:e.rules.category_id?e.rules.category_id.message:null,validateStatus:e.rules.category_id?"error":null,class:"required"},{default:a(()=>[w("span",zi,[(r(),C(v,{key:"categories_total"+e.categories.length,value:e.formData.category_id,"onUpdate:value":l[6]||(l[6]=z=>e.formData.category_id=z),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"250px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("product.category")]),treeData:e.categories,"allow-clear":"","tree-default-expand-all":""},null,8,["value","placeholder","treeData"])),t(k,{onOnAddSuccess:e.categoryAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("product.brand"),name:"brand_id",help:e.rules.brand_id?e.rules.brand_id.message:null,validateStatus:e.rules.brand_id?"error":null},{default:a(()=>[w("span",Li,[t(d,{value:e.formData.brand_id,"onUpdate:value":l[7]||(l[7]=z=>e.formData.brand_id=z),placeholder:e.$t("common.select_default_text",[e.$t("product.brand")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(e.brands,z=>(r(),C(u,{key:z.xid,title:z.name,value:z.xid},{default:a(()=>[i(s(z.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"]),t($,{onOnAddSuccess:e.brandAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:e.formData.product_type=="single"?12:24,lg:e.formData.product_type=="single"?12:24},{default:a(()=>[t(m,{label:e.$t("product.unit"),name:"unit_id",help:e.rules.unit_id?e.rules.unit_id.message:null,validateStatus:e.rules.unit_id?"error":null,class:"required"},{default:a(()=>[w("span",Bi,[t(d,{value:e.formData.unit_id,"onUpdate:value":l[8]||(l[8]=z=>e.formData.unit_id=z),placeholder:e.$t("common.select_default_text",[e.$t("product.unit")]),allowClear:!0,onChange:l[9]||(l[9]=(z,Q)=>e.selectedUnit=Q)},{default:a(()=>[(r(!0),S(O,null,G(e.units,z=>(r(),C(u,{key:z.xid,value:z.xid,short_name:z.short_name},{default:a(()=>[i(s(z.name)+" ("+s(z.short_name)+") ",1)]),_:2},1032,["value","short_name"]))),128))]),_:1},8,["value","placeholder"]),t(D,{onOnAddSuccess:e.unitAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"]),e.formData.product_type=="single"?(r(),C(p,{key:0,xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{name:"stock_quantitiy_alert",help:e.rules.stock_quantitiy_alert?e.rules.stock_quantitiy_alert.message:null,validateStatus:e.rules.stock_quantitiy_alert?"error":null},{label:a(()=>[t(I,{label:e.$t("product.quantitiy_alert"),content:e.$t("popover.quantitiy_alert")},null,8,["label","content"])]),default:a(()=>[t(F,{value:e.formData.stock_quantitiy_alert,"onUpdate:value":l[10]||(l[10]=z=>e.formData.stock_quantitiy_alert=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.quantitiy_alert")]),min:"0",style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["help","validateStatus"])]),_:1})):A("",!0)]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(m,{label:e.$t("product.barcode_symbology"),name:"barcode_symbology",help:e.rules.barcode_symbology?e.rules.barcode_symbology.message:null,validateStatus:e.rules.barcode_symbology?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.barcode_symbology,"onUpdate:value":l[11]||(l[11]=z=>e.formData.barcode_symbology=z),placeholder:e.$t("common.select_default_text",[e.$t("product.barcode_symbology")])},{default:a(()=>[(r(!0),S(O,null,G(e.barcodeSymbology,z=>(r(),C(u,{key:z.key,value:z.value},{default:a(()=>[i(s(z.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(m,{label:e.$t("product.item_code"),name:"item_code",help:e.rules.item_code?e.rules.item_code.message:null,validateStatus:e.rules.item_code?"error":null,class:"required"},{default:a(()=>[t(b,{value:e.formData.item_code,"onUpdate:value":l[12]||(l[12]=z=>e.formData.item_code=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.item_code")])},{addonAfter:a(()=>[t(M,null,{default:a(()=>[e.formData.item_code==""?(r(),C(T,{key:0,type:"text",size:"small",onClick:e.generateBarCode},{icon:a(()=>[t(P)]),_:1},8,["onClick"])):(r(),C(U,{key:1,itemCode:e.formData.item_code,barcodeSymbology:e.formData.barcode_symbology},null,8,["itemCode","barcodeSymbology"]))]),_:1}),t(W,{onClosed:e.storeScanCode},null,8,["onClosed"])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),t(V,null,{default:a(()=>[i(s(e.formData.product_type=="single"?e.$t("product.price_tax"):e.$t("product.variant_details")),1)]),_:1}),e.formData.product_type=="single"?(r(),C(_,{key:0,gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(m,{label:e.$t("product.tax"),name:"tax_id",help:e.rules.tax_id?e.rules.tax_id.message:null,validateStatus:e.rules.tax_id?"error":null},{default:a(()=>[w("span",Wi,[t(d,{value:e.formData.tax_id,"onUpdate:value":l[13]||(l[13]=z=>e.formData.tax_id=z),placeholder:e.$t("common.select_default_text",[e.$t("product.tax")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(e.taxes,z=>(r(),C(u,{key:z.xid,value:z.xid},{default:a(()=>[i(s(z.name)+" ("+s(z.rate)+"%) ",1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(K,{onOnAddSuccess:e.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(m,{label:e.$t("product.opening_stock"),name:"opening_stock",help:e.rules.opening_stock?e.rules.opening_stock.message:null,validateStatus:e.rules.opening_stock?"error":null},{default:a(()=>[t(b,{value:e.formData.opening_stock,"onUpdate:value":l[14]||(l[14]=z=>e.formData.opening_stock=z),placeholder:"0"},{addonAfter:a(()=>[i(s(e.selectedUnit&&e.selectedUnit.short_name?e.selectedUnit.short_name:""),1)]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(m,{label:e.$t("product.opening_stock_date"),name:"opening_stock_date",help:e.rules.opening_stock_date?e.rules.opening_stock_date.message:null,validateStatus:e.rules.opening_stock_date?"error":null},{default:a(()=>[t(q,{value:e.formData.opening_stock_date,"onUpdate:value":l[15]||(l[15]=z=>e.formData.opening_stock_date=z),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD",style:{width:"100%"}},null,8,["value","format"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),e.formData.product_type=="single"?(r(),C(_,{key:1,gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(m,{label:e.$t("product.purchase_price"),name:"purchase_price",help:e.rules.purchase_price?e.rules.purchase_price.message:null,validateStatus:e.rules.purchase_price?"error":null},{default:a(()=>[t(F,{value:e.formData.purchase_price,"onUpdate:value":l[17]||(l[17]=z=>e.formData.purchase_price=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.purchase_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(d,{value:e.formData.purchase_tax_type,"onUpdate:value":l[16]||(l[16]=z=>e.formData.purchase_tax_type=z),style:{width:"120px"}},{default:a(()=>[t(u,{value:"inclusive"},{default:a(()=>[i(s(e.$t("common.with_tax")),1)]),_:1}),t(u,{value:"exclusive"},{default:a(()=>[i(s(e.$t("common.without_tax")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(m,{label:e.$t("product.sales_price"),name:"sales_price",help:e.rules.sales_price?e.rules.sales_price.message:null,validateStatus:e.rules.sales_price?"error":null,class:"required"},{default:a(()=>[t(F,{value:e.formData.sales_price,"onUpdate:value":l[19]||(l[19]=z=>e.formData.sales_price=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.sales_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(d,{value:e.formData.sales_tax_type,"onUpdate:value":l[18]||(l[18]=z=>e.formData.sales_tax_type=z),style:{width:"120px"}},{default:a(()=>[t(u,{value:"inclusive"},{default:a(()=>[i(s(e.$t("common.with_tax")),1)]),_:1}),t(u,{value:"exclusive"},{default:a(()=>[i(s(e.$t("common.without_tax")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(m,{label:e.$t("product.mrp"),name:"mrp",help:e.rules.mrp?e.rules.mrp.message:null,validateStatus:e.rules.mrp?"error":null},{default:a(()=>[t(F,{value:e.formData.mrp,"onUpdate:value":l[20]||(l[20]=z=>e.formData.mrp=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.mrp")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),e.formData.product_type=="variable"?(r(),S(O,{key:2},[t(L,{message:e.$t("variations.add_variation_message"),type:"info","show-icon":"",class:"mb-20"},null,8,["message"]),t(X,{ref:"variableTypeTable",showTable:e.formData.product_type!="single",formData:e.formData,variations:e.variations,selectedUnit:e.selectedUnit,onVariant_added:l[21]||(l[21]=z=>e.formData.variations=z)},null,8,["showTable","formData","variations","selectedUnit"])],64)):A("",!0),t(V,null,{default:a(()=>[i(s(e.$t("product.custom_fields")),1)]),_:1}),t(_,{gutter:16},{default:a(()=>[(r(!0),S(O,null,G(e.customFields,z=>(r(),C(p,{xs:24,sm:24,md:6,lg:6,key:z.xid},{default:a(()=>[t(m,{label:z.name,name:z.name},{default:a(()=>[t(b,{value:e.customFieldsData[z.name],"onUpdate:value":Q=>e.customFieldsData[z.name]=Q,placeholder:z.name},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","name"])]),_:2},1024))),128))]),_:1}),t(_,null,{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("product.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:a(()=>[t(J,{value:e.formData.description,"onUpdate:value":l[22]||(l[22]=z=>e.formData.description=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const _o=B(Ri,[["render",ji]]),fo=()=>{const{t:e}=te(),l=["product_id"],c=["product_id"],n=[{title:e("stock.order_date"),dataIndex:"order_date"},{title:e("stock.order_type"),dataIndex:"order_type"},{title:e("product.quantity"),dataIndex:"quantity"},{title:e("product.unit_price"),dataIndex:"single_unit_price"},{title:e("product.discount"),dataIndex:"total_discount"},{title:e("product.tax"),dataIndex:"total_tax"},{title:e("product.subtotal"),dataIndex:"subtotal"}],h=[{title:e("common.date"),dataIndex:"created_at"},{title:e("stock.order_type"),dataIndex:"order_type"},{title:e("product.quantity"),dataIndex:"quantity"},{title:e("product.stocks"),dataIndex:"stock_type"},{title:e("stock.remarks"),dataIndex:"action_type"}];return{productOrderColumns:n,stockHistoryColumns:h,stockHistoryHashableColumns:l,orderItemsHashableColumns:c}},Hi=Z({props:["product"],setup(e){const{stockHistoryColumns:l,stockHistoryHashableColumns:c}=fo(),{formatDate:n,formatDateTime:h,formatAmountCurrency:y,getOrderTypeFromstring:u}=Y(),d=je();return ee(()=>{d.tableUrl.value={url:"stock-history?fields=id,xid,created_at,order_type,quantity,stock_type,action_type",filters:{product_id:e.product.xid}},d.hashable.value=[...c],d.fetch({page:1})}),{stockHistoryColumns:l,...d,formatDate:n,formatDateTime:h,formatAmountCurrency:y,getOrderTypeFromstring:u}}}),Ni={key:0,class:"table-responsive"};function Yi(e,l,c,n,h,y){const u=o("a-table"),d=o("a-col"),m=o("a-row");return r(),C(m,null,{default:a(()=>[t(d,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),S("div",Ni,[t(u,{columns:e.stockHistoryColumns,"row-key":p=>p.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:p,record:_})=>[p.dataIndex==="created_at"?(r(),S(O,{key:0},[i(s(e.formatDateTime(_.created_at)),1)],64)):A("",!0),p.dataIndex==="order_type"?(r(),S(O,{key:1},[i(s(e.getOrderTypeFromstring(_.order_type)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const Gi=B(Hi,[["render",Yi]]),Ji=Z({props:["product"],setup(e){const{productOrderColumns:l,orderItemsHashableColumns:c}=fo(),{formatDate:n,formatDateTime:h,formatAmountCurrency:y,getOrderTypeFromstring:u}=Y(),d=je();return ee(()=>{d.tableUrl.value={url:"order-items?fields=id,xid,quantity,single_unit_price,unit_price,total_discount,discount_rate,total_tax,tax_rate,subtotal,order_id,x_order_id,order{id,xid,order_type,order_date},unit_id,x_unit_id,unit{id,xid,short_name},product_id,x_product_id,product{id,xid,unit_id,x_unit_id},product:unit{id,xid,short_name}",filters:{product_id:e.product.xid}},d.hashable.value=[...c],d.table.sorter={field:"orders.order_date",order:"asc"},d.fetch({page:1})}),{productOrderColumns:l,orderItemsHashableColumns:c,...d,formatDate:n,formatDateTime:h,formatAmountCurrency:y,getOrderTypeFromstring:u}}}),Qi={key:0,class:"table-responsive"};function Xi(e,l,c,n,h,y){const u=o("a-table"),d=o("a-col"),m=o("a-row");return r(),C(m,null,{default:a(()=>[t(d,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),S("div",Qi,[t(u,{columns:e.productOrderColumns,"row-key":p=>p.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:p,record:_})=>[p.dataIndex==="order_type"?(r(),S(O,{key:0},[i(s(e.getOrderTypeFromstring(_.order.order_type)),1)],64)):A("",!0),p.dataIndex==="order_date"?(r(),S(O,{key:1},[i(s(e.formatDateTime(_.order.order_date)),1)],64)):A("",!0),p.dataIndex==="quantity"?(r(),S(O,{key:2},[i(s(_.quantity)+" "+s(_.product&&_.product.unit&&_.product.unit.short_name?_.product.unit.short_name:""),1)],64)):A("",!0),p.dataIndex==="single_unit_price"?(r(),S(O,{key:3},[i(s(e.formatAmountCurrency(_.single_unit_price)),1)],64)):A("",!0),p.dataIndex==="total_discount"?(r(),S(O,{key:4},[i(s(e.formatAmountCurrency(_.total_discount))+" ("+s(_.discount_rate)+"%) ",1)],64)):A("",!0),p.dataIndex==="total_tax"?(r(),S(O,{key:5},[i(s(e.formatAmountCurrency(_.total_tax))+" ("+s(_.tax_rate)+"%) ",1)],64)):A("",!0),p.dataIndex==="subtotal"?(r(),S(O,{key:6},[i(s(e.formatAmountCurrency(_.subtotal)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const Zi=B(Ji,[["render",Xi]]),xi=Z({props:["product"],components:{StockHistory:Gi,ProductOrderItems:Zi},setup(){return{activeKey:E("product_order_items")}}});function eu(e,l,c,n,h,y){const u=o("ProductOrderItems"),d=o("a-tab-pane"),m=o("StockHistory"),p=o("a-tabs");return r(),C(p,{activeKey:e.activeKey,"onUpdate:activeKey":l[0]||(l[0]=_=>e.activeKey=_)},{default:a(()=>[t(d,{key:"product_order_items",tab:e.$t("product.product_orders")},{default:a(()=>[t(u,{product:e.product},null,8,["product"])]),_:1},8,["tab"]),t(d,{key:"stock_history",tab:e.$t("product.stock_history")},{default:a(()=>[t(m,{product:e.product},null,8,["product"])]),_:1},8,["tab"])]),_:1},8,["activeKey"])}const tu=B(xi,[["render",eu]]);const au=Z({props:["product","visible"],emits:["closed"],components:{ProductDetails:tu},setup(e,{emit:l}){const{formatAmountCurrency:c}=Y(),{t:n}=te(),h=E([{title:n("variations.variation"),dataIndex:"variant_id"},{title:n("product.item_code"),dataIndex:"item_code"},{title:n("product.purchase_price"),dataIndex:"purchase_price"},{title:n("product.sales_price"),dataIndex:"sales_price"},{title:n("product.mrp"),dataIndex:"mrp"}]);return{formatAmountCurrency:c,onClose:()=>{l("closed")},variantTableColumns:h,drawerWidth:window.innerWidth<=991?"90%":"60%"}}}),nu={class:"product-details"},ou=["innerHTML"];function lu(e,l,c,n,h,y){const u=o("a-image"),d=o("a-col"),m=o("a-alert"),p=o("a-row"),_=o("a-descriptions-item"),f=o("a-descriptions"),g=o("a-divider"),b=o("a-table"),v=o("ProductDetails"),k=o("a-drawer");return r(),C(k,{title:e.product.name,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose,destroyOnClose:!0},{default:a(()=>[w("div",nu,[t(p,{gutter:[16,16]},{default:a(()=>[e.product.product_type=="single"?(r(),C(d,{key:0,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(u,{src:e.product.image_url},null,8,["src"])]),_:1})):A("",!0),t(d,{xs:24,sm:24,md:e.product.product_type=="single"?20:24,lg:e.product.product_type=="single"?20:24},{default:a(()=>[e.product.details&&e.product.details.status=="out_of_stock"?(r(),C(p,{key:0,class:"mb-10 mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{type:"error"},{message:a(()=>[w("span",{innerHTML:e.$t("messages.product_out_of_stock",[e.product.details.current_stock,e.product.details.stock_quantitiy_alert])},null,8,ou)]),_:1})]),_:1})]),_:1})):A("",!0),t(p,{class:"mb-10 mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(f,{title:e.$t("product.details"),layout:"vertical",contentStyle:{fontWeight:500,marginBottom:"20px"}},{default:a(()=>[t(_,{label:e.$t("product.name")},{default:a(()=>[i(s(e.product.name),1)]),_:1},8,["label"]),e.product.product_type=="single"?(r(),C(_,{key:0,label:e.$t("product.item_code")},{default:a(()=>[i(s(e.product.item_code),1)]),_:1},8,["label"])):A("",!0),t(_,{label:e.$t("product.category")},{default:a(()=>[i(s(e.product.category&&e.product.category.xid?e.product.category.name:"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.brand")},{default:a(()=>[i(s(e.product.brand&&e.product.brand.xid?e.product.brand.name:"-"),1)]),_:1},8,["label"]),e.product.product_type=="single"?(r(),S(O,{key:1},[t(_,{label:e.$t("product.current_stock")},{default:a(()=>[i(s(e.product.details&&e.product.details.current_stock?`${e.product.details.current_stock} ${e.product.unit.short_name}`:"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.quantitiy_alert")},{default:a(()=>[i(s(e.product.details&&e.product.details.stock_quantitiy_alert?`${e.product.details.stock_quantitiy_alert} ${e.product.unit.short_name}`:"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.sales_price")},{default:a(()=>[i(s(e.product.details&&e.product.details.sales_price?e.formatAmountCurrency(e.product.details.sales_price):"-")+" "+s(e.product.details&&e.product.details.sales_tax_type=="inclusive"?` (${e.$t("common.with_tax")})`:` (${e.$t("common.without_tax")})`),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.purchase_price")},{default:a(()=>[i(s(e.product.details&&e.product.details.purchase_price?e.formatAmountCurrency(e.product.details.purchase_price):"-")+" "+s(e.product.details&&e.product.details.purchase_tax_type=="inclusive"?` (${e.$t("common.with_tax")})`:` (${e.$t("common.without_tax")})`),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.mrp")},{default:a(()=>[i(s(e.product.details&&e.product.details.mrp?e.formatAmountCurrency(e.product.details.mrp):"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("tax.rate")},{default:a(()=>[i(s(e.product.details&&e.product.details.tax&&e.product.details.tax.rate?`${e.product.details.tax.rate}%`:"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.opening_stock")},{default:a(()=>[i(s(e.product.details&&e.product.details.opening_stock?`${e.product.details.opening_stock} ${e.product.unit.short_name}`:"-"),1)]),_:1},8,["label"])],64)):A("",!0)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1},8,["md","lg"])]),_:1})]),e.product.product_type=="variable"?(r(),S(O,{key:0},[t(g,{orientation:"left"},{default:a(()=>[i(s(e.$t("menu.variations")),1)]),_:1}),t(b,{dataSource:e.product.variations,columns:e.variantTableColumns,"row-key":$=>$.xid,pagination:!1,size:"middle",class:"mb-20"},{bodyCell:a(({column:$,text:D,record:I})=>[$.dataIndex==="variant_id"?(r(),S(O,{key:0},[i(s(I.name),1)],64)):A("",!0),$.dataIndex==="purchase_price"?(r(),S(O,{key:1},[i(s(e.formatAmountCurrency(I.details.purchase_price)),1)],64)):A("",!0),$.dataIndex==="sales_price"?(r(),S(O,{key:2},[i(s(e.formatAmountCurrency(I.details.sales_price)),1)],64)):A("",!0),$.dataIndex==="mrp"?(r(),S(O,{key:3},[i(s(e.formatAmountCurrency(I.details.mrp)),1)],64)):A("",!0)]),_:1},8,["dataSource","columns","row-key"])],64)):(r(),C(v,{key:1,product:e.product},null,8,["product"]))]),_:1},8,["title","width","open","onClose"])}const su=B(au,[["render",lu]]),ru=Z({props:["moduleName"],setup(e){const{visibleSubscriptionModules:l}=Y();return{visibleSubscriptionModules:l}}});function du(e,l,c,n,h,y){return e.visibleSubscriptionModules&&e.visibleSubscriptionModules.includes(e.moduleName)?de(e.$slots,"default",{key:0}):A("",!0)}const go=B(ru,[["render",du]]),iu=Z({props:["moduleName"],components:{FormOutlined:Rn},setup(e){const{visibleSubscriptionModules:l,appSetting:c,user:n}=Y();return{visibleSubscriptionModules:l,appSetting:c,user:n}}});function uu(e,l,c,n,h,y){const u=o("FormOutlined"),d=o("a-button"),m=o("a-alert"),p=o("a-col"),_=o("a-row");return e.visibleSubscriptionModules&&!e.visibleSubscriptionModules.includes(e.moduleName)&&e.appSetting.x_admin_id==e.user.xid?(r(),C(_,{key:0,gutter:[15,15],class:"mb-20"},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{message:e.$t("subscription_plans.limit_exceed"),description:e.$t("subscription_plans.upgrade_your_plan"),type:"error","show-icon":"",onClose:l[0]||(l[0]=()=>e.$router.push({name:"admin.subscription.change_plan"}))},{closeText:a(()=>[t(d,{type:"primary"},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("subscription_plans.upgrade_plan")),1)]),_:1})]),_:1},8,["message","description"])]),_:1})]),_:1})):A("",!0)}const mu=B(iu,[["render",uu]]);const cu={components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,ClusterOutlined:yl,AppstoreAddOutlined:Kn,AddEdit:_o,ProductView:su,ProductInfo:Hd,AdminPageHeader:ge,ImportProducts:Ut,SubscriptionModuleVisibility:go,SubscriptionModuleVisibilityMessage:mu},setup(){const{addEditUrl:e,initData:l,columns:c,variantColumns:n,filterableColumns:h,hashableColumns:y,multiDimensalObjectColumns:u}=lo(),d=Me(),{appSetting:m,permsArray:p,formatAmountCurrency:_,getRecursiveCategories:f,filterTreeNode:g,selectedWarehouse:b}=Y(),v=E({category_id:void 0,brand_id:void 0}),k=window.config.product_sample_file,$=E([]),D=E([]),I=E("single");ee(()=>{P(),F(),d.crudUrl.value=e,d.langKey.value="product",d.initData.value={...l},d.formData.value={...l},d.hashableColumns.value=[...y],d.multiDimensalObjectColumns.value={...u}});const F=()=>{var W="products?fields=id,xid,name,slug,product_type,barcode_symbology,item_code,image,image_url,category_id,x_category_id,category{id,xid,name},brand_id,x_brand_id,brand{id,xid,name},unit_id,x_unit_id,unit{id,xid,name,short_name},description,details{stock_quantitiy_alert,opening_stock,opening_stock_date,wholesale_price,wholesale_quantity,mrp,purchase_price,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type,current_stock,warehouse_id,x_warehouse_id,status},details:tax{id,xid,name,rate},details:warehouse{id,xid,name},customFields{id,xid,field_name,field_value},warehouse_id,x_warehouse_id,warehouse{id,xid}";I.value=="variable"&&(W="products?fields=id,xid,name,product_type,slug,barcode_symbology,item_code,image,image_url,category_id,x_category_id,category{id,xid,name},brand_id,x_brand_id,brand{id,xid,name},unit_id,x_unit_id,unit{id,xid,name,short_name},description,details{stock_quantitiy_alert,opening_stock,opening_stock_date,wholesale_price,wholesale_quantity,mrp,purchase_price,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type,current_stock,warehouse_id,x_warehouse_id,status},details:tax{id,xid,name,rate},details:warehouse{id,xid,name},customFields{id,xid,field_name,field_value},warehouse_id,x_warehouse_id,warehouse{id,xid},parent_id,x_parent_id,variations.limit(10000).offset(0){id,xid,name,slug,item_code,product_type,barcode_symbology,item_code,image,image_url,category_id,x_category_id,unit_id,x_unit_id,brand_id,x_brand_id},variations:productVariations{id,xid,product_id,x_product_id,variant_id,x_variant_id,variant_value_id,x_variant_value_id},variations:category{id,xid,name},variations:brand{id,xid,name},variations:unit{id,xid,name,short_name},variations:productVariations:variation{id,xid,name},variations:productVariations:variationType{id,xid,name},variations:details{stock_quantitiy_alert,opening_stock,opening_stock_date,wholesale_price,wholesale_quantity,mrp,purchase_price,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type,current_stock,warehouse_id,x_warehouse_id,status},variations:details:tax{id,xid,name,rate},variations:details:warehouse{id,xid,name}"),d.tableUrl.value={url:W,filters:v,extraFilters:{product_type:I.value}},d.table.filterableColumns=h,d.fetch({page:1})},P=()=>{const W=axiosAdmin.get("categories?limit=10000"),V=axiosAdmin.get("brands?limit=10000");Promise.all([W,V]).then(([K,q])=>{$.value=f(K),D.value=q.data})},T=W=>{var V="";const K=Ba(W.variations,L=>L.details.sales_price),q=Wa(W.variations,L=>L.details.sales_price);return K&&K.details.sales_price&&(V+=_(K.details.sales_price)),q&&q.details.sales_price&&(V+=" - "+_(q.details.sales_price)),V},U=W=>{var V="";const K=Ba(W.variations,L=>L.details.purchase_price),q=Wa(W.variations,L=>L.details.purchase_price);return K&&K.details.sales_price&&(V+=_(K.details.purchase_price)),q&&q.details.sales_price&&(V+=" - "+_(q.details.purchase_price)),V},M=W=>ha(W.variations,V=>V.details.current_stock);return me(b,(W,V)=>{F()}),{columns:c,variantColumns:n,appSetting:m,...d,permsArray:p,formatAmountCurrency:_,categories:$,brands:D,filters:v,filterTreeNode:g,setUrlData:F,sampleFileUrl:k,productType:I,getVariableProductSalePrice:T,getVariableProductPurchasePrice:U,getVariableProductStockSum:M}}},pu={class:"table-responsive"},_u={key:0},fu={key:1},gu={key:0},yu={key:1},hu={key:0},bu={key:1};function vu(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("SubscriptionModuleVisibility"),v=o("ImportProducts"),k=o("DeleteOutlined"),$=o("a-space"),D=o("a-col"),I=o("a-input-search"),F=o("a-select-option"),P=o("a-select"),T=o("a-tree-select"),U=o("a-row"),M=o("admin-page-filters"),W=o("AddEdit"),V=o("ProductView"),K=o("SubscriptionModuleVisibilityMessage"),q=o("AppstoreAddOutlined"),L=o("a-tab-pane"),X=o("ClusterOutlined"),J=o("a-tabs"),le=o("a-badge"),H=o("a-popover"),N=o("a-avatar"),z=o("EyeOutlined"),Q=o("EditOutlined"),j=o("a-table"),oe=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.products"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.product_manager")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.products")),1)]),_:1})]),_:1})]),_:1}),t(M,null,{default:a(()=>[t(U,{gutter:[16,16]},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t($,null,{default:a(()=>[n.permsArray.includes("products_create")||n.permsArray.includes("admin")?(r(),S(O,{key:0},[t(b,{moduleName:"product"},{default:a(()=>[t(g,{type:"primary",onClick:l[0]||(l[0]=()=>{e.formData={...e.formData,product_type:n.productType},e.addItem()})},{default:a(()=>[t(f),i(" "+s(e.$t("product.add")),1)]),_:1})]),_:1}),t(v,{pageTitle:e.$t("product.import_products"),sampleFileUrl:n.sampleFileUrl,importUrl:"products/import",onOnUploadSuccess:n.setUrlData},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])],64)):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("products_delete")||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(D,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(U,{gutter:[16,16],justify:"end"},{default:a(()=>[t(D,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(I,{value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,style:{width:"100%"},loading:e.table.filterLoading,placeholder:e.$t("common.search")},null,8,["value","onChange","onSearch","loading","placeholder"])]),_:1}),t(D,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(P,{value:n.filters.brand_id,"onUpdate:value":l[2]||(l[2]=R=>n.filters.brand_id=R),placeholder:e.$t("common.select_default_text",[e.$t("product.brand")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(r(!0),S(O,null,G(n.brands,R=>(r(),C(F,{key:R.xid,title:R.name,value:R.xid},{default:a(()=>[i(s(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(D,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(T,{value:n.filters.category_id,"onUpdate:value":l[3]||(l[3]=R=>n.filters.category_id=R),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"250px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),"tree-data":n.categories,"allow-clear":"","tree-default-expand-all":"",filterTreeNode:n.filterTreeNode,onChange:n.setUrlData},null,8,["value","placeholder","tree-data","filterTreeNode","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(oe,null,{default:a(()=>[t(W,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onAddAndNewSuccess:e.addAndNewSuccess,onAddAndContinueSuccess:e.addAndContinueSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onAddAndNewSuccess","onAddAndContinueSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(V,{product:e.viewData,visible:e.detailsVisible,onClosed:e.onCloseDetails},null,8,["product","visible","onClosed"]),t(K,{moduleName:"product"}),t(U,{gutter:16},{default:a(()=>[t(D,{span:24},{default:a(()=>[t(J,{activeKey:n.productType,"onUpdate:activeKey":l[4]||(l[4]=R=>n.productType=R),onChange:n.setUrlData},{default:a(()=>[t(L,{key:"single"},{tab:a(()=>[w("span",null,[t(q),i(" "+s(e.$t("variations.single_type_product")),1)])]),_:1}),t(L,{key:"variable"},{tab:a(()=>[w("span",null,[t(X),i(" "+s(e.$t("variations.variant_type_product")),1)])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),t(U,null,{default:a(()=>[t(D,{span:24},{default:a(()=>[w("div",pu,[t(j,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},We({bodyCell:a(({column:R,text:ae,record:ue})=>[R.dataIndex==="status"&&ue&&ue.details?(r(),S(O,{key:0},[ue.details.status=="out_of_stock"?(r(),C(H,{key:0,placement:"top"},{content:a(()=>[i(s(e.$t("common.out_of_stock")),1)]),default:a(()=>[t(le,{status:"error"})]),_:1})):(r(),C(le,{key:1,status:"success"}))],64)):A("",!0),R.dataIndex==="name"?(r(),C(le,{key:1},{default:a(()=>[t(N,{shape:"square",src:ue.image_url},null,8,["src"]),i(" "+s(ue.name),1)]),_:2},1024)):A("",!0),R.dataIndex==="warehouse_id"?(r(),S(O,{key:2},[i(s(ue.details&&ue.details.warehouse&&ue.details.warehouse.name?ue.details.warehouse.name:"-"),1)],64)):A("",!0),R.dataIndex==="category_id"?(r(),S(O,{key:3},[i(s(ue.category?ue.category.name:"-"),1)],64)):A("",!0),R.dataIndex==="brand_id"?(r(),S(O,{key:4},[i(s(ue.brand?ue.brand.name:"-"),1)],64)):A("",!0),R.dataIndex==="sales_price"?(r(),S(O,{key:5},[n.productType=="single"&&ue&&ue.details?(r(),S("span",_u,s(n.formatAmountCurrency(ue.details.sales_price)),1)):n.productType=="variable"?(r(),S("span",fu,s(n.getVariableProductSalePrice(ue)),1)):A("",!0)],64)):A("",!0),R.dataIndex==="purchase_price"?(r(),S(O,{key:6},[n.productType=="single"&&ue&&ue.details?(r(),S("span",gu,s(n.formatAmountCurrency(ue.details.purchase_price)),1)):n.productType=="variable"?(r(),S("span",yu,s(n.getVariableProductPurchasePrice(ue)),1)):A("",!0)],64)):A("",!0),R.dataIndex==="current_stock"?(r(),S(O,{key:7},[n.productType=="single"&&ue&&ue.details?(r(),S("span",hu,s(`${ue.details.current_stock} ${ue.unit.short_name}`),1)):n.productType=="variable"?(r(),S("span",bu,s(n.getVariableProductStockSum(ue)),1)):A("",!0)],64)):A("",!0),R.dataIndex==="action"?(r(),C($,{key:8},{default:a(()=>[t(g,{onClick:re=>e.viewItem(ue),type:"primary"},{icon:a(()=>[t(z)]),_:2},1032,["onClick"]),n.permsArray.includes("products_edit")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:re=>e.editItem(ue)},{icon:a(()=>[t(Q)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("products_delete")||n.permsArray.includes("admin")?(r(),C(g,{key:1,type:"primary",onClick:re=>e.showDeleteConfirm(ue.xid)},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)]),_:2},1024)):A("",!0)]),_:2},[n.productType=="variable"?{name:"expandedRowRender",fn:a(R=>[R&&R.record&&R.record.variations?(r(),C(j,{key:0,columns:n.variantColumns,"row-key":ae=>ae.xid,"data-source":R.record.variations,pagination:!1,size:"middle"},{bodyCell:a(({column:ae,text:ue,record:re})=>[ae.dataIndex==="name"?(r(),S(O,{key:0},[i(s(re.name),1)],64)):A("",!0),ae.dataIndex==="sales_price"&&re&&re.details?(r(),S(O,{key:1},[i(s(n.formatAmountCurrency(re.details.sales_price)),1)],64)):A("",!0),ae.dataIndex==="purchase_price"&&re&&re.details?(r(),S(O,{key:2},[i(s(n.formatAmountCurrency(re.details.purchase_price)),1)],64)):A("",!0),ae.dataIndex==="current_stock"&&re&&re.details?(r(),S(O,{key:3},[i(s(`${re.details.current_stock} ${R.record.unit.short_name}`),1)],64)):A("",!0),ae.dataIndex==="action"?(r(),C(g,{key:4,onClick:be=>e.viewItem(re),type:"links"},{icon:a(()=>[t(z)]),_:2},1032,["onClick"])):A("",!0)]),_:2},1032,["columns","row-key","data-source"])):A("",!0)]),key:"0"}:void 0]),1032,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const ku=B(cu,[["render",vu]]),wu=()=>{const e="variations?fields=id,xid,name,parent_id,x_parent_id,subVariation{id,xid,parent_id,x_parent_id,name}",l="variations",{t:c}=te(),n=["parent_id"],h={name:"",parent_id:void 0},y=[{title:c("variation.name"),dataIndex:"name"},{title:c("variation.value"),dataIndex:"value"},{title:c("common.action"),dataIndex:"action"}],u=[{key:"name",value:c("variation.name")}];return{url:e,addEditUrl:l,initData:h,columns:y,filterableColumns:u,hashableColumns:n}},Cu=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,Upload:ot,MinusSquareOutlined:Mn,FormItemHeading:aa},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{slugify:y}=Y(),u=E([{name:"",id:""}]),d=E([]),m=()=>{var v={...e.formData,value:_(),removed_variations:d.value};c({url:e.url,data:v,successMessage:e.successMessage,success:k=>{l("addEditSuccess",k.xid)}})},p=()=>{u.value.push({name:"",id:""})},_=()=>{var v=[];return we(u.value,k=>{k.name!=""&&v.push(k)}),v},f=pe(()=>u.value.length==0?!1:ht(u.value,{name:""})||ht(u.value,{name:null})),g=v=>{let k=u.value.indexOf(v);k!==-1&&u.value.splice(k,1),v.id!=""&&d.value.push(v.id)},b=()=>{h.value={},l("closed")};return me(()=>e.visible,(v,k)=>{e.visible&&(u.value=[],e.addEditType=="edit"&&we(e.data.sub_variations,$=>{u.value.push({name:$.name,id:$.xid})}))}),{loading:n,rules:h,onClose:b,onSubmit:m,slugify:y,formFields:u,removeFormField:g,addFormField:p,addFormButtonStatus:f,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Su={key:0,style:{color:"red"}};function $u(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("form-item-heading"),f=o("MinusSquareOutlined"),g=o("PlusOutlined"),b=o("a-button"),v=o("a-form"),k=o("SaveOutlined"),$=o("a-modal");return r(),C($,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(b,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(v,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("variation.variation_name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=D=>e.formData.name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("variation.variation_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,null,{default:a(()=>[i(s(e.$t("variation.variation_values")),1)]),_:1}),(r(!0),S(O,null,G(e.formFields,(D,I)=>(r(),C(p,{gutter:16,key:D.id,style:{display:"flex","align-items":"center"}},{default:a(()=>[t(m,{xs:24,sm:24,md:23,lg:23},{default:a(()=>[t(d,{label:e.$t("variation.value"),name:"name"},{default:a(()=>[t(u,{value:D.name,"onUpdate:value":F=>D.name=F,placeholder:e.$t("common.placeholder_default_text",[e.$t("variation.value")])},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label"])]),_:2},1024),e.addEditType=="add"?(r(),C(m,{key:0,span:1,style:{"margin-top":"6px"}},{default:a(()=>[t(f,{onClick:F=>e.removeFormField(D)},null,8,["onClick"])]),_:2},1024)):A("",!0)]),_:2},1024))),128)),e.rules.value?(r(),S("p",Su,s(e.rules.value.message),1)):A("",!0),t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(b,{type:"dashed",block:"",onClick:e.addFormField,disabled:e.addFormButtonStatus},{default:a(()=>[t(g),i(" "+s(e.$t("variation.add_new_value")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Du=B(Cu,[["render",$u]]),Au={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:Du,AdminPageHeader:ge},setup(){const{addEditUrl:e,url:l,initData:c,columns:n,filterableColumns:h,hashableColumns:y}=wu(),u=Me(),{permsArray:d}=Y();return ee(()=>{const m=encodeURIComponent("parent_id eq null");u.tableUrl.value={url:`variations?fields=id,xid,name,parent_id,x_parent_id,subVariations{id,xid,parent_id,x_parent_id,name}&filters=${m}`},u.table.filterableColumns=h,u.fetch({page:1}),u.crudUrl.value=e,u.langKey.value="variation",u.initData.value={...c},u.formData.value={...c},u.hashableColumns.value=[...y]}),{columns:n,...u,filterableColumns:h,permsArray:d}}},Tu={class:"table-responsive"},Eu={key:0},Ou={key:0};function Iu(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("DeleteOutlined"),v=o("a-space"),k=o("a-col"),$=o("a-select-option"),D=o("a-select"),I=o("a-input-search"),F=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),U=o("AddEdit"),M=o("EditOutlined"),W=o("a-table"),V=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.variations"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.product_manager")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.variations")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(P,{gutter:[16,16]},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[n.permsArray.includes("variations_create")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),i(" "+s(e.$t("variation.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("variations_delete")||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(P,{gutter:[16,16],justify:"end"},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(F,{compact:""},{default:a(()=>[t(D,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=K=>e.table.searchColumn=K),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,K=>(r(),C($,{key:K.key},{default:a(()=>[i(s(K.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(I,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=K=>e.table.searchString=K),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(V,null,{default:a(()=>[t(U,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(P,null,{default:a(()=>[t(k,{span:24},{default:a(()=>[w("div",Tu,[t(W,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:K=>({disabled:!1,name:K.xid})},columns:n.columns,"row-key":K=>K.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:K,record:q})=>[K.dataIndex==="name"?(r(),S(O,{key:0},[q.x_parent_id==""?(r(),S("span",Eu,[t(P,{gutter:[16,16],style:{"margin-top":"10px"}},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[i(s(q.x_parent_id==""?q.name:""),1)]),_:2},1024)]),_:2},1024)])):A("",!0)],64)):A("",!0),K.dataIndex==="value"?(r(),S(O,{key:1},[q.sub_variations.length>0?(r(),S("ul",Ou,[(r(!0),S(O,null,G(q.sub_variations,L=>(r(),S("li",{key:L.name},s(L.name),1))),128))])):A("",!0)],64)):A("",!0),K.dataIndex==="action"?(r(),S(O,{key:2},[n.permsArray.includes("variations_edit")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:L=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(M)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("variations_delete")||n.permsArray.includes("admin")?(r(),C(g,{key:1,type:"primary",onClick:L=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Pu=B(Au,[["render",Iu]]),Uu=[{path:"/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/brands",component:Pd,name:"admin.brands.index",meta:{requireAuth:!0,menuParent:"product_manager",menuKey:e=>"brands",permission:"brands_view"}},{path:"/admin/categories",component:Vd,name:"admin.categories.index",meta:{requireAuth:!0,menuParent:"product_manager",menuKey:e=>"categories",permission:"categories_view"}},{path:"/admin/products",component:ku,name:"admin.products.index",meta:{requireAuth:!0,menuParent:"product_manager",menuKey:e=>"products",permission:"products_view"}},{path:"/admin/variations",component:Pu,name:"admin.variations.index",meta:{requireAuth:!0,menuParent:"product_manager",menuKey:e=>"variations",permission:"products_view"}}]}],yo=()=>{const{formatAmount:e,orderType:l,orderPageObject:c,selectedWarehouse:n,dayjs:h,appSetting:y}=Y(),{t:u}=te(),d=Ye(),m=E([]),p=E([]),_=E([]),f=Se({orderSearchTerm:void 0,productFetching:!1,products:[]}),g=E({order_type:d.params.type,invoice_number:"",order_date:h().utc().format("YYYY-MM-DDTHH:mm:ssZ"),warehouse_id:l.value=="stock-transfers"?void 0:n.value.xid,user_id:void 0,terms_condition:n.value.terms_condition,notes:"",order_status:void 0,tax_id:void 0,tax_rate:0,tax_amount:0,discount:0,shipping:0,subtotal:0}),b=E([]),v=E({subtotal:0,tax:0}),k=E(!1),$=E(!1),D=E({}),I=E([]),F=E(""),P=gt(N=>{T(N)},300),T=N=>{if(f.products=[],N!=""){f.productFetching=!0;let z="search-product";axiosAdmin.post(z,{order_type:c.value.type,search_term:N,warehouse_id:g.value.warehouse_id}).then(Q=>{Q.data.length==1?M("",{product:Q.data[0]}):f.products=Q.data,f.productFetching=!1})}},U=N=>{ba(()=>{N.keyCode==13&&T(N.target.value)})},M=(N,z)=>{const Q=z.product;if(et(p.value,Q.xid)){const R=Qe(m.value,["xid",Q.xid]);if(R&&R.quantity<R.stock_quantity){const ae=[];var oe={};m.value.map(re=>{var be=re.quantity;re.xid==Q.xid&&(be+=1,re.quantity=be,oe=re),ae.push(re)}),m.value=ae;var j=new Audio(y.value.beep_audio_url);j.play(),f.orderSearchTerm=void 0,f.products=[],V(oe)}else f.orderSearchTerm=void 0,f.products=[],Oe.error(u("common.out_of_stock"))}else{p.value.push(Q.xid),m.value.push({...Q,sn:m.value.length+1,unit_price:e(Q.unit_price),tax_amount:e(Q.tax_amount),subtotal:e(Q.subtotal)}),f.orderSearchTerm=void 0,f.products=[],K();var j=new Audio(y.value.beep_audio_url);j.play()}},W=N=>{var z=parseFloat(N.quantity),Q=parseFloat(N.stock_quantity);N.item_id;const j=parseFloat(N.unit_price);z=z>Q&&(c.value.type=="sales"||c.value.type=="purchase-returns")?Q:z;const oe=N.discount_rate,R=oe>0?oe/100*j:0,ae=j-R;var ue=0,re=ae,be=j;return N.tax_rate>0&&(N.tax_type=="inclusive"?(be=ae*100/(100+N.tax_rate),ue=be*(N.tax_rate/100)):(ue=ae*(N.tax_rate/100),re=ae+ue,be=ae)),{...N,total_discount:R*z,subtotal:re*z,quantity:z,total_tax:ue*z,max_quantity:Q,single_unit_price:be}},V=N=>{const z=[];m.value.map(Q=>{if(Q.xid==N.xid){const j=W(N);z.push(j)}else z.push(Q)}),m.value=z,K()},K=()=>{let N=0,z=0;m.value.map(R=>{N+=R.subtotal});const Q=g.value.discount!=""?parseFloat(g.value.discount):0,j=g.value.tax_rate!=""?parseFloat(g.value.tax_rate):0;m.value.map(R=>{z+=R.total_tax}),v.value.subtotal=N,v.value.tax=z,N=N-Q;const oe=N*(j/100);N=N+parseFloat(g.value.shipping),g.value.subtotal=e(N+oe),g.value.tax_amount=e(oe),g.value.discount=Q},q=()=>{let N=0,z=0;m.value.map(Q=>{N+=Q.subtotal}),m.value.map(Q=>{z+=Q.total_tax}),v.value.subtotal=N,v.value.tax=z},L=N=>{const z=[];let Q=1;m.value.map(oe=>{N.item_id&&N.item_id!=""&&N.item_id!=null&&N.item_id==oe.item_id&&oe.item_id!=null&&(_.value=[..._.value,oe.item_id]),oe.xid!=N.xid&&(z.push({...oe,sn:Q,single_unit_price:e(oe.single_unit_price),tax_amount:e(oe.tax_amount),subtotal:e(oe.subtotal)}),Q++)}),m.value=z;const j=p.value.filter(oe=>oe!=N.xid);p.value=j,K()},X=(N,z)=>{g.value.tax_rate=N==null?0:z.tax.rate,K()},J=N=>{D.value={id:N.xid,discount_rate:N.discount_rate,unit_price:N.unit_price,tax_id:N.x_tax_id,tax_type:N.tax_type==null?void 0:N.tax_type},k.value=!0,F.value=N.name},le=()=>{const N=m.value.filter(oe=>oe.xid==D.value.id),z=b.value.filter(oe=>oe.xid==D.value.tax_id),Q=D.value.tax_type!=null?D.value.tax_type:"exclusive",j={...N[0],discount_rate:parseFloat(D.value.discount_rate),unit_price:parseFloat(D.value.unit_price),tax_id:D.value.tax_id,tax_rate:z[0]?z[0].rate:0,tax_type:Q};V(j),H()},H=()=>{D.value={},k.value=!1};return{state:f,route:d,orderType:l,orderPageObject:c,selectedProducts:m,selectedProductIds:p,formData:g,productsAmount:v,taxes:b,fetchProducts:P,searchValueSelected:M,recalculateValues:W,quantityChanged:V,recalculateFinalTotal:K,showDeleteConfirm:L,taxChanged:X,editItem:J,addEditVisible:k,addEditFormData:D,addEditFormSubmitting:$,addEditRules:I,addEditPageTitle:F,onAddEditSubmit:le,onAddEditClose:H,removedOrderItemsIds:_,calculateProductAmount:q,inputValueChanged:U}},Fu=Z({props:{size:{default:"middle"},btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:_o,SubscriptionModuleVisibility:go},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=lo(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),qu={key:0};function Mu(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit"),f=o("SubscriptionModuleVisibility");return r(),C(f,{moduleName:"product"},{default:a(()=>[e.permsArray.includes("products_create")||e.permsArray.includes("admin")?(r(),S("div",qu,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"products"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("product.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{size:e.size,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["size","onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,size:e.size,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["size","onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("product.add"),successMessage:e.$t("product.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)]),_:3})}const Ua=B(Fu,[["render",Mu]]),Ru=Z({props:{dateTime:{default:void 0},disabled:{default:!1}},emits:["dateTimeChanged"],setup(e,{emit:l}){const c=E(void 0),{disabledDate:n,formatDateTime:h,dayjs:y}=Y();ee(()=>{u(e.dateTime)});const u=p=>{e.dateTime?c.value=y(p):c.value=void 0},d=p=>p?h(p.format()):void 0,m=p=>{const _=p?p.utc().format("YYYY-MM-DDTHH:mm:ssZ"):void 0;l("dateTimeChanged",_)};return me(()=>e.dateTime,(p,_)=>{u(p)}),{dateTimeValue:c,disabledDate:n,formatOrderDate:d,dateTimeChanged:m}}});function Ku(e,l,c,n,h,y){const u=o("a-date-picker");return r(),C(u,{value:e.dateTimeValue,"onUpdate:value":l[0]||(l[0]=d=>e.dateTimeValue=d),format:e.formatOrderDate,"disabled-date":e.disabledDate,"show-time":"",placeholder:e.$t("common.date_time"),style:{width:"100%"},onChange:e.dateTimeChanged,disabled:e.disabled},null,8,["value","format","disabled-date","placeholder","onChange","disabled"])}const na=B(Ru,[["render",Ku]]),ho=()=>{const e="roles?fields=id,xid,name,display_name,description,perms.limit(10000)",l="roles",{t:c}=te(),n=Se({permissions:[]}),h={name:"",display_name:"",description:"",permissions:[]},y=[{title:c("role.role_name"),dataIndex:"display_name",sorter:!0},{title:c("role.description"),dataIndex:"description"},{title:c("common.action"),dataIndex:"action"}],u=[{key:"name",value:c("role.role_name")}];return{url:e,addEditUrl:l,initData:h,columns:y,filterableColumns:u,preFetchData:n,getPreFetchData:()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(m=>{n.permissions=m.data})}}};const Vu=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),y=E([]);te();const u=E([]),d=E([]),{slugify:m,appModules:p}=Y();ee(()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(g=>{const b=[];g.data.map(v=>{b[v.name]=v.xid}),u.value=b})});const _=()=>{const g={...e.formData,permissions:d.value};c({url:e.url,data:g,successMessage:e.successMessage,success:b=>{l("addEditSuccess",b.xid)}})},f=()=>{h.value={},l("closed")};return me(()=>e.visible,(g,b)=>{g&&e.addEditType=="edit"?e.data.perms.forEach(v=>{d.value.push(v.xid)}):d.value=[]}),{loading:n,rules:h,onClose:f,onSubmit:_,roles:y,permissions:u,drawerWidth:window.innerWidth<=991?"90%":"45%",checkedPermissions:d,slugify:m,appModules:p}}}),zu={class:"d-flex flex-column scroll-y"},Lu={class:"tbl-responsive"},Bu={class:"table align-middle table-row-dashed row-gap"},Wu={class:"text-gray-600 fw-bold"},ju={class:"text-gray-800"},Hu={class:"d-flex"},Nu={class:"form-check form-check-custom me-5 me-lg-20"},Yu={class:"form-check form-check-custom me-5 me-lg-20"},Gu={class:"form-check form-check-custom me-5 me-lg-20"},Ju={class:"form-check form-check-custom"},Qu={class:"text-gray-800"},Xu={class:"d-flex"},Zu={class:"form-check form-check-custom me-5 me-lg-20"},xu={class:"form-check form-check-custom me-5 me-lg-20"},em={class:"form-check form-check-custom me-5 me-lg-20"},tm={class:"form-check form-check-custom"},am={class:"text-gray-800"},nm={class:"d-flex"},om={class:"form-check form-check-custom me-5 me-lg-20"},lm={class:"form-check form-check-custom me-5 me-lg-20"},sm={class:"form-check form-check-custom me-5 me-lg-20"},rm={class:"form-check form-check-custom"},dm={class:"text-gray-800"},im={class:"d-flex"},um={class:"form-check form-check-custom me-5 me-lg-20"},mm={class:"form-check form-check-custom me-5 me-lg-20"},cm={class:"form-check form-check-custom me-5 me-lg-20"},pm={class:"form-check form-check-custom"},_m={class:"text-gray-800"},fm={class:"d-flex"},gm={class:"form-check form-check-custom me-5 me-lg-20"},ym={class:"form-check form-check-custom me-5 me-lg-20"},hm={class:"form-check form-check-custom me-5 me-lg-20"},bm={class:"form-check form-check-custom"},vm={class:"text-gray-800"},km={class:"d-flex"},wm={class:"form-check form-check-custom me-5 me-lg-20"},Cm={class:"form-check form-check-custom me-5 me-lg-20"},Sm={class:"form-check form-check-custom me-5 me-lg-20"},$m={class:"form-check form-check-custom"},Dm={class:"text-gray-800"},Am={class:"d-flex"},Tm={class:"form-check form-check-custom me-5 me-lg-20"},Em={class:"form-check form-check-custom me-5 me-lg-20"},Om={class:"form-check form-check-custom me-5 me-lg-20"},Im={class:"form-check form-check-custom"},Pm={class:"text-gray-800"},Um={class:"d-flex"},Fm={class:"form-check form-check-custom me-5 me-lg-20"},qm={class:"form-check form-check-custom me-5 me-lg-20"},Mm={class:"form-check form-check-custom me-5 me-lg-20"},Rm={class:"form-check form-check-custom"},Km={class:"text-gray-800"},Vm={class:"d-flex"},zm={class:"form-check form-check-custom me-5 me-lg-20"},Lm={class:"form-check form-check-custom me-5 me-lg-20"},Bm={class:"form-check form-check-custom me-5 me-lg-20"},Wm={class:"form-check form-check-custom"},jm={class:"text-gray-800"},Hm={class:"d-flex"},Nm={class:"form-check form-check-custom me-5 me-lg-20"},Ym={class:"form-check form-check-custom me-5 me-lg-20"},Gm={class:"form-check form-check-custom me-5 me-lg-20"},Jm={class:"form-check form-check-custom"},Qm={class:"text-gray-800"},Xm={class:"d-flex"},Zm={class:"form-check form-check-custom me-5 me-lg-20"},xm={class:"form-check form-check-custom me-5 me-lg-20"},ec={class:"text-gray-800"},tc={class:"d-flex"},ac={class:"form-check form-check-custom me-5 me-lg-20"},nc={class:"form-check form-check-custom me-5 me-lg-20"},oc={class:"form-check form-check-custom me-5 me-lg-20"},lc={class:"form-check form-check-custom"},sc={class:"text-gray-800"},rc={class:"d-flex"},dc={class:"form-check form-check-custom me-5 me-lg-20"},ic={class:"form-check form-check-custom me-5 me-lg-20"},uc={class:"form-check form-check-custom me-5 me-lg-20"},mc={class:"form-check form-check-custom"},cc={class:"text-gray-800"},pc={class:"d-flex"},_c={class:"form-check form-check-custom me-5 me-lg-20"},fc={class:"form-check form-check-custom me-5 me-lg-20"},gc={class:"form-check form-check-custom me-5 me-lg-20"},yc={class:"form-check form-check-custom"},hc={class:"text-gray-800"},bc={class:"d-flex"},vc={class:"form-check form-check-custom me-5 me-lg-20"},kc={class:"form-check form-check-custom me-5 me-lg-20"},wc={class:"form-check form-check-custom me-5 me-lg-20"},Cc={class:"form-check form-check-custom"},Sc={class:"text-gray-800"},$c={class:"d-flex"},Dc={class:"form-check form-check-custom me-5 me-lg-20"},Ac={class:"form-check form-check-custom me-5 me-lg-20"},Tc={class:"form-check form-check-custom me-5 me-lg-20"},Ec={class:"form-check form-check-custom"},Oc={class:"text-gray-800"},Ic={class:"d-flex"},Pc={class:"form-check form-check-custom me-5 me-lg-20"},Uc={class:"text-gray-800"},Fc={class:"d-flex"},qc={class:"form-check form-check-custom me-5 me-lg-20"},Mc={class:"text-gray-800"},Rc={class:"d-flex"},Kc={class:"form-check form-check-custom me-5 me-lg-20"},Vc={class:"text-gray-800"},zc={class:"d-flex"},Lc={class:"form-check form-check-custom me-5 me-lg-20"},Bc={class:"text-gray-800"},Wc={class:"d-flex"},jc={class:"form-check form-check-custom me-5 me-lg-20"},Hc={class:"text-gray-800"},Nc={class:"d-flex"},Yc={class:"form-check form-check-custom me-5 me-lg-20"},Gc={class:"form-check form-check-custom me-5 me-lg-20"},Jc={class:"form-check form-check-custom me-5 me-lg-20"},Qc={class:"form-check form-check-custom"},Xc={class:"text-gray-800"},Zc={class:"d-flex"},xc={class:"form-check form-check-custom me-5 me-lg-20"},ep={class:"form-check form-check-custom me-5 me-lg-20"},tp={class:"form-check form-check-custom me-5 me-lg-20"},ap={class:"form-check form-check-custom"},np={class:"text-gray-800"},op={class:"d-flex"},lp={class:"form-check form-check-custom me-5 me-lg-20"},sp={class:"form-check form-check-custom me-5 me-lg-20"},rp={class:"form-check form-check-custom me-5 me-lg-20"},dp={class:"form-check form-check-custom"},ip={class:"text-gray-800"},up={class:"d-flex"},mp={class:"form-check form-check-custom me-5 me-lg-20"},cp={class:"form-check form-check-custom me-5 me-lg-20"},pp={class:"form-check form-check-custom me-5 me-lg-20"},_p={class:"form-check form-check-custom"},fp={class:"text-gray-800"},gp={class:"d-flex"},yp={class:"form-check form-check-custom me-5 me-lg-20"},hp={class:"form-check form-check-custom me-5 me-lg-20"},bp={class:"form-check form-check-custom me-5 me-lg-20"},vp={class:"form-check form-check-custom"},kp={class:"text-gray-800"},wp={class:"d-flex"},Cp={class:"form-check form-check-custom me-5 me-lg-20"},Sp={class:"form-check form-check-custom me-5 me-lg-20"},$p={class:"form-check form-check-custom me-5 me-lg-20"},Dp={class:"form-check form-check-custom"},Ap={class:"text-gray-800"},Tp={class:"d-flex"},Ep={class:"form-check form-check-custom me-5 me-lg-20"},Op={class:"form-check form-check-custom me-5 me-lg-20"},Ip={class:"form-check form-check-custom me-5 me-lg-20"},Pp={class:"form-check form-check-custom"},Up={class:"text-gray-800"},Fp={class:"d-flex"},qp={class:"form-check form-check-custom me-5 me-lg-20"},Mp={class:"form-check form-check-custom me-5 me-lg-20"},Rp={class:"form-check form-check-custom me-5 me-lg-20"},Kp={class:"form-check form-check-custom"},Vp={class:"text-gray-800"},zp={class:"d-flex"},Lp={class:"form-check form-check-custom me-5 me-lg-20"},Bp={class:"form-check form-check-custom me-5 me-lg-20"},Wp={class:"form-check form-check-custom me-5 me-lg-20"},jp={class:"form-check form-check-custom me-5 me-lg-20"},Hp={class:"text-gray-800"},Np={class:"d-flex"},Yp={class:"form-check form-check-custom me-5 me-lg-20"},Gp={class:"form-check form-check-custom me-5 me-lg-20"},Jp={class:"form-check form-check-custom me-5 me-lg-20"},Qp={class:"form-check form-check-custom me-5 me-lg-20"},Xp={class:"text-gray-800"},Zp={class:"d-flex"},xp={class:"form-check form-check-custom me-5 me-lg-20"},e_={class:"form-check form-check-custom me-5 me-lg-20"},t_={class:"form-check form-check-custom me-5 me-lg-20"},a_={class:"form-check form-check-custom me-5 me-lg-20"};function n_(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-textarea"),f=o("a-checkbox"),g=o("a-checkbox-group"),b=o("a-form"),v=o("SaveOutlined"),k=o("a-button"),$=o("a-drawer");return r(),C($,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(k,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t(v)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(k,{onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(b,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("role.display_name"),name:"display_name",help:e.rules.display_name?e.rules.display_name.message:null,validateStatus:e.rules.display_name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.display_name,"onUpdate:value":l[0]||(l[0]=D=>e.formData.display_name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.display_name")]),onKeyup:l[1]||(l[1]=D=>e.formData.name=e.slugify(D.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("role.role_name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[2]||(l[2]=D=>e.formData.name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.role_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("role.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:a(()=>[t(_,{value:e.formData.description,"onUpdate:value":l[3]||(l[3]=D=>e.formData.description=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("role.permissions"),name:"permissions",help:e.rules.permissions?e.rules.permissions.message:null,validateStatus:e.rules.permissions?"error":null},{default:a(()=>[w("div",zu,[w("div",Lu,[t(g,{value:e.checkedPermissions,"onUpdate:value":l[4]||(l[4]=D=>e.checkedPermissions=D)},{default:a(()=>[w("table",Bu,[w("tbody",Wu,[w("tr",null,[w("td",ju,s(e.$t("menu.brands")),1),w("td",null,[w("div",Hu,[w("label",Nu,[t(f,{value:e.permissions.brands_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Yu,[t(f,{value:e.permissions.brands_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Gu,[t(f,{value:e.permissions.brands_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Ju,[t(f,{value:e.permissions.brands_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Qu,s(e.$t("menu.categories")),1),w("td",null,[w("div",Xu,[w("label",Zu,[t(f,{value:e.permissions.categories_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",xu,[t(f,{value:e.permissions.categories_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",em,[t(f,{value:e.permissions.categories_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",tm,[t(f,{value:e.permissions.categories_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",am,s(e.$t("menu.variations")),1),w("td",null,[w("div",nm,[w("label",om,[t(f,{value:e.permissions.variations_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",lm,[t(f,{value:e.permissions.variations_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",sm,[t(f,{value:e.permissions.variations_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",rm,[t(f,{value:e.permissions.variations_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",dm,s(e.$t("menu.products")),1),w("td",null,[w("div",im,[w("label",um,[t(f,{value:e.permissions.products_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",mm,[t(f,{value:e.permissions.products_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",cm,[t(f,{value:e.permissions.products_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",pm,[t(f,{value:e.permissions.products_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",_m,s(e.$t("menu.expense_categories")),1),w("td",null,[w("div",fm,[w("label",gm,[t(f,{value:e.permissions.expense_categories_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",ym,[t(f,{value:e.permissions.expense_categories_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",hm,[t(f,{value:e.permissions.expense_categories_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",bm,[t(f,{value:e.permissions.expense_categories_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",vm,s(e.$t("menu.expenses")),1),w("td",null,[w("div",km,[w("label",wm,[t(f,{value:e.permissions.expenses_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Cm,[t(f,{value:e.permissions.expenses_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Sm,[t(f,{value:e.permissions.expenses_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",$m,[t(f,{value:e.permissions.expenses_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Dm,s(e.$t("menu.purchases")),1),w("td",null,[w("div",Am,[w("label",Tm,[t(f,{value:e.permissions.purchases_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Em,[t(f,{value:e.permissions.purchases_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Om,[t(f,{value:e.permissions.purchases_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Im,[t(f,{value:e.permissions.purchases_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Pm,s(e.$t("menu.purchase_returns")),1),w("td",null,[w("div",Um,[w("label",Fm,[t(f,{value:e.permissions.purchase_returns_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",qm,[t(f,{value:e.permissions.purchase_returns_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Mm,[t(f,{value:e.permissions.purchase_returns_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Rm,[t(f,{value:e.permissions.purchase_returns_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Km,s(e.$t("menu.sales")),1),w("td",null,[w("div",Vm,[w("label",zm,[t(f,{value:e.permissions.sales_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Lm,[t(f,{value:e.permissions.sales_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Bm,[t(f,{value:e.permissions.sales_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Wm,[t(f,{value:e.permissions.sales_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",jm,s(e.$t("menu.sales_returns")),1),w("td",null,[w("div",Hm,[w("label",Nm,[t(f,{value:e.permissions.sales_returns_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Ym,[t(f,{value:e.permissions.sales_returns_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Gm,[t(f,{value:e.permissions.sales_returns_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Jm,[t(f,{value:e.permissions.sales_returns_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Qm,s(e.$t("menu.order_payments")),1),w("td",null,[w("div",Xm,[w("label",Zm,[t(f,{value:e.permissions.order_payments_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",xm,[t(f,{value:e.permissions.order_payments_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",ec,s(e.$t("menu.payment_in")),1),w("td",null,[w("div",tc,[w("label",ac,[t(f,{value:e.permissions.payment_in_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",nc,[t(f,{value:e.permissions.payment_in_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",oc,[t(f,{value:e.permissions.payment_in_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",lc,[t(f,{value:e.permissions.payment_in_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",sc,s(e.$t("menu.payment_out")),1),w("td",null,[w("div",rc,[w("label",dc,[t(f,{value:e.permissions.payment_out_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",ic,[t(f,{value:e.permissions.payment_out_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",uc,[t(f,{value:e.permissions.payment_out_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",mc,[t(f,{value:e.permissions.payment_out_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",cc,s(e.$t("menu.quotation")),1),w("td",null,[w("div",pc,[w("label",_c,[t(f,{value:e.permissions.quotations_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",fc,[t(f,{value:e.permissions.quotations_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",gc,[t(f,{value:e.permissions.quotations_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",yc,[t(f,{value:e.permissions.quotations_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",hc,s(e.$t("menu.stock_adjustment")),1),w("td",null,[w("div",bc,[w("label",vc,[t(f,{value:e.permissions.stock_adjustments_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",kc,[t(f,{value:e.permissions.stock_adjustments_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",wc,[t(f,{value:e.permissions.stock_adjustments_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Cc,[t(f,{value:e.permissions.stock_adjustments_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Sc,s(e.$t("menu.stock_transfer")),1),w("td",null,[w("div",$c,[w("label",Dc,[t(f,{value:e.permissions.stock_transfers_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Ac,[t(f,{value:e.permissions.stock_transfers_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Tc,[t(f,{value:e.permissions.stock_transfers_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Ec,[t(f,{value:e.permissions.stock_transfers_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Oc,s(e.$t("menu.pos")),1),w("td",null,[w("div",Ic,[w("label",Pc,[t(f,{value:e.permissions.pos_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Uc,s(e.$t("menu.company")),1),w("td",null,[w("div",Fc,[w("label",qc,[t(f,{value:e.permissions.companies_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Mc,s(e.$t("menu.storage_settings")),1),w("td",null,[w("div",Rc,[w("label",Kc,[t(f,{value:e.permissions.storage_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Vc,s(e.$t("menu.email_settings")),1),w("td",null,[w("div",zc,[w("label",Lc,[t(f,{value:e.permissions.email_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Bc,s(e.$t("menu.cash_bank")),1),w("td",null,[w("div",Wc,[w("label",jc,[t(f,{value:e.permissions.cash_bank_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Hc,s(e.$t("menu.warehouses")),1),w("td",null,[w("div",Nc,[w("label",Yc,[t(f,{value:e.permissions.warehouses_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Gc,[t(f,{value:e.permissions.warehouses_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Jc,[t(f,{value:e.permissions.warehouses_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Qc,[t(f,{value:e.permissions.warehouses_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Xc,s(e.$t("menu.translations")),1),w("td",null,[w("div",Zc,[w("label",xc,[t(f,{value:e.permissions.translations_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",ep,[t(f,{value:e.permissions.translations_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",tp,[t(f,{value:e.permissions.translations_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",ap,[t(f,{value:e.permissions.translations_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",np,s(e.$t("menu.roles")),1),w("td",null,[w("div",op,[w("label",lp,[t(f,{value:e.permissions.roles_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",sp,[t(f,{value:e.permissions.roles_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",rp,[t(f,{value:e.permissions.roles_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",dp,[t(f,{value:e.permissions.roles_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",ip,s(e.$t("menu.taxes")),1),w("td",null,[w("div",up,[w("label",mp,[t(f,{value:e.permissions.taxes_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",cp,[t(f,{value:e.permissions.taxes_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",pp,[t(f,{value:e.permissions.taxes_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",_p,[t(f,{value:e.permissions.taxes_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",fp,s(e.$t("menu.currencies")),1),w("td",null,[w("div",gp,[w("label",yp,[t(f,{value:e.permissions.currencies_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",hp,[t(f,{value:e.permissions.currencies_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",bp,[t(f,{value:e.permissions.currencies_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",vp,[t(f,{value:e.permissions.currencies_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",kp,s(e.$t("menu.payment_modes")),1),w("td",null,[w("div",wp,[w("label",Cp,[t(f,{value:e.permissions.payment_modes_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Sp,[t(f,{value:e.permissions.payment_modes_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",$p,[t(f,{value:e.permissions.payment_modes_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Dp,[t(f,{value:e.permissions.payment_modes_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Ap,s(e.$t("menu.units")),1),w("td",null,[w("div",Tp,[w("label",Ep,[t(f,{value:e.permissions.units_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Op,[t(f,{value:e.permissions.units_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Ip,[t(f,{value:e.permissions.units_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Pp,[t(f,{value:e.permissions.units_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Up,s(e.$t("menu.custom_fields")),1),w("td",null,[w("div",Fp,[w("label",qp,[t(f,{value:e.permissions.custom_fields_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Mp,[t(f,{value:e.permissions.custom_fields_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Rp,[t(f,{value:e.permissions.custom_fields_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Kp,[t(f,{value:e.permissions.custom_fields_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Vp,s(e.$t("menu.staff_members")),1),w("td",null,[w("div",zp,[w("label",Lp,[t(f,{value:e.permissions.users_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Bp,[t(f,{value:e.permissions.users_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Wp,[t(f,{value:e.permissions.users_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",jp,[t(f,{value:e.permissions.users_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Hp,s(e.$t("menu.customers")),1),w("td",null,[w("div",Np,[w("label",Yp,[t(f,{value:e.permissions.customers_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",Gp,[t(f,{value:e.permissions.customers_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",Jp,[t(f,{value:e.permissions.customers_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",Qp,[t(f,{value:e.permissions.customers_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),w("tr",null,[w("td",Xp,s(e.$t("menu.suppliers")),1),w("td",null,[w("div",Zp,[w("label",xp,[t(f,{value:e.permissions.suppliers_view},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1},8,["value"])]),w("label",e_,[t(f,{value:e.permissions.suppliers_create},{default:a(()=>[i(s(e.$t("common.add")),1)]),_:1},8,["value"])]),w("label",t_,[t(f,{value:e.permissions.suppliers_edit},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),w("label",a_,[t(f,{value:e.permissions.suppliers_delete},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),(r(!0),S(O,null,G(e.appModules,(D,I)=>(r(),C(Vn(D+"Permission"),{key:I,permissions:e.permissions},null,8,["permissions"]))),128))])])]),_:1},8,["value"])])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const bo=B(Vu,[["render",n_]]),o_=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:bo},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=ho(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),l_={key:0};function s_(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("roles_create")||e.permsArray.includes("admin")?(r(),S("div",l_,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("role.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("role.add"),successMessage:e.$t("role.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const r_=B(o_,[["render",s_]]),d_={components:{InfoCircleOutlined:It}};function i_(e,l,c,n,h,y){const u=o("InfoCircleOutlined"),d=o("a-tooltip");return r(),C(d,null,{title:a(()=>[i(s(e.$t("user.warehouse_not_changable")),1)]),default:a(()=>[t(u)]),_:1})}const u_=B(d_,[["render",i_]]),m_=Z({props:["addEditData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,Upload:ot,RoleAddButton:r_,WarehouseAddButton:Ft,TooltipWarehouse:u_},setup(e,{emit:l}){const{permsArray:c,user:n,appSetting:h,selectedWarehouse:y}=Y(),{addEditRequestAdmin:u,loading:d,rules:m}=ve(),p=E([]),_=E([]),f=E({}),g="roles?limit=10000",b="warehouses?limit=10000",v=Ce(),k=E(!0);ee(()=>{const U=axiosAdmin.get(g),M=axiosAdmin.get(b);Promise.all([U,M]).then(([W,V])=>{p.value=W.data,_.value=V.data}),f.value={...e.addEditData}});const $=()=>{u({url:e.url,data:f.value,successMessage:e.successMessage,success:U=>{l("addEditSuccess",U.xid),n.value.xid==U.xid&&v.dispatch("auth/updateUser")}})},D=()=>{m.value={},l("closed")},I=()=>{axiosAdmin.get(g).then(U=>{p.value=U.data})},F=()=>{axiosAdmin.get(b).then(U=>{_.value=U.data})},P=(U,M)=>{f.value={...f.value,warehouse_id:U.length>0?U[0]:void 0}},T=(U,M)=>{M&&M.title&&M.title=="admin"?k.value=!1:k.value=!0};return me(()=>e.visible,(U,M)=>{if(U)if(k.value=!0,e.addEditType=="edit"&&(k.value=!0,e.data.user_type=="staff_members"&&e.data.role&&e.data.role.name=="admin"&&(k.value=!1),e.data.user_type=="customers"&&e.data.is_walkin_customer&&(k.value=!1)),e.addEditType=="add")e.addEditData.user_type=="staff_members"?f.value={...e.addEditData,warehouse_id:y.value.xid,warehouses:[y.value.xid]}:f.value={...e.addEditData,warehouse_id:y.value.xid,warehouses:[]};else{var W=e.data.warehouse&&e.data.warehouse.xid?e.data.warehouse.xid:void 0,V=[];if(e.addEditData.user_type=="staff_members"){var K=e.data.user_warehouses;we(K,q=>{V.push(q.x_warehouse_id)})}f.value={...e.addEditData,role_id:e.data.role&&e.data.role.xid?e.data.role.xid:void 0,warehouse_id:W,warehouses:V,opening_balance:e.data.details&&e.data.details.opening_balance?e.data.details.opening_balance:void 0,opening_balance_type:e.data.details&&e.data.details.opening_balance_type?e.data.details.opening_balance_type:void 0,credit_period:e.data.details&&e.data.details.credit_period?e.data.details.credit_period:void 0,credit_limit:e.data.details&&e.data.details.credit_limit?e.data.details.credit_limit:void 0,_method:"PUT"}}}),{loading:d,rules:m,onClose:D,onSubmit:$,roles:p,warehouses:_,formData:f,roleAdded:I,warehouseAdded:F,permsArray:c,appSetting:h,selectedWarehouse:y,warehousesChanged:P,drawerWidth:window.innerWidth<=991?"90%":"45%",warehouseVisible:k,roleChanged:T}}}),c_={key:0,style:{display:"flex"}},p_={key:1},__={style:{display:"flex"}},f_={key:0,class:"small-text-message"};function g_(e,l,c,n,h,y){const u=o("Upload"),d=o("a-form-item"),m=o("a-col"),p=o("a-select-option"),_=o("a-select"),f=o("WarehouseAddButton"),g=o("a-row"),b=o("RoleAddButton"),v=o("a-input"),k=o("a-input-password"),$=o("a-input-number"),D=o("a-textarea"),I=o("a-form"),F=o("SaveOutlined"),P=o("a-button"),T=o("a-drawer");return r(),C(T,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(P,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t(F)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(P,{onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(I,{layout:"vertical"},{default:a(()=>[t(g,null,{default:a(()=>[t(m,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(d,{label:e.$t("user.profile_image"),name:"profile_image",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:a(()=>[t(u,{formData:e.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:l[0]||(l[0]=U=>{e.formData.profile_image=U.file,e.formData.profile_image_url=U.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(m,{xs:24,sm:24,md:18,lg:18},{default:a(()=>[e.warehouseVisible?(r(),C(g,{key:0,gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{name:"warehouse_id",help:e.rules.warehouse_id?e.rules.warehouse_id.message:null,validateStatus:e.rules.warehouse_id?"error":null,class:"required"},{label:a(()=>[i(s(e.$t("warehouse.warehouse")),1)]),default:a(()=>[e.permsArray.includes("admin")?(r(),S("span",c_,[e.formData.user_type=="staff_members"?(r(),C(_,{key:0,value:e.formData.warehouses,"onUpdate:value":l[1]||(l[1]=U=>e.formData.warehouses=U),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),mode:"multiple",onChange:e.warehousesChanged},{default:a(()=>[(r(!0),S(O,null,G(e.warehouses,U=>(r(),C(p,{key:U.xid,value:U.xid},{default:a(()=>[i(s(U.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])):(r(),C(_,{key:1,value:e.formData.warehouse_id,"onUpdate:value":l[2]||(l[2]=U=>e.formData.warehouse_id=U),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")])},{default:a(()=>[(r(!0),S(O,null,G(e.warehouses,U=>(r(),C(p,{key:U.xid,value:U.xid},{default:a(()=>[i(s(U.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])),t(f,{onOnAddSuccess:e.warehouseAdded},null,8,["onOnAddSuccess"])])):(r(),S("span",p_,[t(_,{value:e.selectedWarehouse.xid,placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),disabled:""},{default:a(()=>[t(p,{value:e.selectedWarehouse.xid},{default:a(()=>[i(s(e.selectedWarehouse.name),1)]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]))]),_:1},8,["help","validateStatus"])]),_:1})]),_:1})):A("",!0),e.formData.user_type=="staff_members"&&e.permsArray.includes("admin")?(r(),C(g,{key:1,gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.role"),name:"role_id",help:e.rules.role_id?e.rules.role_id.message:null,validateStatus:e.rules.role_id?"error":null,class:"required"},{default:a(()=>[w("span",__,[t(_,{value:e.formData.role_id,"onUpdate:value":l[3]||(l[3]=U=>e.formData.role_id=U),placeholder:e.$t("common.select_default_text",[e.$t("user.role")]),allowClear:!0,onChange:e.roleChanged},{default:a(()=>[(r(!0),S(O,null,G(e.roles,U=>(r(),C(p,{key:U.xid,value:U.xid,title:U.name},{default:a(()=>[i(s(U.display_name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder","onChange"]),t(b,{onOnAddSuccess:e.roleAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(g,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(v,{value:e.formData.name,"onUpdate:value":l[4]||(l[4]=U=>e.formData.name=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:a(()=>[t(v,{value:e.formData.phone,"onUpdate:value":l[5]||(l[5]=U=>e.formData.phone=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(g,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:ca({required:e.formData.user_type=="staff_members"})},{default:a(()=>[t(v,{value:e.formData.email,"onUpdate:value":l[6]||(l[6]=U=>e.formData.email=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus","class"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null,class:"required"},{default:a(()=>[t(_,{value:e.formData.status,"onUpdate:value":l[7]||(l[7]=U=>e.formData.status=U),placeholder:e.$t("common.select_default_text",[e.$t("user.status")])},{default:a(()=>[t(p,{value:"enabled"},{default:a(()=>[i(s(e.$t("common.enabled")),1)]),_:1}),t(p,{value:"disabled"},{default:a(()=>[i(s(e.$t("common.disabled")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.formData.user_type=="staff_members"||e.formData.user_type=="customers"?(r(),C(g,{key:2},{default:a(()=>[t(m,{span:24},{default:a(()=>[t(d,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null,class:ca(e.formData.user_type=="staff_members"?"required":"")},{default:a(()=>[t(k,{value:e.formData.password,"onUpdate:value":l[8]||(l[8]=U=>e.formData.password=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","placeholder"]),e.addEditType=="edit"?(r(),S("small",f_,s(e.$t("user.password_blank")),1)):A("",!0)]),_:1},8,["label","help","validateStatus","class"])]),_:1})]),_:1})):A("",!0),e.formData.user_type!="staff_members"?(r(),C(g,{key:3,gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.tax_number"),name:"tax_number",help:e.rules.tax_number?e.rules.tax_number.message:null,validateStatus:e.rules.tax_number?"error":null},{default:a(()=>[t(v,{value:e.formData.tax_number,"onUpdate:value":l[9]||(l[9]=U=>e.formData.tax_number=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.tax_number")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),e.formData.user_type!="staff_members"?(r(),C(g,{key:4,gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.opening_balance"),name:"opening_balance",help:e.rules.opening_balance?e.rules.opening_balance.message:null,validateStatus:e.rules.opening_balance?"error":null},{default:a(()=>[t(v,{value:e.formData.opening_balance,"onUpdate:value":l[11]||(l[11]=U=>e.formData.opening_balance=U),placeholder:"0"},{prefix:a(()=>[i(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(_,{value:e.formData.opening_balance_type,"onUpdate:value":l[10]||(l[10]=U=>e.formData.opening_balance_type=U),style:{width:"100px"}},{default:a(()=>[t(p,{value:"receive"},{default:a(()=>[i(s(e.$t("user.receive")),1)]),_:1}),t(p,{value:"pay"},{default:a(()=>[i(s(e.$t("user.pay")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1}),e.formData.user_type!="staff_members"?(r(),C(g,{key:0,gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.credit_period"),name:"credit_period",help:e.rules.credit_period?e.rules.credit_period.message:null,validateStatus:e.rules.credit_period?"error":null},{default:a(()=>[t($,{value:e.formData.credit_period,"onUpdate:value":l[12]||(l[12]=U=>e.formData.credit_period=U),placeholder:"0","addon-after":e.$t("user.days"),type:"number",precision:0,style:{width:"100%"}},null,8,["value","addon-after"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.credit_limit"),name:"credit_limit",help:e.rules.credit_limit?e.rules.credit_limit.message:null,validateStatus:e.rules.credit_limit?"error":null},{default:a(()=>[t(v,{value:e.formData.credit_limit,"onUpdate:value":l[13]||(l[13]=U=>e.formData.credit_limit=U),placeholder:"0","addon-before":e.appSetting.currency.symbol},null,8,["value","addon-before"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(g,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.formData.user_type=="staff_members"?e.$t("user.address"):e.$t("user.billing_address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:a(()=>[t(D,{value:e.formData.address,"onUpdate:value":l[14]||(l[14]=U=>e.formData.address=U),placeholder:e.$t("common.placeholder_default_text",[e.formData.user_type=="staff_members"?e.$t("user.address"):e.$t("user.billing_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.formData.user_type!="staff_members"?(r(),C(g,{key:1,gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.shipping_address"),name:"shipping_address",help:e.rules.shipping_address?e.rules.shipping_address.message:null,validateStatus:e.rules.shipping_address?"error":null},{default:a(()=>[t(D,{value:e.formData.shipping_address,"onUpdate:value":l[15]||(l[15]=U=>e.formData.shipping_address=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.shipping_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1},8,["title","width","open","onClose"])}const oa=B(m_,[["render",g_]]),la=()=>{const{t:e}=te(),l="users",c="customers",n="suppliers",h={warehouse_id:void 0,warehouses:[],name:"",email:"",profile_image:void 0,profile_image_url:void 0,phone:"",address:"",status:"enabled"},y={shipping_address:"",opening_balance:"",opening_balance_type:"receive",credit_period:"30",credit_limit:"",tax_number:void 0},u={user_type:"customers",...h,...y},d={...u,user_type:"staff_members",role_id:void 0,password:""},m={user_type:"suppliers",...u,...y},p=[{title:e("user.name"),dataIndex:"name",key:"name"},{title:e("user.email"),dataIndex:"email"},{title:e("user.created_at"),dataIndex:"created_at"},{title:e("user.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],_=[{title:e("user.name"),dataIndex:"name",key:"name"},{title:e("user.email"),dataIndex:"email"},{title:e("user.created_at"),dataIndex:"created_at"},{title:e("common.balance"),dataIndex:"balance"},{title:e("user.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],f=[{key:"users.name",value:e("user.name")},{key:"email",value:e("user.email")},{key:"phone",value:e("user.phone")}];return{customerInitData:u,staffMemberInitData:d,supplierInitData:m,columns:p,supplierCustomerColumns:_,filterableColumns:f,staffMemberAddEditUrl:l,customerAddEditUrl:c,supplierAddEditUrl:n}},y_=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:oa},setup(e,{emit:l}){const{permsArray:c}=Y(),{supplierInitData:n,supplierAddEditUrl:h}=la(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,supplierAddEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),h_={key:0};function b_(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("suppliers_create")||e.permsArray.includes("admin")?(r(),S("div",h_,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"suppliers"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("supplier.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.supplierAddEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,addEditData:e.formData,data:e.formData,pageTitle:e.$t("supplier.add"),successMessage:e.$t("supplier.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","addEditData","data","pageTitle","successMessage"])])):A("",!0)}const v_=B(y_,[["render",b_]]),k_=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:oa},setup(e,{emit:l}){const{permsArray:c}=Y(),{customerInitData:n,customerAddEditUrl:h}=la(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,customerAddEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),w_={key:0};function C_(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("customers_create")||e.permsArray.includes("admin")?(r(),S("div",w_,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"customers"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("customer.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.customerAddEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,addEditData:e.formData,data:e.formData,pageTitle:e.$t("customer.add"),successMessage:e.$t("customer.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","addEditData","data","pageTitle","successMessage"])])):A("",!0)}const vo=B(k_,[["render",C_]]),S_=Z({props:["orderPageObject","rules","usersList","editOrderDisable"],emits:["onSuccess"],components:{SearchOutlined:nt,SupplierAddButton:v_,CustomerAddButton:vo},setup(e,{emit:l}){const c=Se({orderSearchTerm:[],productFetching:!1,products:[]}),n=gt(y=>{if(c.products=[],y!=""){const u=y.trim();c.productFetching=!0;const d=`name lk "${u}%" or (phone lk "${u}%")`;let m=`${e.orderPageObject.userType}?fields=id,xid,name,phone&filters=${encodeURIComponent(d)}`;axiosAdmin.get(m).then(p=>{c.products=p.data,c.productFetching=!1})}},300),h=(y,u)=>{l("onSuccess",y)};return me(()=>e.usersList,(y,u)=>{c.products=[y],c.orderSearchTerm=y.xid}),{...rt(c),fetchProducts:n,searchValueSelected:h}}}),$_={style:{display:"flex"}},D_={key:0},A_=w("br",null,null,-1);function T_(e,l,c,n,h,y){const u=o("SearchOutlined"),d=o("a-spin"),m=o("a-select-option"),p=o("a-select"),_=o("SupplierAddButton"),f=o("CustomerAddButton"),g=o("a-form-item");return r(),C(g,{label:e.$t(`${e.orderPageObject.langKey}.user`),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:a(()=>[w("span",$_,[t(p,{value:e.orderSearchTerm,"onUpdate:value":l[0]||(l[0]=b=>e.orderSearchTerm=b),"show-search":"","filter-option":!1,placeholder:e.$t("common.select_default_text",[e.$t(`${e.orderPageObject.langKey}.user`)]),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:e.fetchProducts,"option-label-prop":"label",onSelect:e.searchValueSelected,disabled:e.editOrderDisable},We({suffixIcon:a(()=>[t(u)]),default:a(()=>[(r(!0),S(O,null,G(e.products,b=>(r(),C(m,{key:b.xid,value:b.xid,label:b.name,product:b},{default:a(()=>[i(s(b.name)+" ",1),b.phone&&b.phone!=""?(r(),S("span",D_,[A_,i(" "+s(b.phone),1)])):A("",!0)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(d,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onSelect","disabled"]),e.orderPageObject.userType=="suppliers"?(r(),C(_,{key:0})):(r(),C(f,{key:1}))])]),_:1},8,["label","help","validateStatus"])}const ko=B(S_,[["render",T_]]),E_={components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,ExclamationCircleOutlined:Te,SearchOutlined:nt,SaveOutlined:he,LoadingOutlined:Ie,TaxAddButton:Oa,WarehouseAddButton:Ft,ProductAddButton:Ua,DateTimePicker:na,AdminPageHeader:ge,UserSearch:ko},setup(){const{addEditRequestAdmin:e,loading:l,rules:c}=ve(),{appSetting:n,formatAmount:h,formatAmountCurrency:y,taxTypes:u,orderStatus:d,purchaseOrderStatus:m,salesOrderStatus:p,salesReturnStatus:_,purchaseReturnStatus:f,permsArray:g,selectedWarehouse:b}=Y(),{orderItemColumns:v}=ea(),{state:k,orderType:$,orderPageObject:D,selectedProducts:I,formData:F,productsAmount:P,taxes:T,recalculateValues:U,fetchProducts:M,searchValueSelected:W,quantityChanged:V,recalculateFinalTotal:K,showDeleteConfirm:q,taxChanged:L,editItem:X,addEditVisible:J,addEditFormData:le,addEditFormSubmitting:H,addEditRules:N,addEditPageTitle:z,onAddEditSubmit:Q,onAddEditClose:j,inputValueChanged:oe}=yo(),{t:R}=te(),ae=E([]),ue=E([]),re=qe(),be=E([]),ie="taxes?limit=10000",_e="units?limit=10000",Ue=`warehouses?filters=id ne "${b.value.xid}"&hashable=${b.value.xid}&limit=10000`;ee(()=>{const ce=axiosAdmin.get(ie),De=axiosAdmin.get(_e),Pe=axiosAdmin.get(Ue);Promise.all([ce,De,Pe]).then(([x,ye,Ae])=>{T.value=x.data,ue.value=ye.data,ae.value=Ae.data}),$.value=="purchases"?be.value=m:$.value=="sales"?be.value=p:$.value=="sales-returns"?be.value=_:$.value=="purchase-returns"?be.value=f:$.value=="quotations"?be.value=[]:$.value=="stock-transfers"&&(be.value=p)});const Je=()=>{const ce={...F.value,order_type:D.value.type,total:F.value.subtotal,total_items:I.value.length,product_items:I.value};e({url:$.value,data:ce,successMessage:R(`${D.value.langKey}.created`),success:De=>{re.push({name:`admin.stock.${$.value}.index`})}})},ut=()=>{axiosAdmin.get(_e).then(ce=>{ue.value=ce.data})},ft=()=>{axiosAdmin.get(ie).then(ce=>{T.value=ce.data})},se=()=>{axiosAdmin.get(Ue).then(ce=>{ae.value=ce.data})};return{...rt(k),formData:F,productsAmount:P,rules:c,loading:l,warehouses:ae,taxes:T,onSubmit:Je,fetchProducts:M,searchValueSelected:W,selectedProducts:I,showDeleteConfirm:q,quantityChanged:V,formatAmountCurrency:y,taxChanged:L,recalculateFinalTotal:K,appSetting:n,editItem:X,orderPageObject:D,orderItemColumns:v,addEditVisible:J,addEditFormData:le,addEditFormSubmitting:H,addEditRules:N,addEditPageTitle:z,onAddEditSubmit:Q,onAddEditClose:j,allOrderStatus:be,taxTypes:u,permsArray:g,unitAdded:ut,taxAdded:ft,warehouseAdded:se,inputValueChanged:oe}}},O_={class:"small-text-message"},I_={style:{display:"flex"}},P_={style:{display:"flex"}},U_=w("br",null,null,-1),F_={style:{display:"flex"}},q_={style:{display:"flex"}};function M_(e,l,c,n,h,y){const u=o("SaveOutlined"),d=o("a-button"),m=o("a-page-header"),p=o("router-link"),_=o("a-breadcrumb-item"),f=o("a-breadcrumb"),g=o("AdminPageHeader"),b=o("a-input"),v=o("a-form-item"),k=o("a-col"),$=o("a-select-option"),D=o("a-select"),I=o("WarehouseAddButton"),F=o("UserSearch"),P=o("DateTimePicker"),T=o("a-row"),U=o("SearchOutlined"),M=o("a-spin"),W=o("ProductAddButton"),V=o("a-typography-text"),K=o("a-input-number"),q=o("EditOutlined"),L=o("DeleteOutlined"),X=o("a-table-summary-cell"),J=o("a-table-summary-row"),le=o("a-table"),H=o("a-textarea"),N=o("TaxAddButton"),z=o("a-form"),Q=o("a-card"),j=o("admin-page-table-content"),oe=o("a-modal");return r(),S(O,null,[t(g,null,{header:a(()=>[t(m,{title:e.$t(`menu.${n.orderPageObject.menuKey}`),onBack:l[0]||(l[0]=()=>e.$router.go(-1)),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",loading:n.loading,onClick:n.onSubmit,block:""},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.save")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(_,null,{default:a(()=>[i(s(n.orderPageObject.type=="sales"||n.orderPageObject.type=="sales-returns"||n.orderPageObject.type=="quotations"?e.$t("menu.sales"):e.$t("menu.purchases")),1)]),_:1}),t(_,null,{default:a(()=>[t(p,{to:{name:`admin.stock.${n.orderPageObject.type}.index`}},{default:a(()=>[i(s(e.$t(`menu.${n.orderPageObject.menuKey}`)),1)]),_:1},8,["to"])]),_:1}),t(_,null,{default:a(()=>[i(s(e.$t("common.create")),1)]),_:1})]),_:1})]),_:1}),t(j,null,{default:a(()=>[t(Q,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(z,{layout:"vertical"},{default:a(()=>[t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(v,{label:e.$t("stock.invoice_number"),name:"invoice_number",help:n.rules.invoice_number?n.rules.invoice_number.message:null,validateStatus:n.rules.invoice_number?"error":null},{default:a(()=>[t(b,{value:n.formData.invoice_number,"onUpdate:value":l[1]||(l[1]=R=>n.formData.invoice_number=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.invoice_number")])},null,8,["value","placeholder"]),w("small",O_,s(e.$t("stock.invoie_number_blank")),1)]),_:1},8,["label","help","validateStatus"])]),_:1}),n.orderPageObject.type=="stock-transfers"?(r(),C(k,{key:0,xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(v,{label:e.$t(`${n.orderPageObject.langKey}.warehouse`),name:"warehouse_id",help:n.rules.warehouse_id?n.rules.warehouse_id.message:null,validateStatus:n.rules.warehouse_id?"error":null,class:"required"},{default:a(()=>[w("span",I_,[t(D,{value:n.formData.warehouse_id,"onUpdate:value":l[2]||(l[2]=R=>n.formData.warehouse_id=R),placeholder:e.$t("common.select_default_text",[e.$t(`${n.orderPageObject.langKey}.warehouse`)]),allowClear:!0,optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.warehouses,R=>(r(),C($,{key:R.xid,value:R.xid,title:R.name},{default:a(()=>[i(s(R.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"]),t(I,{onOnAddSuccess:n.warehouseAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})):(r(),C(k,{key:1,xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(F,{orderPageObject:n.orderPageObject,rules:n.rules,usersList:[],editOrderDisable:!1,onOnSuccess:l[3]||(l[3]=R=>n.formData.user_id=R)},null,8,["orderPageObject","rules"])]),_:1})),t(k,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(v,{label:e.$t(`${n.orderPageObject.langKey}.${n.orderPageObject.langKey}_date`),name:"order_date",help:n.rules.order_date?n.rules.order_date.message:null,validateStatus:n.rules.order_date?"error":null,class:"required"},{default:a(()=>[t(P,{dateTime:n.formData.order_date,onDateTimeChanged:l[4]||(l[4]=R=>n.formData.order_date=R)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("product.product"),name:"orderSearchTerm",help:n.rules.product_items?n.rules.product_items.message:null,validateStatus:n.rules.product_items?"error":null},{default:a(()=>[w("span",P_,[t(D,{value:null,searchValue:e.orderSearchTerm,"show-search":"","filter-option":!1,placeholder:e.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:l[5]||(l[5]=R=>{e.orderSearchTerm=R,n.fetchProducts(R)}),size:"large","option-label-prop":"label",onFocus:l[6]||(l[6]=R=>e.products=[]),onSelect:n.searchValueSelected,onInputKeyDown:n.inputValueChanged},We({suffixIcon:a(()=>[t(U)]),default:a(()=>[(r(!0),S(O,null,G(e.products,R=>(r(),C($,{key:R.xid,value:R.xid,label:R.name,product:R},{default:a(()=>[i(" => "+s(R.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(M,{size:"small"})]),key:"0"}:void 0]),1032,["searchValue","placeholder","not-found-content","onSelect","onInputKeyDown"]),t(W,{size:"large"})])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(le,{"row-key":R=>R.xid,dataSource:n.selectedProducts,columns:n.orderItemColumns,pagination:!1},{bodyCell:a(({column:R,record:ae})=>[R.dataIndex==="name"?(r(),S(O,{key:0},[i(s(ae.name)+" ",1),U_,w("small",null,[t(V,{code:""},{default:a(()=>[i(s(e.$t("product.avl_qty"))+" "+s(`${ae.stock_quantity}${ae.unit_short_name}`),1)]),_:2},1024)])],64)):A("",!0),R.dataIndex==="unit_quantity"?(r(),C(K,{key:1,id:"inputNumber",value:ae.quantity,"onUpdate:value":ue=>ae.quantity=ue,onChange:ue=>n.quantityChanged(ae),min:0},null,8,["value","onUpdate:value","onChange"])):A("",!0),R.dataIndex==="single_unit_price"?(r(),S(O,{key:2},[i(s(n.formatAmountCurrency(ae.single_unit_price)),1)],64)):A("",!0),R.dataIndex==="total_discount"?(r(),S(O,{key:3},[i(s(n.formatAmountCurrency(ae.total_discount)),1)],64)):A("",!0),R.dataIndex==="total_tax"?(r(),S(O,{key:4},[i(s(n.formatAmountCurrency(ae.total_tax)),1)],64)):A("",!0),R.dataIndex==="subtotal"?(r(),S(O,{key:5},[i(s(n.formatAmountCurrency(ae.subtotal)),1)],64)):A("",!0),R.dataIndex==="action"?(r(),S(O,{key:6},[t(d,{type:"primary",onClick:ue=>n.editItem(ae),style:{"margin-left":"4px"}},{icon:a(()=>[t(q)]),_:2},1032,["onClick"]),t(d,{type:"primary",onClick:ue=>n.showDeleteConfirm(ae),style:{"margin-left":"4px"}},{icon:a(()=>[t(L)]),_:2},1032,["onClick"])],64)):A("",!0)]),summary:a(()=>[t(J,null,{default:a(()=>[t(X,{"col-span":4}),t(X,null,{default:a(()=>[i(s(e.$t("product.subtotal")),1)]),_:1}),t(X,null,{default:a(()=>[i(s(n.formatAmountCurrency(n.productsAmount.tax)),1)]),_:1}),t(X,{"col-span":2},{default:a(()=>[i(s(n.formatAmountCurrency(n.productsAmount.subtotal)),1)]),_:1})]),_:1})]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1}),t(T,{gutter:16,class:"mt-30"},{default:a(()=>[t(k,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("warehouse.terms_condition"),name:"terms_condition",help:n.rules.terms_condition?n.rules.terms_condition.message:null,validateStatus:n.rules.terms_condition?"error":null},{default:a(()=>[t(H,{value:n.formData.terms_condition,"onUpdate:value":l[7]||(l[7]=R=>n.formData.terms_condition=R),placeholder:e.$t("warehouse.terms_condition"),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("stock.notes"),name:"notes",help:n.rules.notes?n.rules.notes.message:null,validateStatus:n.rules.notes?"error":null},{default:a(()=>[t(H,{value:n.formData.notes,"onUpdate:value":l[8]||(l[8]=R=>n.formData.notes=R),placeholder:e.$t("stock.notes"),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[n.orderPageObject.type!="quotations"?(r(),C(T,{key:0,gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("stock.status"),name:"order_status",help:n.rules.order_status?n.rules.order_status.message:null,validateStatus:n.rules.order_status?"error":null,class:"required"},{default:a(()=>[t(D,{value:n.formData.order_status,"onUpdate:value":l[9]||(l[9]=R=>n.formData.order_status=R),placeholder:e.$t("common.select_default_text",[e.$t("stock.status")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(n.allOrderStatus,R=>(r(),C($,{key:R.key,value:R.key},{default:a(()=>[i(s(R.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("stock.order_tax"),name:"tax_id",help:n.rules.tax_id?n.rules.tax_id.message:null,validateStatus:n.rules.tax_id?"error":null},{default:a(()=>[w("span",F_,[t(D,{value:n.formData.tax_id,"onUpdate:value":l[10]||(l[10]=R=>n.formData.tax_id=R),placeholder:e.$t("common.select_default_text",[e.$t("stock.order_tax")]),allowClear:!0,onChange:n.taxChanged,optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.taxes,R=>(r(),C($,{key:R.xid,value:R.xid,title:R.name,tax:R},{default:a(()=>[i(s(R.name)+" ("+s(R.rate)+"%) ",1)]),_:2},1032,["value","title","tax"]))),128))]),_:1},8,["value","placeholder","onChange"]),t(N,{onOnAddSuccess:n.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("stock.discount"),name:"discount",help:n.rules.discount?n.rules.discount.message:null,validateStatus:n.rules.discount?"error":null},{default:a(()=>[t(K,{value:n.formData.discount,"onUpdate:value":l[11]||(l[11]=R=>n.formData.discount=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.discount")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("stock.shipping"),name:"shipping",help:n.rules.shipping?n.rules.shipping.message:null,validateStatus:n.rules.shipping?"error":null},{default:a(()=>[t(K,{value:n.formData.shipping,"onUpdate:value":l[12]||(l[12]=R=>n.formData.shipping=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.shipping")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(T,{gutter:16,class:"mt-10"},{default:a(()=>[t(k,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(e.$t("stock.order_tax")),1)]),_:1}),t(k,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(n.formatAmountCurrency(n.formData.tax_amount)),1)]),_:1})]),_:1}),t(T,{gutter:16,class:"mt-10"},{default:a(()=>[t(k,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(e.$t("stock.discount")),1)]),_:1}),t(k,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(n.formatAmountCurrency(n.formData.discount)),1)]),_:1})]),_:1}),t(T,{gutter:16,class:"mt-10"},{default:a(()=>[t(k,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(e.$t("stock.shipping")),1)]),_:1}),t(k,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(n.formatAmountCurrency(n.formData.shipping)),1)]),_:1})]),_:1}),t(T,{gutter:16,class:"mt-10"},{default:a(()=>[t(k,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(e.$t("stock.grand_total")),1)]),_:1}),t(k,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(n.formatAmountCurrency(n.formData.subtotal)),1)]),_:1})]),_:1}),t(T,{gutter:16,class:"mt-20 mb-20"},{default:a(()=>[t(d,{type:"primary",loading:n.loading,onClick:n.onSubmit,block:""},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.save")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(oe,{open:n.addEditVisible,closable:!1,centered:!0,title:n.addEditPageTitle,onOk:n.onAddEditSubmit},{footer:a(()=>[t(d,{key:"submit",type:"primary",loading:n.addEditFormSubmitting,onClick:n.onAddEditSubmit},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(d,{key:"back",onClick:n.onAddEditClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(z,{layout:"vertical"},{default:a(()=>[t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("product.unit_price"),name:"unit_price",help:n.addEditRules.unit_price?n.addEditRules.unit_price.message:null,validateStatus:n.addEditRules.unit_price?"error":null},{default:a(()=>[t(K,{value:n.addEditFormData.unit_price,"onUpdate:value":l[13]||(l[13]=R=>n.addEditFormData.unit_price=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.unit_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("product.discount"),name:"discount_rate",help:n.addEditRules.discount_rate?n.addEditRules.discount_rate.message:null,validateStatus:n.addEditRules.discount_rate?"error":null},{default:a(()=>[t(K,{value:n.addEditFormData.discount_rate,"onUpdate:value":l[14]||(l[14]=R=>n.addEditFormData.discount_rate=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.discount")]),min:"0",style:{width:"100%"}},{addonAfter:a(()=>[i("%")]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("product.tax"),name:"tax_id",help:n.addEditRules.tax_id?n.addEditRules.tax_id.message:null,validateStatus:n.addEditRules.tax_id?"error":null},{default:a(()=>[w("span",q_,[t(D,{value:n.addEditFormData.tax_id,"onUpdate:value":l[15]||(l[15]=R=>n.addEditFormData.tax_id=R),placeholder:e.$t("common.select_default_text",[e.$t("product.tax")]),allowClear:!0,optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.taxes,R=>(r(),C($,{key:R.xid,value:R.xid,title:R.name},{default:a(()=>[i(s(R.name)+" ("+s(R.rate)+"%) ",1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"]),t(N,{onOnAddSuccess:n.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("product.tax_type"),name:"tax_type",help:n.addEditRules.tax_type?n.addEditRules.tax_type.message:null,validateStatus:n.addEditRules.tax_type?"error":null},{default:a(()=>[t(D,{value:n.addEditFormData.tax_type,"onUpdate:value":l[16]||(l[16]=R=>n.addEditFormData.tax_type=R),placeholder:e.$t("common.select_default_text",[e.$t("product.tax_type")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(n.taxTypes,R=>(r(),C($,{key:R.key,value:R.key},{default:a(()=>[i(s(R.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const Ct=B(E_,[["render",M_]]),R_={components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,ExclamationCircleOutlined:Te,SearchOutlined:nt,SaveOutlined:he,BarcodeOutlined:xt,TaxAddButton:Oa,WarehouseAddButton:Ft,ProductAddButton:Ua,DateTimePicker:na,AdminPageHeader:ge,UserSearch:ko},setup(){const{addEditRequestAdmin:e,loading:l,rules:c}=ve(),{appSetting:n,formatAmount:h,formatAmountCurrency:y,taxTypes:u,orderStatus:d,purchaseOrderStatus:m,salesOrderStatus:p,salesReturnStatus:_,purchaseReturnStatus:f,permsArray:g,selectedWarehouse:b}=Y(),{orderItemColumns:v}=ea(),{state:k,orderType:$,orderPageObject:D,route:I,selectedProducts:F,selectedProductIds:P,formData:T,productsAmount:U,taxes:M,setTaxes:W,recalculateValues:V,fetchProducts:K,searchValueSelected:q,quantityChanged:L,recalculateFinalTotal:X,showDeleteConfirm:J,taxChanged:le,editItem:H,addEditVisible:N,addEditFormData:z,addEditFormSubmitting:Q,addEditRules:j,addEditPageTitle:oe,onAddEditSubmit:R,onAddEditClose:ae,removedOrderItemsIds:ue,calculateProductAmount:re,inputValueChanged:be}=yo(),{t:ie}=te(),_e=E([]),Ue=E([]),Je=E([]),ut=I.params.id,ft=qe(),se=E([]),ce="taxes?limit=10000",De="units?limit=10000",Pe=`warehouses?filters=id ne "${b.value.xid}"&hashable=${b.value.xid}&limit=10000`,x=E(!1);ee(()=>{const Le=axiosAdmin.get(`${$.value}/${ut}`),Rt=axiosAdmin.get(ce),Go=axiosAdmin.get(De),Jo=axiosAdmin.get(Pe);Promise.all([Le,Rt,Go,Jo]).then(([Qo,Xo,Zo,xo])=>{const Ke=Qo.data;T.value={invoice_number:Ke.order.invoice_number,order_date:Ke.order.order_date,user_id:Ke.order.x_user_id,warehouse_id:Ke.order.x_warehouse_id,notes:Ke.order.notes,terms_condition:Ke.order.terms_condition,order_status:Ke.order.order_status,tax_id:Ke.order.x_tax_id,tax_rate:Ke.order.tax_rate,tax_amount:Ke.order.tax_amount,discount:Ke.order.discount?Ke.order.discount:0,shipping:Ke.order.shipping?Ke.order.shipping:0,subtotal:Ke.order.total},P.value=Ke.ids,F.value=Ke.items,re(),Je.value=Ke.user,M.value=Xo.data,Ue.value=Zo.data,_e.value=xo.data,Ke.order.payment_status!="unpaid"&&(x.value=!0)}),$.value=="purchases"?se.value=m:$.value=="sales"?se.value=p:$.value=="sales-returns"?se.value=_:$.value=="purchase-returns"?se.value=f:$.value=="quotations"?se.value=[]:$.value=="stock-transfers"&&(se.value=p)});const ye=()=>{const Le={...T.value,total:T.value.subtotal,total_items:F.value.length,product_items:F.value,removed_items:ue.value,_method:"PUT"};e({url:`${$.value}/${ut}`,data:Le,successMessage:ie(`${D.value.langKey}.updated`),success:Rt=>{ft.push({name:`admin.stock.${$.value}.index`})}})},Ae=()=>{axiosAdmin.get(De).then(Le=>{Ue.value=Le.data})},Fe=()=>{axiosAdmin.get(ce).then(Le=>{M.value=Le.data})},Ne=()=>{axiosAdmin.get(Pe).then(Le=>{_e.value=Le.data})};return{...rt(k),formData:T,productsAmount:U,loading:l,rules:c,users:Je,warehouses:_e,taxes:M,onSubmit:ye,fetchProducts:K,searchValueSelected:q,selectedProducts:F,showDeleteConfirm:J,quantityChanged:L,formatAmountCurrency:y,taxChanged:le,recalculateFinalTotal:X,appSetting:n,editItem:H,orderPageObject:D,orderItemColumns:v,addEditVisible:N,addEditFormData:z,addEditFormSubmitting:Q,addEditRules:j,addEditPageTitle:oe,onAddEditSubmit:R,onAddEditClose:ae,allOrderStatus:se,taxTypes:u,permsArray:g,unitAdded:Ae,taxAdded:Fe,warehouseAdded:Ne,editOrderDisable:x,inputValueChanged:be}}},K_={style:{display:"flex"}},V_={style:{display:"flex"}},z_=w("br",null,null,-1),L_={key:0},B_={key:1},W_={style:{display:"flex"}},j_={style:{display:"flex"}};function H_(e,l,c,n,h,y){const u=o("SaveOutlined"),d=o("a-button"),m=o("a-page-header"),p=o("router-link"),_=o("a-breadcrumb-item"),f=o("a-breadcrumb"),g=o("AdminPageHeader"),b=o("a-alert"),v=o("a-input"),k=o("a-form-item"),$=o("a-col"),D=o("a-select-option"),I=o("a-select"),F=o("WarehouseAddButton"),P=o("UserSearch"),T=o("DateTimePicker"),U=o("a-row"),M=o("SearchOutlined"),W=o("a-spin"),V=o("ProductAddButton"),K=o("a-typography-text"),q=o("a-input-number"),L=o("EditOutlined"),X=o("DeleteOutlined"),J=o("a-table-summary-cell"),le=o("a-table-summary-row"),H=o("a-table"),N=o("a-textarea"),z=o("TaxAddButton"),Q=o("a-form"),j=o("a-card"),oe=o("a-modal");return r(),S(O,null,[t(g,null,{header:a(()=>[t(m,{title:e.$t(`menu.${n.orderPageObject.menuKey}`),onBack:l[0]||(l[0]=()=>e.$router.go(-1)),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",loading:n.loading,onClick:n.onSubmit,block:""},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.save")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(_,null,{default:a(()=>[i(s(n.orderPageObject.type=="sales"||n.orderPageObject.type=="sales-returns"||n.orderPageObject.type=="quotations"?e.$t("menu.sales"):e.$t("menu.purchases")),1)]),_:1}),t(_,null,{default:a(()=>[t(p,{to:{name:`admin.stock.${n.orderPageObject.type}.index`}},{default:a(()=>[i(s(e.$t(`menu.${n.orderPageObject.menuKey}`)),1)]),_:1},8,["to"])]),_:1}),t(_,null,{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:1})]),_:1})]),_:1}),t(j,{class:"page-content-container"},{default:a(()=>[n.editOrderDisable?(r(),C(b,{key:0,description:e.$t("messages.not_able_to_edit_order"),type:"warning",class:"mb-30",showIcon:""},null,8,["description"])):A("",!0),t(Q,{layout:"vertical"},{default:a(()=>[t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(k,{label:e.$t("stock.invoice_number"),name:"invoice_number",help:n.rules.invoice_number?n.rules.invoice_number.message:null,validateStatus:n.rules.invoice_number?"error":null},{default:a(()=>[t(v,{value:n.formData.invoice_number,"onUpdate:value":l[1]||(l[1]=R=>n.formData.invoice_number=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.invoice_number")]),disabled:n.editOrderDisable},null,8,["value","placeholder","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1}),n.orderPageObject.type=="stock-transfers"?(r(),C($,{key:0,xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(k,{label:e.$t(`${n.orderPageObject.langKey}.warehouse`),name:"warehouse_id",help:n.rules.warehouse_id?n.rules.warehouse_id.message:null,validateStatus:n.rules.warehouse_id?"error":null,class:"required"},{default:a(()=>[w("span",K_,[t(I,{value:n.formData.warehouse_id,"onUpdate:value":l[2]||(l[2]=R=>n.formData.warehouse_id=R),placeholder:e.$t("common.select_default_text",[e.$t(`${n.orderPageObject.langKey}.warehouse`)]),allowClear:!0,optionFilterProp:"title","show-search":"",disabled:n.editOrderDisable},{default:a(()=>[(r(!0),S(O,null,G(n.warehouses,R=>(r(),C(D,{key:R.xid,value:R.xid,title:R.name},{default:a(()=>[i(s(R.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder","disabled"]),t(F,{onOnAddSuccess:n.warehouseAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})):(r(),C($,{key:1,xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(P,{orderPageObject:n.orderPageObject,rules:n.rules,usersList:n.users,editOrderDisable:n.editOrderDisable,onOnSuccess:l[3]||(l[3]=R=>n.formData.user_id=R)},null,8,["orderPageObject","rules","usersList","editOrderDisable"])]),_:1})),t($,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(k,{label:e.$t(`${n.orderPageObject.langKey}.${n.orderPageObject.langKey}_date`),name:"order_date",help:n.rules.order_date?n.rules.order_date.message:null,validateStatus:n.rules.order_date?"error":null},{default:a(()=>[n.formData.order_date?(r(),C(T,{key:0,dateTime:n.formData.order_date,onDateTimeChanged:l[4]||(l[4]=R=>n.formData.order_date=R),disabled:n.editOrderDisable},null,8,["dateTime","disabled"])):A("",!0)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.product"),name:"orderSearchTerm",help:n.rules.product_items?n.rules.product_items.message:null,validateStatus:n.rules.product_items?"error":null},{default:a(()=>[w("span",V_,[t(I,{value:null,searchValue:e.orderSearchTerm,"show-search":"","filter-option":!1,placeholder:e.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:l[5]||(l[5]=R=>{e.orderSearchTerm=R,n.fetchProducts(R)}),size:"large","option-label-prop":"label",onFocus:l[6]||(l[6]=R=>e.products=[]),onSelect:n.searchValueSelected,disabled:n.editOrderDisable,onInputKeyDown:n.inputValueChanged},We({suffixIcon:a(()=>[t(M)]),default:a(()=>[(r(!0),S(O,null,G(e.products,R=>(r(),C(D,{key:R.xid,value:R.xid,label:R.name,product:R},{default:a(()=>[i(" => "+s(R.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(W,{size:"small"})]),key:"0"}:void 0]),1032,["searchValue","placeholder","not-found-content","onSelect","disabled","onInputKeyDown"]),t(V,{size:"large"})])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(H,{"row-key":R=>R.xid,dataSource:n.selectedProducts,columns:n.orderItemColumns,pagination:!1},{bodyCell:a(({column:R,record:ae})=>[R.dataIndex==="name"?(r(),S(O,{key:0},[i(s(ae.name)+" ",1),z_,w("small",null,[t(K,{code:""},{default:a(()=>[i(s(e.$t("product.avl_qty"))+" "+s(`${ae.stock_quantity}${ae.unit_short_name}`),1)]),_:2},1024)])],64)):A("",!0),R.dataIndex==="unit_quantity"?(r(),C(q,{key:1,id:"inputNumber",value:ae.quantity,"onUpdate:value":ue=>ae.quantity=ue,onChange:ue=>n.quantityChanged(ae),min:0,disabled:n.editOrderDisable},null,8,["value","onUpdate:value","onChange","disabled"])):A("",!0),R.dataIndex==="single_unit_price"?(r(),S(O,{key:2},[i(s(n.formatAmountCurrency(ae.single_unit_price)),1)],64)):A("",!0),R.dataIndex==="discount_amount"?(r(),S(O,{key:3},[i(s(n.formatAmountCurrency(ae.discount_amount)),1)],64)):A("",!0),R.dataIndex==="total_tax"?(r(),S(O,{key:4},[i(s(n.formatAmountCurrency(ae.total_tax)),1)],64)):A("",!0),R.dataIndex==="subtotal"?(r(),S(O,{key:5},[i(s(n.formatAmountCurrency(ae.subtotal)),1)],64)):A("",!0),R.dataIndex==="action"?(r(),S(O,{key:6},[n.editOrderDisable?(r(),S("div",L_,"-")):(r(),S("div",B_,[t(d,{type:"primary",onClick:ue=>n.editItem(ae),style:{"margin-left":"4px"}},{icon:a(()=>[t(L)]),_:2},1032,["onClick"]),t(d,{type:"primary",onClick:ue=>n.showDeleteConfirm(ae),style:{"margin-left":"4px"}},{icon:a(()=>[t(X)]),_:2},1032,["onClick"])]))],64)):A("",!0)]),summary:a(()=>[t(le,null,{default:a(()=>[t(J,{"col-span":4}),t(J,null,{default:a(()=>[i(s(e.$t("product.subtotal")),1)]),_:1}),t(J,null,{default:a(()=>[i(s(n.formatAmountCurrency(n.productsAmount.tax)),1)]),_:1}),t(J,{"col-span":2},{default:a(()=>[i(s(n.formatAmountCurrency(n.productsAmount.subtotal)),1)]),_:1})]),_:1})]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-30"},{default:a(()=>[t($,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("warehouse.terms_condition"),name:"terms_condition",help:n.rules.terms_condition?n.rules.terms_condition.message:null,validateStatus:n.rules.terms_condition?"error":null},{default:a(()=>[t(N,{value:n.formData.terms_condition,"onUpdate:value":l[7]||(l[7]=R=>n.formData.terms_condition=R),placeholder:e.$t("warehouse.terms_condition"),"auto-size":{minRows:2,maxRows:3},disabled:n.editOrderDisable},null,8,["value","placeholder","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.notes"),name:"notes",help:n.rules.notes?n.rules.notes.message:null,validateStatus:n.rules.notes?"error":null},{default:a(()=>[t(N,{value:n.formData.notes,"onUpdate:value":l[8]||(l[8]=R=>n.formData.notes=R),placeholder:e.$t("common.select_default_text",[e.$t("stock.notes")]),rows:5,disabled:n.editOrderDisable},null,8,["value","placeholder","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t($,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[n.orderPageObject.type!="quotations"?(r(),C(U,{key:0,gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.status"),name:"order_status",help:n.rules.order_status?n.rules.order_status.message:null,validateStatus:n.rules.order_status?"error":null},{default:a(()=>[t(I,{value:n.formData.order_status,"onUpdate:value":l[9]||(l[9]=R=>n.formData.order_status=R),placeholder:e.$t("common.select_default_text",[e.$t("stock.status")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(n.allOrderStatus,R=>(r(),C(D,{key:R.key,value:R.key},{default:a(()=>[i(s(R.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.order_tax"),name:"tax_id",help:n.rules.tax_id?n.rules.tax_id.message:null,validateStatus:n.rules.tax_id?"error":null},{default:a(()=>[w("span",W_,[t(I,{value:n.formData.tax_id,"onUpdate:value":l[10]||(l[10]=R=>n.formData.tax_id=R),placeholder:e.$t("common.select_default_text",[e.$t("stock.order_tax")]),allowClear:!0,onChange:n.taxChanged,optionFilterProp:"title","show-search":"",disabled:n.editOrderDisable},{default:a(()=>[(r(!0),S(O,null,G(n.taxes,R=>(r(),C(D,{key:R.xid,value:R.xid,title:R.name,tax:R},{default:a(()=>[i(s(R.name)+" ("+s(R.rate)+"%) ",1)]),_:2},1032,["value","title","tax"]))),128))]),_:1},8,["value","placeholder","onChange","disabled"]),t(z,{onOnAddSuccess:n.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.discount"),name:"discount",help:n.rules.discount?n.rules.discount.message:null,validateStatus:n.rules.discount?"error":null},{default:a(()=>[t(q,{value:n.formData.discount,"onUpdate:value":l[11]||(l[11]=R=>n.formData.discount=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.discount")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"},disabled:n.editOrderDisable},{addonBefore:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.shipping"),name:"shipping",help:n.rules.shipping?n.rules.shipping.message:null,validateStatus:n.rules.shipping?"error":null},{default:a(()=>[t(q,{value:n.formData.shipping,"onUpdate:value":l[12]||(l[12]=R=>n.formData.shipping=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.shipping")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"},disabled:n.editOrderDisable},{addonBefore:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-10"},{default:a(()=>[t($,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(e.$t("stock.order_tax")),1)]),_:1}),t($,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(n.formatAmountCurrency(n.formData.tax_amount)),1)]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-10"},{default:a(()=>[t($,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(e.$t("stock.discount")),1)]),_:1}),t($,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(n.formatAmountCurrency(n.formData.discount)),1)]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-10"},{default:a(()=>[t($,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(e.$t("stock.shipping")),1)]),_:1}),t($,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(n.formatAmountCurrency(n.formData.shipping)),1)]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-10"},{default:a(()=>[t($,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(e.$t("stock.grand_total")),1)]),_:1}),t($,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[i(s(n.formatAmountCurrency(n.formData.subtotal)),1)]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-20 mb-20"},{default:a(()=>[t(d,{type:"primary",loading:n.loading,onClick:n.onSubmit,block:""},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.save")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(oe,{open:n.addEditVisible,closable:!1,centered:!0,title:n.addEditPageTitle,onOk:n.onAddEditSubmit},{footer:a(()=>[t(d,{key:"submit",type:"primary",loading:n.addEditFormSubmitting,onClick:n.onAddEditSubmit},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(d,{key:"back",onClick:n.onAddEditClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(Q,{layout:"vertical"},{default:a(()=>[t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.unit_price"),name:"unit_price",help:n.addEditRules.unit_price?n.addEditRules.unit_price.message:null,validateStatus:n.addEditRules.unit_price?"error":null},{default:a(()=>[t(q,{value:n.addEditFormData.unit_price,"onUpdate:value":l[13]||(l[13]=R=>n.addEditFormData.unit_price=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.unit_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.discount"),name:"discount_rate",help:n.addEditRules.discount_rate?n.addEditRules.discount_rate.message:null,validateStatus:n.addEditRules.discount_rate?"error":null},{default:a(()=>[t(q,{value:n.addEditFormData.discount_rate,"onUpdate:value":l[14]||(l[14]=R=>n.addEditFormData.discount_rate=R),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.discount")]),min:"0",style:{width:"100%"}},{addonAfter:a(()=>[i("%")]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.tax"),name:"tax_id",help:n.addEditRules.tax_id?n.addEditRules.tax_id.message:null,validateStatus:n.addEditRules.tax_id?"error":null},{default:a(()=>[w("span",j_,[t(I,{value:n.addEditFormData.tax_id,"onUpdate:value":l[15]||(l[15]=R=>n.addEditFormData.tax_id=R),placeholder:e.$t("common.select_default_text",[e.$t("product.tax")]),allowClear:!0,optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.taxes,R=>(r(),C(D,{key:R.xid,value:R.xid,title:R.name},{default:a(()=>[i(s(R.name)+" ("+s(R.rate)+"%) ",1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"]),t(z,{onOnAddSuccess:n.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.tax_type"),name:"tax_type",help:n.addEditRules.tax_type?n.addEditRules.tax_type.message:null,validateStatus:n.addEditRules.tax_type?"error":null},{default:a(()=>[t(I,{value:n.addEditFormData.tax_type,"onUpdate:value":l[16]||(l[16]=R=>n.addEditFormData.tax_type=R),placeholder:e.$t("common.select_default_text",[e.$t("product.tax_type")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(n.taxTypes,R=>(r(),C(D,{key:R.key,value:R.key},{default:a(()=>[i(s(R.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const St=B(R_,[["render",H_]]),N_={components:{PlusOutlined:ne,DeleteOutlined:fe,OrderTable:Nt,DateRangePicker:tt,AdminPageHeader:ge},setup(){const{formatAmountCurrency:e,orderType:l,orderPageObject:c,orderStatus:n,permsArray:h}=Y(),y=Ye(),u=E([]),d=E(null),m=E([]),p=E(null),_=E({payment_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",searchString:""});ee(()=>{f()});const f=()=>{const g=axiosAdmin.get(`${c.value.userType}?limit=10000`);Promise.all([g]).then(([b])=>{u.value=b.data})};return me(()=>y.meta.orderType,(g,b)=>{(g=="purchases"||g=="purchase-returns"||g=="sales"||g=="sales-returns"||g=="quotations")&&(l.value=y.meta.orderType,_.value={payment_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",searchString:""},f(),d.value.resetPicker())}),{orderPageObject:c,permsArray:h,orderStatus:n,formatAmountCurrency:e,users:u,filters:_,orderType:l,serachDateRangePicker:d,selectedRowIds:m,orderTableRef:p}}};function Y_(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("DeleteOutlined"),v=o("a-space"),k=o("a-col"),$=o("a-input-search"),D=o("a-select-option"),I=o("a-select"),F=o("DateRangePicker"),P=o("a-row"),T=o("admin-page-filters"),U=o("a-tab-pane"),M=o("a-tabs"),W=o("OrderTable"),V=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t(`menu.${n.orderPageObject.menuKey}`),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(n.orderPageObject.type=="sales"||n.orderPageObject.type=="sales-returns"||n.orderPageObject.type=="quotations"?e.$t("menu.sales"):e.$t("menu.purchases")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t(`menu.${n.orderPageObject.menuKey}`)),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(P,{gutter:[16,16]},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[n.permsArray.includes(`${n.orderPageObject.permission}_create`)||n.permsArray.includes("admin")?(r(),C(d,{key:0,to:{name:`admin.stock.${n.orderPageObject.type}.create`}},{default:a(()=>[t(g,{type:"primary"},{default:a(()=>[t(f),i(" "+s(e.$t(`${n.orderPageObject.langKey}.add`)),1)]),_:1})]),_:1},8,["to"])):A("",!0),n.selectedRowIds.length>0&&(n.permsArray.includes(`${n.orderPageObject.permission}_view`)||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:n.orderTableRef.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(P,{gutter:[16,16],justify:"end"},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[t($,{style:{width:"100%"},value:n.filters.searchString,"onUpdate:value":l[0]||(l[0]=K=>n.filters.searchString=K),"show-search":"",placeholder:e.$t("common.placeholder_search_text",[e.$t("stock.invoice_number")])},null,8,["value","placeholder"])]),_:1}),t(k,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(I,{value:n.filters.user_id,"onUpdate:value":l[1]||(l[1]=K=>n.filters.user_id=K),placeholder:e.$t("common.select_default_text",[e.$t(`${n.orderPageObject.langKey}.user`)]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.users,K=>(r(),C(D,{key:K.xid,title:K.name,value:K.xid},{default:a(()=>[i(s(K.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(k,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(F,{ref:"serachDateRangePicker",onDateTimeChanged:l[2]||(l[2]=K=>n.filters.dates=K)},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(V,null,{default:a(()=>[t(P,null,{default:a(()=>[t(k,{span:24},{default:a(()=>[t(M,{activeKey:n.filters.payment_status,"onUpdate:activeKey":l[3]||(l[3]=K=>n.filters.payment_status=K)},{default:a(()=>[t(U,{key:"all",tab:`${e.$t("common.all")} ${e.$t("menu."+n.orderPageObject.menuKey)}`},null,8,["tab"]),(r(!0),S(O,null,G(n.orderStatus,K=>(r(),C(U,{key:K.key,tab:`${K.value}`},null,8,["tab"]))),128))]),_:1},8,["activeKey"])]),_:1})]),_:1}),t(W,{ref:"orderTableRef",orderType:n.orderType,filters:n.filters,tableSize:"middle",bordered:!0,selectable:!0,onOnRowSelection:l[4]||(l[4]=K=>n.selectedRowIds=K)},null,8,["orderType","filters"])]),_:1})],64)}const Vt=B(N_,[["render",Y_]]);zn.div`
    border-radius: 10px;
    background-color: #fff;
    position: relative;
	width: 100%;

    @media only screen and (max-width: 767px){
        max-width: 350px;
        margin: 0 auto;
    }
    &.list-view{
        max-width: 100%;
        .product-single-price__offer{
            @media only screen and (max-width: 991px) and (min-width: 768px){
                display: block;
            }
        }
    }
    .product-list{
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        figure{
            @media only screen and (max-width: 1199px){
            }
            @media only screen and (max-width: 991px){
                margin: 0 0 20px;
            }
            img{
                border-radius: 10px;
            }
        }
        .product-single-description{
            p{
                font-size: 15px;
            }
        }
        .product-single-title{
            font-size: 18px;
            margin: 25px 0 16px;
            @media only screen and (max-width: 1199px){
                margin: 0 0 16px;
            }
        }
        .product-single-info{
            margin-top: 25px;
            @media only screen and (max-width: 1199px){
                margin-top: 0;
            }
        }
        .product-single-price__new{
            font-size: 16px;
        }
        .product-single-action{
            flex-flow: column;
            align-items: flex-start;
            margin: 28px 0 0 0;
            button{
                min-width: 132px;
                margin: 0;
                padding: 0px 14px;
                height: 38px;
            }
            .btn-cart{
                margin: 0 0 10px;
            }
            .ant-btn-sm{
                height: 38px;
            }
        }
        .btn-heart{
            @media only screen and (max-width: 1599px){
                top: 0;
            }
            @media only screen and (max-width: 1199px){
                top: -4px;
            }
            @media only screen and (max-width: 991){
                top: 0;
            }
        }
    }
    figure{
        margin-bottom: 0;
        img{
            width: 100px;
        }
    }
    figcaption{
        padding: 20px 20px 26px;
    }
    .quantity-box{
        position: absolute;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        height: 15px;
        top: 1px;
        background-color: #fff;
		padding: 0 6px;
		left: 1px;
    }
    .product-single-title{
        margin-bottom: 10px;
        font-size: 15px;
        font-weight: 500;

    }
    .product-single-price{
        margin-bottom: 5px;
        del{
            margin: 0 5px;
        }
    }
    .product-single-price__new{
        font-weight: 600;
    }
    .product-single-price__offer{
        font-weight: 500;
        font-size: 12px;
    }
    .product-single-rating{
        font-size: 12px;
        font-weight: 500;
        display: flex;
        flex-wrap: wrap;
        align-items: center;

        .ant-rate-star{
            div{
                transform: none !important;
            }
        }
        .total-reviews{
            font-weight: 400;
          
        }
        svg{
            width: 13px;
        }
    }
    .product-single-action{
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        margin: 20px -5px -5px -5px;
        button{
            font-size: 12px;
            margin: 5px;
        }


        .ant-btn-sm{
            font-size: 12px;
            padding: 0px 18.065px;
            height: 36px;
        }
    }
`;const G_=zn.div`
    max-width: 650px;
    margin: 0 auto;
    .ant-card{
        margin-bottom: 0 !important;
    }

    .ant-form-item{
        margin-bottom: 0;
    }

    .summary-table-title{
        font-size: 18px;
        font-weight: 500;
        margin-bottom: 25px;
      
    }
    .order-summary-inner{
        padding-bottom: 5px;
        @media only screen and (max-width: 1599px){
            max-width: 600px;
            margin: 0 auto;
        }
        .ant-form-item-control{
            line-height: 2.2;
        }
        .ant-form-item-control-wrapper{
            width: 100%;
        }
        .ant-select{
            .ant-select-selection-item{
                font-weight: 500;
            }
        }
        .ant-select-single:not(.ant-select-customize-input) .ant-select-selector{
            height: 30px !important;
        }
    }
    .invoice-summary-inner{
        .summary-list{
            margin: 22px 0;
            li{
                &:not(:last-child){
                    margin-bottom: 12px;
                }
            }
        }
      
    }

    .summary-list{
		padding: 0;
        li{
            display: flex;
            justify-content: space-between;
            &:not(:last-child){
                margin-bottom: 18px;
            }
            span{
                font-weight: 500;
            }
          
        }
    }
    .ant-select-focused.ant-select-single{
        .ant-select-selector{
            box-shadow: 0 0 !important;
        }
    }
    .ant-select-single{
        margin-top: 18px;
        .ant-select-selection-search-input{
            height: fit-content;
        }
        .ant-select-selector{
            padding: 0 !important;
            border: 0 none !important;
            
        }
       
    }
    .promo-apply-form{
        display: flex;
        align-items: flex-end;
        margin: 5px 0 18px;
        @media only screen and (max-width: 479px){
            flex-flow: column;
            align-items: flex-start;
        }
        .ant-form-item{
            margin-bottom: 0;
        }
        .ant-row{
            flex: auto;
            flex-flow: column;
        }
        .ant-form-item-label{
            text-align: 'right';
            line-height: 30px;
            label{
                font-weight: 400;
                margin-bottom: 4px;
                height: fit-content;
                
            }
        }
        .ant-form-item-control-wrapper{
            display: flex;
            width: 100%;
            @media only screen and (max-width: 479px){
                flex-flow: column;
            }
            .ant-form-item-control{
                width: 100%;
            }
            .ant-form-item-children{
                display: block;
                margin: '0 6px 0 0';
                height: auto;
                @media only screen and (max-width: 479px){
                    margin: '0 6px 10px 0';
                }
            }
            input{
                height: 40px;
                @media only screen and (max-width: 479px){
                    width: 100% !important;
                }
            }
            button{
                height: 40px;
            }
        }
    }
    .summary-total{
        display: inline-flex;
        justify-content: space-between;
        width: 100%;
        .summary-total-label{
            font-size: 16px;
            font-weight: 500;
          
        }
        .summary-total-amount{
            font-size: 18px;
            font-weight: 600;
          
        }
    }
    .btn-proceed{
        font-size: 15px;
        font-weight: 500;
        width: 100%;
        height: 50px;
        border-radius: 8px;
        margin-top: 22px;
        @media only screen and (max-width: 575px){
            font-size: 13px;
        }
        a{
            display: flex;
            align-items: center;
        }
        i,
        svg{
            'margin-left' : 6px;
            color: #fff;
        }
    }
`,J_=()=>{const{t:e}=te();Ce();const l=E([]);E([]);const c=E([]),n=E([]),h=E([]),y=E([]),u=E({}),d=E({user_id:void 0,tax_id:void 0,category_id:void 0,brand_id:void 0,tax_id:void 0,tax_rate:0,tax_amount:0,discount_type:"percentage",discount_value:0,discount:0,shipping:0,subtotal:0}),m=[{title:"#",dataIndex:"sn"},{title:e("product.name"),dataIndex:"name"},{title:e("product.quantity"),dataIndex:"unit_quantity"},{title:e("product.subtotal"),dataIndex:"subtotal"},{title:e("common.action"),dataIndex:"action"}],p="customers?limit=10000";return{taxes:l,customers:c,brands:n,categories:h,productLists:y,formData:d,customerUrl:p,orderItemColumns:m,getPreFetchData:()=>{const f=axiosAdmin.get("taxes?limit=10000"),g=axiosAdmin.get(p),b=axiosAdmin.get("categories?limit=10000"),v=axiosAdmin.get("brands?limit=10000"),k=axiosAdmin.post("pos/products",{brand_id:d.value.brand_id,category_id:d.value.category_id}),$=axiosAdmin.get("default-walkin-customer");Promise.all([f,g,k,b,v,$]).then(([D,I,F,P,T,U])=>{l.value=D.data,c.value=I.data,h.value=P.data,n.value=T.data,y.value=F.data.products;var M=Qe(c.value,["xid",U.data.customer.xid]);M&&(u.value=M,d.value={...d.value,user_id:M.xid})})},posDefaultCustomer:u}};const Q_={props:["product"],setup(e){const{formatAmountCurrency:l}=Y();return{formatAmountCurrency:l}}},X_={key:0,class:"product-pos"},Z_={class:"product-pos-top"},x_={href:"javascript:void(0)"},ef={class:"quantity-box",to:"#"},tf=["src"],af={class:"product-pos-bottom"},nf={class:"product-title"},of={class:"product-details"},lf={class:"product-price"};function sf(e,l,c,n,h,y){return c.product&&c.product.xid?(r(),S("div",X_,[w("div",Z_,[w("a",x_,[w("span",ef,s(c.product.stock_quantity)+" "+s(c.product.unit.short_name),1),w("img",{src:c.product.image_url,class:"img-fit"},null,8,tf)])]),w("div",af,[w("div",null,[w("h5",nf,s(c.product.name),1)]),w("div",of,[w("div",lf,[w("span",null,s(n.formatAmountCurrency(c.product.subtotal)),1)])])])])):A("",!0)}const rf=B(Q_,[["render",sf]]),df={props:["visible","data","selectedProducts"],emits:["closed","success"],components:{CheckOutlined:vt,PlusOutlined:ne,LeftOutlined:On,RightOutlined:Wt,DeleteOutlined:fe},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{appSetting:y,formatAmountCurrency:u}=Y(),d=E([]),m=E({payment_mode_id:void 0,amount:0,notes:""}),{t:p}=te(),_=E([]),f=E([{title:p("payments.payment_mode"),dataIndex:"payment_mode"},{title:p("payments.amount"),dataIndex:"amount"},{title:p("common.action"),dataIndex:"action"}]),g=E(!1);ee(()=>{axiosAdmin.get("payment-modes").then(P=>{d.value=P.data})});const b=()=>{m.value={payment_mode_id:void 0,amount:0,notes:""},_.value=[],l("closed")},v=()=>{c({url:"pos/payment",data:m.value,success:P=>{_.value=[..._.value,{...m.value,id:Math.random().toString(36).slice(2)}],m.value={payment_mode_id:void 0,amount:0,notes:""},g.value=!1}})},k=()=>{const P={all_payments:_.value,product_items:e.selectedProducts,details:e.data};c({url:"pos/save",data:P,successMessage:e.successMessage,success:T=>{m.value={payment_mode_id:void 0,amount:0,notes:""},_.value=[],g.value=!1,l("success",T.order)}})},$=()=>{m.value={payment_mode_id:void 0,amount:0,notes:""},g.value=!1},D=P=>{var T=Qe(d.value,["xid",P]);return T?T.name:"-"},I=P=>{var T=Xe(_.value,U=>U.id!=P);_.value=T},F=pe(()=>{var P=ha(_.value,T=>parseFloat(T.amount));return P+parseFloat(m.value.amount)});return{loading:n,rules:h,drawerClosed:b,paymentModes:d,formData:m,appSetting:y,formatAmountCurrency:u,onSubmit:v,allPaymentRecords:_,paymentRecordsColumns:f,showAddForm:g,completeOrder:k,goBack:$,getPaymentModeName:D,deletePayment:I,totalEnteredAmount:F,drawerWidth:window.innerWidth<=991?"90%":"50%"}}},uf={style:{color:"#7c8db5 !important"}};function mf(e,l,c,n,h,y){const u=o("a-statistic"),d=o("a-col"),m=o("a-row"),p=o("PlusOutlined"),_=o("a-button"),f=o("RightOutlined"),g=o("LeftOutlined"),b=o("DeleteOutlined"),v=o("a-table"),k=o("a-select-option"),$=o("a-select"),D=o("a-form-item"),I=o("a-input"),F=o("a-textarea"),P=o("CheckOutlined"),T=o("a-form"),U=o("a-drawer");return r(),C(U,{title:e.$t("payments.order_payment"),width:n.drawerWidth,maskClosable:!1,open:c.visible,onClose:n.drawerClosed},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{span:24},{default:a(()=>[t(u,{title:e.$t("stock.total_items"),value:c.selectedProducts.length,style:{"margin-right":"50px"}},null,8,["title","value"])]),_:1}),t(d,{span:24,class:"mt-20"},{default:a(()=>[t(u,{title:e.$t("stock.paying_amount"),value:n.formatAmountCurrency(n.totalEnteredAmount)},null,8,["title","value"])]),_:1}),t(d,{span:24,class:"mt-20"},{default:a(()=>[t(u,{title:e.$t("stock.payable_amount"),value:n.formatAmountCurrency(c.data.subtotal)},null,8,["title","value"])]),_:1}),t(d,{span:24,class:"mt-20"},{default:a(()=>[n.totalEnteredAmount<=c.data.subtotal?(r(),C(u,{key:0,title:e.$t("payments.due_amount"),value:n.formatAmountCurrency(c.data.subtotal-n.totalEnteredAmount)},null,8,["title","value"])):(r(),C(u,{key:1,title:e.$t("stock.change_return"),value:n.formatAmountCurrency(n.totalEnteredAmount-c.data.subtotal)},null,8,["title","value"]))]),_:1})]),_:1})]),_:1}),t(d,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(m,{gutter:[24,24]},{default:a(()=>[n.showAddForm?(r(),C(d,{key:1,span:24},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{xs:24,sm:24,md:10,lg:10},{default:a(()=>[t(_,{block:!0,type:"primary",onClick:n.goBack},{default:a(()=>[t(g),i(" "+s(e.$t("common.back")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):(r(),C(d,{key:0,span:24},{default:a(()=>[t(m,{gutter:[16,8],class:"mt-20"},{default:a(()=>[t(d,{xs:24,sm:24,md:10,lg:10},{default:a(()=>[t(_,{block:!0,type:"primary",onClick:l[0]||(l[0]=()=>n.showAddForm=!0)},{default:a(()=>[t(p),i(" "+s(e.$t("payments.add")),1)]),_:1})]),_:1}),t(d,{xs:24,sm:24,md:10,lg:10},{default:a(()=>[t(_,{block:!0,onClick:n.completeOrder},{default:a(()=>[i(s(e.$t("stock.complete_order"))+" ",1),t(f)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})),n.showAddForm?(r(),C(d,{key:3,span:24},{default:a(()=>[t(T,{layout:"vertical"},{default:a(()=>[t(m,{gutter:16},{default:a(()=>[t(d,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("payments.payment_mode"),name:"payment_mode_id",help:n.rules.payment_mode_id?n.rules.payment_mode_id.message:null,validateStatus:n.rules.payment_mode_id?"error":null},{default:a(()=>[t($,{value:n.formData.payment_mode_id,"onUpdate:value":l[1]||(l[1]=M=>n.formData.payment_mode_id=M),placeholder:e.$t("common.select_default_text",[e.$t("payments.payment_mode")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(n.paymentModes,M=>(r(),C(k,{key:M.xid,value:M.xid},{default:a(()=>[i(s(M.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(d,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("stock.paying_amount"),name:"amount",help:n.rules.amount?n.rules.amount.message:null,validateStatus:n.rules.amount?"error":null},{default:a(()=>[t(I,{prefix:n.appSetting.currency.symbol,value:n.formData.amount,"onUpdate:value":l[2]||(l[2]=M=>n.formData.amount=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.payable_amount")])},null,8,["prefix","value","placeholder"]),w("small",uf,[i(s(e.$t("stock.payable_amount"))+" ",1),w("span",null,s(n.formatAmountCurrency(c.data.subtotal)),1)])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(m,{gutter:16},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(D,{label:e.$t("payments.notes"),name:"notes",help:n.rules.notes?n.rules.notes.message:null,validateStatus:n.rules.notes?"error":null},{default:a(()=>[t(F,{value:n.formData.notes,"onUpdate:value":l[3]||(l[3]=M=>n.formData.notes=M),placeholder:e.$t("payments.notes"),rows:5},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(m,{gutter:16},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(_,{type:"primary",loading:n.loading,onClick:n.onSubmit,block:""},{icon:a(()=>[t(P)]),default:a(()=>[i(" "+s(e.$t("common.add")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})):(r(),C(d,{key:2,span:24},{default:a(()=>[t(v,{dataSource:n.allPaymentRecords,columns:n.paymentRecordsColumns,pagination:!1},{bodyCell:a(({column:M,record:W})=>[M.dataIndex==="payment_mode"?(r(),S(O,{key:0},[i(s(n.getPaymentModeName(W.payment_mode_id)),1)],64)):A("",!0),M.dataIndex==="amount"?(r(),S(O,{key:1},[i(s(n.formatAmountCurrency(W.amount)),1)],64)):A("",!0),M.dataIndex==="action"?(r(),C(_,{key:2,type:"primary",onClick:V=>n.deletePayment(W.id),danger:""},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])):A("",!0)]),_:1},8,["dataSource","columns"])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const cf=B(df,[["render",mf]]),pf={props:["text"],setup(e){return E(""),{text:e.text}}};function _f(e,l,c,n,h,y){const u=o("a-qrcode"),d=o("a-space");return r(),C(d,{direction:"vertical",align:"center"},{default:a(()=>[t(u,{value:n.text,size:100},null,8,["value"])]),_:1})}const ff=B(pf,[["render",_f]]),gf=window.config.pos_invoice_css,yf=Z({props:["visible","order"],emits:["closed","success"],components:{PrinterOutlined:ya,BarcodeGenerator:ro,QRcodeGenerator:ff},setup(e,{emit:l}){const{formatAmountCurrency:c,formatDate:n,selectedWarehouse:h}=Y();return{onClose:()=>{l("closed")},formatDate:n,selectedWarehouse:h,formatAmountCurrency:c,printInvoice:()=>{var d=document.getElementById("pos-invoice").innerHTML,m=window.open("","","height=500, width=500");m.document.write(`<link rel="stylesheet" href="${gf}"><html><body>`),m.document.write(d),m.document.write("</body></html>"),m.document.close(),m.print()}}}}),hf={id:"pos-invoice"},bf={key:0,style:{"max-width":"400px",margin:"0px auto"}},vf={class:"invoice-header"},kf=["src","alt"],wf={class:"company-details"},Cf={class:"company-address"},Sf={style:{"margin-bottom":"0px"}},$f={class:"tax-invoice-details"},Df={class:"tax-invoice-title"},Af={class:"invoice-customer-details"},Tf={style:{width:"50%"}},Ef={style:{width:"50%"}},Of={style:{width:"50%"}},If={style:{width:"50%"}},Pf={class:"tax-invoice-items"},Uf={style:{width:"100%"}},Ff={style:{background:"#eee"}},qf=w("td",{style:{width:"5%"}},"#",-1),Mf={style:{width:"25%"}},Rf={key:0},Kf={style:{"text-align":"right"}},Vf={class:"item-row-other"},zf=["colspan"],Lf={colspan:"2",style:{"text-align":"right"}},Bf={class:"item-row-other"},Wf=["colspan"],jf={colspan:"2",style:{"text-align":"right"}},Hf={class:"item-row-other"},Nf=["colspan"],Yf={colspan:"2",style:{"text-align":"right"}},Gf={class:"tax-invoice-totals"},Jf={style:{width:"100%"}},Qf={style:{width:"30%"}},Xf={style:{"margin-bottom":"0px"}},Zf={style:{width:"30%"}},xf={style:{"margin-bottom":"0px"}},e1={style:{width:"40%","text-align":"center"}},t1={style:{"margin-bottom":"0px"}},a1={class:"paid-amount-deatils"},n1={style:{width:"100%"}},o1={style:{background:"#eee"}},l1={style:{width:"50%"}},s1={style:{width:"50%"}},r1={class:"paid-amount-row"},d1={style:{width:"100%"}},i1={style:{"text-align":"center"}},u1={style:{width:"100%"}},m1={key:0,style:{"margin-bottom":"0px"}},c1={key:0},p1={key:1,style:{"margin-bottom":"0px"}},_1={key:0,class:"discount-details"},f1={key:1,class:"barcode-details"},g1={key:2,style:{"text-align":"center"},class:"qrcode-details"},y1={class:"thanks-details"},h1={class:"footer-button"};function b1(e,l,c,n,h,y){const u=o("BarcodeGenerator"),d=o("QRcodeGenerator"),m=o("PrinterOutlined"),p=o("a-button"),_=o("a-modal");return r(),C(_,{open:e.visible,centered:!0,maskClosable:!1,title:e.$t("common.print_invoice"),width:"400px",onCancel:e.onClose},{footer:a(()=>[w("div",h1,[t(p,{type:"primary",onClick:e.printInvoice},{icon:a(()=>[t(m)]),default:a(()=>[i(" "+s(e.$t("common.print_invoice")),1)]),_:1},8,["onClick"])])]),default:a(()=>[w("div",hf,[e.order&&e.order.xid?(r(),S("div",bf,[w("div",vf,[w("img",{class:"invoice-logo",src:e.selectedWarehouse.logo_url,alt:e.selectedWarehouse.name},null,8,kf)]),w("div",wf,[w("h2",null,s(e.selectedWarehouse.name),1),w("p",Cf,s(e.selectedWarehouse.address),1),w("h4",Sf,s(e.$t("common.phone"))+": "+s(e.selectedWarehouse.phone),1),w("h4",null,s(e.$t("common.email"))+": "+s(e.selectedWarehouse.email),1)]),w("div",$f,[w("h3",Df,s(e.$t("sales.tax_invoice")),1),w("table",Af,[w("tr",null,[w("td",Tf,s(e.$t("sales.invoice"))+" : "+s(e.order.invoice_number),1),w("td",Ef,s(e.$t("common.date"))+" : "+s(e.formatDate(e.order.order_date)),1)]),w("tr",null,[w("td",Of,s(e.$t("stock.customer"))+" : "+s(e.order.user.name),1),w("td",If,s(e.$t("stock.sold_by"))+" : "+s(e.order.staff_member.name),1)])])]),w("div",Pf,[w("table",Uf,[w("thead",Ff,[qf,w("td",Mf,s(e.$t("common.item")),1),w("td",{style:Ve({width:e.selectedWarehouse.show_mrp_on_invoice?"10%":"25%"})},s(e.$t("common.qty")),5),e.selectedWarehouse.show_mrp_on_invoice?(r(),S("td",{key:0,style:Ve({width:(e.selectedWarehouse.show_mrp_on_invoice,"20%")})},s(e.$t("product.mrp")),5)):A("",!0),w("td",{style:Ve({width:e.selectedWarehouse.show_mrp_on_invoice?"20%":"25%"})},s(e.$t("common.rate")),5),w("td",{style:Ve({width:e.selectedWarehouse.show_mrp_on_invoice?"20%":"25%",textAlign:"right"})},s(e.$t("common.total")),5)]),w("tbody",null,[(r(!0),S(O,null,G(e.order.items,(f,g)=>(r(),S("tr",{class:"item-row",key:f.xid},[w("td",null,s(g+1),1),w("td",null,s(f.product.name),1),w("td",null,s(f.quantity+""+f.unit.short_name),1),e.selectedWarehouse.show_mrp_on_invoice?(r(),S("td",Rf,s(f.mrp?e.formatAmountCurrency(f.mrp):"-"),1)):A("",!0),w("td",null,s(e.formatAmountCurrency(f.unit_price)),1),w("td",Kf,s(e.formatAmountCurrency(f.subtotal)),1)]))),128)),w("tr",Vf,[w("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},s(e.$t("stock.order_tax")),9,zf),w("td",Lf,s(e.formatAmountCurrency(e.order.tax_amount)),1)]),w("tr",Bf,[w("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},s(e.$t("stock.discount")),9,Wf),w("td",jf,s(e.formatAmountCurrency(e.order.discount)),1)]),w("tr",Hf,[w("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},s(e.$t("stock.shipping")),9,Nf),w("td",Yf,s(e.formatAmountCurrency(e.order.shipping)),1)])])])]),w("div",Gf,[w("table",Jf,[w("tr",null,[w("td",Qf,[w("h3",Xf,s(e.$t("common.items"))+": "+s(e.order.total_items),1)]),w("td",Zf,[w("h3",xf,s(e.$t("common.qty"))+": "+s(e.order.total_quantity),1)]),w("td",e1,[w("h3",t1,s(e.$t("common.total"))+": "+s(e.formatAmountCurrency(e.order.total)),1)])])])]),w("div",a1,[w("table",n1,[w("thead",o1,[w("td",l1,s(e.$t("payments.paid_amount")),1),w("td",s1,s(e.$t("payments.due_amount")),1)]),w("tbody",null,[w("tr",r1,[w("td",null,s(e.formatAmountCurrency(e.order.paid_amount)),1),w("td",null,s(e.formatAmountCurrency(e.order.due_amount)),1)])])])]),w("div",null,[w("table",d1,[w("tr",i1,[w("td",u1,[e.order.order_payments?(r(),S("h4",m1,[i(s(e.$t("invoice.payment_mode"))+": ",1),(r(!0),S(O,null,G(e.order.order_payments,f=>(r(),S("span",{key:f.xid,style:{"margin-right":"5px"}},[i(s(e.formatAmountCurrency(f.amount))+" (",1),f.payment&&f.payment.payment_mode&&f.payment.payment_mode.name?(r(),S("span",c1,s(f.payment.payment_mode.name),1)):A("",!0),i(" ) ")]))),128))])):(r(),S("h3",p1,s(e.$t("invoice.payment_mode"))+": - ",1))])])])]),e.selectedWarehouse.show_discount_tax_on_invoice?(r(),S("div",_1,[w("p",null,s(e.$t("invoice.total_discount_on_mrp"))+" : "+s(e.formatAmountCurrency(e.order.saving_on_mrp)),1),w("p",null,s(e.$t("invoice.total_discount"))+" : "+s(e.order.saving_percentage)+"% ",1),w("p",null,s(e.$t("invoice.total_tax"))+" : "+s(e.formatAmountCurrency(e.order.total_tax_on_items)),1)])):A("",!0),e.selectedWarehouse.barcode_type=="barcode"?(r(),S("div",f1,[t(u,{value:e.order.invoice_number+"",height:25,width:1,fontSize:15,elementTag:"svg"},null,8,["value"])])):(r(),S("div",g1,[t(d,{text:e.order.invoice_number+""},null,8,["text"])])),w("div",y1,[w("h3",null,s(e.$t("invoice.thanks_message")),1)])])):A("",!0)])]),_:1},8,["open","title","onCancel"])}const v1=B(yf,[["render",b1]]);const k1=Z({props:["formData","brands","categories"],emits:["changed"],components:{ContainerOutlined:hl},setup(e,{emit:l}){return{reFetchProducts:()=>{l("changed")},getCategoryName:h=>h.length>9?h.substring(0,8)+"..":h}}}),w1=["onClick"];function C1(e,l,c,n,h,y){const u=o("ContainerOutlined"),d=o("a-avatar"),m=o("a-tooltip"),p=o("a-col"),_=o("a-row");return r(),C(_,{gutter:[16,16]},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24,xl:24,class:"pos-style-1-category-scroll"},{default:a(()=>[w("div",{onClick:l[0]||(l[0]=()=>{e.formData.category_id=void 0,e.reFetchProducts()}),class:"pos-style-1-category-box"},[t(d,{shape:"square",size:"large",style:{backgroundColor:"#fff",color:"black",verticalAlign:"middle",marginTop:"5px"}},{icon:a(()=>[t(u)]),_:1}),w("p",null,s(e.$t("common.all")),1)]),(r(!0),S(O,null,G(e.categories,f=>(r(),S("div",{key:f.xid,onClick:()=>{e.formData.category_id=f.xid,e.reFetchProducts()},class:"pos-style-1-category-box"},[t(m,{title:f.name},{default:a(()=>[t(d,{size:"large",src:f.image_url,style:{verticalAlign:"middle",marginTop:"5px"}},null,8,["src"]),w("p",null,s(e.getCategoryName(f.name)),1)]),_:2},1032,["title"])],8,w1))),128))]),_:1})]),_:1})}const S1=B(k1,[["render",C1]]),$1=Z({props:["formData","brands","categories"],emits:["changed"],setup(e,{emit:l}){return{reFetchProducts:()=>{l("changed")}}}});function D1(e,l,c,n,h,y){const u=o("a-select-option"),d=o("a-select"),m=o("a-col"),p=o("a-input-group"),_=o("a-row");return r(),C(_,{gutter:[16,16]},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[t(d,{value:e.formData.brand_id,"onUpdate:value":l[0]||(l[0]=f=>e.formData.brand_id=f),placeholder:e.$t("common.select_default_text",[e.$t("product.brand")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:e.reFetchProducts},{default:a(()=>[(r(!0),S(O,null,G(e.brands,f=>(r(),C(u,{key:f.xid,title:f.name,value:f.xid},{default:a(()=>[i(s(f.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[t(p,{compact:""},{default:a(()=>[t(d,{value:e.formData.category_id,"onUpdate:value":l[1]||(l[1]=f=>e.formData.category_id=f),placeholder:e.$t("common.select_default_text",[e.$t("product.category")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:e.reFetchProducts},{default:a(()=>[(r(!0),S(O,null,G(e.categories,f=>(r(),C(u,{key:f.xid,title:f.name,value:f.xid},{default:a(()=>[i(s(f.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})}const A1=B($1,[["render",D1]]);const T1={components:{PlusOutlined:ne,SearchOutlined:nt,EditOutlined:$e,DeleteOutlined:fe,SaveOutlined:he,SettingOutlined:pt,ShoppingCartOutlined:yt,UnorderedListOutlined:Ln,PosLayout1:S1,PosLayout2:A1,ProductCardNew:rf,OrderSummary:G_,PayNow:cf,CustomerAddButton:vo,InvoiceModal:v1},setup(){const{taxes:e,customers:l,brands:c,categories:n,productLists:h,orderItemColumns:y,formData:u,customerUrl:d,getPreFetchData:m,posDefaultCustomer:p}=J_(),_=E([]),f=E([]),g=E([]),b=E(1),v=Se({orderSearchTerm:void 0,productFetching:!1,products:[]}),{formatAmount:k,formatAmountCurrency:$,appSetting:D,taxTypes:I,permsArray:F}=Y(),{t:P}=te(),T=E(!1),U=E(!1),M=E({}),W=E([]),V=E(""),K=E(!1),q=E(!1),L=E({}),X=E(!1);ee(()=>{m()});const J=()=>{axiosAdmin.post("pos/products",{brand_id:u.value.brand_id,category_id:u.value.category_id}).then(se=>{h.value=se.data.products})},le=gt(se=>{H(se)},300),H=se=>{if(v.products=[],se!=""){v.productFetching=!0;let ce="search-product";axiosAdmin.post(ce,{order_type:"sales",search_term:se}).then(De=>{De.data.length==1?z("",{product:De.data[0]}):v.products=De.data,v.productFetching=!1})}},N=se=>{ba(()=>{se.keyCode==13&&H(se.target.value)})},z=(se,ce)=>{const De=ce.product;Q(De)},Q=se=>{if(et(f.value,se.xid)){const Pe=Qe(_.value,["xid",se.xid]);if(Pe&&Pe.quantity<Pe.stock_quantity){const x=[];var De={};_.value.map(Ae=>{var Fe=Ae.quantity;Ae.xid==se.xid&&(Fe+=1,Ae.quantity=Fe,De=Ae),x.push(Ae)}),_.value=x;var ce=new Audio(D.value.beep_audio_url);ce.play(),v.orderSearchTerm=void 0,v.products=[],oe(De)}else v.orderSearchTerm=void 0,v.products=[],Oe.error(P("common.out_of_stock"))}else{f.value.push(se.xid),_.value.push({...se,sn:_.value.length+1,unit_price:k(se.unit_price),tax_amount:k(se.tax_amount),subtotal:k(se.subtotal)}),v.orderSearchTerm=void 0,v.products=[],R();var ce=new Audio(D.value.beep_audio_url);ce.play()}},j=se=>{var ce=parseFloat(se.quantity),De=parseFloat(se.stock_quantity);const Pe=parseFloat(se.unit_price);ce=ce>De?De:ce;const x=se.discount_rate,ye=x>0?x/100*Pe:0,Ae=Pe-ye;var Fe=0,Ne=Ae,Le=Pe;return se.tax_rate>0&&(se.tax_type=="inclusive"?(Le=Ae*100/(100+se.tax_rate),Fe=Le*(se.tax_rate/100)):(Fe=Ae*(se.tax_rate/100),Ne=Ae+Fe,Le=Ae)),{...se,total_discount:ye*ce,subtotal:Ne*ce,quantity:ce,total_tax:Fe*ce,max_quantity:De,single_unit_price:Le}},oe=se=>{const ce=[];_.value.map(De=>{if(De.xid==se.xid){const Pe=j(se);ce.push(Pe)}else ce.push(De)}),_.value=ce,R()},R=()=>{let se=0;_.value.map(x=>{se+=x.subtotal});var ce=0;u.value.discount_type=="percentage"?ce=u.value.discount_value!=""?parseFloat(u.value.discount_value)*se/100:0:u.value.discount_type=="fixed"&&(ce=u.value.discount_value!=""?parseFloat(u.value.discount_value):0);const De=u.value.tax_rate!=""?parseFloat(u.value.tax_rate):0;se=se-ce;const Pe=se*(De/100);se=se+parseFloat(u.value.shipping),u.value.subtotal=k(se+Pe),u.value.tax_amount=k(Pe),u.value.discount=ce},ae=se=>{const ce=[];let De=1;_.value.map(x=>{x.item_id!=null&&(g.value=[...g.value,x.item_id]),x.xid!=se.xid&&(ce.push({...x,sn:De,single_unit_price:k(x.single_unit_price),tax_amount:k(x.tax_amount),subtotal:k(x.subtotal)}),De++)}),_.value=ce;const Pe=f.value.filter(x=>x!=se.xid);f.value=Pe,R()},ue=(se,ce)=>{u.value.tax_rate=se==null?0:ce.tax.rate,R()},re=se=>{M.value={id:se.xid,discount_rate:se.discount_rate,unit_price:se.unit_price,tax_id:se.x_tax_id,tax_type:se.tax_type==null?void 0:se.tax_type},T.value=!0,V.value=se.name},be=()=>{K.value=!0},ie=()=>{K.value=!1},_e=()=>{_.value=[],f.value=[],u.value={...u.value,tax_id:void 0,category_id:void 0,brand_id:void 0,tax_id:void 0,tax_rate:0,tax_amount:0,discount_value:0,discount:0,shipping:0,subtotal:0},R()},Ue=()=>{const se=_.value.filter(x=>x.xid==M.value.id),ce=e.value.filter(x=>x.xid==M.value.tax_id),De=M.value.tax_type!=null?M.value.tax_type:"exclusive",Pe={...se[0],discount_rate:parseFloat(M.value.discount_rate),unit_price:parseFloat(M.value.unit_price),tax_id:M.value.tax_id,tax_rate:ce[0]?ce[0].rate:0,tax_type:De};oe(Pe),Je()},Je=()=>{M.value={},T.value=!1},ut=()=>{axiosAdmin.get(d).then(se=>{l.value=se.data})},ft=se=>{_e();var ce=p.value&&p.value.xid?p.value.xid:void 0;u.value={...u.value,user_id:ce},J(),K.value=!1,L.value=se,q.value=!0};return{taxes:e,customers:l,categories:n,brands:c,productLists:h,formData:u,reFetchProducts:J,selectSaleProduct:Q,taxChanged:ue,quantityChanged:oe,recalculateFinalTotal:R,payNow:be,payNowVisible:K,payNowClosed:ie,resetPos:_e,appSetting:D,permsArray:F,...rt(v),fetchProducts:le,searchValueSelected:z,selectedProducts:_,orderItemColumns:y,formatAmount:k,formatAmountCurrency:$,containerStyle:{height:window.innerHeight-110+"px",overflow:"scroll","overflow-y":"scroll"},customerAdded:ut,editItem:re,addEditVisible:T,addEditFormData:M,addEditFormSubmitting:U,addEditRules:W,addEditPageTitle:V,onAddEditSubmit:Ue,onAddEditClose:Je,taxTypes:I,showDeleteConfirm:ae,payNowSuccess:ft,printInvoiceModalVisible:q,printInvoiceOrder:L,postLayout:b,innerWidth:window.innerWidth,inputValueChanged:N,showMobileCart:X}}},E1={style:{display:"flex"}},O1={key:0},I1=w("br",null,null,-1),P1={class:"pos-left-wrapper"},U1={class:"pos-left-header"},F1={class:"bill-filters"},q1={style:{display:"flex"}},M1={key:0},R1=w("br",null,null,-1),K1={style:{display:"flex"}},V1={class:"pos-left-content"},z1={class:"bill-body"},L1={class:"bill-table"},B1=w("br",null,null,-1),W1={class:"pos-left-footer"},j1={class:"bill-footer"},H1={style:{right:0,bottom:20,width:"100%",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},N1={class:"pos-grand-total"},Y1={class:"pos-grand-total"},G1={style:{display:"flex"}},J1={class:"pos1-left-wrapper"},Q1={key:0,class:"pos-left-header"},X1={key:1,class:"pos-left-content"},Z1={key:2},x1=w("br",null,null,-1),eg={key:3,class:"pos-left-footer"},tg={class:"bill-footer",style:{paddingBotton:"30px"}},ag={key:0,class:"pos-mobile-footer"},ng={class:"pos-grand-total"};function og(e,l,c,n,h,y){const u=o("a-select-option"),d=o("a-select"),m=o("CustomerAddButton"),p=o("a-page-header"),_=o("a-col"),f=o("a-row"),g=o("a-card"),b=o("SearchOutlined"),v=o("a-spin"),k=o("a-typography-text"),$=o("a-input-number"),D=o("EditOutlined"),I=o("a-button"),F=o("DeleteOutlined"),P=o("a-table"),T=o("a-form-item"),U=o("a-input-group"),M=o("a-space"),W=o("PosLayout1"),V=o("PosLayout2"),K=o("ProductCardNew"),q=o("a-result"),L=o("perfect-scrollbar"),X=o("ShoppingCartOutlined"),J=o("UnorderedListOutlined"),le=o("a-form"),H=o("SaveOutlined"),N=o("a-modal"),z=o("PayNow"),Q=o("InvoiceModal");return r(),S(O,null,[t(g,{class:"page-content-sub-header breadcrumb-left-border",bodyStyle:{padding:"0px",margin:"0px 16px 0"}},{default:a(()=>[t(f,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[t(p,{title:e.$t("menu.pos"),onBack:l[1]||(l[1]=()=>e.$router.go(-1)),class:"p-0"},We({_:2},[n.innerWidth<=768?{name:"extra",fn:a(()=>[w("span",E1,[t(d,{value:n.formData.user_id,"onUpdate:value":l[0]||(l[0]=j=>n.formData.user_id=j),placeholder:e.$t("user.walk_in_customer"),style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.customers,j=>(r(),C(u,{key:j.xid,title:j.name,value:j.xid},{default:a(()=>[i(s(j.name)+" ",1),j.phone&&j.phone!=""?(r(),S("span",O1,[I1,i(" "+s(j.phone),1)])):A("",!0)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"]),t(m,{onOnAddSuccess:n.customerAdded},null,8,["onOnAddSuccess"])])]),key:"0"}:void 0]),1032,["title"])]),_:1})]),_:1})]),_:1}),t(le,{layout:"vertical"},{default:a(()=>[n.innerWidth>=768?(r(),C(f,{key:0,gutter:[8,8],class:"mt-5",style:{margin:"10px 16px 0"}},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:10,xl:10},{default:a(()=>[w("div",P1,[w("div",U1,[t(g,{class:"left-pos-top",style:{marginBottom:"10px"}},{default:a(()=>[w("div",F1,[t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[w("span",q1,[t(d,{value:n.formData.user_id,"onUpdate:value":l[2]||(l[2]=j=>n.formData.user_id=j),placeholder:e.$t("user.walk_in_customer"),style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.customers,j=>(r(),C(u,{key:j.xid,title:j.name,value:j.xid},{default:a(()=>[i(s(j.name)+" ",1),j.phone&&j.phone!=""?(r(),S("span",M1,[R1,i(" "+s(j.phone),1)])):A("",!0)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"]),t(m,{onOnAddSuccess:n.customerAdded},null,8,["onOnAddSuccess"])])]),_:1})]),_:1}),t(f,{class:"mt-20 mb-30"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[w("span",K1,[t(d,{value:null,searchValue:e.orderSearchTerm,"show-search":"","filter-option":!1,placeholder:e.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:l[3]||(l[3]=j=>{e.orderSearchTerm=j,n.fetchProducts(j)}),"option-label-prop":"label",onFocus:l[4]||(l[4]=j=>e.products=[]),onSelect:n.searchValueSelected,onInputKeyDown:n.inputValueChanged},We({suffixIcon:a(()=>[t(b)]),default:a(()=>[(r(!0),S(O,null,G(e.products,j=>(r(),C(u,{key:j.xid,value:j.xid,label:j.name,product:j},{default:a(()=>[i(" => "+s(j.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(v,{size:"small"})]),key:"0"}:void 0]),1032,["searchValue","placeholder","not-found-content","onSelect","onInputKeyDown"])])]),_:1})]),_:1})])]),_:1})]),w("div",V1,[t(g,{class:"left-pos-middle-table",style:{marginBottom:"10px"}},{default:a(()=>[w("div",z1,[w("div",L1,[t(f,{class:"mt-20 mb-30"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(P,{"row-key":j=>j.xid,dataSource:n.selectedProducts,columns:n.orderItemColumns,pagination:!1,size:"middle"},{bodyCell:a(({column:j,record:oe})=>[j.dataIndex==="name"?(r(),S(O,{key:0},[i(s(oe.name)+" ",1),B1,w("small",null,[t(k,{code:""},{default:a(()=>[i(s(e.$t("product.avl_qty"))+" "+s(`${oe.stock_quantity}${oe.unit_short_name}`),1)]),_:2},1024)])],64)):A("",!0),j.dataIndex==="unit_quantity"?(r(),C($,{key:1,id:"inputNumber",value:oe.quantity,"onUpdate:value":R=>oe.quantity=R,min:0,onChange:R=>n.quantityChanged(oe)},null,8,["value","onUpdate:value","onChange"])):A("",!0),j.dataIndex==="subtotal"?(r(),S(O,{key:2},[i(s(n.formatAmountCurrency(oe.subtotal)),1)],64)):A("",!0),j.dataIndex==="action"?(r(),S(O,{key:3},[t(I,{type:"primary",onClick:R=>n.editItem(oe),style:{"margin-left":"4px","margin-top":"4px"}},{icon:a(()=>[t(D)]),_:2},1032,["onClick"]),t(I,{type:"primary",onClick:R=>n.showDeleteConfirm(oe),style:{"margin-left":"4px","margin-top":"4px"}},{icon:a(()=>[t(F)]),_:2},1032,["onClick"])],64)):A("",!0)]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1})])])]),_:1})]),w("div",W1,[t(g,null,{default:a(()=>[w("div",j1,[t(f,{gutter:[16,16]},{default:a(()=>[t(_,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(T,{label:e.$t("stock.order_tax")},{default:a(()=>[t(d,{value:n.formData.tax_id,"onUpdate:value":l[5]||(l[5]=j=>n.formData.tax_id=j),placeholder:e.$t("common.select_default_text",[e.$t("stock.order_tax")]),allowClear:!0,style:{width:"100%"},onChange:n.taxChanged},{default:a(()=>[(r(!0),S(O,null,G(n.taxes,j=>(r(),C(u,{key:j.xid,value:j.xid,tax:j},{default:a(()=>[i(s(j.name)+" ("+s(j.rate)+"%) ",1)]),_:2},1032,["value","tax"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1}),t(_,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(T,{label:e.$t("stock.discount")},{default:a(()=>[t(U,{compact:""},{default:a(()=>[t(d,{value:n.formData.discount_type,"onUpdate:value":l[6]||(l[6]=j=>n.formData.discount_type=j),onChange:n.recalculateFinalTotal,style:{width:"30%"}},{default:a(()=>[t(u,{value:"percentage"},{default:a(()=>[i(" % ")]),_:1}),t(u,{value:"fixed"},{default:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1})]),_:1},8,["value","onChange"]),t($,{value:n.formData.discount_value,"onUpdate:value":l[7]||(l[7]=j=>n.formData.discount_value=j),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.discount")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"70%"}},null,8,["value","placeholder","onChange"])]),_:1})]),_:1},8,["label"])]),_:1}),t(_,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(T,{label:e.$t("stock.shipping")},{default:a(()=>[t($,{value:n.formData.shipping,"onUpdate:value":l[8]||(l[8]=j=>n.formData.shipping=j),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.shipping")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1}),w("div",H1,[t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:10,lg:10,xl:10},{default:a(()=>[t(f,{gutter:16,style:{background:"#dbdbdb",padding:"5px"}},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[w("span",N1,s(e.$t("stock.grand_total"))+" : ",1)]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[w("span",Y1,s(n.formatAmountCurrency(n.formData.subtotal)),1)]),_:1})]),_:1})]),_:1}),t(_,{xs:24,sm:24,md:6,lg:6,xl:6,class:"mt-10"},{default:a(()=>[w("small",null,s(e.$t("product.tax"))+" : "+s(n.formatAmountCurrency(n.formData.tax_amount))+" | "+s(e.$t("product.discount"))+" : "+s(n.formatAmountCurrency(n.formData.discount)),1)]),_:1}),t(_,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(M,null,{default:a(()=>[t(I,{type:"primary",onClick:n.payNow,disabled:n.formData.subtotal<=0||n.formData.user_id==null||n.formData.user_id==""||!n.formData.user_id},{default:a(()=>[i(s(e.$t("stock.pay_now")),1)]),_:1},8,["onClick","disabled"]),t(I,{onClick:n.resetPos},{default:a(()=>[i(s(e.$t("stock.reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])])])]),_:1}),t(_,{class:"right-pos-sidebar",xs:24,sm:24,md:24,lg:14,xl:14},{default:a(()=>[t(L,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[n.postLayout==1?(r(),C(W,{key:0,brands:n.brands,categories:n.categories,formData:n.formData,onChanged:n.reFetchProducts},null,8,["brands","categories","formData","onChanged"])):(r(),C(V,{key:1,brands:n.brands,categories:n.categories,formData:n.formData,onChanged:n.reFetchProducts},null,8,["brands","categories","formData","onChanged"])),n.productLists.length>0?(r(),C(f,{key:2,gutter:30},{default:a(()=>[(r(!0),S(O,null,G(n.productLists,j=>(r(),C(_,{key:j.xid,xxl:6,lg:6,md:12,xs:24,onClick:oe=>n.selectSaleProduct(j)},{default:a(()=>[t(K,{product:j},null,8,["product"])]),_:2},1032,["onClick"]))),128))]),_:1})):(r(),C(f,{key:3},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(q,{title:e.$t("stock.no_product_found"),style:{marginTop:"20%"}},null,8,["title"])]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})):(r(),C(f,{key:1,gutter:[8,8],class:"mt-5",style:{margin:"10px 16px 0"}},{default:a(()=>[t(_,{span:24},{default:a(()=>[w("span",G1,[t(d,{value:null,searchValue:e.orderSearchTerm,"show-search":"","filter-option":!1,placeholder:e.$t("product.search_scan_product"),style:{width:"90%"},"not-found-content":e.productFetching?void 0:null,onSearch:l[9]||(l[9]=j=>{e.orderSearchTerm=j,n.fetchProducts(j)}),"option-label-prop":"label",onFocus:l[10]||(l[10]=j=>e.products=[]),onSelect:n.searchValueSelected,onInputKeyDown:n.inputValueChanged},We({suffixIcon:a(()=>[t(b)]),default:a(()=>[(r(!0),S(O,null,G(e.products,j=>(r(),C(u,{key:j.xid,value:j.xid,label:j.name,product:j},{default:a(()=>[i(" => "+s(j.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(v,{size:"small"})]),key:"0"}:void 0]),1032,["searchValue","placeholder","not-found-content","onSelect","onInputKeyDown"]),n.showMobileCart?(r(),C(I,{key:0,class:"ml-5",style:{width:"100%"},onClick:l[11]||(l[11]=()=>n.showMobileCart=!1),type:"primary"},{icon:a(()=>[t(X)]),_:1})):(r(),C(I,{key:1,class:"ml-5",style:{width:"100%"},onClick:l[12]||(l[12]=()=>n.showMobileCart=!0),type:"primary"},{icon:a(()=>[t(J)]),_:1}))])]),_:1}),t(_,{span:24},{default:a(()=>[w("div",J1,[n.showMobileCart?A("",!0):(r(),S("div",Q1,[n.postLayout==1?(r(),C(W,{key:0,brands:n.brands,categories:n.categories,formData:n.formData,onChanged:n.reFetchProducts},null,8,["brands","categories","formData","onChanged"])):(r(),C(V,{key:1,brands:n.brands,categories:n.categories,formData:n.formData,onChanged:n.reFetchProducts},null,8,["brands","categories","formData","onChanged"]))])),n.showMobileCart?A("",!0):(r(),S("div",X1,[n.productLists.length>0?(r(),C(f,{key:0,gutter:30,class:"pos1-products-lists"},{default:a(()=>[(r(!0),S(O,null,G(n.productLists,j=>(r(),C(_,{key:j.xid,xxl:8,lg:8,md:8,sm:12,xs:12,onClick:oe=>n.selectSaleProduct(j)},{default:a(()=>[t(K,{product:j},null,8,["product"])]),_:2},1032,["onClick"]))),128))]),_:1})):A("",!0)])),n.showMobileCart?(r(),S("div",Z1,[t(f,{class:"mt-5 mb-5"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(P,{"row-key":j=>j.xid,dataSource:n.selectedProducts,columns:n.orderItemColumns,pagination:!1,size:"middle"},{bodyCell:a(({column:j,record:oe})=>[j.dataIndex==="name"?(r(),S(O,{key:0},[i(s(oe.name)+" ",1),x1,w("small",null,[t(k,{code:""},{default:a(()=>[i(s(e.$t("product.avl_qty"))+" "+s(`${oe.stock_quantity}${oe.unit_short_name}`),1)]),_:2},1024)])],64)):A("",!0),j.dataIndex==="unit_quantity"?(r(),C($,{key:1,id:"inputNumber",value:oe.quantity,"onUpdate:value":R=>oe.quantity=R,min:0,onChange:R=>n.quantityChanged(oe)},null,8,["value","onUpdate:value","onChange"])):A("",!0),j.dataIndex==="subtotal"?(r(),S(O,{key:2},[i(s(n.formatAmountCurrency(oe.subtotal)),1)],64)):A("",!0),j.dataIndex==="action"?(r(),S(O,{key:3},[t(I,{type:"primary",onClick:R=>n.editItem(oe),style:{"margin-left":"4px","margin-top":"4px"}},{icon:a(()=>[t(D)]),_:2},1032,["onClick"]),t(I,{type:"primary",onClick:R=>n.showDeleteConfirm(oe),style:{"margin-left":"4px","margin-top":"4px"}},{icon:a(()=>[t(F)]),_:2},1032,["onClick"])],64)):A("",!0)]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1})])):A("",!0),n.showMobileCart?(r(),S("div",eg,[t(g,null,{default:a(()=>[w("div",tg,[t(f,{gutter:[16]},{default:a(()=>[t(_,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(T,{label:e.$t("stock.order_tax")},{default:a(()=>[t(d,{value:n.formData.tax_id,"onUpdate:value":l[13]||(l[13]=j=>n.formData.tax_id=j),placeholder:e.$t("common.select_default_text",[e.$t("stock.order_tax")]),allowClear:!0,style:{width:"100%"},onChange:n.taxChanged},{default:a(()=>[(r(!0),S(O,null,G(n.taxes,j=>(r(),C(u,{key:j.xid,value:j.xid,tax:j},{default:a(()=>[i(s(j.name)+" ("+s(j.rate)+"%) ",1)]),_:2},1032,["value","tax"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1}),t(_,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(T,{label:e.$t("stock.discount")},{default:a(()=>[t(U,{compact:""},{default:a(()=>[t(d,{value:n.formData.discount_type,"onUpdate:value":l[14]||(l[14]=j=>n.formData.discount_type=j),onChange:n.recalculateFinalTotal,style:{width:"30%"}},{default:a(()=>[t(u,{value:"percentage"},{default:a(()=>[i(" % ")]),_:1}),t(u,{value:"fixed"},{default:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1})]),_:1},8,["value","onChange"]),t($,{value:n.formData.discount_value,"onUpdate:value":l[15]||(l[15]=j=>n.formData.discount_value=j),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.discount")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"70%"}},null,8,["value","placeholder","onChange"])]),_:1})]),_:1},8,["label"])]),_:1}),t(_,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(T,{label:e.$t("stock.shipping")},{default:a(()=>[t($,{value:n.formData.shipping,"onUpdate:value":l[16]||(l[16]=j=>n.formData.shipping=j),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.shipping")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})])):A("",!0)])]),_:1})]),_:1}))]),_:1}),n.innerWidth<=768?(r(),S("div",ag,[t(f,{gutter:16},{default:a(()=>[t(_,{span:10},{default:a(()=>[t(f,{gutter:16,style:{padding:"10px"}},{default:a(()=>[t(_,{span:24},{default:a(()=>[w("span",ng,s(e.$t("common.total"))+" : "+s(n.formatAmountCurrency(n.formData.subtotal)),1)]),_:1})]),_:1})]),_:1}),t(_,{span:14},{default:a(()=>[t(M,{style:{marginTop:"5px"}},{default:a(()=>[n.showMobileCart?(r(),C(I,{key:0,onClick:l[17]||(l[17]=()=>n.showMobileCart=!1),type:"primary"},{icon:a(()=>[t(X)]),_:1})):(r(),C(I,{key:1,onClick:l[18]||(l[18]=()=>n.showMobileCart=!0),type:"primary"},{icon:a(()=>[t(J)]),_:1})),t(I,{type:"primary",onClick:n.payNow,disabled:n.formData.subtotal<=0||n.formData.user_id==null||n.formData.user_id==""||!n.formData.user_id},{default:a(()=>[i(s(e.$t("stock.pay_now")),1)]),_:1},8,["onClick","disabled"]),t(I,{onClick:n.resetPos},{default:a(()=>[i(s(e.$t("stock.reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])):A("",!0),t(N,{open:n.addEditVisible,closable:!1,centered:!0,title:n.addEditPageTitle,onOk:n.onAddEditSubmit},{footer:a(()=>[t(I,{key:"submit",type:"primary",loading:n.addEditFormSubmitting,onClick:n.onAddEditSubmit},{icon:a(()=>[t(H)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(I,{key:"back",onClick:n.onAddEditClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(le,{layout:"vertical"},{default:a(()=>[t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(T,{label:e.$t("product.unit_price"),name:"unit_price",help:n.addEditRules.unit_price?n.addEditRules.unit_price.message:null,validateStatus:n.addEditRules.unit_price?"error":null},{default:a(()=>[t($,{value:n.addEditFormData.unit_price,"onUpdate:value":l[19]||(l[19]=j=>n.addEditFormData.unit_price=j),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.unit_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(T,{label:e.$t("product.discount"),name:"discount_rate",help:n.addEditRules.discount_rate?n.addEditRules.discount_rate.message:null,validateStatus:n.addEditRules.discount_rate?"error":null},{default:a(()=>[t($,{value:n.addEditFormData.discount_rate,"onUpdate:value":l[20]||(l[20]=j=>n.addEditFormData.discount_rate=j),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.discount")]),min:"0",style:{width:"100%"}},{addonAfter:a(()=>[i("%")]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(T,{label:e.$t("product.tax"),name:"tax_id",help:n.addEditRules.tax_id?n.addEditRules.tax_id.message:null,validateStatus:n.addEditRules.tax_id?"error":null},{default:a(()=>[t(d,{value:n.addEditFormData.tax_id,"onUpdate:value":l[21]||(l[21]=j=>n.addEditFormData.tax_id=j),placeholder:e.$t("common.select_default_text",[e.$t("product.tax")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(n.taxes,j=>(r(),C(u,{key:j.xid,value:j.xid},{default:a(()=>[i(s(j.name)+" ("+s(j.rate)+"%) ",1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(T,{label:e.$t("product.tax_type"),name:"tax_type",help:n.addEditRules.tax_type?n.addEditRules.tax_type.message:null,validateStatus:n.addEditRules.tax_type?"error":null},{default:a(()=>[t(d,{value:n.addEditFormData.tax_type,"onUpdate:value":l[22]||(l[22]=j=>n.addEditFormData.tax_type=j),placeholder:e.$t("common.select_default_text",[e.$t("product.tax_type")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(n.taxTypes,j=>(r(),C(u,{key:j.key,value:j.key},{default:a(()=>[i(s(j.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"]),t(z,{visible:n.payNowVisible,onClosed:n.payNowClosed,onSuccess:n.payNowSuccess,data:n.formData,selectedProducts:n.selectedProducts},null,8,["visible","onClosed","onSuccess","data","selectedProducts"]),t(Q,{visible:n.printInvoiceModalVisible,order:n.printInvoiceOrder,onClosed:l[23]||(l[23]=j=>n.printInvoiceModalVisible=!1)},null,8,["visible","order"])],64)}const lg=B(T1,[["render",og]]),sg=Z({props:["productData"],emits:["valueSuccess","valueChanged"],components:{SearchOutlined:nt},setup(e,{emit:l}){const c=Se({searchTerm:[],fetching:!1,products:[]});ee(()=>{n(e)});const n=u=>{u.productData&&u.productData.product?(c.products=[{xid:u.productData.x_product_id,name:u.productData.product.name}],c.searchTerm=u.productData.x_product_id):(c.searchTerm=[],c.products=[]),l("valueSuccess")},h=(u,d)=>{l("valueChanged",u),l("valueSuccess")},y=gt(u=>{if(c.products=[],u!=""){c.fetching=!0;const d=`name lk "%${u}%" or item_code lk "%${u}%"`;let m=`products?fields=xid,name&filters=${encodeURIComponent(d)}&limit=10`;axiosAdmin.get(m).then(p=>{c.products=p.data,c.fetching=!1})}},300);return me(e,(u,d)=>{n(u)}),{...rt(c),fetchProducts:y,valueChanged:h}}});function rg(e,l,c,n,h,y){const u=o("SearchOutlined"),d=o("a-spin"),m=o("a-select-option"),p=o("a-select");return r(),C(p,{value:e.searchTerm,"onUpdate:value":l[0]||(l[0]=_=>e.searchTerm=_),"show-search":"","filter-option":!1,placeholder:e.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":e.fetching?void 0:null,onSearch:e.fetchProducts,"option-label-prop":"label",onChange:e.valueChanged,allowClear:!0},We({suffixIcon:a(()=>[t(u)]),default:a(()=>[(r(!0),S(O,null,G(e.products,_=>(r(),C(m,{key:_.xid,value:_.xid,label:_.name,product:_},{default:a(()=>[i(s(_.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.fetching?{name:"notFoundContent",fn:a(()=>[t(d,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onChange"])}const wt=B(sg,[["render",rg]]),wo=()=>{const e="stock-adjustments",l="stock-adjustments?fields=xid,product_id,x_product_id,product{id,xid,name,image,image_url},quantity,adjustment_type",c=["product_id"],{t:n}=te(),h={product_id:void 0,quantity:1,notes:"",adjustment_type:"add"},y=[{title:n("product.product"),dataIndex:"product_id"},{title:n("stock_adjustment.quantity"),dataIndex:"quantity"},{title:n("common.action"),dataIndex:"action"}],u=[{key:"add",value:n("stock_adjustment.adjustment_add")},{key:"subtract",value:n("stock_adjustment.adjustment_subtract")}],d=Se({product_id:void 0});return{url:l,addEditUrl:e,hashableColumns:c,initData:h,columns:y,adjustmentTypes:u,filters:d}},dg=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],emits:["addEditSuccess","closed"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,ProductAddButton:Ua,ProductSearchInput:wt},setup(e,{emit:l}){const{permsArray:c,selectedWarehouse:n}=Y(),{addEditRequestAdmin:h,loading:y,rules:u}=ve(),{adjustmentTypes:d}=wo(),m=E("-");return{loading:y,rules:u,onClose:()=>{u.value={},l("closed")},onSubmit:()=>{h({url:e.url,data:e.formData,successMessage:e.successMessage,success:g=>{l("addEditSuccess",g.xid)}})},adjustmentTypes:d,stockValue:m,getStockValue:()=>{e.formData.product_id!=""?axiosAdmin.post("product-warehouse-stock",{warehouse_id:n.value.id,product_id:e.formData.product_id}).then(g=>{m.value=g.data.stock}):m.value="-"},permsArray:c}}}),ig={style:{display:"flex"}};function ug(e,l,c,n,h,y){const u=o("ProductSearchInput"),d=o("ProductAddButton"),m=o("a-form-item"),p=o("a-col"),_=o("a-row"),f=o("a-input-number"),g=o("a-select-option"),b=o("a-select"),v=o("a-textarea"),k=o("a-form"),$=o("SaveOutlined"),D=o("a-button"),I=o("a-modal");return r(),C(I,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(D,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t($)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(D,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(k,{layout:"vertical"},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("product.product"),name:"orderSearchTerm",help:e.rules.product_id?e.rules.product_id.message:null,validateStatus:e.rules.product_id?"error":null,class:"required"},{default:a(()=>[w("span",ig,[t(u,{onValueChanged:l[0]||(l[0]=F=>e.formData.product_id=F),onValueSuccess:e.getStockValue,productData:e.data},null,8,["onValueSuccess","productData"]),t(d)])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(m,{label:e.$t("stock_adjustment.current_stock")},{default:a(()=>[i(s(e.stockValue),1)]),_:1},8,["label"])]),_:1}),t(p,{xs:24,sm:24,md:9,lg:9},{default:a(()=>[t(m,{label:e.$t("stock_adjustment.quantity"),name:"quantity",help:e.rules.quantity?e.rules.quantity.message:null,validateStatus:e.rules.quantity?"error":null,class:"required"},{default:a(()=>[t(f,{value:e.formData.quantity,"onUpdate:value":l[1]||(l[1]=F=>e.formData.quantity=F),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock_adjustment.quantity")]),min:1},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:9,lg:9},{default:a(()=>[t(m,{label:e.$t("stock_adjustment.adjustment_type"),name:"adjustment_type",help:e.rules.adjustment_type?e.rules.adjustment_type.message:null,validateStatus:e.rules.adjustment_type?"error":null},{default:a(()=>[t(b,{value:e.formData.adjustment_type,"onUpdate:value":l[2]||(l[2]=F=>e.formData.adjustment_type=F),placeholder:e.$t("common.select_default_text",[e.$t("stock_adjustment.adjustment_type")])},{default:a(()=>[(r(!0),S(O,null,G(e.adjustmentTypes,F=>(r(),C(g,{key:F.key,value:F.key},{default:a(()=>[i(s(F.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,{label:e.$t("stock_adjustment.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[t(v,{value:e.formData.notes,"onUpdate:value":l[3]||(l[3]=F=>e.formData.notes=F),placeholder:e.$t("stock_adjustment.notes")},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const mg=B(dg,[["render",ug]]),cg={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:mg,ProductSearchInput:wt,AdminPageHeader:ge},setup(){const{url:e,addEditUrl:l,hashableColumns:c,initData:n,columns:h,filters:y}=wo(),u=Me(),{permsArray:d,selectedWarehouse:m}=Y();ee(()=>{u.crudUrl.value=l,u.langKey.value="stock_adjustment",u.initData.value={...n},u.formData.value={...n},u.hashableColumns.value=[...c],p()});const p=()=>{u.tableUrl.value={url:e,filters:y},u.fetch({page:1})};return me(m,(_,f)=>{p()}),{columns:h,permsArray:d,...u,filters:y,reFetchDatatable:p}}},pg={class:"table-responsive"};function _g(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("DeleteOutlined"),v=o("a-space"),k=o("a-col"),$=o("ProductSearchInput"),D=o("a-row"),I=o("admin-page-filters"),F=o("AddEdit"),P=o("a-avatar"),T=o("a-badge"),U=o("a-typography-text"),M=o("EditOutlined"),W=o("a-table"),V=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.stock_adjustment"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.stock_adjustment")),1)]),_:1})]),_:1})]),_:1}),t(I,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[n.permsArray.includes("stock_adjustments_create")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),i(" "+s(e.$t("stock_adjustment.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("stock_adjustments_delete")||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(D,{gutter:[16,16],justify:"end"},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[t($,{onValueChanged:l[0]||(l[0]=K=>{n.filters.product_id=K,n.reFetchDatatable()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(V,null,{default:a(()=>[t(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(D,null,{default:a(()=>[t(k,{span:24},{default:a(()=>[w("div",pg,[t(W,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:K=>({disabled:!1,name:K.xid})},columns:n.columns,"row-key":K=>K.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:K,record:q})=>[K.dataIndex==="product_id"?(r(),C(T,{key:0},{default:a(()=>[t(P,{shape:"square",src:q.product.image_url},null,8,["src"]),i(" "+s(q.product.name),1)]),_:2},1024)):A("",!0),K.dataIndex==="quantity"?(r(),S(O,{key:1},[q.adjustment_type=="add"?(r(),C(U,{key:0,type:"success",strong:""},{default:a(()=>[i(" +"+s(q.quantity),1)]),_:2},1024)):(r(),C(U,{key:1,type:"danger",strong:""},{default:a(()=>[i(" -"+s(q.quantity),1)]),_:2},1024))],64)):A("",!0),K.dataIndex==="action"?(r(),S(O,{key:2},[n.permsArray.includes("stock_adjustments_edit")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:L=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(M)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("stock_adjustments_delete")||n.permsArray.includes("admin")?(r(),C(g,{key:1,type:"primary",onClick:L=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const fg=B(cg,[["render",_g]]),Co=()=>{const{t:e}=te(),l=Ye(),c=["payment_mode_id","user_id"],{dayjs:n}=Y(),h=E(l.meta.paymentType),y=E(l.meta.menuParent),u=E(`payment-${h.value}`),d=E({payment_type:h.value,date:n().format("YYYY-MM-DD"),amount:"",payment_mode_id:void 0,user_id:void 0,notes:""}),m=[{title:e("payments.date"),dataIndex:"date"},{title:e("payments.transaction_number"),dataIndex:"payment_number"},{title:e("payments.user"),dataIndex:"user_id"},{title:e("payments.amount"),dataIndex:"amount"},{title:e("common.action"),dataIndex:"action"}],p=[{key:"payment_number",value:e("payments.transaction_number")}],_=[{title:e("stock.invoice_number"),dataIndex:"invoice_number"},{title:e("common.date"),dataIndex:"date"},{title:e("payments.invoice_amount"),dataIndex:"amount"},{title:e("common.action"),dataIndex:"action"}];return{addEditUrl:u,initData:d,columns:m,filterableColumns:p,hashableColumns:c,settleInvoiceColumns:_,paymentType:h,menuParent:y}},gg=Z({props:["userId","amount"],setup(e,{emit:l}){const{settleInvoiceColumns:c,paymentType:n}=Co(),{addEditRequestAdmin:h,loading:y,rules:u}=ve(),{formatDate:d,disabledDate:m,appSetting:p,formatAmountCurrency:_}=Y(),f=E([]),g=E(0),b=E(0);ee(()=>{k()});const v=()=>{h({url:e.url,data:e.formData,successMessage:e.successMessage,success:I=>{l("addEditSuccess",I.xid)}})},k=()=>{axiosAdmin.post("user-invoices",{user_id:e.userId,payment_type:n.value}).then(I=>{const F=I.data.invoices;var P=e.amount,T=0;we(F,U=>{U.due_amount<=P?(U.paying_amount=U.due_amount,P=parseFloat(P)-parseFloat(U.due_amount),T=parseFloat(T)+parseFloat(U.due_amount)):U.due_amount>P&&(U.paying_amount=P,T=parseFloat(T)+parseFloat(P),P=0)}),g.value=T,b.value=parseFloat(e.amount)-parseFloat(T),f.value=F})},$=I=>{const F=f.value;var P=0;we(F,U=>{P+=parseFloat(U.paying_amount)}),I.paying_amount>I.due_amount?I.paying_amount=I.due_amount:P>e.amount&&(I.paying_amount=parseFloat(e.amount)-(P-parseFloat(I.paying_amount))),I.paying_amount||(I.paying_amount=0);var T=0;we(F,U=>{T+=parseFloat(U.paying_amount)}),g.value=T,b.value=parseFloat(e.amount)-parseFloat(T)},D=()=>{u.value={},l("closed")};return me(e,(I,F)=>{k()}),{loading:y,rules:u,onClose:D,onSubmit:v,invoices:f,settleInvoiceColumns:c,setteledAmount:g,unUsedAmount:b,inputValueChanged:$,appSetting:p,formatDate:d,disabledDate:m,formatAmountCurrency:_}}}),yg={class:"table-responsive"},hg=w("br",null,null,-1),bg=w("br",null,null,-1);function vg(e,l,c,n,h,y){const u=o("a-typography-text"),d=o("a-input-number"),m=o("a-table-summary-cell"),p=o("a-table-summary-row"),_=o("a-table-summary"),f=o("a-table"),g=o("a-col"),b=o("a-row");return r(),C(b,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",yg,[t(f,{columns:e.settleInvoiceColumns,"row-key":v=>v.xid,"data-source":e.invoices,pagination:!1},{bodyCell:a(({column:v,record:k})=>[v.dataIndex==="date"?(r(),S(O,{key:0},[i(s(e.formatDate(k.order_date)),1)],64)):A("",!0),v.dataIndex==="amount"?(r(),S(O,{key:1},[i(s(e.formatAmountCurrency(k.total))+" ",1),hg,w("small",null,[t(u,{type:"danger"},{default:a(()=>[i(" ("+s(e.$t("common.pending"))+": "+s(e.formatAmountCurrency(k.due_amount))+") ",1)]),_:2},1024)])],64)):A("",!0),v.dataIndex==="action"?(r(),C(d,{key:2,addonBefore:e.appSetting.currency.symbol,value:k.paying_amount,"onUpdate:value":$=>k.paying_amount=$,placeholder:"0",min:0,onBlur:$=>e.inputValueChanged(k)},null,8,["addonBefore","value","onUpdate:value","onBlur"])):A("",!0)]),summary:a(()=>[t(_,{fixed:""},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{"col-span":3},{default:a(()=>[t(u,{strong:""},{default:a(()=>[i(s(e.$t("payments.unused_amount"))+" : ",1)]),_:1}),i(" "+s(e.formatAmountCurrency(e.unUsedAmount?e.unUsedAmount:0)),1)]),_:1}),t(m,{"col-span":2},{default:a(()=>[i(s(e.formatAmountCurrency(e.setteledAmount?e.setteledAmount:0)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source"]),bg])]),_:1})]),_:1})}const kg=B(gg,[["render",vg]]),wg=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,UserInfo:He,PaymentModeAddButton:Xn,SettleInvoices:kg,DateTimePicker:na},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{disabledDate:y,appSetting:u,formatAmountCurrency:d,dayjs:m}=Y(),p=E([]),_=E([]),f="customer-suppliers",g="payment-modes?limit=10000",b=E(null),v=E({});ee(()=>{const I=axiosAdmin.post(f),F=axiosAdmin.get(g);Promise.all([I,F]).then(([P,T])=>{_.value=P.data,p.value=T.data})});const k=()=>{const I=[];e.addEditType=="add"&&b.value&&b.value.invoices&&we(b.value.invoices,F=>{I.push({order_id:F.xid,amount:F.paying_amount})}),c({url:e.url,data:{...v.value,invoices:I},successMessage:e.successMessage,success:F=>{l("addEditSuccess",F.xid)}})},$=()=>{axiosAdmin.get("payment-modes?limit=10000").then(I=>{p.value=I.data})},D=()=>{h.value={},l("closed")};return me(()=>e.visible,(I,F)=>{I&&(e.addEditType=="add"?v.value={...e.formData,date:m().utc().format("YYYY-MM-DDTHH:mm:ssZ")}:v.value={...e.formData})}),{loading:n,rules:h,onClose:D,onSubmit:k,users:_,paymentModes:p,paymentModeAdded:$,settleInvoiceRef:b,appSetting:u,disabledDate:y,formatAmountCurrency:d,drawerWidth:window.innerWidth<=991?"90%":"45%",newFormData:v}}}),Cg={style:{display:"flex"}},Sg={key:1},$g={key:2};function Dg(e,l,c,n,h,y){const u=o("UserInfo"),d=o("a-select-option"),m=o("a-select"),p=o("a-form-item"),_=o("a-col"),f=o("a-row"),g=o("a-input"),b=o("DateTimePicker"),v=o("PaymentModeAddButton"),k=o("a-textarea"),$=o("a-divider"),D=o("a-typography-paragraph"),I=o("SettleInvoices"),F=o("a-form"),P=o("SaveOutlined"),T=o("a-button"),U=o("a-space"),M=o("a-drawer");return r(),C(M,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(U,null,{default:a(()=>[t(T,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(P)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(T,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[t(F,{layout:"vertical"},{default:a(()=>[t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("payments.user"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.newFormData.user_id,"onUpdate:value":l[0]||(l[0]=W=>e.newFormData.user_id=W),placeholder:e.$t("common.select_default_text",[e.$t("payments.user")]),allowClear:!0,"option-label-prop":"label",optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(e.users,W=>(r(),C(d,{key:W.xid,value:W.xid,label:W.name},{default:a(()=>[t(u,{user:W,size:"small"},null,8,["user"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.addEditType=="add"?(r(),C(f,{key:0,gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("payments.amount"),name:"amount",help:e.rules.amount?e.rules.amount.message:null,validateStatus:e.rules.amount?"error":null,class:"required"},{default:a(()=>[t(g,{prefix:e.appSetting.currency.symbol,value:e.newFormData.amount,"onUpdate:value":l[1]||(l[1]=W=>e.newFormData.amount=W),placeholder:e.$t("common.placeholder_default_text",[e.$t("payments.amount")])},null,8,["prefix","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("payments.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:a(()=>[t(b,{dateTime:e.newFormData.date,onDateTimeChanged:l[2]||(l[2]=W=>e.newFormData.date=W)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("payments.payment_mode"),name:"payment_mode_id",help:e.rules.payment_mode_id?e.rules.payment_mode_id.message:null,validateStatus:e.rules.payment_mode_id?"error":null,class:"required"},{default:a(()=>[w("span",Cg,[t(m,{value:e.newFormData.payment_mode_id,"onUpdate:value":l[3]||(l[3]=W=>e.newFormData.payment_mode_id=W),placeholder:e.$t("common.select_default_text",[e.$t("payments.payment_mode")]),allowClear:!0},{default:a(()=>[(r(!0),S(O,null,G(e.paymentModes,W=>(r(),C(d,{key:W.xid,value:W.xid},{default:a(()=>[i(s(W.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(v,{onOnAddSuccess:e.paymentModeAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("payments.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[t(k,{value:e.newFormData.notes,"onUpdate:value":l[4]||(l[4]=W=>e.newFormData.notes=W),placeholder:e.$t("common.placeholder_default_text",[e.$t("payments.notes")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t($,{class:"mt-0"}),e.addEditType=="add"?(r(),S("div",Sg,[t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,null,{default:a(()=>[t(D,{type:"warning",strong:""},{default:a(()=>[w("blockquote",null,s(e.$t("payments.settle_invoice_using_payment")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e.newFormData.user_id?(r(),C(I,{key:0,ref:"settleInvoiceRef",userId:e.newFormData.user_id,amount:e.newFormData.amount},null,8,["userId","amount"])):A("",!0)])):(r(),S("div",$g))]),_:1})]),_:1},8,["title","width","open","onClose"])}const Ag=B(wg,[["render",Dg]]),Tg={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:Ag,AdminPageHeader:ge,UserInfo:He},setup(){const{addEditUrl:e,initData:l,columns:c,paymentType:n,menuParent:h,hashableColumns:y,filterableColumns:u}=Co(),d=Me(),{permsArray:m,formatAmountCurrency:p,selectedWarehouse:_,formatDate:f}=Y(),g=Se({user_id:void 0}),b=E({}),v=Ye();ee(()=>{$(),k()});const k=()=>{d.tableUrl.value={url:`payment-${n.value}?fields=id,xid,date,amount,notes,payment_mode_id,payment_number,payment_type,payment_mode_id,x_payment_mode_id,paymentMode{id,xid,name},user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type}`,filterString:`payment_type eq "${n.value}"`,filters:g},d.table.filterableColumns=u,d.fetch({page:1}),d.crudUrl.value=e.value,d.langKey.value="payments",d.initData.value={...l.value},d.formData.value={...l.value},d.hashableColumns.value=[...y]},$=()=>{const D=axiosAdmin.post("customer-suppliers");Promise.all([D]).then(([I])=>{b.value=I.data})};return me(_,(D,I)=>{k()}),me(()=>v.meta.paymentType,(D,I)=>{}),{columns:c,...d,permsArray:m,formatAmountCurrency:p,paymentType:n,menuParent:h,filters:g,users:b,setUrlData:k,filterableColumns:u,formatDate:f}}},Eg={class:"table-responsive"};function Og(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("DeleteOutlined"),v=o("a-space"),k=o("a-col"),$=o("a-select-option"),D=o("a-select"),I=o("a-input-search"),F=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),U=o("AddEdit"),M=o("UserInfo"),W=o("EditOutlined"),V=o("a-table"),K=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t(`menu.payment_${n.paymentType}`),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t(`menu.${n.menuParent}`)),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t(`menu.payment_${n.paymentType}`)),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(P,{gutter:[16,16]},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[n.permsArray.includes(n.paymentType=="in"?"payment_in_create":"payment_out_create")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),i(" "+s(e.$t("payments.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes(n.paymentType=="in"?"payment_in_delete":"payment_out_delete")||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(P,{gutter:[16,16],justify:"end"},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:6,xl:8},{default:a(()=>[t(F,{compact:""},{default:a(()=>[t(D,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,q=>(r(),C($,{key:q.key},{default:a(()=>[i(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(I,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(D,{value:n.filters.user_id,"onUpdate:value":l[2]||(l[2]=q=>n.filters.user_id=q),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(r(!0),S(O,null,G(n.users,q=>(r(),C($,{key:q.xid,title:q.name,value:q.xid},{default:a(()=>[i(s(q.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[t(U,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(P,null,{default:a(()=>[t(k,{span:24},{default:a(()=>[w("div",Eg,[t(V,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!1,name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="date"?(r(),S(O,{key:0},[i(s(n.formatDate(L.date)),1)],64)):A("",!0),q.dataIndex==="user_id"?(r(),C(M,{key:1,user:L.user},null,8,["user"])):A("",!0),q.dataIndex==="amount"?(r(),S(O,{key:2},[i(s(n.formatAmountCurrency(L.amount)),1)],64)):A("",!0),q.dataIndex==="action"?(r(),S(O,{key:3},[n.permsArray.includes(n.paymentType=="in"?"payment_in_edit":"payment_out_edit")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:X=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(W)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes(n.paymentType=="in"?"payment_in_delete":"payment_out_delete")||n.permsArray.includes("admin")?(r(),C(g,{key:1,type:"primary",onClick:X=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const ja=B(Tg,[["render",Og]]),Ig=Z({setup(){return{appEnv:window.config.app_env}}}),Pg={key:0},Ug=w("a",{href:"https://1.envato.market/5bBAWb",target:"_blank"}," Buy Now From here ",-1);function Fg(e,l,c,n,h,y){const u=o("a-alert");return e.appEnv!="envato"?(r(),S("div",Pg,[t(u,{message:"Online Store is in beta version",type:"warning","show-icon":"",class:"mb-20"},{description:a(()=>[i(" This feature is in testing mode and right now not available in the script. But it will be available in upcoming release. Purchase the script before price hike up to $59 "),Ug]),_:1})])):A("",!0)}const qg=B(Ig,[["render",Fg]]),Mg={components:{PlusOutlined:ne,OrderTable:Nt,DateRangePicker:tt,AdminPageHeader:ge,InBetaMode:qg},setup(){const{formatAmountCurrency:e,orderType:l,orderPageObject:c,orderStatus:n,permsArray:h,selectedWarehouse:y}=Y(),u=qe(),d=E(""),m=E([]),p=E(null),_=E({payment_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",searchString:""});ee(()=>{f();const g=axiosAdmin.get(c.value.userType);Promise.all([g]).then(([b])=>{m.value=b.data})});const f=()=>{const g=u.resolve({name:"front.homepage",params:{warehouse:y.value.slug}});d.value=window.config.path+g.href};return me(y,(g,b)=>{f(),_.value={order_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",searchString:""},p.value.resetPicker()}),{orderPageObject:c,permsArray:h,orderStatus:n,formatAmountCurrency:e,users:m,filters:_,orderType:l,serachDateRangePicker:p,selectedWarehouse:y,storeUrl:d}}};function Rg(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("a-typography-text"),g=o("a-col"),b=o("a-input"),v=o("a-button"),k=o("a-input-group"),$=o("a-row"),D=o("a-input-search"),I=o("a-select-option"),F=o("a-select"),P=o("DateRangePicker"),T=o("admin-page-filters"),U=o("a-tab-pane"),M=o("a-tabs"),W=o("OrderTable"),V=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.online_orders"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.stock_management")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.online_orders")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t($,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t($,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(f,{type:"warning",strong:"",style:{fontSize:"18px"}},{default:a(()=>[i(s(e.$t("online_orders.online_store_url")),1)]),_:1})]),_:1}),t(g,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[t(k,{compact:""},{default:a(()=>[t(b,{value:n.storeUrl,"onUpdate:value":l[0]||(l[0]=K=>n.storeUrl=K),style:{width:"calc(100% - 100px)"}},null,8,["value"]),t(d,{to:{name:"front.homepage",params:{warehouse:n.selectedWarehouse.slug}},target:"_blank"},{default:a(()=>[t(v,{type:"primary"},{default:a(()=>[i(s(e.$t("common.view")),1)]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t($,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(D,{style:{width:"100%"},value:n.filters.searchString,"onUpdate:value":l[1]||(l[1]=K=>n.filters.searchString=K),"show-search":"",placeholder:e.$t("common.placeholder_search_text",[e.$t("stock.invoice_number")])},null,8,["value","placeholder"])]),_:1}),t(g,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(F,{value:n.filters.user_id,"onUpdate:value":l[2]||(l[2]=K=>n.filters.user_id=K),placeholder:e.$t("common.select_default_text",[e.$t(`${n.orderPageObject.langKey}.user`)]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.users,K=>(r(),C(I,{key:K.xid,title:K.name,value:K.xid},{default:a(()=>[i(s(K.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(g,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(P,{ref:"serachDateRangePicker",onDateTimeChanged:l[3]||(l[3]=K=>n.filters.dates=K)},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(V,null,{default:a(()=>[t($,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[t(M,{activeKey:n.filters.order_status,"onUpdate:activeKey":l[4]||(l[4]=K=>n.filters.order_status=K)},{default:a(()=>[t(U,{key:"all",tab:`${e.$t("common.all")} ${e.$t("menu.online_orders")}`},null,8,["tab"]),t(U,{key:"pending",tab:e.$t("common.pending")},null,8,["tab"]),t(U,{key:"delivered",tab:e.$t("common.delivered")},null,8,["tab"]),t(U,{key:"cancelled",tab:e.$t("common.cancelled")},null,8,["tab"])]),_:1},8,["activeKey"])]),_:1})]),_:1}),t(W,{orderType:n.orderType,filters:n.filters,tableSize:"middle",bordered:!0,selectable:!0},null,8,["orderType","filters"])]),_:1})],64)}const Kg=B(Mg,[["render",Rg]]),Vg={components:{PlusOutlined:ne,DeleteOutlined:fe,OrderTable:Nt,DateRangePicker:tt,AdminPageHeader:ge},setup(){const{formatAmountCurrency:e,orderType:l,orderPageObject:c,orderStatus:n,permsArray:h,selectedWarehouse:y}=Y();qe();const u=E([]),d=E(null),m=E([]),p=E(null),_=E({payment_status:"all",warehouse_id:void 0,dates:[],searchColumn:"invoice_number",transfer_type:"transfered",searchString:""});return ee(()=>{const f=`warehouses?filters=id ne "${y.value.xid}"&hashable=${y.value.xid}&limit=10000`,g=axiosAdmin.get(f);Promise.all([g]).then(([b])=>{u.value=b.data})}),me(y,(f,g)=>{_.value={order_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",transfer_type:"transfered",searchString:""},d.value.resetPicker()}),{orderPageObject:c,permsArray:h,orderStatus:n,formatAmountCurrency:e,warehouses:u,filters:_,orderType:l,serachDateRangePicker:d,selectedRowIds:m,orderTableRef:p}}};function zg(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("DeleteOutlined"),v=o("a-space"),k=o("a-col"),$=o("a-input-search"),D=o("a-select-option"),I=o("a-select"),F=o("DateRangePicker"),P=o("a-row"),T=o("admin-page-filters"),U=o("a-tab-pane"),M=o("a-tabs"),W=o("OrderTable"),V=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.stock_transfer"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.stock_transfer")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(P,{gutter:[16,16]},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[(n.permsArray.includes("stock_transfers_create")||n.permsArray.includes("admin"))&&n.filters.transfer_type=="transfered"?(r(),C(d,{key:0,to:{name:"admin.stock.stock-transfers.create"}},{default:a(()=>[t(g,{type:"primary"},{default:a(()=>[t(f),i(" "+s(e.$t("stock_transfer.add")),1)]),_:1})]),_:1},8,["to"])):A("",!0),n.selectedRowIds.length>0&&(n.permsArray.includes("stock_transfers_delete")||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:n.orderTableRef.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(P,{gutter:[16,16],justify:"end"},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t($,{style:{width:"100%"},value:n.filters.searchString,"onUpdate:value":l[0]||(l[0]=K=>n.filters.searchString=K),"show-search":"",placeholder:e.$t("common.placeholder_search_text",[e.$t("stock.invoice_number")])},null,8,["value","placeholder"])]),_:1}),n.filters.transfer_type=="transfered"?(r(),C(k,{key:0,xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(I,{value:n.filters.warehouse_id,"onUpdate:value":l[1]||(l[1]=K=>n.filters.warehouse_id=K),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.warehouses,K=>(r(),C(D,{key:K.xid,title:K.name,value:K.xid},{default:a(()=>[i(s(K.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})):A("",!0),t(k,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(F,{ref:"serachDateRangePicker",onDateTimeChanged:l[2]||(l[2]=K=>n.filters.dates=K)},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(V,null,{default:a(()=>[t(P,null,{default:a(()=>[t(k,{span:24},{default:a(()=>[t(M,{activeKey:n.filters.transfer_type,"onUpdate:activeKey":l[3]||(l[3]=K=>n.filters.transfer_type=K)},{default:a(()=>[t(U,{key:"transfered",tab:e.$t("stock_transfer.transfered")},null,8,["tab"]),t(U,{key:"received",tab:e.$t("stock_transfer.received")},null,8,["tab"])]),_:1},8,["activeKey"])]),_:1})]),_:1}),t(W,{ref:"orderTableRef",orderType:n.orderType,filters:n.filters,tableSize:"middle",bordered:!0,selectable:!0,onOnRowSelection:l[4]||(l[4]=K=>n.selectedRowIds=K)},null,8,["orderType","filters"])]),_:1})],64)}const Lg=B(Vg,[["render",zg]]),Bg=[{path:"/admin/stock/pos",component:lg,name:"admin.pos.index",meta:{requireAuth:!0,menuParent:"pos",menuKey:"pos",permission:"pos_view"}},{path:"/admin/stock/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"adjustments",component:fg,name:"admin.stock_adjustments.index",meta:{requireAuth:!0,menuParent:"stock_adjustment",menuKey:"stock_adjustment",permission:"stock_adjustments_view"}},{path:"purchases/edit/:id",component:St,name:"admin.stock.purchases.edit",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchases",permission:e=>"purchases_edit",orderType:"purchases"}},{path:"purchases/create",component:Ct,name:"admin.stock.purchases.create",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchases",permission:e=>"purchases_create",orderType:"purchases"}},{path:"purchases",component:Vt,name:"admin.stock.purchases.index",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchases",permission:e=>"purchases_view",orderType:"purchases"}},{path:"purchase-returns/edit/:id",component:St,name:"admin.stock.purchase-returns.edit",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchase_returns",permission:e=>"purchase_returns_edit",orderType:"purchase-returns"}},{path:"purchase-returns/create",component:Ct,name:"admin.stock.purchase-returns.create",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchase_returns",permission:e=>"purchase_returns_create",orderType:"purchase-returns"}},{path:"purchase-returns",component:Vt,name:"admin.stock.purchase-returns.index",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchase_returns",permission:e=>"purchase_returns_view",orderType:"purchase-returns"}},{path:"sales/edit/:id",component:St,name:"admin.stock.sales.edit",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales",permission:e=>"sales_edit",orderType:"sales"}},{path:"sales/create",component:Ct,name:"admin.stock.sales.create",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales",permission:e=>"sales_create",orderType:"sales"}},{path:"sales",component:Vt,name:"admin.stock.sales.index",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales",permission:e=>"sales_view",orderType:"sales"}},{path:"sales-returns/edit/:id",component:St,name:"admin.stock.sales-returns.edit",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales_returns",permission:e=>"sales_returns_edit",orderType:"sales-returns"}},{path:"sales-returns/create",component:Ct,name:"admin.stock.sales-returns.create",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales_returns",permission:e=>"sales_returns_create",orderType:"sales-returns"}},{path:"sales-returns",component:Vt,name:"admin.stock.sales-returns.index",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales_returns",permission:e=>"sales_returns_view",orderType:"sales-returns"}},{path:"quotations/edit/:id",component:St,name:"admin.stock.quotations.edit",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"quotations",permission:e=>"quotations_edit",orderType:"quotations"}},{path:"quotations/create",component:Ct,name:"admin.stock.quotations.create",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"quotations",permission:e=>"quotations_create",orderType:"quotations"}},{path:"quotations",component:Vt,name:"admin.stock.quotations.index",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"quotations",permission:e=>"quotations_view",orderType:"quotations"}},{path:"online-orders",component:Kg,name:"admin.online_orders.index",meta:{requireAuth:!0,menuParent:"online_orders",menuKey:"online_orders",orderType:"online-orders"}},{path:"stock-transfers/edit/:id",component:St,name:"admin.stock.stock-transfers.edit",meta:{requireAuth:!0,menuParent:"stock_transfer",menuKey:e=>"stock_transfer",permission:e=>"stock_transfers_edit",orderType:"stock-transfers"}},{path:"stock-transfers/create",component:Ct,name:"admin.stock.stock-transfers.create",meta:{requireAuth:!0,menuParent:"stock_transfer",menuKey:e=>"stock_transfer",permission:e=>"stock_transfers_create",orderType:"stock-transfers"}},{path:"stock-transfers",component:Lg,name:"admin.stock.stock-transfers.index",meta:{requireAuth:!0,menuParent:"stock_transfer",menuKey:e=>"stock_transfer",permission:e=>"stock_transfers_view",orderType:"stock-transfers"}}]},{path:"/admin/payment/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"in",component:ja,name:"admin.payments.in",meta:{requireAuth:!0,menuParent:"sales",menuKey:"payment_in",permission:"payment_in_view",paymentType:"in"}},{path:"out",component:ja,name:"admin.payments.out",meta:{requireAuth:!0,menuParent:"purchases",menuKey:"payment_out",permission:"payment_out_view",paymentType:"out"}}]}],So=()=>{const e="expense-categories",{t:l}=te(),c={name:"",description:""},n=[{title:l("expense_category.name"),dataIndex:"name"},{title:l("expense_category.description"),dataIndex:"description"},{title:l("common.action"),dataIndex:"action"}],h=[{key:"name",value:l("common.name")}];return{addEditUrl:e,initData:c,columns:n,filterableColumns:h}},Wg=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve();return{loading:n,rules:h,onClose:()=>{h.value={},l("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:d=>{l("addEditSuccess",d.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function jg(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-textarea"),f=o("a-form"),g=o("SaveOutlined"),b=o("a-button"),v=o("a-modal");return r(),C(v,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(g)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(b,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("expense_category.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=k=>e.formData.name=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("expense_category.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:a(()=>[t(_,{value:e.formData.description,"onUpdate:value":l[1]||(l[1]=k=>e.formData.description=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const $o=B(Wg,[["render",jg]]),Hg={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:$o,AdminPageHeader:ge},setup(){const{addEditUrl:e,initData:l,columns:c,filterableColumns:n}=So(),h=Me(),{permsArray:y}=Y();return ee(()=>{h.tableUrl.value={url:"expense-categories?fields=id,xid,name,description"},h.table.filterableColumns=n,h.fetch({page:1}),h.crudUrl.value=e,h.langKey.value="expense_category",h.initData.value={...l},h.formData.value={...l}}),{columns:c,...h,filterableColumns:n,permsArray:y}}},Ng={class:"table-responsive"};function Yg(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("DeleteOutlined"),v=o("a-space"),k=o("a-col"),$=o("a-select-option"),D=o("a-select"),I=o("a-input-search"),F=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),U=o("AddEdit"),M=o("EditOutlined"),W=o("a-table"),V=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.expense_categories"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.expense_manager")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.expense_categories")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(P,{gutter:[16,16]},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[n.permsArray.includes("expense_categories_create")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),i(" "+s(e.$t("expense_category.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("expense_categories_delete")||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(P,{gutter:[16,16],justify:"end"},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:12,xl:10},{default:a(()=>[t(F,{compact:""},{default:a(()=>[t(D,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=K=>e.table.searchColumn=K),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,K=>(r(),C($,{key:K.key},{default:a(()=>[i(s(K.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(I,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=K=>e.table.searchString=K),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(V,null,{default:a(()=>[t(U,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(P,null,{default:a(()=>[t(k,{span:24},{default:a(()=>[w("div",Ng,[t(W,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:K=>({disabled:!1,name:K.xid})},columns:n.columns,"row-key":K=>K.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:K,record:q})=>[K.dataIndex==="action"?(r(),S(O,{key:0},[n.permsArray.includes("expense_categories_edit")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:L=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(M)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("expense_categories_delete")||n.permsArray.includes("admin")?(r(),C(g,{key:1,type:"primary",onClick:L=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Gg=B(Hg,[["render",Yg]]),Jg=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:$o},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=So(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Qg={key:0};function Xg(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("expense_categories_create")||e.permsArray.includes("admin")?(r(),S("div",Qg,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"expense_categories"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("expense_category.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("expense_category.add"),successMessage:e.$t("expense_category.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Zg=B(Jg,[["render",Xg]]),xg=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:oa},setup(e,{emit:l}){const{permsArray:c}=Y(),{staffMemberInitData:n,staffMemberAddEditUrl:h}=la(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,staffMemberAddEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),ey={key:0};function ty(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("users_create")||e.permsArray.includes("admin")?(r(),S("div",ey,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"staff_members"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("staff_member.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.staffMemberAddEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,addEditData:e.formData,data:e.formData,pageTitle:e.$t("staff_member.add"),successMessage:e.$t("staff_member.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","addEditData","data","pageTitle","successMessage"])])):A("",!0)}const ay=B(xg,[["render",ty]]);const ny=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,UserInfo:He,SaveOutlined:he,ExpenseCategoryAddButton:Zg,StaffAddButton:ay,UploadFile:ao,DateTimePicker:na},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),y=E({}),u=E({}),{appSetting:d,disabledDate:m,permsArray:p,dayjs:_}=Y(),f="expense-categories?limit=10000",g="users?limit=10000",b=E({});ee(()=>{const I=axiosAdmin.get(f),F=axiosAdmin.get(g);Promise.all([I,F]).then(([P,T])=>{y.value=P.data,u.value=T.data})});const v=()=>{c({url:e.url,data:b.value,successMessage:e.successMessage,success:I=>{l("addEditSuccess",I.xid)}})},k=()=>{h.value={},l("closed")},$=()=>{axiosAdmin.get(f).then(I=>{y.value=I.data})},D=()=>{axiosAdmin.get(g).then(I=>{u.value=I.data})};return me(()=>e.visible,(I,F)=>{I&&(e.addEditType=="add"?b.value={...e.formData,date:_().utc().format("YYYY-MM-DDTHH:mm:ssZ")}:b.value={...e.formData})}),{loading:n,rules:h,onClose:k,onSubmit:v,disabledDate:m,permsArray:p,expenseCategories:y,staffMembers:u,drawerWidth:window.innerWidth<=991?"90%":"45%",appSetting:d,expenseCategoryAdded:$,staffMemberAdded:D,newFormData:b}}}),oy={style:{display:"flex"}},ly={style:{display:"flex"}};function sy(e,l,c,n,h,y){const u=o("a-select-option"),d=o("a-select"),m=o("ExpenseCategoryAddButton"),p=o("a-form-item"),_=o("a-col"),f=o("UserInfo"),g=o("StaffAddButton"),b=o("a-row"),v=o("DateTimePicker"),k=o("a-input-number"),$=o("UploadFile"),D=o("a-textarea"),I=o("a-form"),F=o("SaveOutlined"),P=o("a-button"),T=o("a-drawer");return r(),C(T,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(P,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t(F)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(P,{onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(I,{layout:"vertical"},{default:a(()=>[t(b,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:a(()=>[t(p,{label:e.$t("expense.expense_category"),name:"expense_category_id",help:e.rules.expense_category_id?e.rules.expense_category_id.message:null,validateStatus:e.rules.expense_category_id?"error":null,class:"required"},{default:a(()=>[w("span",oy,[t(d,{value:e.newFormData.expense_category_id,"onUpdate:value":l[0]||(l[0]=U=>e.newFormData.expense_category_id=U),placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(e.expenseCategories,U=>(r(),C(u,{key:U.xid,value:U.xid,label:U.name},{default:a(()=>[i(s(U.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),t(m,{onOnAddSuccess:e.expenseCategoryAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"]),e.permsArray.includes("admin")?(r(),C(_,{key:0,xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:a(()=>[t(p,{label:e.$t("expense.created_by_user"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null},{default:a(()=>[w("span",ly,[t(d,{value:e.newFormData.user_id,"onUpdate:value":l[1]||(l[1]=U=>e.newFormData.user_id=U),placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),allowClear:!0,"option-label-prop":"label",optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(e.staffMembers,U=>(r(),C(u,{key:U.xid,value:U.xid,label:U.name},{default:a(()=>[t(f,{user:U,size:"small"},null,8,["user"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),t(g,{onOnAddSuccess:e.staffMemberAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"])):A("",!0)]),_:1}),t(b,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("expense.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:a(()=>[t(v,{dateTime:e.newFormData.date,onDateTimeChanged:l[2]||(l[2]=U=>e.newFormData.date=U)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("expense.amount"),name:"amount",help:e.rules.amount?e.rules.amount.message:null,validateStatus:e.rules.amount?"error":null,class:"required"},{default:a(()=>[t(k,{value:e.newFormData.amount,"onUpdate:value":l[3]||(l[3]=U=>e.newFormData.amount=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.amount")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[i(s(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("expense.bill"),name:"bill",help:e.rules.bill?e.rules.bill.message:null,validateStatus:e.rules.bill?"error":null},{default:a(()=>[t($,{acceptFormat:"image/*,.pdf",formData:e.newFormData,folder:"expenses",uploadField:"bill",onOnFileUploaded:l[4]||(l[4]=U=>{e.newFormData.bill=U.file,e.newFormData.bill_url=U.file_url})},null,8,["acceptFormat","formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("expense.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[t(D,{value:e.newFormData.notes,"onUpdate:value":l[5]||(l[5]=U=>e.newFormData.notes=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const ry=B(ny,[["render",sy]]),dy=()=>{const{t:e}=te(),l="expenses",c=E("expenses?fields=id,xid,bill,bill_url,expense_category_id,x_expense_category_id,expenseCategory{id,xid,name},amount,user_id,x_user_id,user{id,xid,name},notes,date"),n=["user_id","expense_category_id"],h=Se({expenseCategories:[],staffMembers:[]}),y={expense_category_id:void 0,amount:"",bill:void 0,bill_url:void 0,date:void 0,user_id:void 0,notes:""},u=[{title:e("expense.expense_category"),dataIndex:"expense_category_id"},{title:e("expense.amount"),dataIndex:"amount"},{title:e("expense.date"),dataIndex:"date"},{title:e("expense.created_by_user"),dataIndex:"user_id"},{title:e("common.action"),dataIndex:"action"}],d=Se({expense_category_id:void 0,user_id:void 0});return{url:c,addEditUrl:l,initData:y,columns:u,filters:d,hashableColumns:n,preFetchData:h,getPreFetchData:()=>{const p=axiosAdmin.get("expense-categories?limit=10000"),_=axiosAdmin.get("users?limit=10000");Promise.all([p,_]).then(([f,g])=>{h.expenseCategories=f.data,h.staffMembers=g.data})}}},iy={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:ry,AdminPageHeader:ge,DateRangePicker:tt},setup(){const{url:e,addEditUrl:l,initData:c,columns:n,filters:h,preFetchData:y,getPreFetchData:u,hashableColumns:d}=dy(),m=Me(),{appSetting:p,permsArray:_,formatDate:f,selectedWarehouse:g,formatAmountCurrency:b}=Y(),v=E({dates:[]});ee(()=>{u(),m.crudUrl.value=l,m.langKey.value="expense",m.initData.value={...c},m.formData.value={...c},m.hashableColumns.value=[...d],k()});const k=()=>{m.tableUrl.value={url:e,filters:h,extraFilters:v},m.fetch({page:1})};return me(g,($,D)=>{k()}),{columns:n,appSetting:p,formatDate:f,...m,filters:h,extraFilters:v,preFetchData:y,reFetchDatatable:k,permsArray:_,formatAmountCurrency:b}}},uy={class:"table-responsive"};function my(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("DeleteOutlined"),v=o("a-space"),k=o("a-col"),$=o("a-select-option"),D=o("a-select"),I=o("DateRangePicker"),F=o("a-row"),P=o("admin-page-filters"),T=o("AddEdit"),U=o("EditOutlined"),M=o("a-table"),W=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.expenses"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.expense_manager")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.expenses")),1)]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(F,{gutter:[16,16]},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[n.permsArray.includes("expenses_create")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),i(" "+s(e.$t("expense.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("expenses_delete")||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(F,{gutter:[16,16],justify:"end"},{default:a(()=>[t(k,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(D,{value:n.filters.expense_category_id,"onUpdate:value":l[0]||(l[0]=V=>n.filters.expense_category_id=V),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),onChange:n.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),S(O,null,G(n.preFetchData.expenseCategories,V=>(r(),C($,{key:V.xid,value:V.xid,label:V.name},{default:a(()=>[i(s(V.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(k,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(D,{value:n.filters.user_id,"onUpdate:value":l[1]||(l[1]=V=>n.filters.user_id=V),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),onChange:n.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),S(O,null,G(n.preFetchData.staffMembers,V=>(r(),C($,{key:V.xid,value:V.xid,label:V.name},{default:a(()=>[i(s(V.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(k,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(I,{onDateTimeChanged:l[2]||(l[2]=V=>{n.extraFilters.dates=V,n.reFetchDatatable()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(T,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(F,{class:"mt-20"},{default:a(()=>[t(k,{span:24},{default:a(()=>[w("div",uy,[t(M,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:V=>({disabled:!1,name:V.xid})},columns:n.columns,"row-key":V=>V.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:V,text:K,record:q})=>{var L;return[V.dataIndex==="expense_category_id"?(r(),S(O,{key:0},[i(s(q.expense_category.name),1)],64)):A("",!0),V.dataIndex==="user_id"?(r(),S(O,{key:1},[i(s((L=q.user)==null?void 0:L.name),1)],64)):A("",!0),V.dataIndex==="amount"?(r(),S(O,{key:2},[i(s(n.formatAmountCurrency(K)),1)],64)):A("",!0),V.dataIndex==="date"?(r(),S(O,{key:3},[i(s(n.formatDate(q.date)),1)],64)):A("",!0),V.dataIndex==="action"?(r(),S(O,{key:4},[n.permsArray.includes("expenses_edit")||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:X=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(U)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("expenses_delete")||n.permsArray.includes("admin")?(r(),C(g,{key:1,type:"primary",onClick:X=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]}),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const cy=B(iy,[["render",my]]),py=[{path:"/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/expense-categories",component:Gg,name:"admin.expense_categories.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expense_categories",permission:"expense_categories_view"}},{path:"/admin/expenses",component:cy,name:"admin.expenses.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expenses",permission:"expenses_view"}}]}],_y=Z({props:["amount"],components:{ArrowDownOutlined:ga,ArrowUpOutlined:fa},setup(){const{formatAmountCurrency:e}=Y();return{formatAmountCurrency:e}}}),fy={key:0};function gy(e,l,c,n,h,y){const u=o("ArrowUpOutlined"),d=o("a-typography-text"),m=o("a-tooltip"),p=o("ArrowDownOutlined");return e.amount<0?(r(),C(m,{key:0,title:e.$t("payments.you_will_pay")},{default:a(()=>[t(d,null,{default:a(()=>[t(u,{style:{color:"red"}}),i(" "+s(e.formatAmountCurrency(Math.abs(e.amount))),1)]),_:1})]),_:1},8,["title"])):(r(),C(m,{key:1,title:e.$t("payments.you_will_receive")},{default:a(()=>[t(d,null,{default:a(()=>[e.amount>0?(r(),S("span",fy,[t(p,{style:{color:"green"}})])):A("",!0),i(" "+s(e.formatAmountCurrency(e.amount)),1)]),_:1})]),_:1},8,["title"]))}const Fa=B(_y,[["render",gy]]),yy=()=>{const{t:e}=te(),l=["user_id"],c=[{key:"name",value:e("user.name")}],n=[{title:e("payments.date"),dataIndex:"date"},{title:e("payments.transaction_number"),dataIndex:"transaction_number"},{title:e("payments.payment_type"),dataIndex:"payment_type"},{title:e("payments.user"),dataIndex:"user_id"},{title:e("payments.amount"),dataIndex:"amount"}];return{transactionsFilterableColumns:c,transactionsColumns:n,transactionsHashableColumns:l}},hy=Z({props:{user_id:null,result_type:{default:"all",type:String}},components:{UserInfo:He},setup(e){const{transactionsColumns:l,transactionsHashableColumns:c}=yy(),{formatDate:n,formatAmountCurrency:h}=Y(),y=je();ee(()=>{u(e)});const u=d=>{const m={},p={result_type:d.result_type};d.user_id&&d.user_id!=null&&(p.user_id=d.user_id),y.tableUrl.value={url:"warehouse-history?fields=id,xid,date,type,amount,transaction_number,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type}",filters:m,extraFilters:p},y.hashable.value=[...c],y.table.sorter={field:"date",order:"asc"},y.fetch({page:1})};return me(e,(d,m)=>{u(d)}),{transactionsColumns:l,...y,formatDate:n,formatAmountCurrency:h}}}),by={key:0,class:"table-responsive"};function vy(e,l,c,n,h,y){const u=o("UserInfo"),d=o("a-table"),m=o("a-col"),p=o("a-row");return r(),C(p,null,{default:a(()=>[t(m,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),S("div",by,[t(d,{columns:e.transactionsColumns,"row-key":_=>_.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:_,record:f})=>[_.dataIndex==="date"?(r(),S(O,{key:0},[i(s(e.formatDate(f.date)),1)],64)):A("",!0),_.dataIndex==="payment_type"?(r(),S(O,{key:1},[i(s(f.type),1)],64)):A("",!0),_.dataIndex==="user_id"?(r(),C(u,{key:2,user:f.user},null,8,["user"])):A("",!0),_.dataIndex==="amount"?(r(),S(O,{key:3},[i(s(e.formatAmountCurrency(f.amount)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const ky=B(hy,[["render",vy]]),wy=Z({props:["user"],components:{Transactions:ky},setup(){return{activeKey:E("transactions")}}});function Cy(e,l,c,n,h,y){const u=o("Transactions"),d=o("a-tab-pane"),m=o("a-tabs");return r(),C(m,{activeKey:e.activeKey,"onUpdate:activeKey":l[0]||(l[0]=p=>e.activeKey=p)},{default:a(()=>[t(d,{key:"transactions",tab:e.$t("payments.transactions")},{default:a(()=>[t(u,{user_id:e.user.xid,result_type:e.user.user_type=="staff_members"?"staff_member":"customer_supplier"},null,8,["user_id","result_type"])]),_:1},8,["tab"])]),_:1},8,["activeKey"])}const Sy=B(wy,[["render",Cy]]);const $y=Z({props:["user","visible"],emits:["closed"],components:{UserBalance:Fa,UserDetails:Sy},setup(e,{emit:l}){const{formatAmountCurrency:c}=Y();return te(),{formatAmountCurrency:c,onClose:()=>{l("closed")},drawerWidth:window.innerWidth<=991?"90%":"60%"}}}),Dy={class:"user-details"};function Ay(e,l,c,n,h,y){const u=o("a-image"),d=o("a-col"),m=o("a-descriptions-item"),p=o("UserBalance"),_=o("a-descriptions"),f=o("a-row"),g=o("UserDetails"),b=o("a-drawer");return r(),C(b,{title:e.user.name,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose},{default:a(()=>[w("div",Dy,[t(f,{gutter:[16,16]},{default:a(()=>[t(d,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(u,{src:e.user.profile_image_url},null,8,["src"])]),_:1}),t(d,{xs:24,sm:24,md:20,lg:20},{default:a(()=>[t(_,{title:e.$t(`user.${e.user.user_type}_details`),layout:"vertical",contentStyle:{fontWeight:500,marginBottom:"20px"}},{default:a(()=>[t(m,{label:e.$t("user.name")},{default:a(()=>[i(s(e.user.name),1)]),_:1},8,["label"]),t(m,{label:e.$t("user.email")},{default:a(()=>[i(s(e.user.email),1)]),_:1},8,["label"]),t(m,{label:e.$t("user.phone")},{default:a(()=>[i(s(e.user.phone?e.user.phone:"-"),1)]),_:1},8,["label"]),e.user.details?(r(),C(m,{key:0,label:e.$t("user.opening_balance")},{default:a(()=>[t(p,{amount:e.user.details.opening_balance_type=="pay"?-`${e.user.details.opening_balance}`:e.user.details.opening_balance},null,8,["amount"])]),_:1},8,["label"])):A("",!0),t(m,{label:e.$t("user.billing_address"),span:2},{default:a(()=>[i(s(e.user.address?e.user.address:"-"),1)]),_:1},8,["label"]),e.user.details?(r(),C(m,{key:1,label:e.$t("user.credit_period")},{default:a(()=>[i(s(e.user.details.credit_period?`${e.user.details.credit_period} day(s)`:"-"),1)]),_:1},8,["label"])):A("",!0),e.user.details?(r(),C(m,{key:2,label:e.$t("user.credit_limit")},{default:a(()=>[i(s(e.user.details.credit_limit?e.formatAmountCurrency(e.user.details.credit_limit):"-"),1)]),_:1},8,["label"])):A("",!0),e.user.details?(r(),C(m,{key:3,label:e.$t("common.balance")},{default:a(()=>[e.user.details&&e.user.details.due_amount?(r(),C(p,{key:0,amount:e.user.details.due_amount},null,8,["amount"])):A("",!0)]),_:1},8,["label"])):A("",!0),e.user.user_type!="staff_members"?(r(),C(m,{key:4,label:e.$t("user.tax_number")},{default:a(()=>[i(s(e.user.tax_number?e.user.tax_number:"-"),1)]),_:1},8,["label"])):A("",!0)]),_:1},8,["title"])]),_:1})]),_:1})]),t(g,{user:e.user},null,8,["user"])]),_:1},8,["title","width","open","onClose"])}const Ty=B($y,[["render",Ay]]),Ey={components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,UserOutlined:va,ArrowUpOutlined:fa,ArrowDownOutlined:ga,AddEdit:oa,UserInfo:He,StateWidget:Qn,AdminPageHeader:ge,UserBalance:Fa,UserView:Ty,ImportUsers:Ut},setup(){const{t:e}=te(),{statusColors:l,userStatus:c,permsArray:n,formatDateTime:h,user:y,selectedWarehouse:u}=Y(),{supplierInitData:d,customerInitData:m,staffMemberInitData:p,columns:_,supplierCustomerColumns:f,filterableColumns:g}=la(),b=Me(),v=Ye(),k=E(v.meta.menuKey),$="?fields=id,xid,user_type,name,email,profile_image,profile_image_url,is_walkin_customer,phone,address,shipping_address,status,tax_number,created_at,details{opening_balance,opening_balance_type,credit_period,credit_limit,due_amount,warehouse_id,x_warehouse_id},details:warehouse{id,xid,name},role_id,role{id,xid,name,display_name},warehouse_id,x_warehouse_id,warehouse{xid,name},userWarehouses{user_id,x_user_id,warehouse_id,x_warehouse_id}",D=E(void 0),I=E("all"),F=E("all"),P=E([]),T=E(""),U=E(""),M=E("");ee(()=>{V(),b.table.filterableColumns=g,W()});const W=()=>{k.value=="suppliers"?(b.initData.value={...d},b.formData.value={...d},b.langKey.value="supplier",P.value=f,T.value=window.config.supplier_sample_file,U.value=e("supplier.import_suppliers"),M.value="suppliers/import"):k.value=="customers"?(b.initData.value={...m},b.formData.value={...m},b.langKey.value="customer",P.value=f,T.value=window.config.customer_sample_file,U.value=e("customer.import_customers"),M.value="customers/import"):(b.initData.value={...p},b.formData.value={...p},b.langKey.value="staff_member",P.value=_,T.value=window.config.staff_member_sample_file,U.value=e("staff_member.import_staff_members"),M.value="users/import"),b.restFormData()},V=()=>{b.crudUrl.value=k.value;var K="",q={};D.value!=null&&D.value!="all"&&(K+=`status eq "${D.value}"`),F.value!=null&&F.value!="all"&&k.value!="users"&&(q.search_due_type=F.value),b.tableUrl.value={url:`${k.value}${$}`,filterString:K,extraFilters:q},b.fetch({page:1})};return me(()=>v.meta.menuKey,(K,q)=>{(v.meta.menuKey=="users"||v.meta.menuKey=="customers"||v.meta.menuKey=="suppliers")&&(k.value=v.meta.menuKey,D.value=void 0,b.table.searchColumn=void 0,b.table.searchString="",F.value="all",V(),W())}),me(u,(K,q)=>{V()}),{statusColors:l,userStatus:c,filterableColumns:g,userType:k,tableColumns:P,searchStatus:D,setUrlData:V,searchDueType:F,activeTabKey:I,...b,permsArray:n,formatDateTime:h,user:y,sampleFileUrl:T,importPageTitle:U,importUrl:M}}},Oy={class:"table-responsive"};function Iy(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("ImportUsers"),v=o("a-space"),k=o("DeleteOutlined"),$=o("a-col"),D=o("a-select-option"),I=o("a-select"),F=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),U=o("admin-page-filters"),M=o("AddEdit"),W=o("a-tab-pane"),V=o("a-tabs"),K=o("user-info"),q=o("a-tag"),L=o("UserBalance"),X=o("EyeOutlined"),J=o("EditOutlined"),le=o("a-table"),H=o("UserView"),N=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t(`menu.${e.langKey}s`),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.parties")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t(`menu.${e.langKey}s`)),1)]),_:1})]),_:1})]),_:1}),t(U,null,{default:a(()=>[t(T,{gutter:[16,16]},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[n.permsArray.includes(`${n.userType}_create`)||n.permsArray.includes("admin")?(r(),C(v,{key:0},{default:a(()=>[t(g,{type:"primary",onClick:e.addItem},{default:a(()=>[t(f),i(" "+s(e.$t(`${e.langKey}.add`)),1)]),_:1},8,["onClick"]),t(b,{pageTitle:n.importPageTitle,sampleFileUrl:n.sampleFileUrl,importUrl:n.importUrl,onOnUploadSuccess:n.setUrlData},null,8,["pageTitle","sampleFileUrl","importUrl","onOnUploadSuccess"])]),_:1})):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes(`${n.userType}_delete`)||n.permsArray.includes("admin"))?(r(),C(g,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t($,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(T,{gutter:[16,16],justify:"end"},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(P,{compact:""},{default:a(()=>[t(I,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=z=>e.table.searchColumn=z),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,z=>(r(),C(D,{key:z.key},{default:a(()=>[i(s(z.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=z=>e.table.searchString=z),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1}),n.userType&&n.userType!="users"?(r(),C($,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(I,{value:n.searchStatus,"onUpdate:value":l[2]||(l[2]=z=>n.searchStatus=z),onChange:n.setUrlData,"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("user.status")]),allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),S(O,null,G(n.userStatus,z=>(r(),C(D,{key:z.key,value:z.key,label:z.value},{default:a(()=>[i(s(z.value),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","onChange","placeholder"])]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(N,null,{default:a(()=>[t(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,addEditData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","addEditData","data","pageTitle","successMessage"]),n.userType&&n.userType=="users"?(r(),C(T,{key:0},{default:a(()=>[t($,{span:24},{default:a(()=>[t(V,{activeKey:n.searchStatus,"onUpdate:activeKey":l[3]||(l[3]=z=>n.searchStatus=z),onChange:n.setUrlData},{default:a(()=>[t(W,{key:"all",tab:`${e.$t("common.all")} ${e.$t("menu.users")}`},null,8,["tab"]),(r(!0),S(O,null,G(n.userStatus,z=>(r(),C(W,{key:z.key,tab:`${z.value} ${e.$t("menu.users")}`},null,8,["tab"]))),128))]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):A("",!0),n.userType&&n.userType!="users"?(r(),C(T,{key:1},{default:a(()=>[t($,{span:24},{default:a(()=>[t(V,{activeKey:n.searchDueType,"onUpdate:activeKey":l[4]||(l[4]=z=>n.searchDueType=z),onChange:n.setUrlData},{default:a(()=>[t(W,{key:"all",tab:`${e.$t("common.all")}`},null,8,["tab"]),t(W,{key:"receive",tab:`${e.$t("user.to_receive")}`},null,8,["tab"]),t(W,{key:"pay",tab:`${e.$t("user.to_pay")}`},null,8,["tab"])]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):A("",!0),t(T,{gutter:[15,15]},{default:a(()=>[t($,{span:24},{default:a(()=>[w("div",Oy,[t(le,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:z=>({disabled:!!(n.user.xid==z.xid||z.is_walkin_customer),name:z.xid})},columns:n.tableColumns,"row-key":z=>z.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:z,text:Q,record:j})=>{var oe;return[z.dataIndex==="name"?(r(),C(K,{key:0,user:j},null,8,["user"])):A("",!0),z.dataIndex==="status"?(r(),C(q,{key:1,color:n.statusColors[Q]},{default:a(()=>[i(s(e.$t(`common.${Q}`)),1)]),_:2},1032,["color"])):A("",!0),z.dataIndex==="created_at"?(r(),S(O,{key:2},[i(s(n.formatDateTime(j.created_at)),1)],64)):A("",!0),z.dataIndex==="balance"?(r(),C(L,{key:3,amount:(oe=j.details)==null?void 0:oe.due_amount},null,8,["amount"])):A("",!0),z.dataIndex==="action"?(r(),S(O,{key:4},[t(g,{type:"primary",onClick:R=>e.viewItem(j),style:{"margin-left":"4px"}},{icon:a(()=>[t(X)]),_:2},1032,["onClick"]),n.permsArray.includes(`${n.userType}_edit`)||n.permsArray.includes("admin")?(r(),C(g,{key:0,type:"primary",onClick:R=>e.editItem(j),style:{"margin-left":"4px"}},{icon:a(()=>[t(J)]),_:2},1032,["onClick"])):A("",!0),(n.permsArray.includes(`${n.userType}_delete`)||n.permsArray.includes("admin"))&&n.user.xid!=j.xid&&!j.is_walkin_customer?(r(),C(g,{key:1,type:"primary",onClick:R=>e.showDeleteConfirm(j.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]}),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1}),t(H,{user:e.viewData,visible:e.detailsVisible,onClosed:e.onCloseDetails},null,8,["user","visible","onClosed"])]),_:1})],64)}const da=B(Ey,[["render",Iy]]),Py=[{path:"/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/users",component:da,name:"admin.users.index",meta:{requireAuth:!0,menuParent:"users",menuKey:"users",permission:"users_view"}},{path:"/admin/customers",component:da,name:"admin.customers.index",meta:{requireAuth:!0,menuParent:"parties",menuKey:"customers",permission:"customers_view"}},{path:"/admin/suppliers",component:da,name:"admin.suppliers.index",meta:{requireAuth:!0,menuParent:"parties",menuKey:"suppliers",permission:"suppliers_view"}}]}];const qa=e=>{const l=e=="admin"?"currencies?fields=id,xid,name,symbol,position,code":"superadmin/currencies?fields=id,xid,name,symbol,position,code",c=e=="admin"?"currencies":"superadmin/currencies",{t:n}=te(),h={name:"",symbol:"",position:"",code:""},y=[{title:n("currency.name"),dataIndex:"name"},{title:n("currency.symbol"),dataIndex:"symbol"},{title:n("currency.position"),dataIndex:"position"},{title:n("currency.code"),dataIndex:"code"},{title:n("common.action"),dataIndex:"action"}],u=[{key:"name",value:n("common.name")}];return{url:l,addEditUrl:c,initData:h,columns:y,filterableColumns:u}},Uy=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],emits:["addEditSuccess"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{appSetting:y}=Y(),u=Ce();return{loading:n,rules:h,onClose:()=>{h.value={},l("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:p=>{y.value.currency&&y.value.currency.xid==p.xid&&u.dispatch("auth/updateApp"),l("addEditSuccess",p.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Fy(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-radio"),f=o("a-radio-group"),g=o("a-form"),b=o("SaveOutlined"),v=o("a-button"),k=o("a-modal");return r(),C(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(v,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(v,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(g,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("currency.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=$=>e.formData.name=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("currency.symbol"),name:"symbol",help:e.rules.symbol?e.rules.symbol.message:null,validateStatus:e.rules.symbol?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.symbol,"onUpdate:value":l[1]||(l[1]=$=>e.formData.symbol=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.symbol")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("currency.position"),name:"position",help:e.rules.position?e.rules.position.message:null,validateStatus:e.rules.position?"error":null},{default:a(()=>[t(f,{value:e.formData.position,"onUpdate:value":l[2]||(l[2]=$=>e.formData.position=$)},{default:a(()=>[t(_,{value:"front"},{default:a(()=>[i(s(e.$t("currency.front"))+" ("+s(e.$t("currency.front_position_example"))+") ",1)]),_:1}),t(_,{value:"behind"},{default:a(()=>[i(s(e.$t("currency.behind"))+" ("+s(e.$t("currency.behind_position_example"))+") ",1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("currency.code"),name:"code",help:e.rules.code?e.rules.code.message:null,validateStatus:e.rules.code?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.code,"onUpdate:value":l[3]||(l[3]=$=>e.formData.code=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Ma=B(Uy,[["render",Fy]]),qy=Z({props:{panelType:{type:String,default:"admin"},btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:Ma},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=qa(e.panelType),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),My={key:0};function Ry(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.panelType=="admin"&&(e.permsArray.includes("currencies_create")||e.permsArray.includes("admin"))||e.panelType=="superadmin"?(r(),S("div",My,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("currency.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("currency.add"),successMessage:e.$t("currency.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Do=B(qy,[["render",Ry]]),Ao=()=>{const e=Re("langs?fields=id,xid,name,image,image_url,key,enabled"),l=Re("langs"),{t:c}=te(),n={name:"",key:"",image:void 0,image_url:void 0,enabled:!0},h=[{title:c("langs.name"),dataIndex:"name"},{title:c("langs.key"),dataIndex:"key"},{title:c("langs.enabled"),dataIndex:"enabled"},{title:c("common.action"),dataIndex:"action"}],y=[{key:"name",value:c("langs.name")}];return{url:e,addEditUrl:l,initData:n,columns:h,filterableColumns:y}},Ky=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,Upload:ot},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),y=Ce();return{loading:n,rules:h,onClose:()=>{h.value={},l("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:m=>{l("addEditSuccess",m.xid),y.dispatch("auth/updateAllLangs")}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Vy(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("Upload"),f=o("a-form"),g=o("SaveOutlined"),b=o("a-button"),v=o("a-modal");return r(),C(v,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(g)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(b,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("langs.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=k=>e.formData.name=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("langs.key"),name:"key",help:e.rules.key?e.rules.key.message:null,validateStatus:e.rules.key?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.key,"onUpdate:value":l[1]||(l[1]=k=>e.formData.key=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(m,{span:24},{default:a(()=>[t(d,{label:e.$t("langs.flag"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:a(()=>[t(_,{formData:e.formData,folder:"langs",onOnFileUploaded:l[2]||(l[2]=k=>{e.formData.image=k.file,e.formData.image_url=k.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const To=B(Ky,[["render",Vy]]),zy=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"},panelType:{default:"admin"}},emits:["onAddSuccess"],components:{PlusOutlined:ne,AddEdit:To},setup(e,{emit:l}){const{permsArray:c}=Y(),{initData:n,addEditUrl:h}=Ao(),y=E(!1),u=E("add"),d=E({...n});return{permsArray:c,visible:y,addEditType:u,addEditUrl:h,formData:d,addEditSuccess:()=>{y.value=!1,d.value={...n},l("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Ly={key:0};function By(e,l,c,n,h,y){const u=o("a-menu-item"),d=o("PlusOutlined"),m=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("translations_create")||e.permsArray.includes("admin")||e.panelType=="superadmin"?(r(),S("div",Ly,[e.customType=="menu"?(r(),C(u,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[de(e.$slots,"icon")]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick"])):(r(),S(O,{key:1},[e.tooltip?(r(),C(p,{key:0,placement:"topLeft",title:e.$t("langs.add"),"arrow-point-at-center":""},{default:a(()=>[t(m,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),C(m,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[de(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("langs.add"),successMessage:e.$t("langs.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Ra=B(zy,[["render",By]]);const Wy=Z({components:{LaptopOutlined:bl,UserOutlined:va,TranslationOutlined:vl,ShopOutlined:kl,ShoppingCartOutlined:yt,SolutionOutlined:wl,ScheduleOutlined:Cl,DollarOutlined:Sl,AccountBookOutlined:$l,AppstoreAddOutlined:Kn,ApartmentOutlined:Dl,FolderOpenOutlined:Al,MailOutlined:ka,HistoryOutlined:Tl,FormOutlined:Rn,DatabaseOutlined:El},setup(){const{appSetting:e,user:l,permsArray:c,appModules:n,appType:h}=Y(),y=Ye();Ce();const u=E([]);return ee(()=>{const d=typeof y.meta.menuKey=="function"?y.meta.menuKey(y):y.meta.menuKey;u.value=[d.replace("-","_")]}),me(y,(d,m)=>{const p=typeof d.meta.menuKey=="function"?d.meta.menuKey(d):d.meta.menuKey;u.value=[p.replace("-","_")]}),{permsArray:c,selectedKeys:u,appType:h}}}),jy={class:"setting-sidebar"};function Hy(e,l,c,n,h,y){const u=o("LaptopOutlined"),d=o("a-menu-item"),m=o("UserOutlined"),p=o("TranslationOutlined"),_=o("ShopOutlined"),f=o("SolutionOutlined"),g=o("ScheduleOutlined"),b=o("DollarOutlined"),v=o("AccountBookOutlined"),k=o("ApartmentOutlined"),$=o("FormOutlined"),D=o("AppstoreAddOutlined"),I=o("FolderOpenOutlined"),F=o("MailOutlined"),P=o("DatabaseOutlined"),T=o("a-menu"),U=o("perfect-scrollbar");return r(),S("div",jy,[t(U,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[t(T,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":l[15]||(l[15]=M=>e.selectedKeys=M)},{default:a(()=>[e.permsArray.includes("companies_edit")||e.permsArray.includes("admin")?(r(),C(d,{key:"company",onClick:l[0]||(l[0]=M=>e.$router.push({name:"admin.settings.company.index"}))},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("menu.company")),1)]),_:1})):A("",!0),t(d,{key:"profile",onClick:l[1]||(l[1]=M=>e.$router.push({name:"admin.settings.profile.index"}))},{icon:a(()=>[t(m)]),default:a(()=>[i(" "+s(e.$t("menu.profile")),1)]),_:1}),e.appType=="non-saas"&&(e.permsArray.includes("translations_view")||e.permsArray.includes("admin"))?(r(),C(d,{key:"translations",onClick:l[2]||(l[2]=M=>e.$router.push({name:"admin.settings.translations.index"}))},{icon:a(()=>[t(p)]),default:a(()=>[i(" "+s(e.$t("menu.translations")),1)]),_:1})):A("",!0),e.permsArray.includes("warehouses_view")||e.permsArray.includes("admin")?(r(),C(d,{key:"warehouses",onClick:l[3]||(l[3]=M=>e.$router.push({name:"admin.settings.warehouses.index"}))},{icon:a(()=>[t(_)]),default:a(()=>[i(" "+s(e.$t("menu.warehouses")),1)]),_:1})):A("",!0),e.permsArray.includes("roles_view")||e.permsArray.includes("admin")?(r(),C(d,{key:"roles",onClick:l[4]||(l[4]=M=>e.$router.push({name:"admin.settings.roles.index"}))},{icon:a(()=>[t(f)]),default:a(()=>[i(" "+s(e.$t("menu.roles")),1)]),_:1})):A("",!0),e.permsArray.includes("taxes_view")||e.permsArray.includes("admin")?(r(),C(d,{key:"taxes",onClick:l[5]||(l[5]=M=>e.$router.push({name:"admin.settings.taxes.index"}))},{icon:a(()=>[t(g)]),default:a(()=>[i(" "+s(e.$t("menu.taxes")),1)]),_:1})):A("",!0),e.permsArray.includes("currencies_view")||e.permsArray.includes("admin")?(r(),C(d,{key:"currencies",onClick:l[6]||(l[6]=M=>e.$router.push({name:"admin.settings.currencies.index"}))},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("menu.currencies")),1)]),_:1})):A("",!0),e.permsArray.includes("payment_modes_view")||e.permsArray.includes("admin")?(r(),C(d,{key:"payment_modes",onClick:l[7]||(l[7]=M=>e.$router.push({name:"admin.settings.payment_modes.index"}))},{icon:a(()=>[t(v)]),default:a(()=>[i(" "+s(e.$t("menu.payment_modes")),1)]),_:1})):A("",!0),e.permsArray.includes("units_view")||e.permsArray.includes("admin")?(r(),C(d,{key:"units",onClick:l[8]||(l[8]=M=>e.$router.push({name:"admin.settings.units.index"}))},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("menu.units")),1)]),_:1})):A("",!0),e.permsArray.includes("custom_fields_view")||e.permsArray.includes("admin")?(r(),C(d,{key:"custom_fields",onClick:l[9]||(l[9]=M=>e.$router.push({name:"admin.settings.custom_fields.index"}))},{icon:a(()=>[t($)]),default:a(()=>[i(" "+s(e.$t("menu.custom_fields")),1)]),_:1})):A("",!0),e.appType=="non-saas"?(r(),S(O,{key:9},[e.permsArray.includes("admin")?(r(),C(d,{key:"modules",onClick:l[10]||(l[10]=M=>e.$router.push({name:"admin.settings.modules.index"}))},{icon:a(()=>[t(D)]),default:a(()=>[i(" "+s(e.$t("menu.modules")),1)]),_:1})):A("",!0),e.permsArray.includes("storage_edit")||e.permsArray.includes("admin")?(r(),C(d,{key:"storage_settings",onClick:l[11]||(l[11]=M=>e.$router.push({name:"admin.settings.storage.index"}))},{icon:a(()=>[t(I)]),default:a(()=>[i(" "+s(e.$t("menu.storage_settings")),1)]),_:1})):A("",!0),e.permsArray.includes("email_edit")||e.permsArray.includes("admin")?(r(),C(d,{key:"email_settings",onClick:l[12]||(l[12]=M=>e.$router.push({name:"admin.settings.email.index"}))},{icon:a(()=>[t(F)]),default:a(()=>[i(" "+s(e.$t("menu.email_settings")),1)]),_:1})):A("",!0),e.permsArray.includes("database_backup")||e.permsArray.includes("admin")?(r(),C(d,{key:"database_backup",onClick:l[13]||(l[13]=M=>e.$router.push({name:"admin.settings.database_backup.index"}))},{icon:a(()=>[t(P)]),default:a(()=>[i(" "+s(e.$t("menu.database_backup")),1)]),_:1})):A("",!0)],64)):A("",!0),e.appType=="saas"&&(e.permsArray.includes("email_edit")||e.permsArray.includes("admin"))?(r(),C(d,{key:"email_settings",onClick:l[14]||(l[14]=M=>e.$router.push({name:"admin.settings.email.index"}))},{icon:a(()=>[t(F)]),default:a(()=>[i(" "+s(e.$t("menu.email_settings")),1)]),_:1})):A("",!0)]),_:1},8,["selectedKeys"])]),_:1})])}const Ge=B(Wy,[["render",Hy]]),Ny=Z({emits:["success"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,SettingOutlined:pt},setup(e,{emit:l}){const{appSetting:c,addMenus:n}=Y(),{addEditRequestAdmin:h,loading:y,rules:u}=ve(),{t:d}=te(),m=E(c.value.shortcut_menus),p=E(n.value),_=E(!1),f=Ce(),g=()=>{const k={position:m.value,shortcut_menus_settings:p.value};h({url:"companies/update-create-menu",data:k,successMessage:d("company.menu_setting_updated"),success:$=>{l("success",m.value),f.dispatch("auth/updateApp"),_.value=!1}})},b=()=>{u.value={},_.value=!0},v=()=>{u.value={},_.value=!1};return me(c,(k,$)=>{m.value=k.shortcut_menus}),{visible:_,loading:y,rules:u,onClose:v,openDrawer:b,onSubmit:g,createMenuPosition:m,createMenus:p,drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function Yy(e,l,c,n,h,y){const u=o("SettingOutlined"),d=o("a-button"),m=o("a-select-option"),p=o("a-select"),_=o("a-form-item"),f=o("a-col"),g=o("a-row"),b=o("a-checkbox"),v=o("a-checkbox-group"),k=o("a-form"),$=o("SaveOutlined"),D=o("a-drawer");return r(),S(O,null,[t(d,{type:"primary",onClick:e.openDrawer},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("company.shortcut_menu_setting")),1)]),_:1},8,["onClick"]),t(D,{title:e.$t("company.shortcut_menu_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(d,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t($)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(d,{onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(k,{layout:"vertical"},{default:a(()=>[t(g,{gutter:16},{default:a(()=>[t(f,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(_,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:e.rules.shortcut_menus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null,class:"required"},{default:a(()=>[t(p,{value:e.createMenuPosition,"onUpdate:value":l[0]||(l[0]=I=>e.createMenuPosition=I),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[t(m,{key:"top_bottom",value:"top_bottom"},{default:a(()=>[i(s(e.$t("company.top_and_bottom")),1)]),_:1}),t(m,{key:"top",value:"top"},{default:a(()=>[i(s(e.$t("company.top_header")),1)]),_:1}),t(m,{key:"bottom",value:"bottom"},{default:a(()=>[i(s(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(g,{gutter:16},{default:a(()=>[t(f,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(_,{label:e.$t("company.shortcut_menu_setting"),name:"shortcut_menus",help:e.rules.createMenus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null},{default:a(()=>[t(v,{value:e.createMenus,"onUpdate:value":l[1]||(l[1]=I=>e.createMenus=I),style:{width:"100%"}},{default:a(()=>[t(g,{gutter:[16,10]},{default:a(()=>[t(f,{span:24},{default:a(()=>[t(b,{value:"staff_member"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_staff_member")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"customer"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_customer")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"supplier"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_supplier")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"brand"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_brand")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"category"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_category")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"product"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_product")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"sales"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_sales")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"purchase"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_purchase")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"expense_category"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_expense_cateogory")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"expense"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_expense")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"currency"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_currency")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"warehouse"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_warehouse")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"unit"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_unit")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"language"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_language")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"role"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_role")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"tax"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_tax")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"payment_mode"},{default:a(()=>[i(s(e.$t("topbar_add_button.add_payment_mode")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const Eo=B(Ny,[["render",Yy]]),Gy={components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,ExclamationCircleOutlined:Te,SaveOutlined:he,SettingOutlined:pt,ColorPicker:Bn,Upload:ot,CurrencyAddButton:Do,WarehouseAddButton:Ft,SettingSidebar:Ge,AdminPageHeader:ge,CreateMenuSetting:Eo,LanguageAddButton:Ra},setup(){const{addEditRequestAdmin:e,loading:l,rules:c}=ve(),{permsArray:n,appSetting:h,dayjsObject:y,appType:u}=Y(),{t:d}=te(),m=Ce(),p=E({}),_=E([]),f=E([]),g=E([]),b=E([]),v=E([]),k=E([]),$=h.value,D="currencies?limit=10000",I="warehouses?limit=10000",F="timezones",P="all-langs",T=E("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),U=window.config.theme_mode;ee(()=>{const X=axiosAdmin.get(I),J=axiosAdmin.get(D),le=axiosAdmin.get(F),H=axiosAdmin.get(P);Promise.all([X,J,le,H]).then(([N,z,Q,j])=>{f.value=N.data,_.value=z.data,g.value=Q.data.timezones,b.value=Q.data.date_formates,v.value=Q.data.time_formates,k.value=j.data.langs,M()})});const M=()=>{p.value={name:$.name,short_name:$.short_name,email:$.email,phone:$.phone,address:$.address,left_sidebar_theme:$.left_sidebar_theme,dark_logo:$.dark_logo,dark_logo_url:$.dark_logo_url,light_logo:$.light_logo,light_logo_url:$.light_logo_url,small_dark_logo:$.small_dark_logo,small_light_logo:$.small_light_logo,small_dark_logo_url:$.small_dark_logo_url,small_light_logo_url:$.small_light_logo_url,login_image:$.login_image,login_image_url:$.login_image_url,shortcut_menus:$.shortcut_menus,rtl:$.rtl,currency_id:$.x_currency_id,lang_id:$.x_lang_id,warehouse_id:$.x_warehouse_id,primary_color:$.primary_color,timezone:$.timezone,date_format:$.date_format,time_format:$.time_format,auto_detect_timezone:$.auto_detect_timezone,app_debug:$.app_debug,update_app_notification:$.update_app_notification,_method:"PUT"}};return{appType:u,permsArray:n,formData:p,loading:l,rules:c,warehouses:f,currencies:_,allLangs:k,onSubmit:()=>{e({url:`companies/${$.xid}`,data:p.value,successMessage:d("company.updated"),success:X=>{m.dispatch("auth/updateApp")}})},currencyAdded:()=>{axiosAdmin.get(D).then(X=>{_.value=X.data})},warehouseAdded:()=>{axiosAdmin.get(I).then(X=>{f.value=X.data})},gradientColor:T,timezones:g,dateFormats:b,timeFormats:v,dayjsObject:y,appThemeMode:U,addMenuSettingUpdated:X=>{p.value.shortcut_menus=X},languageAdded:()=>{axiosAdmin.get(P).then(X=>{k.value=X.data.langs})}}}},Jy={style:{display:"flex"}},Qy={style:{display:"flex"}},Xy={style:{display:"flex"}};function Zy(e,l,c,n,h,y){const u=o("SaveOutlined"),d=o("a-button"),m=o("CreateMenuSetting"),p=o("a-space"),_=o("a-page-header"),f=o("router-link"),g=o("a-breadcrumb-item"),b=o("a-breadcrumb"),v=o("AdminPageHeader"),k=o("SettingSidebar"),$=o("a-col"),D=o("a-input"),I=o("a-form-item"),F=o("a-row"),P=o("a-textarea"),T=o("a-select-option"),U=o("a-select"),M=o("color-picker"),W=o("Upload"),V=o("CurrencyAddButton"),K=o("WarehouseAddButton"),q=o("LanguageAddButton"),L=o("a-switch"),X=o("a-form"),J=o("a-card"),le=o("admin-page-table-content");return r(),S(O,null,[t(v,null,{header:a(()=>[t(_,{title:e.$t("menu.company"),class:"p-0"},We({_:2},[n.permsArray.includes("companies_edit")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(p,null,{default:a(()=>[t(d,{type:"primary",onClick:n.onSubmit},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"]),t(m,{onSuccess:n.addMenuSettingUpdated},null,8,["onSuccess"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:a(()=>[t(b,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(g,null,{default:a(()=>[t(f,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(g,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(g,null,{default:a(()=>[i(s(e.$t("menu.company")),1)]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(k)]),_:1}),t($,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(le,null,{default:a(()=>[t(J,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(X,{layout:"vertical"},{default:a(()=>[t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null,class:"required"},{default:a(()=>[t(D,{value:n.formData.name,"onUpdate:value":l[0]||(l[0]=H=>n.formData.name=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.short_name"),name:"short_name",help:n.rules.short_name?n.rules.short_name.message:null,validateStatus:n.rules.short_name?"error":null,class:"required"},{default:a(()=>[t(D,{value:n.formData.short_name,"onUpdate:value":l[1]||(l[1]=H=>n.formData.short_name=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null,class:"required"},{default:a(()=>[t(D,{value:n.formData.email,"onUpdate:value":l[2]||(l[2]=H=>n.formData.email=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null,class:"required"},{default:a(()=>[t(D,{value:n.formData.phone,"onUpdate:value":l[3]||(l[3]=H=>n.formData.phone=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(I,{label:e.$t("company.address"),name:"address",help:n.rules.address?n.rules.address.message:null,validateStatus:n.rules.address?"error":null},{default:a(()=>[t(P,{value:n.formData.address,"onUpdate:value":l[4]||(l[4]=H=>n.formData.address=H),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:n.rules.left_sidebar_theme?n.rules.left_sidebar_theme.message:null,validateStatus:n.rules.left_sidebar_theme?"error":null},{default:a(()=>[t(U,{value:n.formData.left_sidebar_theme,"onUpdate:value":l[5]||(l[5]=H=>n.formData.left_sidebar_theme=H),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:a(()=>[t(T,{key:"dark",value:"dark"},{default:a(()=>[i(s(e.$t("company.dark")),1)]),_:1}),n.appThemeMode!="dark"?(r(),C(T,{key:"light",value:"light"},{default:a(()=>[i(s(e.$t("company.light")),1)]),_:1})):A("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.primary_color"),name:"primary_color",help:n.rules.primary_color?n.rules.primary_color.message:null,validateStatus:n.rules.primary_color?"error":null},{default:a(()=>[t(M,{pureColor:n.formData.primary_color,"onUpdate:pureColor":l[6]||(l[6]=H=>n.formData.primary_color=H),format:"hex",useType:"pure",gradientColor:n.gradientColor,"onUpdate:gradientColor":l[7]||(l[7]=H=>n.gradientColor=H)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(I,{label:e.$t("company.dark_logo"),name:"dark_logo",help:n.rules.dark_logo?n.rules.dark_logo.message:null,validateStatus:n.rules.dark_logo?"error":null},{default:a(()=>[t(W,{formData:n.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:l[8]||(l[8]=H=>{n.formData.dark_logo=H.file,n.formData.dark_logo_url=H.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(I,{label:e.$t("company.light_logo"),name:"light_logo",help:n.rules.light_logo?n.rules.light_logo.message:null,validateStatus:n.rules.light_logo?"error":null},{default:a(()=>[t(W,{formData:n.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:l[9]||(l[9]=H=>{n.formData.light_logo=H.file,n.formData.light_logo_url=H.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(I,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:n.rules.small_dark_logo?n.rules.small_dark_logo.message:null,validateStatus:n.rules.small_dark_logo?"error":null},{default:a(()=>[t(W,{formData:n.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:l[10]||(l[10]=H=>{n.formData.small_dark_logo=H.file,n.formData.small_dark_logo_url=H.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(I,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:n.rules.small_light_logo?n.rules.small_light_logo.message:null,validateStatus:n.rules.small_light_logo?"error":null},{default:a(()=>[t(W,{formData:n.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:l[11]||(l[11]=H=>{n.formData.small_light_logo=H.file,n.formData.small_light_logo_url=H.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.currency"),name:"currency_id",help:n.rules.currency_id?n.rules.currency_id.message:null,validateStatus:n.rules.currency_id?"error":null,class:"required"},{default:a(()=>[w("span",Jy,[t(U,{value:n.formData.currency_id,"onUpdate:value":l[12]||(l[12]=H=>n.formData.currency_id=H),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.currencies,H=>(r(),C(T,{key:H.xid,value:H.xid},{default:a(()=>[i(s(`${H.name} (${H.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(V,{onOnAddSuccess:n.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("warehouse.warehouse"),name:"warehouse_id",help:n.rules.warehouse_id?n.rules.warehouse_id.message:null,validateStatus:n.rules.warehouse_id?"error":null,class:"required"},{default:a(()=>[w("span",Qy,[t(U,{value:n.formData.warehouse_id,"onUpdate:value":l[13]||(l[13]=H=>n.formData.warehouse_id=H),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.warehouses,H=>(r(),C(T,{key:H.xid,value:H.xid,label:H.name},{default:a(()=>[i(s(H.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),t(K,{onOnAddSuccess:n.warehouseAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.layout"),name:"rtl",help:n.rules.rtl?n.rules.rtl.message:null,validateStatus:n.rules.rtl?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.rtl,"onUpdate:value":l[14]||(l[14]=H=>n.formData.rtl=H),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),optionFilterProp:"label","show-search":""},{default:a(()=>[t(T,{key:"rtl",value:1},{default:a(()=>[i(s(e.$t("company.rtl")),1)]),_:1}),t(T,{key:"ltr",value:0},{default:a(()=>[i(s(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(I,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:n.rules.shortcut_menus?n.rules.shortcut_menus.message:null,validateStatus:n.rules.shortcut_menus?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.shortcut_menus,"onUpdate:value":l[15]||(l[15]=H=>n.formData.shortcut_menus=H),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),optionFilterProp:"label","show-search":""},{default:a(()=>[t(T,{key:"top_bottom",value:"top_bottom"},{default:a(()=>[i(s(e.$t("company.top_and_bottom")),1)]),_:1}),t(T,{key:"top",value:"top"},{default:a(()=>[i(s(e.$t("company.top_header")),1)]),_:1}),t(T,{key:"bottom",value:"bottom"},{default:a(()=>[i(s(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(I,{label:e.$t("company.language"),name:"lang_id",help:n.rules.lang_id?n.rules.lang_id.message:null,validateStatus:n.rules.lang_id?"error":null,class:"required"},{default:a(()=>[w("span",Xy,[t(U,{value:n.formData.lang_id,"onUpdate:value":l[16]||(l[16]=H=>n.formData.lang_id=H),placeholder:e.$t("common.select_default_text",[e.$t("company.language")]),optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.allLangs,H=>(r(),C(T,{key:H.xid,value:H.xid},{default:a(()=>[i(s(H.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(q,{onOnAddSuccess:n.languageAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(I,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:n.rules.auto_detect_timezone?n.rules.auto_detect_timezone.message:null,validateStatus:n.rules.auto_detect_timezone?"error":null},{default:a(()=>[t(L,{checked:n.formData.auto_detect_timezone,"onUpdate:checked":l[17]||(l[17]=H=>n.formData.auto_detect_timezone=H),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(I,{label:e.$t("company.default_timezone"),name:"timezone",help:n.rules.timezone?n.rules.timezone.message:null,validateStatus:n.rules.timezone?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.timezone,"onUpdate:value":l[18]||(l[18]=H=>n.formData.timezone=H),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.timezones,(H,N)=>(r(),C(T,{key:N,value:H},{default:a(()=>[i(s(H),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),n.appType=="non-saas"?(r(),C($,{key:0,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(I,{label:e.$t("company.app_debug"),name:"app_debug",help:n.rules.app_debug?n.rules.app_debug.message:null,validateStatus:n.rules.app_debug?"error":null},{default:a(()=>[t(L,{checked:n.formData.app_debug,"onUpdate:checked":l[19]||(l[19]=H=>n.formData.app_debug=H),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0),n.appType=="non-saas"?(r(),C($,{key:1,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(I,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:n.rules.update_app_notification?n.rules.update_app_notification.message:null,validateStatus:n.rules.update_app_notification?"error":null},{default:a(()=>[t(L,{checked:n.formData.update_app_notification,"onUpdate:checked":l[20]||(l[20]=H=>n.formData.update_app_notification=H),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0)]),_:1}),t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.date_format"),name:"date_format",help:n.rules.date_format?n.rules.date_format.message:null,validateStatus:n.rules.date_format?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.date_format,"onUpdate:value":l[21]||(l[21]=H=>n.formData.date_format=H),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.dateFormats,(H,N)=>(r(),C(T,{key:N,value:H},{default:a(()=>[i(s(`(${N}) => `+n.dayjsObject().format(H)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t($,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(I,{label:e.$t("company.time_format"),name:"time_format",help:n.rules.time_format?n.rules.time_format.message:null,validateStatus:n.rules.time_format?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.time_format,"onUpdate:value":l[22]||(l[22]=H=>n.formData.time_format=H),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.timeFormats,(H,N)=>(r(),C(T,{key:N,value:N},{default:a(()=>[i(s(`(${H}) => `+n.dayjsObject().format(N)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.appType=="non-saas"?(r(),C(F,{key:0,gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(I,{label:e.$t("company.login_image"),name:"login_image",help:n.rules.login_image?n.rules.login_image.message:null,validateStatus:n.rules.login_image?"error":null},{default:a(()=>[t(W,{formData:n.formData,folder:"company",imageField:"login_image",onOnFileUploaded:l[23]||(l[23]=H=>{n.formData.login_image=H.file,n.formData.login_image_url=H.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(F,{gutter:16},{default:a(()=>[t($,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(I,null,{default:a(()=>[t(d,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const xy=B(Gy,[["render",Zy]]),eh={components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,ExclamationCircleOutlined:Te,SaveOutlined:he,Upload:ot,SettingSidebar:Ge,AdminPageHeader:ge},setup(){const{addEditRequestAdmin:e,loading:l,rules:c}=ve(),{t:n}=te(),h=Ce(),y=E({}),u=E({}),d=h.state.auth.user;return ee(()=>{y.value={name:d.name,email:d.email,password:"",phone:d.phone,profile_image:d.profile_image,profile_image_url:d.profile_image_url}}),{loading:l,rules:c,formData:y,currencies:u,onSubmit:()=>{e({url:"profile",data:y.value,successMessage:n("user.profile_updated"),success:p=>{h.commit("auth/updateUser",p.user)}})}}}},th={class:"small-text-message"};function ah(e,l,c,n,h,y){const u=o("SaveOutlined"),d=o("a-button"),m=o("a-page-header"),p=o("router-link"),_=o("a-breadcrumb-item"),f=o("a-breadcrumb"),g=o("AdminPageHeader"),b=o("SettingSidebar"),v=o("a-col"),k=o("a-input"),$=o("a-form-item"),D=o("a-row"),I=o("Upload"),F=o("a-textarea"),P=o("a-form"),T=o("a-card"),U=o("admin-page-table-content");return r(),S(O,null,[t(g,null,{header:a(()=>[t(m,{title:e.$t("menu.profile"),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",onClick:n.onSubmit},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(_,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(_,null,{default:a(()=>[i(s(e.$t("menu.profile")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(b)]),_:1}),t(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(T,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(P,{layout:"vertical"},{default:a(()=>[t(D,{gutter:16},{default:a(()=>[t(v,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t($,{label:e.$t("user.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null,class:"required"},{default:a(()=>[t(k,{value:n.formData.name,"onUpdate:value":l[0]||(l[0]=M=>n.formData.name=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(v,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t($,{label:e.$t("user.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null,class:"required"},{default:a(()=>[t(k,{value:n.formData.email,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")]),disabled:""},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(D,{gutter:16},{default:a(()=>[t(v,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t($,{label:e.$t("user.password"),name:"password",help:n.rules.password?n.rules.password.message:null,validateStatus:n.rules.password?"error":null},{default:a(()=>[t(k,{value:n.formData.password,"onUpdate:value":l[1]||(l[1]=M=>n.formData.password=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),type:"password",autocomplete:"off"},null,8,["value","placeholder"]),w("small",th,s(e.$t("user.password_blank")),1)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(D,{gutter:16},{default:a(()=>[t(v,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t($,{label:e.$t("user.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null},{default:a(()=>[t(k,{value:n.formData.phone,"onUpdate:value":l[2]||(l[2]=M=>n.formData.phone=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(D,{gutter:16},{default:a(()=>[t(v,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t($,{label:e.$t("user.profile_image"),name:"profile_image",help:n.rules.profile_image?n.rules.profile_image.message:null,validateStatus:n.rules.profile_image?"error":null},{default:a(()=>[t(I,{formData:n.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:l[3]||(l[3]=M=>{n.formData.profile_image=M.file,n.formData.profile_image_url=M.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(D,{gutter:16},{default:a(()=>[t(v,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t($,{label:e.$t("user.address"),name:"address",help:n.rules.address?n.rules.address.message:null,validateStatus:n.rules.address?"error":null},{default:a(()=>[t(F,{value:n.formData.address,"onUpdate:value":l[4]||(l[4]=M=>n.formData.address=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(D,{gutter:16},{default:a(()=>[t(v,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t($,null,{default:a(()=>[t(d,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const nh=B(eh,[["render",ah]]),oh={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:$e,DeleteOutlined:fe,AddEdit:To,DownloadOutlined:Et},setup(){const{addEditRequestAdmin:e,loading:l}=ve(),{permsArray:c,downloadLangCsvUrl:n}=Y(),{url:h,addEditUrl:y,initData:u,columns:d,filterableColumns:m}=Ao(),p=Me(),{t:_}=te();return ee(()=>{p.tableUrl.value={url:h},p.table.filterableColumns=m,p.fetch({page:1}),p.crudUrl.value=y,p.langKey.value="langs",p.initData.value={...u},p.formData.value={...u}}),{permsArray:c,downloadLangCsvUrl:n,columns:d,...p,filterableColumns:m,changeLangStatus:g=>{e({url:Re(`langs/${g.xid}`),data:{name:g.name,key:g.key,enabled:g.enabled,_method:"PUT"},successMessage:_("langs.status_updated"),success:b=>{}})},loading:l}}},lh={class:"table-responsive"};function sh(e,l,c,n,h,y){const u=o("DeleteOutlined"),d=o("a-button"),m=o("a-space"),p=o("a-col"),_=o("a-select-option"),f=o("a-select"),g=o("a-input-search"),b=o("a-input-group"),v=o("a-row"),k=o("admin-page-filters"),$=o("AddEdit"),D=o("a-avatar"),I=o("a-list-item-meta"),F=o("a-list-item"),P=o("a-switch"),T=o("EditOutlined"),U=o("DownloadOutlined"),M=o("a-typography-link"),W=o("a-table"),V=o("admin-page-table-content");return r(),S(O,null,[t(k,null,{default:a(()=>[t(v,{gutter:[16,16]},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(m,null,{default:a(()=>[de(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("translations_edit")||n.permsArray.includes("admin"))?(r(),C(d,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:3})]),_:3}),t(p,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(v,{gutter:[16,16],justify:"end"},{default:a(()=>[t(p,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(b,{compact:""},{default:a(()=>[t(f,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=K=>e.table.searchColumn=K),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,K=>(r(),C(_,{key:K.key},{default:a(()=>[i(s(K.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(g,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=K=>e.table.searchString=K),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),t(V,null,{default:a(()=>[t($,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(v,null,{default:a(()=>[t(p,{span:24},{default:a(()=>[w("div",lh,[t(W,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:K=>({disabled:!((c.panelType=="admin"&&(n.permsArray.includes("translations_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&K.key!="en"),name:K.xid})},columns:n.columns,"row-key":K=>K.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading||n.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:K,record:q})=>[K.dataIndex==="name"?(r(),C(F,{key:0},{default:a(()=>[t(I,null,{title:a(()=>[i(s(q.name),1)]),avatar:a(()=>[t(D,{shape:"square",size:"small",src:q.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)):A("",!0),K.dataIndex==="enabled"?(r(),C(P,{key:1,checked:q.enabled,"onUpdate:checked":L=>q.enabled=L,checkedValue:1,unCheckedValue:0,onChange:L=>n.changeLangStatus(q),size:"small",disabled:c.panelType=="admin"&&!(n.permsArray.includes("translations_edit")||n.permsArray.includes("admin"))||q.key=="en"},null,8,["checked","onUpdate:checked","onChange","disabled"])):A("",!0),K.dataIndex==="action"?(r(),S(O,{key:2},[(c.panelType=="admin"&&(n.permsArray.includes("translations_edit")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&q.key!="en"?(r(),C(d,{key:0,type:"primary",onClick:L=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(T)]),_:2},1032,["onClick"])):A("",!0),(c.panelType=="admin"&&(n.permsArray.includes("translations_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&q.key!="en"?(r(),C(d,{key:1,type:"primary",onClick:L=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(u)]),_:2},1032,["onClick"])):A("",!0),t(M,{href:`${n.downloadLangCsvUrl}/${q.xid}`,target:"_blank"},{default:a(()=>[t(d,{type:"primary",style:{"margin-left":"4px"}},{icon:a(()=>[t(U)]),_:1})]),_:2},1032,["href"])],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const rh=B(oh,[["render",sh]]),dh={components:{PlusOutlined:ne,SettingSidebar:Ge,AdminPageHeader:ge,LanguageSettings:rh,ImportTranslation:Ut},setup(){const{permsArray:e,appType:l}=Y(),c=E(null),n=window.config.translatioins_sample_file;return{permsArray:e,appType:l,langSettingRef:c,addItem:()=>{c.value.addItem()},sampleFileUrl:n}}};function ih(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("PlusOutlined"),v=o("a-button"),k=o("ImportTranslation"),$=o("a-space"),D=o("LanguageSettings"),I=o("a-row");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.languages"),onBack:l[0]||(l[0]=()=>e.$router.push({name:"admin.settings.translations.index"})),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[t(d,{to:{name:"admin.settings.translations.index"}},{default:a(()=>[i(s(e.$t("menu.translations")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.languages")),1)]),_:1})]),_:1})]),_:1}),t(I,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(D,{ref:"langSettingRef"},{actionButtons:a(()=>[n.permsArray.includes("translations_create")||n.permsArray.includes("admin")?(r(),C($,{key:0},{default:a(()=>[t(v,{type:"primary",onClick:n.addItem},{default:a(()=>[t(b),i(" "+s(e.$t("langs.add")),1)]),_:1},8,["onClick"]),n.appType=="non-saas"?(r(),C(k,{key:0,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:n.sampleFileUrl,importUrl:"translations/import"},null,8,["pageTitle","sampleFileUrl"])):A("",!0)]),_:1})):A("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const uh=B(dh,[["render",ih]]),mh=Z({props:["x_warehouse_id","status"],emits:["success"],setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n}=ve(),{t:h}=te();return{changeStatus:u=>{const d={warehouse_id:e.x_warehouse_id,status:u?1:0};c({url:"warehouses/update-online-store-status",data:d,successMessage:h("warehouse.online_store_status_updated"),success:m=>{l("success"),store.dispatch("auth/updateAllWarehouses")}})},loading:n}}});function ch(e,l,c,n,h,y){const u=o("a-switch");return r(),C(u,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const Oo=B(mh,[["render",ch]]),ph={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:Pa,SettingSidebar:Ge,AdminPageHeader:ge,OnlineStoreStatus:Oo},setup(){const{permsArray:e,appSetting:l}=Y(),{url:c,addEditUrl:n,initData:h,columns:y,filterableColumns:u}=Ia(),d=Me();return ee(()=>{d.tableUrl.value={url:c},d.table.filterableColumns=u,d.fetch({page:1}),d.crudUrl.value=n,d.langKey.value="warehouse",d.initData.value={...h},d.formData.value={...h}}),{appSetting:l,permsArray:e,columns:y,...d,filterableColumns:u}}},_h={class:"table-responsive"},fh=w("br",null,null,-1);function gh(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("PlusOutlined"),v=o("a-button"),k=o("DeleteOutlined"),$=o("a-space"),D=o("a-select-option"),I=o("a-select"),F=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),U=o("admin-page-filters"),M=o("AddEdit"),W=o("a-image"),V=o("OnlineStoreStatus"),K=o("EditOutlined"),q=o("a-table"),L=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.warehouses"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.warehouses")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(T,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t($,null,{default:a(()=>[n.permsArray.includes("warehouses_create")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),i(" "+s(e.$t("warehouse.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("warehouses_delete")||n.permsArray.includes("admin"))?(r(),C(v,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(T,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(P,{compact:""},{default:a(()=>[t(I,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=X=>e.table.searchColumn=X),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,X=>(r(),C(D,{key:X.key},{default:a(()=>[i(s(X.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=X=>e.table.searchString=X),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(L,null,{default:a(()=>[t(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(T,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",_h,[t(q,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:X=>({disabled:!((n.permsArray.includes("warehouses_delete")||n.permsArray.includes("admin"))&&n.appSetting.x_warehouse_id!=X.xid),name:X.xid})},columns:n.columns,"row-key":X=>X.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:X,record:J})=>[X.dataIndex==="logo"?(r(),C(W,{key:0,width:48,src:J.logo_url},null,8,["src"])):A("",!0),X.dataIndex==="online_store_enabled"?(r(),S(O,{key:1},[t(V,{status:J.online_store_enabled,x_warehouse_id:J.xid,onSuccess:e.fetch},null,8,["status","x_warehouse_id","onSuccess"]),J.online_store_enabled==1?(r(),S(O,{key:0},[fh,t(d,{to:{name:"front.homepage",params:{warehouse:J.slug}},target:"_blank"},{default:a(()=>[t(v,{type:"link",class:"p-0 mt-5"},{default:a(()=>[i(s(e.$t("warehouse.view_online_store")),1)]),_:1})]),_:2},1032,["to"])],64)):A("",!0)],64)):A("",!0),X.dataIndex==="action"?(r(),S(O,{key:2},[n.permsArray.includes("warehouses_edit")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:le=>e.editItem(J),style:{"margin-left":"4px"}},{icon:a(()=>[t(K)]),_:2},1032,["onClick"])):A("",!0),(n.permsArray.includes("warehouses_delete")||n.permsArray.includes("admin"))&&n.appSetting.x_warehouse_id!=J.xid?(r(),C(v,{key:1,type:"primary",onClick:le=>e.showDeleteConfirm(J.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const yh=B(ph,[["render",gh]]);const hh={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:bo,SettingSidebar:Ge,AdminPageHeader:ge},setup(){const{permsArray:e}=Y(),{url:l,addEditUrl:c,initData:n,columns:h,filterableColumns:y,preFetchData:u,getPreFetchData:d}=ho(),m=Me();return ee(()=>{d(),m.tableUrl.value={url:l,filters:""},m.table.filterableColumns=y,m.fetch({page:1}),m.crudUrl.value=c,m.langKey.value="role",m.initData.value={...n},m.formData.value={...n}}),{permsArray:e,columns:h,...m,filterableColumns:y,preFetchData:u}}},bh={class:"table-responsive"};function vh(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("PlusOutlined"),v=o("a-button"),k=o("DeleteOutlined"),$=o("a-space"),D=o("a-row"),I=o("admin-page-filters"),F=o("AddEdit"),P=o("EditOutlined"),T=o("a-table"),U=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.roles"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.roles")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(I,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t($,null,{default:a(()=>[n.permsArray.includes("roles_create")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),i(" "+s(e.$t("role.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("roles_delete")||n.permsArray.includes("admin"))?(r(),C(v,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(U,null,{default:a(()=>[t(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(D,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",bh,[t(T,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:M=>({disabled:!((n.permsArray.includes("roles_delete")||n.permsArray.includes("admin"))&&M.name!="admin"),name:M.xid})},columns:n.columns,"row-key":M=>M.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:M,record:W})=>[M.dataIndex==="action"?(r(),S(O,{key:0},[(n.permsArray.includes("roles_edit")||n.permsArray.includes("admin"))&&W.name!="admin"?(r(),C(v,{key:0,type:"primary",onClick:V=>e.editItem(W),style:{"margin-left":"4px"}},{icon:a(()=>[t(P)]),_:2},1032,["onClick"])):A("",!0),(n.permsArray.includes("roles_delete")||n.permsArray.includes("admin"))&&W.name!="admin"?(r(),C(v,{key:1,type:"primary",onClick:V=>e.showDeleteConfirm(W.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const kh=B(hh,[["render",vh]]),wh={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:po,SettingSidebar:Ge,AdminPageHeader:ge,ExclamationCircleOutlined:Te},setup(){const{permsArray:e}=Y(),{url:l,addEditUrl:c,initData:n,columns:h,filterableColumns:y,hashableColumns:u}=co(),d=Me();te(),ee(()=>{d.crudUrl.value=c,d.langKey.value="tax",d.initData.value={...n},d.formData.value={...n},d.hashableColumns.value=[...u],d.table.filterableColumns=y,m()});const m=()=>{d.tableUrl.value={url:l},d.fetch({page:1})};return{permsArray:e,columns:h,...d,filterableColumns:y}}},Ch={class:"table-responsive"},Sh={key:0},$h={key:1};function Dh(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("PlusOutlined"),v=o("a-button"),k=o("DeleteOutlined"),$=o("a-space"),D=o("a-select-option"),I=o("a-select"),F=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),U=o("admin-page-filters"),M=o("AddEdit"),W=o("EditOutlined"),V=o("a-table"),K=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.taxes"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.taxes")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(T,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t($,null,{default:a(()=>[n.permsArray.includes("taxes_create")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),i(" "+s(e.$t("tax.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("taxes_delete")||n.permsArray.includes("admin"))?(r(),C(v,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(T,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(P,{compact:""},{default:a(()=>[t(I,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,q=>(r(),C(D,{key:q.key},{default:a(()=>[i(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[t(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(T,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",Ch,[t(V,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!((n.permsArray.includes("taxes_delete")||n.permsArray.includes("admin"))&&(!q.children||q.children.length==0)),name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="tax_type"?(r(),S(O,{key:0},[i(s(L.tax_type=="single"?e.$t("tax.single"):e.$t("tax.multiple")),1)],64)):A("",!0),q.dataIndex==="rate"?(r(),S(O,{key:1},[L.tax_type=="single"?(r(),S("span",Sh,[t(T,{gutter:[16,16],style:{"margin-top":"10px"}},{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[i(s(L.rate+"%"),1)]),_:2},1024)]),_:2},1024)])):(r(),S("span",$h,[(r(!0),S(O,null,G(L.multiple_tax,X=>(r(),C(T,{gutter:[16,16],key:X.xid,style:{"margin-top":"10px"}},{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:24,style:{"margin-top":"5px"}},{default:a(()=>[i(s(`${X.name}:  ${X.rate}%`),1)]),_:2},1024)]),_:2},1024))),128))]))],64)):A("",!0),q.dataIndex==="action"?(r(),S(O,{key:2},[n.permsArray.includes("taxes_edit")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:X=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(W)]),_:2},1032,["onClick"])):A("",!0),(n.permsArray.includes("taxes_delete")||n.permsArray.includes("admin"))&&(!L.children||L.children.length==0)?(r(),C(v,{key:1,type:"primary",onClick:X=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Ah=B(wh,[["render",Dh]]),Th={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:$e,DeleteOutlined:fe,AddEdit:Ma},setup(e){const{permsArray:l,appSetting:c}=Y(),{url:n,addEditUrl:h,initData:y,columns:u,filterableColumns:d}=qa(e.panelType),m=Me();return ee(()=>{m.tableUrl.value={url:n},m.table.filterableColumns=d,m.fetch({page:1}),m.crudUrl.value=h,m.langKey.value="currency",m.initData.value={...y},m.formData.value={...y}}),{permsArray:l,appSetting:c,columns:u,...m,filterableColumns:d}}},Eh={class:"table-responsive"};function Oh(e,l,c,n,h,y){const u=o("DeleteOutlined"),d=o("a-button"),m=o("a-space"),p=o("a-col"),_=o("a-select-option"),f=o("a-select"),g=o("a-input-search"),b=o("a-input-group"),v=o("a-row"),k=o("admin-page-filters"),$=o("AddEdit"),D=o("EditOutlined"),I=o("a-table"),F=o("admin-page-table-content");return r(),S(O,null,[t(k,null,{default:a(()=>[t(v,{gutter:[16,16]},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(m,null,{default:a(()=>[de(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))?(r(),C(d,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:3})]),_:3}),t(p,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(v,{gutter:[16,16],justify:"end"},{default:a(()=>[t(p,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(b,{compact:""},{default:a(()=>[t(f,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=P=>e.table.searchColumn=P),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,P=>(r(),C(_,{key:P.key},{default:a(()=>[i(s(P.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(g,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=P=>e.table.searchString=P),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),t(F,null,{default:a(()=>[t($,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(v,null,{default:a(()=>[t(p,{span:24},{default:a(()=>[w("div",Eh,[t(I,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:P=>({disabled:!((c.panelType=="admin"&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&n.appSetting.x_currency_id!=P.xid),name:P.xid})},columns:n.columns,"row-key":P=>P.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:P,record:T})=>[P.dataIndex==="action"?(r(),S(O,{key:0},[c.panelType=="admin"&&(n.permsArray.includes("currencies_edit")||n.permsArray.includes("admin"))||c.panelType=="superadmin"?(r(),C(d,{key:0,type:"primary",onClick:U=>e.editItem(T),style:{"margin-left":"4px"}},{icon:a(()=>[t(D)]),_:2},1032,["onClick"])):A("",!0),(c.panelType=="admin"&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&n.appSetting.x_currency_id!=T.xid?(r(),C(d,{key:1,type:"primary",onClick:U=>e.showDeleteConfirm(T.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(u)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Ih=B(Th,[["render",Oh]]),Ph={components:{PlusOutlined:ne,SettingSidebar:Ge,AdminPageHeader:ge,CurrencySettings:Ih},setup(){const{permsArray:e}=Y(),l=E(null);return{permsArray:e,currencySettingRef:l,addItem:()=>{l.value.addItem()}}}};function Uh(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("PlusOutlined"),v=o("a-button"),k=o("CurrencySettings"),$=o("a-row");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.currencies"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.currencies")),1)]),_:1})]),_:1})]),_:1}),t($,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(k,{ref:"currencySettingRef"},{actionButtons:a(()=>[n.permsArray.includes("currencies_create")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:n.addItem},{default:a(()=>[t(b),i(" "+s(e.$t("currency.add")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const Fh=B(Ph,[["render",Uh]]),qh={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:mo,SettingSidebar:Ge,AdminPageHeader:ge},setup(){const{permsArray:e}=Y(),{url:l,addEditUrl:c,initData:n,columns:h,filterableColumns:y}=uo(),u=Me();return ee(()=>{u.tableUrl.value={url:l},u.table.filterableColumns=y,u.fetch({page:1}),u.crudUrl.value=c,u.langKey.value="unit",u.initData.value={...n},u.formData.value={...n}}),{permsArray:e,columns:h,...u,filterableColumns:y}}},Mh={class:"table-responsive"};function Rh(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("PlusOutlined"),v=o("a-button"),k=o("DeleteOutlined"),$=o("a-space"),D=o("a-select-option"),I=o("a-select"),F=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),U=o("admin-page-filters"),M=o("AddEdit"),W=o("EditOutlined"),V=o("a-table"),K=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.units"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.units")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(T,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t($,null,{default:a(()=>[n.permsArray.includes("units_create")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),i(" "+s(e.$t("unit.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("units_delete")||n.permsArray.includes("admin"))?(r(),C(v,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(T,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(P,{compact:""},{default:a(()=>[t(I,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,q=>(r(),C(D,{key:q.key},{default:a(()=>[i(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[t(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(T,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",Mh,[t(V,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!(q.is_deletable&&(n.permsArray.includes("units_delete")||n.permsArray.includes("admin"))),name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="action"?(r(),S(O,{key:0},[n.permsArray.includes("units_edit")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:X=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(W)]),_:2},1032,["onClick"])):A("",!0),L.is_deletable&&(n.permsArray.includes("units_delete")||n.permsArray.includes("admin"))?(r(),C(v,{key:1,type:"primary",onClick:X=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Kh=B(qh,[["render",Rh]]),Vh={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:Ea,SettingSidebar:Ge,AdminPageHeader:ge},setup(){const{permsArray:e}=Y(),{url:l,addEditUrl:c,initData:n,columns:h,filterableColumns:y}=Ta(),u=Me();return ee(()=>{u.tableUrl.value={url:l},u.table.filterableColumns=y,u.fetch({page:1}),u.crudUrl.value=c,u.langKey.value="payment_mode",u.initData.value={...n},u.formData.value={...n}}),{permsArray:e,columns:h,...u,filterableColumns:y}}},zh={class:"table-responsive"};function Lh(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("PlusOutlined"),v=o("a-button"),k=o("DeleteOutlined"),$=o("a-space"),D=o("a-select-option"),I=o("a-select"),F=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),U=o("admin-page-filters"),M=o("AddEdit"),W=o("EditOutlined"),V=o("a-table"),K=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.payment_modes"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.payment_modes")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(T,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t($,null,{default:a(()=>[n.permsArray.includes("payment_modes_create")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),i(" "+s(e.$t("payment_mode.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("payment_modes_delete")||n.permsArray.includes("admin"))?(r(),C(v,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(T,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(P,{compact:""},{default:a(()=>[t(I,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,q=>(r(),C(D,{key:q.key},{default:a(()=>[i(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[t(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(T,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",zh,[t(V,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!1,name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="mode_type"?(r(),S(O,{key:0},[i(s(e.$t(`payment_mode.${L.mode_type}`)),1)],64)):A("",!0),q.dataIndex==="action"?(r(),S(O,{key:1},[n.permsArray.includes("payment_modes_edit")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:X=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(W)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("payment_modes_delete")||n.permsArray.includes("admin")?(r(),C(v,{key:1,type:"primary",onClick:X=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Bh=B(Vh,[["render",Lh]]),Wh=()=>{const e="custom-fields?fields=id,xid,name,value,type",l="custom-fields",{t:c}=te(),n={name:"",value:"",type:"text"},h=[{title:c("custom_field.name"),dataIndex:"name"},{title:c("common.action"),dataIndex:"action"}],y=[{key:"name",value:c("custom_field.name")}];return{url:e,addEditUrl:l,initData:n,columns:h,filterableColumns:y}},jh=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve();return{loading:n,rules:h,onClose:()=>{h.value={},l("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:d=>{l("addEditSuccess",d.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Hh(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-form"),f=o("SaveOutlined"),g=o("a-button"),b=o("a-modal");return r(),C(b,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(g,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(f)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(g,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(_,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("custom_field.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(u,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=v=>e.formData.name=v),placeholder:e.$t("common.placeholder_default_text",[e.$t("custom_field.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Nh=B(jh,[["render",Hh]]),Yh={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:Nh,SettingSidebar:Ge,AdminPageHeader:ge},setup(){const{permsArray:e}=Y(),{url:l,addEditUrl:c,initData:n,columns:h,filterableColumns:y}=Wh(),u=Me();return ee(()=>{u.tableUrl.value={url:l},u.table.filterableColumns=y,u.fetch({page:1}),u.crudUrl.value=c,u.langKey.value="custom_field",u.initData.value={...n},u.formData.value={...n}}),{permsArray:e,columns:h,...u,filterableColumns:y}}},Gh={class:"table-responsive"};function Jh(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("PlusOutlined"),v=o("a-button"),k=o("DeleteOutlined"),$=o("a-space"),D=o("a-select-option"),I=o("a-select"),F=o("a-input-search"),P=o("a-input-group"),T=o("a-row"),U=o("admin-page-filters"),M=o("AddEdit"),W=o("EditOutlined"),V=o("a-table"),K=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.custom_fields"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.custom_fields")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(T,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t($,null,{default:a(()=>[n.permsArray.includes("custom_fields_create")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),i(" "+s(e.$t("custom_field.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("custom_fields_delete")||n.permsArray.includes("admin"))?(r(),C(v,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(k)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(T,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(P,{compact:""},{default:a(()=>[t(I,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,q=>(r(),C(D,{key:q.key},{default:a(()=>[i(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[t(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(T,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",Gh,[t(V,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!1,name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="action"?(r(),S(O,{key:0},[n.permsArray.includes("custom_fields_edit")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:X=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(W)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("custom_fields_delete")||n.permsArray.includes("admin")?(r(),C(v,{key:1,type:"primary",onClick:X=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Qh=B(Yh,[["render",Jh]]),Xh=Z({emits:["fetchTranslationsSuccesss"],components:{SyncOutlined:jt},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n}=ve(),{t:h}=te();return{loading:n,refetchTranslations:()=>{c({url:Re("translations/refetch"),data:{},successMessage:h("translations.fetched_successfully"),success:u=>{l("fetchTranslationsSuccesss")}})}}}});function Zh(e,l,c,n,h,y){const u=o("SyncOutlined"),d=o("a-button");return r(),C(d,{onClick:e.refetchTranslations,loading:e.loading,style:{width:"100%"}},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("translations.fetch_new_translations")),1)]),_:1},8,["onClick","loading"])}const xh=B(Xh,[["render",Zh]]);function eb(e={locale:"en",warnHtmlMessage:!1}){const l=Ol(e);return tb(l,e.locale),l}function tb(e,l){e.mode==="legacy"?e.global.locale=l:e.global.locale.value=l,document.querySelector("html").setAttribute("lang",l)}async function ab(e,l){const c=await axiosBase.get("lang-trans");Io(c,e,l)}function Io(e,l,c){const n={};return e.data.data.map(h=>{n[h.key]={},h.translations.map(y=>{n[h.key][y.group]==null&&(n[h.key][y.group]={}),n[h.key][y.group][y.key]=y.value})}),l.global.setLocaleMessage(c,n[c]),ba()}const nb={components:{FetchNewTranslation:xh,LangAddButton:Ra,EditOutlined:$e,CheckOutlined:vt},setup(){const{permsArray:e}=Y(),l=E([]),c=E([]),n=E([]),h=E(void 0),y=E([]),u=Ce(),d=pe(()=>u.state.auth.lang),m=Se({data:[]}),p=Se({}),_=E(0),f=(D,I)=>{p[D[`${I}_id`]]={id:D[`${I}_id`],value:D[I]}},g=D=>{axiosAdmin.post(Re(`translations/${D}`),{value:p[D].value,_method:"PUT"}).then(()=>{k(),delete p[D]})};var b={};const v=()=>{const D=[{title:"Group",key:"group",dataIndex:"group",fixed:"left"}],I=[];l.value.map(U=>{D.push({title:U.name,key:U.key,dataIndex:U.key}),I.push({key:U.key})}),n.value=I,c.value=D;const F=[];l.value.map(U=>{b[U.key]={},U.translations.map(M=>{b[U.key][M.group]==null&&(b[U.key][M.group]={},U.key=="en"&&F.push(M.group)),b[U.key][M.group][M.key]={id:M.xid,value:M.value}})}),h.value===void 0&&(h.value=F[0]);const P=b.en[h.value],T=[];Object.keys(P).forEach(U=>{const M={};D.map(W=>{W.key=="group"?M[W.key]=U:(M[W.key]=b[W.key][h.value][U]&&b[W.key][h.value][U].value?b[W.key][h.value][U].value:"",M[`${W.key}_id`]=b[W.key][h.value][U]&&b[W.key][h.value][U].id?b[W.key][h.value][U].id:"")}),T.push(M)}),y.value=F,m.data=T};ee(()=>{k()});const k=()=>{axiosAdmin.get("lang-trans").then(D=>{l.value=D.data.data,Io(D,i18n,d.value),v()})};return{columns:c,table:m,editableData:p,activeTab:_,langKeys:n,group:h,groupKeys:y,getData:k,edit:f,save:g,permsArray:e,langAdded:()=>{k()}}}},ob={key:0,class:"editable-cell"},lb={key:0,class:"editable-cell-input-wrapper"},sb={key:1,class:"editable-cell-text-wrapper"};function rb(e,l,c,n,h,y){const u=o("a-col"),d=o("a-select-option"),m=o("a-select"),p=o("FetchNewTranslation"),_=o("a-row"),f=o("admin-page-filters"),g=o("a-input"),b=o("check-outlined"),v=o("edit-outlined"),k=o("a-table"),$=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{default:a(()=>[t(_,{gutter:[16,16]},{default:a(()=>[t(u,{xs:24,sm:24,md:12,lg:10,xl:12},{default:a(()=>[de(e.$slots,"actionButtons")]),_:3}),t(u,{xs:24,sm:24,md:12,lg:14,xl:12},{default:a(()=>[t(_,{gutter:[16,16],justify:"end"},{default:a(()=>[t(u,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[t(m,{value:n.group,"onUpdate:value":l[0]||(l[0]=D=>n.group=D),"show-search":"",placeholder:"Select group...",style:{width:"100%"},onChange:n.getData},{default:a(()=>[(r(!0),S(O,null,G(n.groupKeys,D=>(r(),C(d,{key:D,value:D},{default:a(()=>[i(s(D),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])]),_:1}),t(u,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[t(p,{onFetchTranslationsSuccesss:n.getData},null,8,["onFetchTranslationsSuccesss"])]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),t($,null,{default:a(()=>[t(k,{columns:n.columns,"row-key":D=>D.group,"data-source":n.table.data,pagination:!1,bordered:"",size:"middle"},{bodyCell:a(({column:D,text:I,record:F})=>[(r(!0),S(O,null,G(n.langKeys,P=>(r(),S(O,{key:P},[D.dataIndex===P.key?(r(),S("div",ob,[n.editableData[F[`${P.key}_id`]]?(r(),S("div",lb,[t(g,{value:n.editableData[F[`${P.key}_id`]].value,"onUpdate:value":T=>n.editableData[F[`${P.key}_id`]].value=T,onPressEnter:T=>n.save(F[`${P.key}_id`])},null,8,["value","onUpdate:value","onPressEnter"]),t(b,{class:"editable-cell-icon-check",onClick:T=>n.save(F[`${P.key}_id`])},null,8,["onClick"])])):(r(),S("div",sb,[i(s(I||" ")+" ",1),t(v,{class:"editable-cell-icon",onClick:T=>n.edit(F,P.key)},null,8,["onClick"])]))])):A("",!0)],64))),128))]),_:1},8,["columns","row-key","data-source"])]),_:1})],64)}const db=B(nb,[["render",rb]]),ib={components:{EyeOutlined:Ze,SettingSidebar:Ge,AdminPageHeader:ge,TranslationsSettings:db,LangAddButton:Ra,ImportTranslation:Ut},setup(){const{permsArray:e,appType:l}=Y(),c=E(null),n=window.config.translatioins_sample_file;return{langAdded:()=>{c.value.getData()},appType:l,permsArray:e,transSettingRef:c,sampleFileUrl:n}}};function ub(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("LangAddButton"),v=o("ImportTranslation"),k=o("EyeOutlined"),$=o("a-button"),D=o("a-space"),I=o("TranslationsSettings"),F=o("a-row");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.translations"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.translations")),1)]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(I,{ref:"transSettingRef"},{actionButtons:a(()=>[t(D,null,{default:a(()=>[n.permsArray.includes("translations_create")||n.permsArray.includes("admin")?(r(),C(b,{key:0,onOnAddSuccess:n.langAdded,btnType:"primary",tooltip:!1},{default:a(()=>[i(s(e.$t("langs.add")),1)]),_:1},8,["onOnAddSuccess"])):A("",!0),n.appType=="non-saas"?(r(),C(v,{key:1,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:n.sampleFileUrl,importUrl:"translations/import",onOnUploadSuccess:n.langAdded},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])):A("",!0),t($,{type:"primary",onClick:l[0]||(l[0]=P=>e.$router.push({name:"admin.settings.langs.index"}))},{default:a(()=>[t(k),i(" "+s(e.$t("langs.view_all_langs")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const mb=B(ib,[["render",ub]]),cb=Z({props:["module"],emits:["updateSuccess"],setup(e,{emit:l}){const c=E(!1),n=E(!1),h=Ce(),{t:y}=te();return ee(()=>{!e.module.verified||e.module.other_domain_verified?c.value=!1:c.value=e.module.status}),{checked:c,loading:n,updateStatus:(d,m)=>{axiosAdmin.post(Re("modules/update-status"),{verified_name:e.module.verified_name,checked:d}).then(p=>{Ee.success({placement:"bottomRight",message:y("common.success"),description:y("module.module_status_updated")}),h.commit("auth/updateActiveModules",p.data.enabled_modules),window.config.modules=p.data.enabled_modules,l("updateSuccess")})}}}}),pb={key:0},_b=["innerHTML"],fb={key:1};function gb(e,l,c,n,h,y){const u=o("a-switch"),d=o("a-tooltip");return e.module.verified&&e.module.installed?(r(),S("span",pb,[t(d,null,We({default:a(()=>[t(u,{checked:e.checked,"onUpdate:checked":l[0]||(l[0]=m=>e.checked=m),loading:e.loading,onChange:e.updateStatus,disabled:!e.module.verified||e.module.other_domain_verified,size:"small"},null,8,["checked","loading","onChange","disabled"])]),_:2},[!e.module.verified||e.module.other_domain_verified?{name:"title",fn:a(()=>[w("span",{innerHTML:e.$t("messages.first_verify_module_message")},null,8,_b)]),key:"0"}:void 0]),1024)])):(r(),S("span",fb," - "))}const yb=B(cb,[["render",gb]]),hb=Z({props:["module"],emits:["verifySuccess"],components:{CheckOutlined:vt,InfoCircleOutlined:It},setup(e,{emit:l}){const c=E(!1),n=window.location.host,{rules:h,purchaseCode:y,errorMessage:u,successMessage:d,loading:m,verifyPurchase:p,productName:_,version:f}=Aa();return ee(()=>{_.value=e.module.verified_name,f.value=e.module.current_version}),{visible:c,showModal:()=>{c.value=!0},handleCancel:()=>{y.value="",c.value=!1},domain:n,rules:h,purchaseCode:y,loading:m,verify:()=>p({success:k=>{l("verifySuccess"),y.value="",c.value=!1}}),errorMessage:u,successMessage:d}}}),bb={key:0},vb=w("br",null,null,-1),kb=["innerHTML"],wb=["innerHTML"];function Cb(e,l,c,n,h,y){const u=o("a-tag"),d=o("a-button"),m=o("a-typography-text"),p=o("a-alert"),_=o("a-col"),f=o("a-row"),g=o("InfoCircleOutlined"),b=o("a-typography-link"),v=o("a-typography-paragraph"),k=o("a-form-item"),$=o("a-input"),D=o("a-form"),I=o("CheckOutlined"),F=o("a-modal");return r(),S(O,null,[e.module.other_domain_verified?(r(),S("div",bb,[t(u,{color:"red"},{default:a(()=>[i(s(e.$t("messages.other_domain_linked")),1)]),_:1}),vb,t(d,{type:"link",class:"p-0 mt-10",onClick:e.showModal},{default:a(()=>[i(s(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])])):e.module.verified?(r(),C(m,{key:1,type:"success",strong:""},{default:a(()=>[i(s(e.$t("module.verified")),1)]),_:1})):e.module.is_free?(r(),C(m,{key:2,type:"success",strong:""},{default:a(()=>[i(" - ")]),_:1})):(r(),C(d,{key:3,type:"link",class:"p-0",onClick:e.showModal},{default:a(()=>[i(s(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])),t(F,{open:e.visible,"onUpdate:open":l[1]||(l[1]=P=>e.visible=P),title:e.$t("module.verify_purchase_code"),maskClosable:!1,onCancel:e.handleCancel},{footer:a(()=>[t(d,{key:"submit",type:"primary",onClick:e.verify,loading:e.loading},{icon:a(()=>[t(I)]),default:a(()=>[i(" "+s(e.$t("common.verify")),1)]),_:1},8,["onClick","loading"]),t(d,{key:"back",onClick:e.handleCancel},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[e.successMessage!=""?(r(),C(p,{key:0,class:"mb-10",type:"success","show-icon":"",banner:""},{message:a(()=>[w("span",{innerHTML:e.successMessage},null,8,kb)]),_:1})):A("",!0),e.errorMessage!=""?(r(),C(p,{key:1,class:"mb-10",type:"error","show-icon":"",banner:""},{message:a(()=>[w("span",{innerHTML:e.errorMessage},null,8,wb)]),_:1})):A("",!0),e.module.other_domain_verified&&e.errorMessage==""?(r(),C(f,{key:2,class:"mb-10"},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(p,{type:"error","show-icon":""},{message:a(()=>[i(s(e.$t("messages.other_domain_linked_with_purchase_code")),1)]),_:1})]),_:1})]),_:1})):A("",!0),t(f,{class:"mb-10"},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(v,null,{default:a(()=>[w("blockquote",null,[t(b,{href:"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-",target:"_blank"},{default:a(()=>[t(g),i(" "+s(e.$t("messages.click_here_to_find_purchase_code")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),t(D,{layout:"vertical"},{default:a(()=>[t(k,{label:e.$t("common.domain"),name:"domain"},{default:a(()=>[t(m,{strong:""},{default:a(()=>[i(s(e.domain),1)]),_:1})]),_:1},8,["label"]),t(k,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:a(()=>[t($,{value:e.purchaseCode,"onUpdate:value":l[0]||(l[0]=P=>e.purchaseCode=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.purchase_code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const Sb=B(hb,[["render",Cb]]),$b=Z({props:["module","downloading","downloadPercentage","extracting"],emits:["install"],components:{DownloadOutlined:Et,ShoppingCartOutlined:yt,ReloadOutlined:Il,SyncOutlined:jt,CheckCircleOutlined:Wn,InfoOutlined:Pl,CheckOutlined:vt},setup(e,{emit:l}){const{t:c}=te(),n=E(!1),h=E("");return qe(),{install:()=>{ze.confirm({title:c("common.install"),icon:t(Te),content:c("messages.are_you_sure_install_message"),okText:c("common.yes"),okType:"danger",cancelText:c("common.no"),onOk(){h.value=c("common.installing")+"...",l("install",e.module.verified_name),n.value=!0},onCancel(){}})},update:()=>{ze.confirm({title:c("common.update"),icon:t(Te),content:c("messages.are_you_sure_update_message"),okText:c("common.yes"),okType:"danger",cancelText:c("common.no"),onOk(){h.value=c("common.updating")+"...",l("install",e.module.verified_name),n.value=!0},onCancel(){}})},installUpdateModalVisible:n,closeInstallUpdateModal:()=>{n.value=!1,window.location.reload()}}}});function Db(e,l,c,n,h,y){const u=o("DownloadOutlined"),d=o("a-button"),m=o("ReloadOutlined"),p=o("ShoppingCartOutlined"),_=o("a-typography-text"),f=o("SyncOutlined"),g=o("CheckCircleOutlined"),b=o("a-progress"),v=o("a-col"),k=o("a-row"),$=o("InfoOutlined"),D=o("CheckOutlined"),I=o("a-modal");return r(),S(O,null,[e.module.is_free&&!e.module.installed||e.module.verified&&!e.module.installed?(r(),C(d,{key:0,type:"link",class:"p-0",onClick:e.install},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.install")),1)]),_:1},8,["onClick"])):(e.module.is_free||e.module.verified)&&e.module.installed&&e.module.current_version!=e.module.version?(r(),C(d,{key:1,type:"link",class:"p-0",onClick:e.update},{icon:a(()=>[t(m)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])):!e.module.is_free&&!e.module.verified?(r(),C(d,{key:2,type:"link",href:e.module.buy_now_url,class:"p-0",target:"_blank"},{icon:a(()=>[t(p)]),default:a(()=>[i(" "+s(e.$t("common.buy_now")),1)]),_:1},8,["href"])):(r(),C(_,{key:3,type:"success",strong:""},{default:a(()=>[i(" - ")]),_:1})),t(I,{open:e.installUpdateModalVisible,"onUpdate:open":l[0]||(l[0]=F=>e.installUpdateModalVisible=F),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:a(()=>[t(k,{class:"mb-10"},{default:a(()=>[t(v,{span:24},{default:a(()=>[e.downloadPercentage<100?(r(),C(_,{key:0},{default:a(()=>[t(f,{spin:""}),i(" "+s(e.$t("messages.downloading_started_message")),1)]),_:1})):(r(),C(_,{key:1,strong:"",type:"success"},{default:a(()=>[t(g),i(" "+s(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(r(),C(b,{key:2,percent:e.downloadPercentage},null,8,["percent"])):A("",!0)]),_:1})]),_:1}),t(k,{class:"mb-10"},{default:a(()=>[t(v,{span:24},{default:a(()=>[e.extracting==""?(r(),C(_,{key:0,type:"secondary"},{default:a(()=>[t($),i(" "+s(e.$t("module.extract_zip_file")),1)]),_:1})):A("",!0),e.extracting=="started"?(r(),C(_,{key:1},{default:a(()=>[t(f,{spin:""}),i(" "+s(e.$t("messages.file_extracting_message")),1)]),_:1})):A("",!0),e.extracting=="completed"?(r(),C(_,{key:2,strong:"",type:"success"},{default:a(()=>[t(g),i(" "+s(e.$t("module.file_extracted")),1)]),_:1})):A("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(r(),C(k,{key:0,class:"mt-10 mb-10"},{default:a(()=>[t(v,{span:24},{default:a(()=>[t(d,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:a(()=>[t(D),i(" "+s(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):A("",!0)]),_:1},8,["open","title"])],64)}const Ab=B($b,[["render",Db]]);const Tb=Z({components:{ModuleStatus:yb,VerifyModule:Sb,ModuleAction:Ab,LeftCircleOutlined:wa,RightCircleOutlined:Ca},setup(){const{t:e}=te();Ce();const l=window.config.app_env,{allModules:c,dataLoading:n,getModuleData:h,offers:y,settings:u,install:d,downloading:m,downloadPercentage:p,extracting:_}=Aa(),f=[{title:e("module.name"),dataIndex:"name",width:"25%"},{title:e("module.verified"),dataIndex:"verified",width:"15%"},{title:e("module.current_version"),dataIndex:"current_version"},{title:e("module.latest_version"),dataIndex:"version"},{title:e("module.status"),dataIndex:"status"},{title:e("common.action"),dataIndex:"action"}];return ee(()=>{h()}),{modulesTableColumns:f,allModules:c,getModuleData:h,installModule:b=>{d(b)},dataLoading:n,offers:y,settings:u,downloading:m,downloadPercentage:p,extracting:_,appEnv:l}}}),Eb={class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},Ob={class:"custom-slick-arrow",style:{right:"10px"}},Ib=["src"],Pb={key:0,class:"table-responsive"},Ub={key:1};function Fb(e,l,c,n,h,y){const u=o("left-circle-outlined"),d=o("right-circle-outlined"),m=o("a-typography-link"),p=o("a-carousel"),_=o("a-col"),f=o("a-row"),g=o("a-avatar"),b=o("a-list-item-meta"),v=o("a-list-item"),k=o("a-list"),$=o("VerifyModule"),D=o("ModuleStatus"),I=o("ModuleAction"),F=o("a-table"),P=o("admin-page-table-content");return r(),S(O,null,[e.offers&&e.offers.length>0?(r(),C(f,{key:0},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(p,{arrows:""},{prevArrow:a(()=>[w("div",Eb,[t(u)])]),nextArrow:a(()=>[w("div",Ob,[t(d)])]),default:a(()=>[(r(!0),S(O,null,G(e.offers,T=>(r(),S("div",{key:T.id},[t(m,{href:T.url,target:"_blank"},{default:a(()=>[w("img",{src:T.image_url,style:Ve({width:e.settings.width,height:e.settings.height}),preview:!1},null,12,Ib)]),_:2},1032,["href"])]))),128))]),_:1})]),_:1})]),_:1})):A("",!0),t(P,null,{default:a(()=>[t(f,{class:"mt-20 mb-20"},{default:a(()=>[t(_,{span:24},{default:a(()=>[e.allModules?(r(),S("div",Pb,[t(F,{columns:e.modulesTableColumns,"row-key":T=>T.verified_name,"data-source":e.allModules,pagination:!1,bordered:"",size:"middle",loading:e.dataLoading},{bodyCell:a(({column:T,record:U})=>[T.dataIndex=="name"?(r(),C(k,{key:0},{default:a(()=>[t(v,null,{default:a(()=>[t(b,{description:U.description},{title:a(()=>[i(s(U.name),1)]),avatar:a(()=>[t(g,{src:U.image_url},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:2},1024)):A("",!0),T.dataIndex=="verified"?(r(),C($,{key:1,module:U,onVerifySuccess:e.getModuleData},null,8,["module","onVerifySuccess"])):A("",!0),T.dataIndex=="status"?(r(),C(D,{key:2,module:U,status:U.status,moduleName:U.verified_name,onUpdateSuccess:e.getModuleData},null,8,["module","status","moduleName","onUpdateSuccess"])):A("",!0),T.dataIndex=="action"?(r(),S(O,{key:3},[e.appEnv=="envato"?(r(),C(I,{key:0,module:U,onInstall:e.installModule,downloadPercentage:e.downloadPercentage,downloading:e.downloading,extracting:e.extracting},null,8,["module","onInstall","downloadPercentage","downloading","extracting"])):(r(),S("span",Ub,"-"))],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","loading"])])):A("",!0)]),_:1})]),_:1})]),_:1})],64)}const qb=B(Tb,[["render",Fb]]),Mb=Z({components:{LeftCircleOutlined:wa,RightCircleOutlined:Ca,SettingSidebar:Ge,AdminPageHeader:ge,ModuleSetting:qb},setup(){return{}}});function Rb(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("ModuleSetting"),v=o("a-row");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.modules"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.modules")),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(b)]),_:1})]),_:1})],64)}const Kb=B(Mb,[["render",Rb]]),Vb={components:{SaveOutlined:he},setup(){const{addEditRequestAdmin:e,loading:l,rules:c}=ve(),{t:n}=te(),h=E({}),y=E([]);return ee(()=>{axiosAdmin.get(Re("settings/storage")).then(d=>{h.value=d.data.storage,y.value=d.data.regions})}),{loading:l,rules:c,awsRegions:y,formData:h,onSubmit:()=>{e({url:Re("settings/storage/update"),data:h.value,successMessage:n("storage_settings.updated"),success:d=>{}})}}}},zb={key:0};function Lb(e,l,c,n,h,y){const u=o("a-select-option"),d=o("a-select"),m=o("a-form-item"),p=o("a-col"),_=o("a-row"),f=o("a-input"),g=o("a-input-password"),b=o("SaveOutlined"),v=o("a-button"),k=o("a-form");return r(),C(k,{layout:"vertical"},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{label:e.$t("storage_settings.storage"),name:"filesystem",help:n.rules.filesystem?n.rules.filesystem.message:null,validateStatus:n.rules.filesystem?"error":null},{default:a(()=>[t(d,{value:n.formData.filesystem,"onUpdate:value":l[0]||(l[0]=$=>n.formData.filesystem=$),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.storage")])},{default:a(()=>[t(u,{key:"local",value:"local"},{default:a(()=>[i(s(e.$t("storage_settings.local")),1)]),_:1}),t(u,{key:"aws",value:"aws"},{default:a(()=>[i(s(e.$t("storage_settings.aws")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.formData.filesystem=="aws"?(r(),S("div",zb,[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("storage_settings.aws_key"),name:"key",help:n.rules.key?n.rules.key.message:null,validateStatus:n.rules.key?"error":null,class:"required"},{default:a(()=>[t(f,{value:n.formData.key,"onUpdate:value":l[1]||(l[1]=$=>n.formData.key=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("storage_settings.aws_secret"),name:"secret",help:n.rules.secret?n.rules.secret.message:null,validateStatus:n.rules.secret?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.secret,"onUpdate:value":l[2]||(l[2]=$=>n.formData.secret=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_secret")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("storage_settings.aws_region"),name:"region",help:n.rules.region?n.rules.region.message:null,validateStatus:n.rules.region?"error":null},{default:a(()=>[t(d,{value:n.formData.region,"onUpdate:value":l[3]||(l[3]=$=>n.formData.region=$),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.aws_region")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.awsRegions,($,D)=>(r(),C(u,{key:D,value:D,label:$},{default:a(()=>[i(s($),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("storage_settings.aws_bucket"),name:"bucket",help:n.rules.bucket?n.rules.bucket.message:null,validateStatus:n.rules.bucket?"error":null,class:"required"},{default:a(()=>[t(f,{value:n.formData.bucket,"onUpdate:value":l[4]||(l[4]=$=>n.formData.bucket=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_bucket")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):A("",!0),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,null,{default:a(()=>[t(v,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})}const Bb=B(Vb,[["render",Lb]]),Wb={components:{SettingSidebar:Ge,AdminPageHeader:ge,StorageSettings:Bb,SaveOutlined:he},setup(){const e=E(null);return{onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function jb(e,l,c,n,h,y){const u=o("SaveOutlined"),d=o("a-button"),m=o("a-page-header"),p=o("router-link"),_=o("a-breadcrumb-item"),f=o("a-breadcrumb"),g=o("AdminPageHeader"),b=o("SettingSidebar"),v=o("a-col"),k=o("StorageSettings"),$=o("a-card"),D=o("admin-page-table-content"),I=o("a-row");return r(),S(O,null,[t(g,null,{header:a(()=>[t(m,{title:e.$t("menu.storage_settings"),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",onClick:n.onSubmit,loading:!!(n.settingRef&&n.settingRef.loading)},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(_,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(_,null,{default:a(()=>[i(s(e.$t("menu.storage_settings")),1)]),_:1})]),_:1})]),_:1}),t(I,null,{default:a(()=>[t(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(b)]),_:1}),t(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(D,null,{default:a(()=>[t($,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(k,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Hb=B(Wb,[["render",jb]]),Nb=Z({props:["formData","verified"],components:{SendOutlined:Pn},setup(){const{addEditRequestAdmin:e,loading:l,rules:c}=ve(),n=E(!1),h=E(""),y=E(""),{t:u}=te();return{loading:l,rules:c,email:h,visible:n,showModal:()=>{n.value=!0},sendMail:()=>{y.value="",e({url:Re("settings/email/send-test-mail"),data:{email:h.value},success:_=>{y.value="",_.status=="success"?Ee.success({placement:"bottomRight",message:u("common.success"),description:u("mail_settings.test_mail_sent_successfully")}):y.value=_.message},error:_=>{y.value=""}})},handleCancel:()=>{n.value=!1,l.value=!1,h.value="",y.value="",c.value={}},errorMessage:y}}});function Yb(e,l,c,n,h,y){const u=o("SendOutlined"),d=o("a-button"),m=o("a-alert"),p=o("a-col"),_=o("a-row"),f=o("a-input"),g=o("a-form-item"),b=o("a-form"),v=o("a-modal");return r(),S(O,null,[e.formData.mail_driver=="mail"||e.formData.mail_driver=="smtp"?(r(),C(d,{key:0,onClick:e.showModal,disabled:!e.verified},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("mail_settings.send_test_mail")),1)]),_:1},8,["onClick","disabled"])):A("",!0),t(v,{open:e.visible,"onUpdate:open":l[1]||(l[1]=k=>e.visible=k),maskClosable:!1,title:e.$t("mail_settings.send_test_mail"),onCancel:e.handleCancel},{footer:a(()=>[t(d,{key:"submit",type:"primary",loading:e.loading,onClick:e.sendMail},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.send")),1)]),_:1},8,["loading","onClick"]),t(d,{key:"back",onClick:e.handleCancel},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(b,{layout:"vertical"},{default:a(()=>[e.errorMessage!=""?(r(),C(_,{key:0,gutter:16,class:"mb-20"},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{message:e.errorMessage,type:"error","show-icon":""},null,8,["message"])]),_:1})]),_:1})):A("",!0),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(g,{label:e.$t("mail_settings.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:a(()=>[t(f,{value:e.email,"onUpdate:value":l[0]||(l[0]=k=>e.email=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const Gb=B(Nb,[["render",Yb]]),Jb={components:{InfoCircleOutlined:It}};function Qb(e,l,c,n,h,y){const u=o("InfoCircleOutlined"),d=o("a-tooltip");return r(),C(d,null,{title:a(()=>[i(s(e.$t("mail_settings.notificaiton_will_be_sent_to_warehouse")),1)]),default:a(()=>[t(u)]),_:1})}const Xb=B(Jb,[["render",Qb]]);const Zb={props:["sendMailSettings"],components:{TooltipWarehouse:Xb},setup(e){const{addEditRequestAdmin:l}=ve(),{t:c}=te(),n=E([]);return ee(()=>{n.value=e.sendMailSettings.credentials}),{settings:n,settingsChanged:y=>{l({url:Re("settings/email/send-mail-settings"),data:{name_key:"warehouse",settings:y},success:u=>{Oe.success(c("mail_settings.send_mail_setting_saved"))}})}}}},xb={class:"notificaiton-setting-bar"},ev={style:{marginTop:"8px",paddingBottom:"14px"}};function tv(e,l,c,n,h,y){const u=o("TooltipWarehouse"),d=o("a-typography-title"),m=o("a-col"),p=o("a-checkbox"),_=o("a-divider"),f=o("a-row"),g=o("a-checkbox-group"),b=o("a-card"),v=o("perfect-scrollbar");return r(),S("div",xb,[t(v,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[t(b,{class:"page-content-container"},{title:a(()=>[w("div",ev,s(e.$t("mail_settings.send_mail_for")),1)]),default:a(()=>[t(g,{value:n.settings,"onUpdate:value":l[0]||(l[0]=k=>n.settings=k),style:{width:"100%"},onChange:n.settingsChanged},{default:a(()=>[t(f,null,{default:a(()=>[t(m,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.stock_adjustment"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.purchase_returns"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.purchases"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.sales"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.sales_returns"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.expenses"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.staff_members"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const av=B(Zb,[["render",tv]]),nv={components:{SaveOutlined:he,TestMail:Gb,SendMailSetting:av},setup(){const{addEditRequestAdmin:e,loading:l,rules:c}=ve(),{appType:n}=Y();ve();const{t:h}=te(),y=E({}),u=E(!1),d=E(""),m=E([]);return ee(()=>{axiosAdmin.get(Re("settings/email")).then(_=>{y.value=_.data.settings,m.value=_.data.sendMailSettings,u.value=_.data.verified,d.value=_.data.verified?h("messages.stmp_success_message"):h("messages.stmp_error_message")})}),{appType:n,formData:y,rules:c,loading:l,onSubmit:()=>{e({url:Re("settings/email/update"),data:y.value,successMessage:h("mail_settings.updated"),success:_=>{u.value=_.verified,d.value=_.verified?h("messages.stmp_success_message"):_.message}})},verified:u,verifiedMessage:d,warehouseSendMailSettings:m}}},ov={key:0},lv={key:0},sv={key:1};function rv(e,l,c,n,h,y){const u=o("a-alert"),d=o("a-select-option"),m=o("a-select"),p=o("a-form-item"),_=o("a-col"),f=o("a-row"),g=o("a-input"),b=o("a-input-password"),v=o("SaveOutlined"),k=o("a-button"),$=o("TestMail"),D=o("a-space"),I=o("a-form"),F=o("a-card"),P=o("SendMailSetting");return r(),C(f,null,{default:a(()=>[t(_,{class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:n.appType=="saas"?24:18,xl:n.appType=="saas"?24:18},{default:a(()=>[n.formData.mail_driver=="smtp"?(r(),S("div",ov,[n.verified?(r(),C(u,{key:0,description:n.verifiedMessage,type:"success","show-icon":""},null,8,["description"])):(r(),C(u,{key:1,description:n.verifiedMessage,type:"error","show-icon":""},null,8,["description"]))])):A("",!0),t(F,{class:"settings-sidebar-content-container"},{default:a(()=>[t(I,{layout:"vertical"},{default:a(()=>[t(f,{gutter:16},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(p,{label:e.$t("mail_settings.mail_driver"),name:"mail_driver",help:n.rules.mail_driver?n.rules.mail_driver.message:null,validateStatus:n.rules.mail_driver?"error":null},{default:a(()=>[t(m,{value:n.formData.mail_driver,"onUpdate:value":l[0]||(l[0]=T=>n.formData.mail_driver=T),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.mail_driver")])},{default:a(()=>[t(d,{key:"none",value:"none"},{default:a(()=>[i(s(e.$t("mail_settings.none")),1)]),_:1}),t(d,{key:"smtp",value:"smtp"},{default:a(()=>[i(s(e.$t("mail_settings.smtp")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.formData.mail_driver=="mail"||n.formData.mail_driver=="smtp"?(r(),S("div",lv,[t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.from_name"),name:"from_name",help:n.rules.from_name?n.rules.from_name.message:null,validateStatus:n.rules.from_name?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.from_name,"onUpdate:value":l[1]||(l[1]=T=>n.formData.from_name=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.from_email"),name:"from_email",help:n.rules.from_email?n.rules.from_email.message:null,validateStatus:n.rules.from_email?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.from_email,"onUpdate:value":l[2]||(l[2]=T=>n.formData.from_email=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):A("",!0),n.formData.mail_driver=="smtp"?(r(),S("div",sv,[t(f,{gutter:16},{default:a(()=>[n.formData.mail_driver=="smtp"?(r(),C(_,{key:0,xs:24,sm:24,md:24,lg:n.formData.mail_driver=="smtp"?12:24},{default:a(()=>[t(p,{label:e.$t("mail_settings.enable_mail_queue"),name:"enable_mail_queue",help:n.rules.enable_mail_queue?n.rules.enable_mail_queue.message:null,validateStatus:n.rules.enable_mail_queue?"error":null,class:"required"},{default:a(()=>[t(m,{value:n.formData.enable_mail_queue,"onUpdate:value":l[3]||(l[3]=T=>n.formData.enable_mail_queue=T),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.enable_mail_queue")]),allowClear:!0},{default:a(()=>[t(d,{key:"yes",value:"yes"},{default:a(()=>[i(s(e.$t("common.yes")),1)]),_:1}),t(d,{key:"no",value:"no"},{default:a(()=>[i(s(e.$t("common.no")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):A("",!0),n.formData.mail_driver=="smtp"?(r(),C(_,{key:1,xs:24,sm:24,md:24,lg:n.formData.mail_driver=="smtp"?12:24},{default:a(()=>[t(p,{label:e.$t("mail_settings.host"),name:"host",help:n.rules.host?n.rules.host.message:null,validateStatus:n.rules.host?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.host,"onUpdate:value":l[4]||(l[4]=T=>n.formData.host=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.host")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):A("",!0)]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.port"),name:"port",help:n.rules.port?n.rules.port.message:null,validateStatus:n.rules.port?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.port,"onUpdate:value":l[5]||(l[5]=T=>n.formData.port=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.port")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.encryption"),name:"encryption",help:n.rules.encryption?n.rules.encryption.message:null,validateStatus:n.rules.encryption?"error":null},{default:a(()=>[t(m,{value:n.formData.encryption,"onUpdate:value":l[6]||(l[6]=T=>n.formData.encryption=T),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.encryption")]),allowClear:!0},{default:a(()=>[t(d,{key:"tls",value:"tls"},{default:a(()=>[i(" tls ")]),_:1}),t(d,{key:"ssl",value:"ssl"},{default:a(()=>[i(" ssl ")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.username"),name:"username",help:n.rules.username?n.rules.username.message:null,validateStatus:n.rules.username?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.username,"onUpdate:value":l[7]||(l[7]=T=>n.formData.username=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.username")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.password"),name:"password",help:n.rules.password?n.rules.password.message:null,validateStatus:n.rules.password?"error":null,class:"required"},{default:a(()=>[t(b,{value:n.formData.password,"onUpdate:value":l[8]||(l[8]=T=>n.formData.password=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):A("",!0),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,null,{default:a(()=>[t(D,null,{default:a(()=>[t(k,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(v)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t($,{formData:n.formData,verified:n.verified},null,8,["formData","verified"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["lg","xl"]),n.appType=="non-saas"?(r(),C(_,{key:0,class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:6,xl:6},{default:a(()=>[n.warehouseSendMailSettings&&n.warehouseSendMailSettings.xid?(r(),C(P,{key:0,sendMailSettings:n.warehouseSendMailSettings},null,8,["sendMailSettings"])):A("",!0)]),_:1})):A("",!0)]),_:1})}const dv=B(nv,[["render",rv]]),iv={components:{SettingSidebar:Ge,AdminPageHeader:ge,EmailSettings:dv,SaveOutlined:he},setup(){const e=E(null);return{onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function uv(e,l,c,n,h,y){const u=o("SaveOutlined"),d=o("a-button"),m=o("a-page-header"),p=o("router-link"),_=o("a-breadcrumb-item"),f=o("a-breadcrumb"),g=o("AdminPageHeader"),b=o("SettingSidebar"),v=o("a-col"),k=o("EmailSettings"),$=o("admin-page-table-content"),D=o("a-row");return r(),S(O,null,[t(g,null,{header:a(()=>[t(m,{title:e.$t("menu.email_settings"),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",onClick:n.onSubmit,loading:!!(n.settingRef&&n.settingRef.loading)},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(_,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(_,null,{default:a(()=>[i(s(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(b)]),_:1}),t(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t($,null,{default:a(()=>[t(k,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const mv=B(iv,[["render",uv]]),cv=()=>{const e=Re("database-backups"),{t:l}=te(),c=[{title:l("database_backup.file"),dataIndex:"name"},{title:l("database_backup.file_size"),dataIndex:"size"},{title:l("common.action"),dataIndex:"action"}];return{url:e,columns:c}},pv={components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,ExclamationCircleOutlined:Te},setup(){const{t:e}=te(),{url:l,columns:c}=cv(),n=E([]);return ee(()=>{axiosAdmin.post(Re("database-backups")).then(u=>{n.value=u.data.data})}),{columns:c,results:n,deleteBackup:u=>{ze.confirm({title:e("database_backup.delete_backup"),icon:t(Te),content:e("database_backup.are_you_sure_delete_backup"),okText:e("common.yes"),okType:"danger",cancelText:e("common.no"),onOk(){axiosAdmin.post(Re("delete-backup"),{file_name:u}).then(d=>{n.value=d.data.data})},onCancel(){}})},backupCreated:u=>{n.value=u.data}}}},_v={class:"table-responsive mt-20"};function fv(e,l,c,n,h,y){const u=o("a-col"),d=o("a-row"),m=o("admin-page-filters"),p=o("a-alert"),_=o("a-typography-link"),f=o("a-button"),g=o("a-space"),b=o("a-table"),v=o("admin-page-table-content");return r(),S(O,null,[t(m,null,{default:a(()=>[t(d,{gutter:[16,16]},{default:a(()=>[t(u,{span:24},{default:a(()=>[de(e.$slots,"actionButtons")]),_:3})]),_:3})]),_:3}),t(v,null,{default:a(()=>[t(d,{class:"mt-20"},{default:a(()=>[t(u,{span:24},{default:a(()=>[t(p,{type:"warning",showIcon:"",message:e.$t("database_backup.backup_locaion_is")},null,8,["message"]),w("div",_v,[t(b,{columns:n.columns,"row-key":k=>k.id,"data-source":n.results,pagination:!1,bordered:"",size:"middle"},{bodyCell:a(({column:k,record:$})=>[k.dataIndex=="action"?(r(),C(g,{key:0},{default:a(()=>[t(_,{href:$.url,target:"_blank"},{default:a(()=>[i(s(e.$t("common.download")),1)]),_:2},1032,["href"]),t(f,{type:"link",onClick:D=>n.deleteBackup($.name)},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)):A("",!0)]),_:1},8,["columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})],64)}const gv=B(pv,[["render",fv]]),yv=Z({emits:["success"],components:{PlusOutlined:ne,ExclamationCircleOutlined:Te},setup(e,{emit:l}){const{t:c}=te(),{addEditRequestAdmin:n,loading:h}=ve();return{generateBack:()=>{ze.confirm({title:c("database_backup.generate_backup"),icon:t(Te),content:c("database_backup.are_you_sure_generate_backup"),okText:c("common.yes"),okType:"danger",cancelText:c("common.no"),onOk(){n({url:Re("generate-backups"),data:{},successMessage:c("database_backup.backup_generated_successfully"),success:u=>{l("success",u)}})},onCancel(){}})},loading:h}}});function hv(e,l,c,n,h,y){const u=o("PlusOutlined"),d=o("a-button");return r(),C(d,{type:"primary",onClick:e.generateBack,loading:e.loading},{default:a(()=>[t(u),i(" "+s(e.$t("database_backup.generate_backup")),1)]),_:1},8,["onClick","loading"])}const bv=B(yv,[["render",hv]]),vv=Z({components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,SettingOutlined:pt},setup(){const e=E(!1);return{visible:e,onClose:()=>{e.value=!1},openDrawer:()=>{e.value=!0},drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function kv(e,l,c,n,h,y){const u=o("SettingOutlined"),d=o("a-button"),m=o("a-alert"),p=o("a-col"),_=o("a-row"),f=o("a-typography-text"),g=o("a-typography-paragraph"),b=o("a-drawer");return r(),S(O,null,[t(d,{type:"primary",onClick:e.openDrawer},{icon:a(()=>[t(u)]),default:a(()=>[i(" "+s(e.$t("database_backup.settings")),1)]),_:1},8,["onClick"]),t(b,{title:e.$t("database_backup.backup_command_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(d,{onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(_,{gutter:16,class:"mb-10"},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(m,{type:"warning",showIcon:"",message:e.$t("database_backup.put_dump_path_command_on_env_file")},null,8,["message"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(g,null,{default:a(()=>[w("blockquote",null,[t(f,{type:"warning"},{default:a(()=>[i(s(e.$t("database_backup.window_command_path")),1)]),_:1})]),w("blockquote",null,[t(f,{type:"warning"},{default:a(()=>[i(s(e.$t("database_backup.laragon_command_path")),1)]),_:1})]),w("blockquote",null,[t(f,{type:"warning"},{default:a(()=>[i(s(e.$t("database_backup.linux_command_path")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const wv=B(vv,[["render",kv]]),Cv={components:{SettingSidebar:Ge,AdminPageHeader:ge,DatabaseSettings:gv,GenerateDbBackup:bv,BackupCommandSetting:wv},setup(){const e=E(null);return{backupCreated:c=>{e.value.backupCreated(c)},settingRef:e}}};function Sv(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("GenerateDbBackup"),v=o("BackupCommandSetting"),k=o("a-space"),$=o("DatabaseSettings"),D=o("a-row");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.database_backup"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.database_backup")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t($,{ref:"settingRef"},{actionButtons:a(()=>[t(k,null,{default:a(()=>[t(b,{onSuccess:n.backupCreated},null,8,["onSuccess"]),t(v)]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const $v=B(Cv,[["render",Sv]]),At=window.config.app_type,Yt=At=="non-saas"?"admin":"superadmin",Dv=[{path:"translations",component:mb,name:`${Yt}.settings.translations.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:At=="non-saas"?"translations_view":"superadmin"}},{path:"modules",component:Kb,name:`${Yt}.settings.modules.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"modules",permission:At=="non-saas"?"modules_view":"superadmin"}},{path:"storage",component:Hb,name:`${Yt}.settings.storage.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"storage_settings",permission:At=="non-saas"?"storage_edit":"superadmin"}},{path:"email",component:mv,name:`${Yt}.settings.email.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:At=="non-saas"?"email_edit":"superadmin"}},{path:"database-backup",component:$v,name:"admin.settings.database_backup.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"database_backup",permission:At=="non-saas"?"database_backup":"superadmin"}}],Av={components:{InfoCircleOutlined:It}};function Tv(e,l,c,n,h,y){const u=o("InfoCircleOutlined"),d=o("a-tooltip");return r(),C(d,null,{title:a(()=>[i(s(e.$t("mail_settings.notificaiton_will_be_sent_to_warehouse")),1)]),default:a(()=>[t(u)]),_:1})}const Ev=B(Av,[["render",Tv]]);const Ov={props:["sendMailSettings"],components:{TooltipWarehouse:Ev},setup(e){const{addEditRequestAdmin:l}=ve(),{t:c}=te(),n=E([]);return ee(()=>{n.value=e.sendMailSettings.credentials}),{settings:n,settingsChanged:y=>{l({url:"settings/email/send-mail-settings",data:{name_key:"warehouse",settings:y},success:u=>{Oe.success(c("mail_settings.send_mail_setting_saved"))}})}}}},Iv={class:"notificaiton-setting-bar"},Pv={style:{marginTop:"8px",paddingBottom:"14px"}};function Uv(e,l,c,n,h,y){const u=o("TooltipWarehouse"),d=o("a-typography-title"),m=o("a-col"),p=o("a-checkbox"),_=o("a-divider"),f=o("a-row"),g=o("a-checkbox-group"),b=o("a-card"),v=o("perfect-scrollbar");return r(),S("div",Iv,[t(v,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[t(b,{class:"page-content-container"},{title:a(()=>[w("div",Pv,s(e.$t("mail_settings.send_mail_for")),1)]),default:a(()=>[t(g,{value:n.settings,"onUpdate:value":l[0]||(l[0]=k=>n.settings=k),style:{width:"100%",display:"inline-block"},onChange:n.settingsChanged},{default:a(()=>[t(f,null,{default:a(()=>[t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.stock_adjustment"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.purchase_returns"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.purchases"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.sales"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.sales_returns"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.expenses"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[i(s(e.$t("menu.staff_members"))+" ",1),t(u)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_create"},{default:a(()=>[i(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_update"},{default:a(()=>[i(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_delete"},{default:a(()=>[i(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const Fv=B(Ov,[["render",Uv]]),qv={components:{SaveOutlined:he,SettingSidebar:Ge,AdminPageHeader:ge,SendMailSetting:Fv},setup(){const e=E([]);return ee(()=>{axiosAdmin.get("settings/email").then(l=>{e.value=l.data.sendMailSettings})}),{warehouseSendMailSettings:e}}};function Mv(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("SettingSidebar"),g=o("a-col"),b=o("SendMailSetting"),v=o("admin-page-table-content"),k=o("a-row");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.email_settings"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.settings")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(g,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(k,{class:"mt-20 mb-20"},{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[t(v,null,{default:a(()=>[n.warehouseSendMailSettings&&n.warehouseSendMailSettings.xid?(r(),C(b,{key:0,sendMailSettings:n.warehouseSendMailSettings},null,8,["sendMailSettings"])):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Rv=B(qv,[["render",Mv]]),Kv=window.config.app_type,Vv=Kv=="saas"?[{path:"email",component:Rv,name:"admin.settings.email.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:"email_edit"}}]:[...Dv],zv=[{path:"/admin/settings/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"company",component:xy,name:"admin.settings.company.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"company",permission:"companies_edit"}},{path:"profile",component:nh,name:"admin.settings.profile.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"profile"}},{path:"langs",component:uh,name:"admin.settings.langs.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:"translations_view"}},{path:"warehouses",component:yh,name:"admin.settings.warehouses.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"warehouses",permission:"warehouses_view"}},{path:"roles",component:kh,name:"admin.settings.roles.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"roles",permission:"roles_view"}},{path:"taxes",component:Ah,name:"admin.settings.taxes.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"taxes",permission:"taxes_view"}},{path:"currencies",component:Fh,name:"admin.settings.currencies.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"currencies",permission:"currencies_view"}},{path:"payment-modes",component:Bh,name:"admin.settings.payment_modes.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"payment_modes",permission:"payment_modes_view"}},{path:"units",component:Kh,name:"admin.settings.units.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"units",permission:"units_view"}},{path:"custom-fields",component:Qh,name:"admin.settings.custom_fields.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"custom_fields",permission:"custom_fields_view"}},...Vv]}],Po=()=>{const{t:e}=te(),{formatDate:l,formatAmountCurrency:c}=Y(),n=["user_id"];return{paymentsColumns:[{title:e("payments.date"),dataIndex:"date",dbKey:"date",dataFormat:y=>l(y.date)},{title:e("payments.payment_number"),dataIndex:"payment_number",dbKey:"payment_number"},{title:e("payments.payment_type"),dataIndex:"payment_type",dbKey:"payment_type",dataFormat:y=>y.payment_type=="in"?e("menu.payment_in"):e("menu.payment_out")},{title:e("payments.user"),dataIndex:"user_id",dbKey:"user.name"},{title:e("payment_mode.mode_type"),dataIndex:"mode_type",dbKey:"payment_mode.name"},{title:e("payments.amount"),dataIndex:"amount",dbKey:"amount",dataFormat:y=>c(y.amount)}],paymentsHashableColumns:n}},Lv=Z({props:{user_id:null,paymentMode:null,dates:{default:[],type:null}},components:{UserInfo:He},setup(e){const{paymentsColumns:l,paymentsHashableColumns:c}=Po(),{formatDate:n,formatAmountCurrency:h,selectedWarehouse:y}=Y(),u=je();ee(()=>{d(e)});const d=m=>{const p={};m.user_id&&m.user_id!=null&&(p.user_id=m.user_id),u.tableUrl.value={url:"payments?fields=id,xid,date,payment_type,amount,payment_number,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type},payment_mode_id,x_payment_mode_id,paymentMode{id,xid,name,mode_type}",filters:p,extraFilters:{dates:m.dates,payment_mode:m.paymentMode}},u.hashable.value=[...c],u.table.sorter={field:"date",order:"desc"},u.exportDetails.value={allowExport:!0,exportType:"payment_reports"},u.fetch({page:1})};return me(e,(m,p)=>{d(m)}),me(y,(m,p)=>{d(e)}),{paymentsColumns:l,...u,formatDate:n,formatAmountCurrency:h}}}),Bv={key:0,class:"table-responsive"};function Wv(e,l,c,n,h,y){const u=o("UserInfo"),d=o("a-table"),m=o("a-col"),p=o("a-row");return r(),C(p,null,{default:a(()=>[t(m,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),S("div",Bv,[t(d,{columns:e.paymentsColumns,"row-key":_=>_.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"payment-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:_,record:f})=>[_.dataIndex==="date"?(r(),S(O,{key:0},[i(s(e.formatDate(f.date)),1)],64)):A("",!0),_.dataIndex==="payment_type"?(r(),S(O,{key:1},[i(s(f.payment_type=="in"?e.$t("menu.payment_in"):e.$t("menu.payment_out")),1)],64)):A("",!0),_.dataIndex==="mode_type"?(r(),S(O,{key:2},[i(s(f.payment_mode&&f.payment_mode.name?f.payment_mode.name:"-"),1)],64)):A("",!0),_.dataIndex==="user_id"?(r(),C(u,{key:3,user:f.user},null,8,["user"])):A("",!0),_.dataIndex==="amount"?(r(),S(O,{key:4},[i(s(e.formatAmountCurrency(f.amount)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const Uo=B(Lv,[["render",Wv]]),jv={props:["tableName","title"],components:{FilePdfOutlined:Ul},setup(e){const l=E(!1);return{downloadPdf:()=>{l.value=!0;var n=document.getElementById(`${e.tableName}`),h=n.getElementsByTagName("table").length,y=new Fl;if(y.text(e.title,14,9),h==1)y.autoTable({html:`#${e.tableName} table`});else for(var u=0;u<h;u++)y.autoTable({html:`#${e.tableName} .tbl_result_${u} table`});y.save(`${e.tableName}.pdf`),l.value=!1},loading:l}}};function Hv(e,l,c,n,h,y){const u=o("FilePdfOutlined"),d=o("a-button"),m=o("a-col");return r(),C(m,{span:24},{default:a(()=>[t(d,{type:"primary",onClick:n.downloadPdf,loading:n.loading},{default:a(()=>[t(u),i(" "+s(e.$t("common.pdf")),1)]),_:1},8,["onClick","loading"])]),_:1})}const Nv=B(jv,[["render",Hv]]),Yv={props:["tableName"],components:{PrinterOutlined:ya}};function Gv(e,l,c,n,h,y){const u=o("PrinterOutlined"),d=o("a-button"),m=o("a-col"),p=ql("print");return r(),C(m,{span:24},{default:a(()=>[Dt((r(),C(d,{type:"primary"},{default:a(()=>[t(u),i(" "+s(e.$t("common.print")),1)]),_:1})),[[p,`#${c.tableName}`]])]),_:1})}const Jv=B(Yv,[["render",Gv]]),Fo=()=>{const e="products?fields=id,xid,name,image,image_url,item_code,unit_id,x_unit_id,unit{id,xid,short_name},details{product_id,x_product_id,current_stock,stock_quantitiy_alert}",{t:l}=te(),c=["products.id"],n=[{title:l("product.product"),dataIndex:"name",dbKey:"name"},{title:l("product.item_code"),dataIndex:"item_code",dbKey:"item_code"},{title:l("product.current_stock"),dataIndex:"current_stock",dbKey:"details.current_stock",dataFormat:h=>`${h.details.current_stock} ${h.unit.short_name}`},{title:l("product.quantitiy_alert"),dataIndex:"stock_quantitiy_alert",dbKey:"details.current_stock",dataFormat:h=>`${h.details.stock_quantitiy_alert} ${h.unit.short_name}`}];return{url:e,stockAlertColumns:n,stockAlertHashableColumns:c}},qo=()=>{const{t:e}=te(),{formatDateTime:l,formatAmountCurrency:c}=Y(),n=["staff_user_id"];return{salesSummaryColumns:[{title:e("stock.order_date"),dataIndex:"order_date",dbKey:"order_date",dataFormat:y=>l(y.order_date)},{title:e("stock.invoice_number"),dataIndex:"invoice_number",dbKey:"invoice_number"},{title:e("common.party"),dataIndex:"user_id",dbKey:"user.name"},{title:e("payments.amount"),dataIndex:"amount",dbKey:"total",dataFormat:y=>c(y.total)},{title:e("payments.payment_status"),dataIndex:"payment_status",dbKey:"payment_status"},{title:e("common.created_by"),dataIndex:"staff_user_id",dbKey:"staff_member.name"}],orderHashableColumns:n}},Mo=()=>{const{t:e}=te(),l=["category_id","brand_id"],{formatAmountCurrency:c}=Y(),n=[{title:e("product.product"),dataIndex:"name",dbKey:"name"},{title:e("product.item_code"),dataIndex:"item_code",dbKey:"item_code"},{title:e("product.category"),dataIndex:"category_id",dbKey:"category.name"},{title:e("product.brand"),dataIndex:"brand_id",dbKey:"brand.name"},{title:e("product.purchase_price"),dataIndex:"purchase_price",dbKey:"details.purchase_price",dataFormat:u=>c(u.details.purchase_price)},{title:e("product.sales_price"),dataIndex:"sales_price",dbKey:"details.sales_price",dataFormat:u=>c(u.details.sales_price)},{title:e("product.current_stock"),dataIndex:"current_stock",dbKey:"details.current_stock",dataFormat:u=>`${u.details.current_stock} ${u.unit.short_name}`}],h=[...n,{title:e("product.stock_value"),dataIndex:"stock_value"}],y=[...n,{title:e("product.by_purchase"),dataIndex:"stock_value",dbKey:"details.current_stock",dataFormat:u=>c(u.details.current_stock*u.details.purchase_price)},{title:e("product.by_sales"),dataIndex:"stock_value",dbKey:"details.current_stock",dataFormat:u=>c(u.details.current_stock*u.details.sales_price)}];return{hashableColumns:l,summaryColumns:h,exportColumns:y}},Ro=()=>{const{t:e}=te(),l=["product_id"],{formatAmountCurrency:c}=Y();return{columns:[{title:e("product.product"),dataIndex:"name",dbKey:"name"},{title:e("product.item_code"),dataIndex:"item_code",dbKey:"item_code"},{title:e("product.category"),dataIndex:"category_id",dbKey:"category.name"},{title:e("product.brand"),dataIndex:"brand_id",dbKey:"brand.name"},{title:e("product.mrp"),dataIndex:"mrp",dbKey:"details.mrp",dataFormat:h=>c(h.details.mrp)},{title:e("product.sales_price"),dataIndex:"sales_price",dbKey:"details.sales_price",dataFormat:h=>c(h.details.sales_price)}],hashableColumns:l}},Ko=()=>{const{formatAmountCurrency:e}=Y(),{t:l}=te(),c=["product_id"];return{columns:[{title:l("product.product"),dataIndex:"name",dbKey:"name"},{title:l("product.item_code"),dataIndex:"item_code",dbKey:"item_code"},{title:l("product.unit_sold"),dataIndex:"unit_sold",dbKey:"unit_sold",dataFormat:h=>`${h.unit_sold} ${h.product.unit.short_name}`},{title:l("product.total_purchase_price"),dataIndex:"total_purchase_price",dbKey:"total_purchase_price",dataFormat:h=>e(h.unit_sold*h.product.details.purchase_price)},{title:l("product.total_sales_price"),dataIndex:"total_sales_price",dbKey:"total_sales_price",dataFormat:h=>e(h.total_sales_price)}],hashableColumns:c}},Qv=()=>{const{t:e}=te(),{formatAmountCurrency:l,formatDate:c}=Y(),n=[{title:e("menu.sales"),dataIndex:"sales",dbKey:"sales",dataFormat:y=>l(y.sales)},{title:e("menu.purchases"),dataIndex:"purchases",dbKey:"purchases",dataFormat:y=>l(y.purchases)},{title:e("menu.purchase_returns"),dataIndex:"purchase_returns",dbKey:"purchase_returns",dataFormat:y=>l(y.purchase_returns)},{title:e("menu.sales_returns"),dataIndex:"sales_returns",dbKey:"sales_returns",dataFormat:y=>l(y.sales_returns)},{title:e("menu.expenses"),dataIndex:"expenses",dbKey:"expenses",dataFormat:y=>l(y.expenses)},{title:e("common.profit"),dataIndex:"profit",dbKey:"profit",dataFormat:y=>l(y.profit)}],h=[{title:e("common.date"),dataIndex:"date",dbKey:"date",dataFormat:y=>c(y.date)},{title:e("menu.sales"),dataIndex:"sales",dbKey:"sales",dataFormat:y=>l(y.result.sales)},{title:e("menu.purchases"),dataIndex:"purchases",dbKey:"purchases",dataFormat:y=>l(y.result.purchases)},{title:e("menu.purchase_returns"),dataIndex:"purchase_returns",dbKey:"purchase_returns",dataFormat:y=>l(y.result.purchase_returns)},{title:e("menu.sales_returns"),dataIndex:"sales_returns",dbKey:"sales_returns",dataFormat:y=>l(y.result.sales_returns)},{title:e("menu.expenses"),dataIndex:"expenses",dbKey:"expenses",dataFormat:y=>l(y.result.expenses)},{title:e("common.profit"),dataIndex:"profit",dbKey:"profit",dataFormat:y=>l(y.result.profit)}];return{columns:n,dateWiseColumns:h}},Vo=()=>{const e=E("customers"),{t:l}=te(),{formatAmountCurrency:c}=Y(),n=[{title:l("user.name"),dataIndex:"name",dbKey:"name"}],h=[{title:l("menu.purchases"),dataIndex:"user_details.purchase_order_count",dbKey:"details.purchase_order_count"},{title:l("menu.purchase_returns"),dataIndex:"user_details.purchase_return_count",dbKey:"details.purchase_return_count"},{title:l("menu.sales"),dataIndex:"user_details.sales_order_count",dbKey:"details.sales_order_count"},{title:l("menu.sales_returns"),dataIndex:"user_details.sales_return_count",dbKey:"details.sales_return_count"}],y=[{title:l("payments.total_amount"),dataIndex:"user_details.total_amount",dbKey:"details.total_amount",dataFormat:p=>c(p.details.total_amount)},{title:l("payments.paid_amount"),dataIndex:"user_details.paid_amount",dbKey:"details.paid_amount",dataFormat:p=>c(p.details.paid_amount)},{title:l("payments.due_amount"),dataIndex:"user_details.due_amount",dbKey:"details.due_amount",dataFormat:p=>c(p.details.due_amount)}],u=pe(()=>[...n,{title:e.value=="customers"?l("menu.sales"):l("menu.purchases"),children:[...h]},...y]),d=pe(()=>{var p=(e.value=="customers",h);return[...n,...p,...y]}),m=[{key:"name",value:l("common.name")},{key:"phone",value:l("user.phone")}];return{userType:e,columns:u,exportColumns:d,filterableColumns:m}},zo=()=>{const{formatAmountCurrency:e,formatDate:l}=Y(),c="expenses?fields=id,xid,bill,bill_url,expense_category_id,x_expense_category_id,expenseCategory{id,xid,name},amount,user_id,x_user_id,user{id,xid,name},notes,date",{t:n}=te(),h=["user_id","expense_category_id"],y=[{title:n("expense.date"),dataIndex:"date",dbKey:"date",dataFormat:u=>l(u.date)},{title:n("expense.expense_category"),dataIndex:"expense_category_id",dbKey:"expense_category.name",dataFormat:u=>u.expense_category.name},{title:n("expense.created_by_user"),dataIndex:"user_id",dbKey:"user.name",dataFormat:u=>u.user.name},{title:n("expense.amount"),dataIndex:"amount",dbKey:"amount",dataFormat:u=>e(u.amount)}];return{url:c,expenseColumns:y,expenseHashableColumns:h}},Xv=()=>{const e=Po(),l=Fo(),c=qo(),n=Mo(),h=Ro(),y=Ko(),u=Qv(),d=Vo(),m=zo();return{getColumns:_=>{if(_=="payment_reports")return e.paymentsColumns;if(_=="stock_alert_reports")return l.stockAlertColumns;if(_=="sales_summary_reports")return c.salesSummaryColumns;if(_=="stock_summary_reports")return n.exportColumns;if(_=="rate_list_reports")return h.columns;if(_=="product_sales_summary_reports")return y.columns;if(_=="user_reports")return d.exportColumns.value;if(_=="profit_loss_reports")return u.columns;if(_=="profit_loss_reports_by_dates")return u.dateWiseColumns;if(_=="expense_reports")return m.expenseColumns}}},Zv={props:{exportType:{type:String,default:""}},components:{FileExcelOutlined:Ml},setup(e){const l=Ce(),{getColumns:c}=Xv(),n=E(e.exportType+".xlsx"),h=E(e.exportType),y=()=>{var m=l.state.auth.allExportData,p=Qe(m,$=>$.export_type==e.exportType),_=c(e.exportType),f=p.data;let g=[],b=[];if(_.length===0||f.length===0)return;_.map($=>{b.push($.title)}),g.push(b),f.map($=>{let D=[];_.map(I=>{let F=$[I.dbKey];I.dbKey.split(".").length>1&&(F=d($,I.dbKey)),I.dataFormat&&typeof I.dataFormat=="function"?D.push(I.dataFormat($)):D.push(F)}),g.push(D)});let v=ra.book_new(),k=ra.aoa_to_sheet(g);k["!cols"]=u(g),ra.book_append_sheet(v,k,h.value),Rl(v,n.value)},u=m=>{let p=Object.keys(m[0]).map(_=>({width:_.length+2}));for(let _=0;_<m.length;_++){let f=Object.values(m[_]);for(let g=0;g<f.length;g++)f[g]!==null&&f[g].length>p[g].width&&(p[g].width=f[g].length+3)}return p},d=(m,p)=>{p=p.replace(/\[(\w+)\]/g,".$1"),p=p.replace(/^\./,"");let _=p.split(".");for(let f=0,g=_.length;f<g;++f){let b=_[f];if(b in m)m=m[b];else return}return m};return{exportExcel:y}}};function xv(e,l,c,n,h,y){const u=o("FileExcelOutlined"),d=o("a-button"),m=o("a-col");return r(),C(m,{span:24},{default:a(()=>[t(d,{type:"primary",onClick:n.exportExcel},{default:a(()=>[t(u),i(" "+s(e.$t("common.excel")),1)]),_:1},8,["onClick"])]),_:1})}const e2=B(Zv,[["render",xv]]),t2={props:{tableName:{type:String,default:"reports"},title:{type:String,default:"Data"},exportType:{type:String,default:""}},components:{PdfTable:Nv,PrintTable:Jv,ExportExcel:e2},setup(e,{emit:l}){const{willSubscriptionModuleVisible:c}=Y();return{willSubscriptionModuleVisible:c}}};function a2(e,l,c,n,h,y){const u=o("PdfTable"),d=o("PrintTable"),m=o("ExportExcel"),p=o("a-space");return n.willSubscriptionModuleVisible("reports_download")?(r(),C(p,{key:0},{default:a(()=>[t(u,{tableName:c.tableName,title:c.title},null,8,["tableName","title"]),t(d,{tableName:c.tableName},null,8,["tableName"]),t(m,{exportType:c.exportType},null,8,["exportType"])]),_:1})):A("",!0)}const _t=B(t2,[["render",a2]]),n2={components:{UserInfo:He,DateRangePicker:tt,AdminPageHeader:ge,Payments:Uo,ExprotTable:_t},setup(){const e=je(),{permsArray:l,willSubscriptionModuleVisible:c}=Y(),n=Se({user_id:void 0,payment_mode_id:void 0,dates:[]}),h=E({}),y=qe();return dt(()=>{(!((l.value.includes("purchases_view")||l.value.includes("sales_view")||l.value.includes("purchase_returns_view")||l.value.includes("sales_returns_view"))&&l.value.includes("order_payments_view")||l.value.includes("admin"))||!c("reports"))&&y.push("admin.dashboard.index")}),ee(()=>{const u=axiosAdmin.post("customer-suppliers");Promise.all([u]).then(([d])=>{h.value=d.data})}),{...e,filters:n,users:h,permsArray:l}}};function o2(e,l,c,n,h,y){const u=o("ExprotTable"),d=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("AdminPageHeader"),g=o("a-col"),b=o("a-select-option"),v=o("a-select"),k=o("DateRangePicker"),$=o("a-row"),D=o("admin-page-filters"),I=o("Payments"),F=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.payments"),class:"p-0"},{extra:a(()=>[t(u,{exportType:"payment_reports",tableName:"payment-reports-table",title:`${e.$t("menu.payments")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.payments")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t($,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t($,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:7,lg:6,xl:6},{default:a(()=>[t(v,{value:n.filters.user_id,"onUpdate:value":l[0]||(l[0]=P=>n.filters.user_id=P),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.users,P=>(r(),C(b,{key:P.xid,title:P.name,value:P.xid},{default:a(()=>[i(s(P.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(g,{xs:24,sm:24,md:10,lg:8,xl:8},{default:a(()=>[t(k,{onDateTimeChanged:l[1]||(l[1]=P=>{n.filters.dates=P})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(I,{user_id:n.filters.user_id,dates:n.filters.dates},null,8,["user_id","dates"])]),_:1})],64)}const l2=B(n2,[["render",o2]]),s2={components:{ProductSearchInput:wt,AdminPageHeader:ge,ExprotTable:_t},setup(){const{permsArray:e,selectedWarehouse:l,willSubscriptionModuleVisible:c}=Y(),{url:n,stockAlertColumns:h,stockAlertHashableColumns:y}=Fo(),u=E(void 0),d=qe(),m=je();dt(()=>{(!(e.value.includes("products_view")||e.value.includes("admin"))||!c("reports"))&&d.push("admin.dashboard.index")}),ee(()=>{p()});const p=()=>{m.tableUrl.value={url:n,filters:{"products.id":u.value},extraFilters:{fetch_stock_alert:!0}},m.hashable.value=[...y],m.exportDetails.value={allowExport:!0,exportType:"stock_alert_reports"},m.fetch({page:1})};return me(l,(_,f)=>{p()}),{stockAlertColumns:h,...m,searchProductId:u,getTableData:p,permsArray:e}}},r2={class:"table-responsive"};function d2(e,l,c,n,h,y){const u=o("ExprotTable"),d=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("AdminPageHeader"),g=o("a-col"),b=o("ProductSearchInput"),v=o("a-row"),k=o("admin-page-filters"),$=o("a-avatar"),D=o("a-badge"),I=o("a-table"),F=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.stock_alert"),class:"p-0"},{extra:a(()=>[t(u,{exportType:"stock_alert_reports",tableName:"stock-alert-reports-table",title:`${e.$t("menu.stock_alert")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.stock_alert")),1)]),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(v,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(v,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:6},{default:a(()=>[t(b,{onValueChanged:l[0]||(l[0]=P=>{n.searchProductId=P,n.getTableData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(v,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",r2,[t(I,{columns:n.stockAlertColumns,"row-key":P=>P.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"stock-alert-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:P,record:T})=>[P.dataIndex==="name"?(r(),C(D,{key:0},{default:a(()=>[t($,{shape:"square",src:T.image_url},null,8,["src"]),i(" "+s(T.name),1)]),_:2},1024)):A("",!0),P.dataIndex==="current_stock"?(r(),S(O,{key:1},[i(s(`${T.details.current_stock} ${T.unit.short_name}`),1)],64)):A("",!0),P.dataIndex==="stock_quantitiy_alert"?(r(),S(O,{key:2},[i(s(`${T.details.stock_quantitiy_alert} ${T.unit.short_name}`),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const i2=B(s2,[["render",d2]]),u2=Z({props:["data","orderType","visible"],components:{OrderTable:Nt,DateRangePicker:tt},setup(e,{emit:l}){const{paymentStatus:c,permsArray:n}=Y(),h=E("sales"),y=Se({payment_status:"all",user_id:void 0,dates:[]}),u=E(null),d=()=>{y.payment_status="all",l("closed")};return me(()=>e.visible,(m,p)=>{m==!0&&(e.data.user_type=="suppliers"?h.value=e.orderType==""?"purchases":"purchase-returns":h.value=e.orderType==""?"sales":"sales-returns",y.user_id=e.data.xid,y.dates=[],u&&u.value&&u.value.resetPicker())}),{onClose:d,paymentStatus:c,filters:y,activeOrderType:h,drawerWidth:window.innerWidth<=991?"90%":"70%",serachDateRangePicker:u,permsArray:n}}});function m2(e,l,c,n,h,y){const u=o("a-select-option"),d=o("a-select"),m=o("a-col"),p=o("DateRangePicker"),_=o("a-row"),f=o("OrderTable"),g=o("a-drawer");return r(),C(g,{title:e.data.name,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!0,destroyOnClose:!0,onClose:e.onClose},{default:a(()=>[t(_,{gutter:[8,8],class:"mb-20"},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:5,xl:5},{default:a(()=>[t(d,{value:e.filters.payment_status,"onUpdate:value":l[0]||(l[0]=b=>e.filters.payment_status=b),placeholder:e.$t("common.select_default_text",[e.$t("payments.payment_status")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[t(u,{title:e.$t("common.all"),value:"all"},{default:a(()=>[i(s(e.$t("common.all")),1)]),_:1},8,["title"]),(r(!0),S(O,null,G(e.paymentStatus,b=>(r(),C(u,{key:b.key,title:b.value,value:b.key},{default:a(()=>[i(s(b.value),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(p,{ref:"serachDateRangePicker",onDateTimeChanged:l[1]||(l[1]=b=>e.filters.dates=b)},null,512)]),_:1})]),_:1}),t(f,{orderType:e.activeOrderType,filters:e.filters,perPageItems:10},null,8,["orderType","filters"])]),_:1},8,["title","width","open","onClose"])}const c2=B(u2,[["render",m2]]),p2={components:{UserInfo:He,Details:c2,AdminPageHeader:ge,UserBalance:Fa,ExprotTable:_t},setup(){const{userType:e,columns:l,filterableColumns:c}=Vo(),n=Me(),{formatAmountCurrency:h,getOrderTypeFromstring:y,statusColors:u,permsArray:d,convertToPositive:m,selectedWarehouse:p,willSubscriptionModuleVisible:_}=Y(),f=E(!1),g=E({}),b=E("sales"),v=qe();dt(()=>{(!(d.value.includes("customers_view")||d.value.includes("suppliers_view")||d.value.includes("admin"))||!_("reports"))&&v.push("admin.dashboard.index"),d.value.includes("customers_view")||d.value.includes("admin")?e.value="customers":(d.value.includes("suppliers_view")||d.value.includes("admin"))&&(e.value="suppliers")}),ee(()=>{k()});const k=()=>{n.tableUrl.value={url:`${e.value}?fields=id,xid,user_type,name,email,profile_image,profile_image_url,phone,details{purchase_order_count,purchase_return_count,sales_order_count,sales_return_count,total_amount,paid_amount,due_amount}`,filters:""},n.table.filterableColumns=c,n.exportDetails.value={allowExport:!0,exportType:"user_reports"},n.fetch({page:1})},$=(D,I)=>{g.value=I,b.value=D,f.value=!0};return me(p,(D,I)=>{k()}),{columns:l,...n,filterableColumns:c,statusColors:u,userType:e,formatAmountCurrency:h,convertToPositive:m,getOrderTypeFromstring:y,setUrlData:k,permsArray:d,detailsVisible:f,openUserReportDrawer:$,selectedUser:g,activeOrderType:b}}},_2={class:"table-responsive"},f2=["onClick"],g2={key:1},y2=["onClick"],h2={key:1},b2=["onClick"],v2={key:1},k2=["onClick"],w2={key:1};function C2(e,l,c,n,h,y){const u=o("ExprotTable"),d=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("AdminPageHeader"),g=o("a-col"),b=o("a-select-option"),v=o("a-select"),k=o("a-input-search"),$=o("a-input-group"),D=o("a-row"),I=o("admin-page-filters"),F=o("a-tab-pane"),P=o("a-tabs"),T=o("UserInfo"),U=o("UserBalance"),M=o("a-table"),W=o("Details"),V=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.users_reports"),class:"p-0"},{extra:a(()=>[t(u,{exportType:"user_reports",tableName:"users-reports-table",title:e.$t("menu.users_reports")},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.users_reports")),1)]),_:1})]),_:1})]),_:1}),t(I,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(D,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:10,xl:10},{default:a(()=>[t($,{compact:""},{default:a(()=>[t(v,{style:{width:"35%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=K=>e.table.searchColumn=K),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,K=>(r(),C(b,{key:K.key},{default:a(()=>[i(s(K.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(k,{style:{width:"65%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=K=>e.table.searchString=K),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(V,null,{default:a(()=>[t(D,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[t(P,{activeKey:n.userType,"onUpdate:activeKey":l[2]||(l[2]=K=>n.userType=K),onChange:n.setUrlData},{default:a(()=>[n.permsArray.includes("customers_view")||n.permsArray.includes("admin")?(r(),C(F,{key:"customers",tab:e.$t("menu.customers")},null,8,["tab"])):A("",!0),n.permsArray.includes("suppliers_view")||n.permsArray.includes("admin")?(r(),C(F,{key:"suppliers",tab:e.$t("menu.suppliers")},null,8,["tab"])):A("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),t(D,{gutter:[16,16]},{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",_2,[t(M,{columns:n.columns,"row-key":K=>K.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"users-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:K,text:q,record:L})=>[K.dataIndex==="name"?(r(),C(T,{key:0,user:L},null,8,["user"])):A("",!0),K.dataIndex==="user_details.purchase_order_count"?(r(),S(O,{key:1},[n.permsArray.includes("purchases_view")||n.permsArray.includes("admin")?(r(),S("a",{key:0,onClick:X=>n.openUserReportDrawer("",L)},s(L.details.purchase_order_count),9,f2)):(r(),S("span",g2,s(L.details.purchase_order_count),1))],64)):A("",!0),K.dataIndex==="user_details.purchase_return_count"?(r(),S(O,{key:2},[n.permsArray.includes("purchase_returns_view")||n.permsArray.includes("admin")?(r(),S("a",{key:0,onClick:X=>n.openUserReportDrawer("returns",L)},s(L.details.purchase_return_count),9,y2)):(r(),S("span",h2,s(L.details.purchase_return_count),1))],64)):A("",!0),K.dataIndex==="user_details.sales_order_count"?(r(),S(O,{key:3},[n.permsArray.includes("sales_view")||n.permsArray.includes("admin")?(r(),S("a",{key:0,onClick:X=>n.openUserReportDrawer("",L)},s(L.details.sales_order_count),9,b2)):(r(),S("span",v2,s(L.details.sales_order_count),1))],64)):A("",!0),K.dataIndex==="user_details.sales_return_count"?(r(),S(O,{key:4},[n.permsArray.includes("sales_returns_view")||n.permsArray.includes("admin")?(r(),S("a",{key:0,onClick:X=>n.openUserReportDrawer("returns",L)},s(L.details.sales_return_count),9,k2)):(r(),S("span",w2,s(L.details.sales_return_count),1))],64)):A("",!0),K.dataIndex==="user_details.total_amount"?(r(),S(O,{key:5},[i(s(n.formatAmountCurrency(n.convertToPositive(L.details.total_amount))),1)],64)):A("",!0),K.dataIndex==="user_details.paid_amount"?(r(),S(O,{key:6},[i(s(n.formatAmountCurrency(n.convertToPositive(L.details.paid_amount))),1)],64)):A("",!0),K.dataIndex==="user_details.due_amount"?(r(),C(U,{key:7,amount:L.details.due_amount},null,8,["amount"])):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1}),t(W,{visible:n.detailsVisible,onClosed:l[3]||(l[3]=K=>n.detailsVisible=!1),data:n.selectedUser,orderType:n.activeOrderType,destroyOnClose:!0},null,8,["visible","data","orderType"])]),_:1})],64)}const S2=B(p2,[["render",C2]]),$2={components:{AdminPageHeader:ge,Payments:Uo,DateRangePicker:tt,WalletOutlined:jn,BankOutlined:Fn},setup(){const{permsArray:e}=Y(),l=E("cash"),c=qe(),n=Se({dates:[]});return dt(()=>{e.value.includes("customers_view")||e.value.includes("suppliers_view")||e.value.includes("admin")||c.push("admin.dashboard.index")}),{activeType:l,filters:n}}};function D2(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("DateRangePicker"),g=o("a-col"),b=o("a-row"),v=o("admin-page-filters"),k=o("WalletOutlined"),$=o("a-tab-pane"),D=o("BankOutlined"),I=o("a-tabs"),F=o("Payments"),P=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.cash_bank"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.cash_bank")),1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:a(()=>[t(b,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:6,xl:4},{default:a(()=>[t(f,{onDateTimeChanged:l[0]||(l[0]=T=>{n.filters.dates=T})})]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(b,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[t(I,{activeKey:n.activeType,"onUpdate:activeKey":l[1]||(l[1]=T=>n.activeType=T)},{default:a(()=>[t($,{key:"cash"},{tab:a(()=>[w("span",null,[t(k),i(" "+s(e.$t("payments.cash")),1)])]),_:1}),t($,{key:"bank"},{tab:a(()=>[w("span",null,[t(D),i(" "+s(e.$t("payments.bank")),1)])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1}),t(F,{dates:n.filters.dates,paymentMode:n.activeType},null,8,["dates","paymentMode"])]),_:1})],64)}const A2=B($2,[["render",D2]]),T2=Z({props:{user_id:null,paymentMode:null,dates:{default:[],type:null}},components:{UserInfo:He,PaymentStatus:it},setup(e){const{salesSummaryColumns:l,orderHashableColumns:c}=qo(),{formatDateTime:n,formatAmountCurrency:h,selectedWarehouse:y}=Y(),u=je();ee(()=>{d(e)});const d=m=>{const p={};m.user_id&&m.user_id!=null&&(p.staff_user_id=m.user_id),u.tableUrl.value={url:"sales?fields=id,xid,order_date,invoice_number,total,payment_status,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type},staff_user_id,x_staff_user_id,staffMember{id,xid,name,profile_image,profile_image_url,user_type}",filters:p,extraFilters:{dates:m.dates}},u.hashable.value=[...c],u.table.sorter={field:"order_date",order:"desc"},u.exportDetails.value={allowExport:!0,exportType:"sales_summary_reports"},u.fetch({page:1})};return me(e,(m,p)=>{d(m)}),me(y,(m,p)=>{d(e)}),{salesSummaryColumns:l,...u,formatDateTime:n,formatAmountCurrency:h}}}),E2={key:0,class:"table-responsive"};function O2(e,l,c,n,h,y){const u=o("UserInfo"),d=o("PaymentStatus"),m=o("a-table"),p=o("a-col"),_=o("a-row");return r(),C(_,null,{default:a(()=>[t(p,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),S("div",E2,[t(m,{columns:e.salesSummaryColumns,"row-key":f=>f.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"sales-summary-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:f,record:g})=>[f.dataIndex==="order_date"?(r(),S(O,{key:0},[i(s(e.formatDateTime(g.order_date)),1)],64)):A("",!0),f.dataIndex==="payment_type"?(r(),S(O,{key:1},[i(s(g.payment_type=="in"?e.$t("menu.payment_in"):e.$t("menu.payment_out")),1)],64)):A("",!0),f.dataIndex==="user_id"?(r(),C(u,{key:2,user:g.user},null,8,["user"])):A("",!0),f.dataIndex==="amount"?(r(),S(O,{key:3},[i(s(e.formatAmountCurrency(g.total)),1)],64)):A("",!0),f.dataIndex==="payment_status"?(r(),C(d,{key:4,paymentStatus:g.payment_status},null,8,["paymentStatus"])):A("",!0),f.dataIndex==="staff_user_id"?(r(),S(O,{key:5},[i(s(g.staff_member.name),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const I2=B(T2,[["render",O2]]),P2={components:{UserInfo:He,DateRangePicker:tt,AdminPageHeader:ge,SalesSummary:I2,ExprotTable:_t},setup(){const e=je(),{permsArray:l,willSubscriptionModuleVisible:c}=Y(),n=Se({user_id:void 0,payment_mode_id:void 0,dates:[]}),h=E({}),y=qe();return dt(()=>{(!(l.value.includes("users_view")||l.value.includes("admin"))||!c("reports"))&&y.push("admin.dashboard.index")}),ee(()=>{const u=axiosAdmin.get("users?limit=10000");Promise.all([u]).then(([d])=>{h.value=d.data})}),{...e,filters:n,users:h,permsArray:l}}};function U2(e,l,c,n,h,y){const u=o("ExprotTable"),d=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("AdminPageHeader"),g=o("a-col"),b=o("a-select-option"),v=o("a-select"),k=o("DateRangePicker"),$=o("a-row"),D=o("admin-page-filters"),I=o("SalesSummary"),F=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.sales_summary"),class:"p-0"},{extra:a(()=>[t(u,{exportType:"sales_summary_reports",tableName:"sales-summary-reports-table",title:`${e.$t("menu.sales_summary")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.sales_summary")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t($,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t($,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(v,{value:n.filters.user_id,"onUpdate:value":l[0]||(l[0]=P=>n.filters.user_id=P),placeholder:e.$t("common.select_default_text",[e.$t("staff_member.staff_member")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.users,P=>(r(),C(b,{key:P.xid,title:P.name,value:P.xid},{default:a(()=>[i(s(P.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(g,{xs:24,sm:24,md:10,lg:8,xl:8},{default:a(()=>[t(k,{onDateTimeChanged:l[1]||(l[1]=P=>{n.filters.dates=P})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(I,{user_id:n.filters.user_id,dates:n.filters.dates},null,8,["user_id","dates"])]),_:1})],64)}const F2=B(P2,[["render",U2]]),q2=Z({props:{category_id:null,brand_id:null},components:{UserInfo:He,PaymentStatus:it},setup(e){const{summaryColumns:l,hashableColumns:c}=Mo(),{formatDateTime:n,formatAmountCurrency:h,selectedWarehouse:y}=Y(),u=je();ee(()=>{d(e)});const d=m=>{const p={};m.category_id&&m.category_id!=null&&(p.category_id=m.category_id),m.brand_id&&m.brand_id!=null&&(p.brand_id=m.brand_id),u.tableUrl.value={url:"products?fields=id,xid,name,,item_code,image,image_url,category_id,x_category_id,category{id,xid,name},brand_id,x_brand_id,brand{id,xid,name},unit_id,x_unit_id,unit{id,xid,name,short_name},details{stock_quantitiy_alert,opening_stock,opening_stock_date,wholesale_price,wholesale_quantity,mrp,purchase_price,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type,current_stock,warehouse_id,x_warehouse_id,status},details:tax{id,xid,name,rate}",filters:p},u.hashable.value=[...c],u.table.sorter={field:"name",order:"asc"},u.exportDetails.value={allowExport:!0,exportType:"stock_summary_reports"},u.fetch({page:1})};return me(e,(m,p)=>{d(m)}),me(y,(m,p)=>{d(e)}),{summaryColumns:l,...u,formatDateTime:n,formatAmountCurrency:h}}}),M2={key:0,class:"table-responsive"},R2=w("br",null,null,-1);function K2(e,l,c,n,h,y){const u=o("a-avatar"),d=o("a-badge"),m=o("a-typography-text"),p=o("a-table"),_=o("a-col"),f=o("a-row");return r(),C(f,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),S("div",M2,[t(p,{columns:e.summaryColumns,"row-key":g=>g.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"stock-summary-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:g,record:b})=>[g.dataIndex==="name"?(r(),C(d,{key:0},{default:a(()=>[t(u,{shape:"square",src:b.image_url},null,8,["src"]),i(" "+s(b.name),1)]),_:2},1024)):A("",!0),g.dataIndex==="category_id"?(r(),S(O,{key:1},[i(s(b.category.name),1)],64)):A("",!0),g.dataIndex==="brand_id"?(r(),S(O,{key:2},[i(s(b.brand&&b.brand.xid?b.brand.name:"-"),1)],64)):A("",!0),g.dataIndex==="sales_price"?(r(),S(O,{key:3},[i(s(e.formatAmountCurrency(b.details.sales_price)),1)],64)):A("",!0),g.dataIndex==="purchase_price"?(r(),S(O,{key:4},[i(s(e.formatAmountCurrency(b.details.purchase_price)),1)],64)):A("",!0),g.dataIndex==="current_stock"?(r(),S(O,{key:5},[i(s(`${b.details.current_stock} ${b.unit.short_name}`),1)],64)):A("",!0),g.dataIndex==="stock_value"?(r(),S(O,{key:6},[i(s(e.$t("product.by_purchase"))+" : ",1),t(m,{strong:""},{default:a(()=>[i(s(e.formatAmountCurrency(b.details.current_stock*b.details.purchase_price)),1)]),_:2},1024),R2,i(" "+s(e.$t("product.by_sales"))+" : ",1),t(m,{strong:""},{default:a(()=>[i(s(e.formatAmountCurrency(b.details.current_stock*b.details.sales_price)),1)]),_:2},1024)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const V2=B(q2,[["render",K2]]),z2={components:{AdminPageHeader:ge,StockSummary:V2,ExprotTable:_t},setup(){const e=je(),{permsArray:l,getRecursiveCategories:c,filterTreeNode:n,willSubscriptionModuleVisible:h}=Y(),y=Se({category_id:void 0,brand_id:void 0}),u=E([]),d=E([]),m=qe();dt(()=>{(!(l.value.includes("products_view")||l.value.includes("admin"))||!h("reports"))&&m.push("admin.dashboard.index")}),ee(()=>{p()});const p=()=>{const _=axiosAdmin.get("categories?limit=10000"),f=axiosAdmin.get("brands?limit=10000");Promise.all([_,f]).then(([g,b])=>{u.value=c(g),d.value=b.data})};return{...e,filters:y,categories:u,brands:d,permsArray:l,filterTreeNode:n}}};function L2(e,l,c,n,h,y){const u=o("ExprotTable"),d=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("AdminPageHeader"),g=o("a-col"),b=o("a-tree-select"),v=o("a-select-option"),k=o("a-select"),$=o("a-row"),D=o("admin-page-filters"),I=o("StockSummary"),F=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.stock_summary"),class:"p-0"},{extra:a(()=>[t(u,{exportType:"stock_summary_reports",tableName:"stock-summary-reports-table",title:`${e.$t("menu.stock_summary")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.stock_summary")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t($,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t($,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(b,{value:n.filters.category_id,"onUpdate:value":l[0]||(l[0]=P=>n.filters.category_id=P),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"250px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),"tree-data":n.categories,"allow-clear":"","tree-default-expand-all":"",filterTreeNode:n.filterTreeNode},null,8,["value","placeholder","tree-data","filterTreeNode"])]),_:1}),t(g,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(k,{value:n.filters.brand_id,"onUpdate:value":l[1]||(l[1]=P=>n.filters.brand_id=P),placeholder:e.$t("common.select_default_text",[e.$t("product.brand")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.brands,P=>(r(),C(v,{key:P.xid,title:P.name,value:P.xid},{default:a(()=>[i(s(P.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(I,{category_id:n.filters.category_id,brand_id:n.filters.brand_id},null,8,["category_id","brand_id"])]),_:1})],64)}const B2=B(z2,[["render",L2]]),W2=Z({props:{product_id:null},components:{UserInfo:He,PaymentStatus:it},setup(e){const{columns:l,hashableColumns:c}=Ro(),{formatDateTime:n,formatAmountCurrency:h,selectedWarehouse:y}=Y(),u=je();ee(()=>{d(e)});const d=m=>{const p={};m.product_id&&m.product_id!=null&&(p.x_id=m.product_id),u.tableUrl.value={url:"products?fields=id,xid,name,,item_code,image,image_url,category_id,x_category_id,category{id,xid,name},brand_id,x_brand_id,brand{id,xid,name},unit_id,x_unit_id,unit{id,xid,name,short_name},details{mrp,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type},details:tax{id,xid,name,rate}",extraFilters:p},u.hashable.value=[...c],u.table.sorter={field:"name",order:"asc"},u.exportDetails.value={allowExport:!0,exportType:"rate_list_reports"},u.fetch({page:1})};return me(e,(m,p)=>{d(m)}),me(y,(m,p)=>{d(e)}),{columns:l,...u,formatDateTime:n,formatAmountCurrency:h}}}),j2={key:0,class:"table-responsive"};function H2(e,l,c,n,h,y){const u=o("a-avatar"),d=o("a-badge"),m=o("a-table"),p=o("a-col"),_=o("a-row");return r(),C(_,null,{default:a(()=>[t(p,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),S("div",j2,[t(m,{columns:e.columns,"row-key":f=>f.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"rate-list-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:f,record:g})=>[f.dataIndex==="name"?(r(),C(d,{key:0},{default:a(()=>[t(u,{shape:"square",src:g.image_url},null,8,["src"]),i(" "+s(g.name),1)]),_:2},1024)):A("",!0),f.dataIndex==="category_id"?(r(),S(O,{key:1},[i(s(g.category&&g.category.name?g.category.name:"-"),1)],64)):A("",!0),f.dataIndex==="brand_id"?(r(),S(O,{key:2},[i(s(g.brand&&g.brand.name?g.brand.name:"-"),1)],64)):A("",!0),f.dataIndex==="mrp"?(r(),S(O,{key:3},[i(s(g.details.mrp?e.formatAmountCurrency(g.details.mrp):"-"),1)],64)):A("",!0),f.dataIndex==="sales_price"?(r(),S(O,{key:4},[i(s(e.formatAmountCurrency(g.details.sales_price)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const N2=B(W2,[["render",H2]]),Y2={components:{AdminPageHeader:ge,RateList:N2,ProductSearchInput:wt,ExprotTable:_t},setup(){const e=je(),{permsArray:l,willSubscriptionModuleVisible:c}=Y(),n=qe(),h=Se({product_id:void 0});return dt(()=>{(!(l.value.includes("products_view")||l.value.includes("admin"))||!c("reports"))&&n.push("admin.dashboard.index")}),{...e,permsArray:l,filters:h}}};function G2(e,l,c,n,h,y){const u=o("ExprotTable"),d=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("AdminPageHeader"),g=o("a-col"),b=o("ProductSearchInput"),v=o("a-row"),k=o("admin-page-filters"),$=o("RateList"),D=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.rate_list"),class:"p-0"},{extra:a(()=>[t(u,{exportType:"rate_list_reports",tableName:"rate-list-reports-table",title:`${e.$t("menu.rate_list")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.rate_list")),1)]),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(v,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(v,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[t(b,{onValueChanged:l[0]||(l[0]=I=>{n.filters.product_id=I})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t($,{product_id:n.filters.product_id},null,8,["product_id"])]),_:1})],64)}const J2=B(Y2,[["render",G2]]),Q2=Z({props:{product_id:null,category_id:null,dates:{default:[],type:null}},components:{UserInfo:He,PaymentStatus:it},setup(e){const{columns:l,hashableColumns:c}=Ko(),{formatDateTime:n,formatAmountCurrency:h,selectedWarehouse:y}=Y(),u=je();ee(()=>{u.table.pagination={pageSize:1e4,showSizeChanger:!1},d(e)});const d=p=>{const _={};p.product_id&&p.product_id!=null&&(_.product_id=p.product_id),u.tableUrl.value={url:"order-items?fields=id",filters:_,extraFilters:{product_sales_summary:!0,dates:p.dates,category_id:p.category_id}},u.hashable.value=[...c],u.table.sorter={field:"products.name",order:"asc"},u.exportDetails.value={allowExport:!0,exportType:"product_sales_summary_reports"},u.fetch({page:1})},m=pe(()=>{let p=0,_=0;return u.table.data.forEach(f=>{p+=f.product.details.purchase_price*f.unit_sold,_+=f.total_sales_price}),{totalPurchasePrice:p,totalSalesPrice:_}});return me(e,(p,_)=>{d(p)}),me(y,(p,_)=>{d(e)}),{columns:l,...u,formatDateTime:n,formatAmountCurrency:h,totals:m}}}),X2={key:0,class:"table-responsive"};function Z2(e,l,c,n,h,y){const u=o("a-avatar"),d=o("a-badge"),m=o("a-table-summary-cell"),p=o("a-typography-text"),_=o("a-table-summary-row"),f=o("a-table"),g=o("a-col"),b=o("a-row");return r(),C(b,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),S("div",X2,[t(f,{columns:e.columns,"row-key":v=>v.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"product-sales-summary-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:v,record:k})=>[v.dataIndex==="name"?(r(),C(d,{key:0},{default:a(()=>[t(u,{shape:"square",src:k.product.image_url},null,8,["src"]),i(" "+s(k.product.name),1)]),_:2},1024)):A("",!0),v.dataIndex==="unit_sold"?(r(),S(O,{key:1},[i(s(`${k.unit_sold} ${k.product.unit.short_name}`),1)],64)):A("",!0),v.dataIndex==="total_purchase_price"?(r(),S(O,{key:2},[i(s(e.formatAmountCurrency(k.unit_sold*k.product.details.purchase_price)),1)],64)):A("",!0),v.dataIndex==="total_sales_price"?(r(),S(O,{key:3},[i(s(e.formatAmountCurrency(k.total_sales_price)),1)],64)):A("",!0)]),summary:a(()=>[t(_,null,{default:a(()=>[t(m,{"col-span":2}),t(m,{"col-span":1},{default:a(()=>[t(p,{strong:""},{default:a(()=>[i(s(e.$t("common.total")),1)]),_:1})]),_:1}),t(m,{"col-span":1},{default:a(()=>[t(p,{strong:""},{default:a(()=>[i(s(e.formatAmountCurrency(e.totals.totalPurchasePrice)),1)]),_:1})]),_:1}),t(m,{"col-span":1},{default:a(()=>[t(p,{strong:""},{default:a(()=>[i(s(e.formatAmountCurrency(e.totals.totalSalesPrice)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const x2=B(Q2,[["render",Z2]]),ek={components:{AdminPageHeader:ge,ProductSaleSummary:x2,ProductSearchInput:wt,DateRangePicker:tt,ExprotTable:_t},setup(){const e=je(),{permsArray:l,getRecursiveCategories:c,filterTreeNode:n,willSubscriptionModuleVisible:h}=Y(),y=qe(),u=Se({product_id:void 0,category_id:void 0,dates:[]}),d=E([]);return dt(()=>{(!(l.value.includes("products_view")||l.value.includes("admin"))||!h("reports"))&&y.push("admin.dashboard.index")}),ee(()=>{const m=axiosAdmin.get("categories?limit=10000");Promise.all([m]).then(([p])=>{d.value=c(p)})}),{...e,permsArray:l,filters:u,filterTreeNode:n,categories:d}}};function tk(e,l,c,n,h,y){const u=o("ExprotTable"),d=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("AdminPageHeader"),g=o("a-col"),b=o("ProductSearchInput"),v=o("a-tree-select"),k=o("DateRangePicker"),$=o("a-row"),D=o("admin-page-filters"),I=o("ProductSaleSummary"),F=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.product_sales_summary"),class:"p-0"},{extra:a(()=>[t(u,{exportType:"product_sales_summary_reports",tableName:"product-sales-summary-reports-table",title:`${e.$t("menu.product_sales_summary")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.product_sales_summary")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t($,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t($,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[t(b,{onValueChanged:l[0]||(l[0]=P=>{n.filters.product_id=P})})]),_:1}),t(g,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(v,{value:n.filters.category_id,"onUpdate:value":l[1]||(l[1]=P=>n.filters.category_id=P),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"250px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),"tree-data":n.categories,"allow-clear":"","tree-default-expand-all":"",filterTreeNode:n.filterTreeNode},null,8,["value","placeholder","tree-data","filterTreeNode"])]),_:1}),t(g,{xs:24,sm:24,md:10,lg:6,xl:6},{default:a(()=>[t(k,{onDateTimeChanged:l[2]||(l[2]=P=>{n.filters.dates=P})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(I,{product_id:n.filters.product_id,dates:n.filters.dates,category_id:n.filters.category_id},null,8,["product_id","dates","category_id"])]),_:1})],64)}const ak=B(ek,[["render",tk]]),nk={components:{ProductSearchInput:wt,AdminPageHeader:ge,ExprotTable:_t,DateRangePicker:tt},setup(){const{permsArray:e,selectedWarehouse:l,formatAmountCurrency:c,formatDate:n,willSubscriptionModuleVisible:h}=Y(),{url:y,expenseColumns:u,expenseHashableColumns:d}=zo(),m=E(void 0),p=qe(),_=je(),f=E({expense_category_id:void 0,user_id:void 0}),g=E([]),b=E([]),v=E({dates:[]});dt(()=>{(!(e.value.includes("expenses_view")||e.value.includes("admin"))||!h("reports"))&&p.push("admin.dashboard.index")}),ee(()=>{const D=axiosAdmin.get("expense-categories?limit=10000"),I=axiosAdmin.get("users?limit=10000");Promise.all([D,I]).then(([F,P])=>{g.value=F.data,b.value=P.data}),k()});const k=()=>{_.tableUrl.value={url:y,filters:f,extraFilters:v},_.hashable.value=[...d],_.exportDetails.value={allowExport:!0,exportType:"expense_reports"},_.fetch({page:1})},$=pe(()=>{let D=0;return _.table.data.forEach(I=>{D+=I.amount}),{totalAmount:D}});return me(l,(D,I)=>{k()}),{expenseColumns:u,..._,searchProductId:m,getTableData:k,permsArray:e,filters:f,extraFilters:v,expenseCategories:g,staffMembers:b,formatAmountCurrency:c,formatDate:n,totals:$}}},ok={class:"table-responsive"};function lk(e,l,c,n,h,y){const u=o("ExprotTable"),d=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("AdminPageHeader"),g=o("a-col"),b=o("a-select-option"),v=o("a-select"),k=o("DateRangePicker"),$=o("a-row"),D=o("admin-page-filters"),I=o("a-table-summary-cell"),F=o("a-typography-text"),P=o("a-table-summary-row"),T=o("a-table"),U=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.expense_reports"),class:"p-0"},{extra:a(()=>[t(u,{exportType:"expense_reports",tableName:"expense-reports-table",title:`${e.$t("menu.expenses")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.expense_reports")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t($,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t($,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(v,{value:n.filters.expense_category_id,"onUpdate:value":l[0]||(l[0]=M=>n.filters.expense_category_id=M),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),onChange:n.getTableData,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),S(O,null,G(n.expenseCategories,M=>(r(),C(b,{key:M.xid,value:M.xid,label:M.name},{default:a(()=>[i(s(M.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(g,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(v,{value:n.filters.user_id,"onUpdate:value":l[1]||(l[1]=M=>n.filters.user_id=M),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),onChange:n.getTableData,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),S(O,null,G(n.staffMembers,M=>(r(),C(b,{key:M.xid,value:M.xid,label:M.name},{default:a(()=>[i(s(M.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(g,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(k,{onDateTimeChanged:l[2]||(l[2]=M=>{n.extraFilters.dates=M,n.getTableData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(U,null,{default:a(()=>[t($,null,{default:a(()=>[t(g,{span:24},{default:a(()=>[w("div",ok,[t(T,{columns:n.expenseColumns,"row-key":M=>M.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"expense-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:M,record:W})=>{var V;return[M.dataIndex==="expense_category_id"?(r(),S(O,{key:0},[i(s(W.expense_category.name),1)],64)):A("",!0),M.dataIndex==="amount"?(r(),S(O,{key:1},[i(s(n.formatAmountCurrency(W.amount)),1)],64)):A("",!0),M.dataIndex==="date"?(r(),S(O,{key:2},[i(s(n.formatDate(W.date)),1)],64)):A("",!0),M.dataIndex==="user_id"?(r(),S(O,{key:3},[i(s((V=W.user)==null?void 0:V.name),1)],64)):A("",!0)]}),summary:a(()=>[t(P,null,{default:a(()=>[t(I,{"col-span":2}),t(I,{"col-span":1},{default:a(()=>[t(F,{strong:""},{default:a(()=>[i(s(e.$t("common.total")),1)]),_:1})]),_:1}),t(I,{"col-span":1},{default:a(()=>[t(F,{strong:""},{default:a(()=>[i(s(n.formatAmountCurrency(n.totals.totalAmount)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const sk=B(nk,[["render",lk]]),rk={components:{BarChartOutlined:Kl,UnorderedListOutlined:Ln,ShoppingCartOutlined:yt,ClockCircleOutlined:Vl,ProductSearchInput:wt,AdminPageHeader:ge,ExprotTable:_t,DateRangePicker:tt},setup(){const{permsArray:e,selectedWarehouse:l,formatAmountCurrency:c,formatDate:n,willSubscriptionModuleVisible:h}=Y(),y=qe(),u=Se({dates:[],active_report_type:"daily_income"}),d=E([]),m=Ce(),p=E("by_order"),_=E([]);dt(()=>{(!(e.value.includes("products_view")&&e.value.includes("purchases_view")&&e.value.includes("sales_view")&&e.value.includes("purchase_returns_view")&&e.value.includes("sales_returns_view")||e.value.includes("admin"))||!h("reports"))&&y.push("admin.dashboard.index")}),ee(()=>{f(u)});const f=g=>{axiosAdmin.post("reports/profit-loss",g).then(b=>{d.value=b.data.results,_.value=b.data.dates;var v="profit_loss_reports",k=m.state.auth.allExportData,$=Xe(k,I=>I.export_type!=v),D=Xe($,I=>I.export_type!="profit_loss_reports_by_dates");m.commit("auth/updatAllExportData",[...D,{export_type:v,data:[b.data.results],url:"reports/profit-loss"},{export_type:"profit_loss_reports_by_dates",data:b.data.dates,url:"reports/profit-loss"}])})};return me(u,(g,b)=>{f(g)}),{permsArray:e,formatAmountCurrency:c,formatDate:n,filters:u,reportData:d,dateWiseReportResults:_,selectedTab:p}}},dk={key:0,id:"profit-loss-reports-by-dates-table"};function ik(e,l,c,n,h,y){const u=o("ExprotTable"),d=o("a-page-header"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("AdminPageHeader"),g=o("a-col"),b=o("DateRangePicker"),v=o("a-row"),k=o("admin-page-filters"),$=o("ShoppingCartOutlined"),D=o("a-descriptions-item"),I=o("a-typography-text"),F=o("a-descriptions"),P=o("a-tab-pane"),T=o("ClockCircleOutlined"),U=o("a-result"),M=o("a-tabs"),W=o("admin-page-table-content");return r(),S(O,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.profit_loss"),class:"p-0"},{extra:a(()=>[n.selectedTab=="by_order"?(r(),C(u,{key:0,exportType:"profit_loss_reports",tableName:"profit-loss-reports-table",title:`${e.$t("menu.profit_loss")} ${e.$t("menu.reports")}`},null,8,["title"])):A("",!0),n.selectedTab=="by_dates"&&n.dateWiseReportResults.length>0?(r(),C(u,{key:1,exportType:"profit_loss_reports_by_dates",tableName:"profit-loss-reports-by-dates-table",title:`${e.$t("menu.profit_loss")} ${e.$t("menu.reports")}`},null,8,["title"])):A("",!0)]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[i(s(e.$t("menu.profit_loss")),1)]),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(v,{gutter:[16,16]},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:10,xl:10}),t(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(v,{gutter:[16,16],justify:"end"},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(b,{onDateTimeChanged:l[0]||(l[0]=V=>{n.filters.dates=V})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(M,{activeKey:n.selectedTab,"onUpdate:activeKey":l[1]||(l[1]=V=>n.selectedTab=V)},{default:a(()=>[t(P,{key:"by_order"},{tab:a(()=>[t($),i(" "+s(e.$t("report.by_order")),1)]),default:a(()=>[t(v,{id:"profit-loss-reports-table"},{default:a(()=>[t(g,{span:24,class:"mt-10"},{default:a(()=>[t(F,{title:e.$t("common.profit_reports_by_orders"),column:1,bordered:"",size:"middle"},{default:a(()=>[t(D,null,{label:a(()=>[w("strong",null,s(e.$t("common.particulars")),1)]),default:a(()=>[w("strong",null,s(e.$t("common.amount")),1)]),_:1}),t(D,null,{label:a(()=>[i(s(e.$t("menu.sales"))+" (+) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(n.reportData.sales)),1)]),_:1}),t(D,null,{label:a(()=>[i(s(e.$t("menu.purchases"))+" (-) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(n.reportData.purchases)),1)]),_:1}),t(D,null,{label:a(()=>[i(s(e.$t("menu.purchase_returns"))+" (+) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(n.reportData.purchase_returns)),1)]),_:1}),t(D,null,{label:a(()=>[i(s(e.$t("menu.sales_returns"))+" (-) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(n.reportData.sales_returns)),1)]),_:1}),t(D,null,{label:a(()=>[i(s(e.$t("stock_transfer.stock_transfer_transfered"))+" (+) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(n.reportData.stock_transfer_transfered)),1)]),_:1}),t(D,null,{label:a(()=>[i(s(e.$t("stock_transfer.stock_transfer_received"))+" (-) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(n.reportData.stock_transfer_received)),1)]),_:1}),t(D,null,{label:a(()=>[i(s(e.$t("menu.expenses"))+" (-) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(n.reportData.expenses)),1)]),_:1}),t(D,{label:e.$t("common.profit")},{default:a(()=>[t(I,{type:n.reportData.profit>0?"success":"danger",strong:""},{default:a(()=>[i(s(n.formatAmountCurrency(n.reportData.profit)),1)]),_:1},8,["type"])]),_:1},8,["label"])]),_:1},8,["title"])]),_:1})]),_:1})]),_:1}),t(P,{key:"by_dates"},{tab:a(()=>[t(T),i(" "+s(e.$t("report.by_dates")),1)]),default:a(()=>[n.dateWiseReportResults.length>0?(r(),S("div",dk,[(r(!0),S(O,null,G(n.dateWiseReportResults,(V,K,q)=>(r(),C(v,{key:V.date},{default:a(()=>[t(g,{span:24,class:ca(["mt-10",`tbl_result_${K}`])},{default:a(()=>[t(F,{style:{"margin-top":"10px"},column:1,bordered:"",size:"middle"},{default:a(()=>[t(D,null,{label:a(()=>[w("strong",null,s(n.formatDate(V.date)),1)]),_:2},1024),t(D,null,{label:a(()=>[w("strong",null,s(e.$t("common.particulars")),1)]),default:a(()=>[w("strong",null,s(e.$t("common.amount")),1)]),_:1}),t(D,null,{label:a(()=>[i(s(e.$t("menu.sales"))+" (+) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(V.result.sales)),1)]),_:2},1024),t(D,null,{label:a(()=>[i(s(e.$t("menu.purchases"))+" (-) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(V.result.purchases)),1)]),_:2},1024),t(D,null,{label:a(()=>[i(s(e.$t("menu.purchase_returns"))+" (+) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(V.result.purchase_returns)),1)]),_:2},1024),t(D,null,{label:a(()=>[i(s(e.$t("menu.sales_returns"))+" (-) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(V.result.sales_returns)),1)]),_:2},1024),t(D,null,{label:a(()=>[i(s(e.$t("stock_transfer.stock_transfer_transfered"))+" (+) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(V.result.stock_transfer_transfered)),1)]),_:2},1024),t(D,null,{label:a(()=>[i(s(e.$t("stock_transfer.stock_transfer_received"))+" (-) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(V.result.stock_transfer_received)),1)]),_:2},1024),t(D,null,{label:a(()=>[i(s(e.$t("menu.expenses"))+" (-) ",1)]),default:a(()=>[i(" "+s(n.formatAmountCurrency(V.result.expenses)),1)]),_:2},1024),t(D,{label:e.$t("common.profit")},{default:a(()=>[t(I,{type:V.result.profit>0?"success":"danger",strong:""},{default:a(()=>[i(s(n.formatAmountCurrency(V.result.profit)),1)]),_:2},1032,["type"])]),_:2},1032,["label"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])):(r(),C(v,{key:1},{default:a(()=>[t(g,{span:24,class:"mt-10"},{default:a(()=>[t(U,{title:e.$t("report.select_date"),"sub-title":e.$t("report.select_date_message")},null,8,["title","sub-title"])]),_:1})]),_:1}))]),_:1})]),_:1},8,["activeKey"])]),_:1})],64)}const uk=B(rk,[["render",ik]]),mk=[{path:"/admin/reports/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"payments",component:l2,name:"admin.reports.payments.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"payments"}},{path:"stock-alert",component:i2,name:"admin.reports.stock.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"stock_alert"}},{path:"users",component:S2,name:"admin.reports.users.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"users_reports"}},{path:"sales-summary",component:F2,name:"admin.reports.sales_summary.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"sales_summary",permission:"users_view"}},{path:"stock-summary",component:B2,name:"admin.reports.stock_summary.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"stock_summary",permission:"products_view"}},{path:"rate-list",component:J2,name:"admin.reports.rate_list.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"rate_list",permission:"products_view"}},{path:"product-sales-summary",component:ak,name:"admin.reports.product_sales_summary.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"product_sales_summary",permission:"products_view"}},{path:"cash-bank",component:A2,name:"admin.reports.cash_bank.index",meta:{requireAuth:!0,menuParent:"cash_bank",menuKey:"cash_bank"}},{path:"expenses",component:sk,name:"admin.reports.expenses.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"expense_reports"}},{path:"profit-loss",component:uk,name:"admin.reports.profit_loss.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"profit_loss"}}]}],ck={props:{showFilter:{default:!0}},emits:["addOrEditSuccess"],components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:Pa,OnlineStoreStatus:Oo},setup(e,{emit:l}){const{permsArray:c,appSetting:n}=Y(),{url:h,addEditUrl:y,initData:u,columns:d,filterableColumns:m}=Ia(),p=Me();return ee(()=>{p.tableUrl.value={url:h},p.table.filterableColumns=m,p.fetch({page:1}),p.crudUrl.value=y,p.langKey.value="warehouse",p.initData.value={...u},p.formData.value={...u}}),{appSetting:n,permsArray:c,columns:d,...p,filterableColumns:m,addOrEditSuccess:f=>{p.addEditSuccess(f),l("addOrEditSuccess",{action_type:p.addEditType.value,xid:f})}}}},pk={class:"table-responsive"},_k=w("br",null,null,-1);function fk(e,l,c,n,h,y){const u=o("AddEdit"),d=o("a-select-option"),m=o("a-select"),p=o("a-input-search"),_=o("a-input-group"),f=o("a-col"),g=o("a-row"),b=o("a-image"),v=o("OnlineStoreStatus"),k=o("a-button"),$=o("router-link"),D=o("EditOutlined"),I=o("DeleteOutlined"),F=o("a-table");return r(),S("div",null,[t(u,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:n.addOrEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),c.showFilter?(r(),C(g,{key:0,gutter:[15,15],class:"mb-20"},{default:a(()=>[t(f,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(_,{compact:""},{default:a(()=>[t(m,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=P=>e.table.searchColumn=P),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,P=>(r(),C(d,{key:P.key},{default:a(()=>[i(s(P.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(p,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=P=>e.table.searchString=P),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})):A("",!0),t(g,{class:"mt-20"},{default:a(()=>[t(f,{span:24},{default:a(()=>[w("div",pk,[t(F,{columns:n.columns,"row-key":P=>P.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:P,record:T})=>[P.dataIndex==="logo"?(r(),C(b,{key:0,width:48,src:T.logo_url},null,8,["src"])):A("",!0),P.dataIndex==="online_store_enabled"?(r(),S(O,{key:1},[t(v,{status:T.online_store_enabled,x_warehouse_id:T.xid,onSuccess:e.fetch},null,8,["status","x_warehouse_id","onSuccess"]),T.online_store_enabled==1?(r(),S(O,{key:0},[_k,t($,{to:{name:"front.homepage",params:{warehouse:T.slug}},target:"_blank"},{default:a(()=>[t(k,{type:"link",class:"p-0 mt-5"},{default:a(()=>[i(s(e.$t("warehouse.view_online_store")),1)]),_:1})]),_:2},1032,["to"])],64)):A("",!0)],64)):A("",!0),P.dataIndex==="action"?(r(),S(O,{key:2},[n.permsArray.includes("warehouses_edit")||n.permsArray.includes("admin")?(r(),C(k,{key:0,type:"primary",onClick:U=>e.editItem(T),style:{"margin-left":"4px"}},{icon:a(()=>[t(D)]),_:2},1032,["onClick"])):A("",!0),(n.permsArray.includes("warehouses_delete")||n.permsArray.includes("admin"))&&n.appSetting.x_warehouse_id!=T.xid?(r(),C(k,{key:1,type:"primary",onClick:U=>e.showDeleteConfirm(T.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(I)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})])}const gk=B(ck,[["render",fk]]),yk={props:{showFilter:{default:!0},panelType:{type:String,default:"admin"}},emits:["addOrEditSuccess"],components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:Ma},setup(e,{emit:l}){const{permsArray:c,appSetting:n}=Y(),{url:h,addEditUrl:y,initData:u,columns:d,filterableColumns:m}=qa(e.panelType),p=Me();return ee(()=>{p.tableUrl.value={url:h},p.table.filterableColumns=m,p.fetch({page:1}),p.crudUrl.value=y,p.langKey.value="currency",p.initData.value={...u},p.formData.value={...u}}),{appSetting:n,permsArray:c,columns:d,...p,filterableColumns:m,addOrEditSuccess:f=>{p.addEditSuccess(f),l("addOrEditSuccess",{action_type:p.addEditType.value,xid:f})}}}},hk={class:"table-responsive"};function bk(e,l,c,n,h,y){const u=o("AddEdit"),d=o("a-select-option"),m=o("a-select"),p=o("a-input-search"),_=o("a-input-group"),f=o("a-col"),g=o("a-row"),b=o("EditOutlined"),v=o("a-button"),k=o("DeleteOutlined"),$=o("a-table");return r(),S("div",null,[t(u,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:n.addOrEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),c.showFilter?(r(),C(g,{key:0,gutter:[15,15],class:"mb-20"},{default:a(()=>[t(f,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(_,{compact:""},{default:a(()=>[t(m,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=D=>e.table.searchColumn=D),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,D=>(r(),C(d,{key:D.key},{default:a(()=>[i(s(D.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(p,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=D=>e.table.searchString=D),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})):A("",!0),t(g,{class:"mt-20"},{default:a(()=>[t(f,{span:24},{default:a(()=>[w("div",hk,[t($,{columns:n.columns,"row-key":D=>D.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:D,record:I})=>[D.dataIndex==="action"?(r(),S(O,{key:0},[c.panelType=="admin"&&(n.permsArray.includes("currencies_edit")||n.permsArray.includes("admin"))||c.panelType=="superadmin"?(r(),C(v,{key:0,type:"primary",onClick:F=>e.editItem(I),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])):A("",!0),(c.panelType=="admin"&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&n.appSetting.x_currency_id!=I.xid?(r(),C(v,{key:1,type:"primary",onClick:F=>e.showDeleteConfirm(I.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})])}const vk=B(yk,[["render",bk]]),kk={props:{showFilter:{default:!0}},emits:["addOrEditSuccess"],components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:Ea},setup(e,{emit:l}){const{permsArray:c}=Y(),{url:n,addEditUrl:h,initData:y,columns:u,filterableColumns:d}=Ta(),m=Me();return ee(()=>{m.tableUrl.value={url:n},m.table.filterableColumns=d,m.fetch({page:1}),m.crudUrl.value=h,m.langKey.value="payment_mode",m.initData.value={...y},m.formData.value={...y}}),{permsArray:c,columns:u,...m,filterableColumns:d,addOrEditSuccess:_=>{m.addEditSuccess(_),l("addOrEditSuccess",{action_type:m.addEditType.value,xid:_})}}}},wk={class:"table-responsive"},Ck={key:0},Sk={key:1};function $k(e,l,c,n,h,y){const u=o("AddEdit"),d=o("a-select-option"),m=o("a-select"),p=o("a-input-search"),_=o("a-input-group"),f=o("a-col"),g=o("a-row"),b=o("EditOutlined"),v=o("a-button"),k=o("DeleteOutlined"),$=o("a-table");return r(),S("div",null,[t(u,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:n.addOrEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),c.showFilter?(r(),C(g,{key:0,gutter:[15,15],class:"mb-20"},{default:a(()=>[t(f,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(_,{compact:""},{default:a(()=>[t(m,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=D=>e.table.searchColumn=D),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,D=>(r(),C(d,{key:D.key},{default:a(()=>[i(s(D.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(p,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=D=>e.table.searchString=D),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})):A("",!0),t(g,{class:"mt-20"},{default:a(()=>[t(f,{span:24},{default:a(()=>[w("div",wk,[t($,{columns:n.columns,"row-key":D=>D.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:D,record:I})=>[D.dataIndex==="action"?(r(),S(O,{key:0},[I.name.toLowerCase()!="cash"?(r(),S("span",Ck,[n.permsArray.includes("payment_modes_edit")||n.permsArray.includes("admin")?(r(),C(v,{key:0,type:"primary",onClick:F=>e.editItem(I),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])):A("",!0),n.permsArray.includes("payment_modes_delete")||n.permsArray.includes("admin")?(r(),C(v,{key:1,type:"primary",onClick:F=>e.showDeleteConfirm(I.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(k)]),_:2},1032,["onClick"])):A("",!0)])):(r(),S("span",Sk," - "))],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})])}const Dk=B(kk,[["render",$k]]),Ak={props:{showSubmitButton:{default:!0}},emits:["updateSuccess"],components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,ExclamationCircleOutlined:Te,SaveOutlined:he,SettingOutlined:pt,ColorPicker:Bn,Upload:ot,CurrencyAddButton:Do,WarehouseAddButton:Ft,CreateMenuSetting:Eo,FormItemHeading:aa},setup(e,{emit:l}){const{addEditRequestAdmin:c,loading:n,rules:h}=ve(),{permsArray:y,appSetting:u,dayjsObject:d,appType:m}=Y(),{t:p}=te(),_=Ce(),f=E({}),g=E([]),b=E([]),v=E([]),k=E([]),$=E([]),D=u.value,I="currencies?limit=10000",F="warehouses?limit=10000",P="timezones",T=E("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),U=window.config.theme_mode;ee(()=>{const L=axiosAdmin.get(F),X=axiosAdmin.get(I),J=axiosAdmin.get(P);Promise.all([L,X,J]).then(([le,H,N])=>{b.value=le.data,g.value=H.data,v.value=N.data.timezones,k.value=N.data.date_formates,$.value=N.data.time_formates,M()})});const M=()=>{f.value={name:D.name,short_name:D.short_name,email:D.email,phone:D.phone,address:D.address,left_sidebar_theme:D.left_sidebar_theme,dark_logo:D.dark_logo,dark_logo_url:D.dark_logo_url,light_logo:D.light_logo,light_logo_url:D.light_logo_url,small_dark_logo:D.small_dark_logo,small_light_logo:D.small_light_logo,small_dark_logo_url:D.small_dark_logo_url,small_light_logo_url:D.small_light_logo_url,login_image:D.login_image,login_image_url:D.login_image_url,shortcut_menus:D.shortcut_menus,rtl:D.rtl,currency_id:D.x_currency_id,warehouse_id:D.x_warehouse_id,primary_color:D.primary_color,timezone:D.timezone,date_format:D.date_format,time_format:D.time_format,auto_detect_timezone:D.auto_detect_timezone,app_debug:D.app_debug,update_app_notification:D.update_app_notification,_method:"PUT"}};return{appType:m,permsArray:y,formData:f,loading:n,rules:h,warehouses:b,currencies:g,onSubmit:()=>{c({url:`companies/${D.xid}`,data:f.value,successMessage:p("company.updated"),success:L=>{_.dispatch("auth/updateApp"),l("updateSuccess")}})},currencyAdded:()=>{axiosAdmin.get(I).then(L=>{g.value=L.data})},warehouseAdded:()=>{axiosAdmin.get(F).then(L=>{b.value=L.data})},gradientColor:T,timezones:v,dateFormats:k,timeFormats:$,dayjsObject:d,appThemeMode:U,addMenuSettingUpdated:L=>{f.value.shortcut_menus=L}}}},Tk={class:"mt-40"},Ek={style:{display:"flex"}},Ok={style:{display:"flex"}},Ik={class:"mt-30"},Pk={class:"mt-30"};function Uk(e,l,c,n,h,y){const u=o("FormItemHeading"),d=o("a-input"),m=o("a-form-item"),p=o("a-col"),_=o("a-row"),f=o("a-select-option"),g=o("a-select"),b=o("CurrencyAddButton"),v=o("WarehouseAddButton"),k=o("a-switch"),$=o("color-picker"),D=o("Upload"),I=o("SaveOutlined"),F=o("a-button"),P=o("a-form");return r(),C(P,{layout:"vertical"},{default:a(()=>[w("div",Tk,[t(u,null,{default:a(()=>[i(s(e.$t("setup_company.basic_settings")),1)]),_:1})]),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null,class:"required"},{default:a(()=>[t(d,{value:n.formData.name,"onUpdate:value":l[0]||(l[0]=T=>n.formData.name=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.short_name"),name:"short_name",help:n.rules.short_name?n.rules.short_name.message:null,validateStatus:n.rules.short_name?"error":null,class:"required"},{default:a(()=>[t(d,{value:n.formData.short_name,"onUpdate:value":l[1]||(l[1]=T=>n.formData.short_name=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null,class:"required"},{default:a(()=>[t(d,{value:n.formData.email,"onUpdate:value":l[2]||(l[2]=T=>n.formData.email=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null,class:"required"},{default:a(()=>[t(d,{value:n.formData.phone,"onUpdate:value":l[3]||(l[3]=T=>n.formData.phone=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.date_format"),name:"date_format",help:n.rules.date_format?n.rules.date_format.message:null,validateStatus:n.rules.date_format?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.date_format,"onUpdate:value":l[4]||(l[4]=T=>n.formData.date_format=T),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.dateFormats,(T,U)=>(r(),C(f,{key:U,value:T},{default:a(()=>[i(s(`(${U}) => `+n.dayjsObject().format(T)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.time_format"),name:"time_format",help:n.rules.time_format?n.rules.time_format.message:null,validateStatus:n.rules.time_format?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.time_format,"onUpdate:value":l[5]||(l[5]=T=>n.formData.time_format=T),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.timeFormats,(T,U)=>(r(),C(f,{key:U,value:U},{default:a(()=>[i(s(`(${T}) => `+n.dayjsObject().format(U)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.currency"),name:"currency_id",help:n.rules.currency_id?n.rules.currency_id.message:null,validateStatus:n.rules.currency_id?"error":null,class:"required"},{default:a(()=>[w("span",Ek,[t(g,{value:n.formData.currency_id,"onUpdate:value":l[6]||(l[6]=T=>n.formData.currency_id=T),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.currencies,T=>(r(),C(f,{key:T.xid,value:T.xid},{default:a(()=>[i(s(`${T.name} (${T.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(b,{onOnAddSuccess:n.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("warehouse.warehouse"),name:"warehouse_id",help:n.rules.warehouse_id?n.rules.warehouse_id.message:null,validateStatus:n.rules.warehouse_id?"error":null,class:"required"},{default:a(()=>[w("span",Ok,[t(g,{value:n.formData.warehouse_id,"onUpdate:value":l[7]||(l[7]=T=>n.formData.warehouse_id=T),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.warehouses,T=>(r(),C(f,{key:T.xid,value:T.xid,label:T.name},{default:a(()=>[i(s(T.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),t(v,{onOnAddSuccess:n.warehouseAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(m,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:n.rules.auto_detect_timezone?n.rules.auto_detect_timezone.message:null,validateStatus:n.rules.auto_detect_timezone?"error":null},{default:a(()=>[t(k,{checked:n.formData.auto_detect_timezone,"onUpdate:checked":l[8]||(l[8]=T=>n.formData.auto_detect_timezone=T),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(m,{label:e.$t("company.default_timezone"),name:"timezone",help:n.rules.timezone?n.rules.timezone.message:null,validateStatus:n.rules.timezone?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.timezone,"onUpdate:value":l[9]||(l[9]=T=>n.formData.timezone=T),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),S(O,null,G(n.timezones,(T,U)=>(r(),C(f,{key:U,value:T},{default:a(()=>[i(s(T),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),n.appType=="non-saas"?(r(),C(p,{key:0,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(m,{label:e.$t("company.app_debug"),name:"app_debug",help:n.rules.app_debug?n.rules.app_debug.message:null,validateStatus:n.rules.app_debug?"error":null},{default:a(()=>[t(k,{checked:n.formData.app_debug,"onUpdate:checked":l[10]||(l[10]=T=>n.formData.app_debug=T),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0),n.appType=="non-saas"?(r(),C(p,{key:1,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(m,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:n.rules.update_app_notification?n.rules.update_app_notification.message:null,validateStatus:n.rules.update_app_notification?"error":null},{default:a(()=>[t(k,{checked:n.formData.update_app_notification,"onUpdate:checked":l[11]||(l[11]=T=>n.formData.update_app_notification=T),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0)]),_:1}),w("div",Ik,[t(u,null,{default:a(()=>[i(s(e.$t("setup_company.theme_settings")),1)]),_:1})]),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:n.rules.left_sidebar_theme?n.rules.left_sidebar_theme.message:null,validateStatus:n.rules.left_sidebar_theme?"error":null},{default:a(()=>[t(g,{value:n.formData.left_sidebar_theme,"onUpdate:value":l[12]||(l[12]=T=>n.formData.left_sidebar_theme=T),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:a(()=>[t(f,{key:"dark",value:"dark"},{default:a(()=>[i(s(e.$t("company.dark")),1)]),_:1}),n.appThemeMode!="dark"?(r(),C(f,{key:"light",value:"light"},{default:a(()=>[i(s(e.$t("company.light")),1)]),_:1})):A("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.primary_color"),name:"primary_color",help:n.rules.primary_color?n.rules.primary_color.message:null,validateStatus:n.rules.primary_color?"error":null},{default:a(()=>[t($,{pureColor:n.formData.primary_color,"onUpdate:pureColor":l[13]||(l[13]=T=>n.formData.primary_color=T),format:"hex",useType:"pure",gradientColor:n.gradientColor,"onUpdate:gradientColor":l[14]||(l[14]=T=>n.gradientColor=T)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.layout"),name:"rtl",help:n.rules.rtl?n.rules.rtl.message:null,validateStatus:n.rules.rtl?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.rtl,"onUpdate:value":l[15]||(l[15]=T=>n.formData.rtl=T),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[t(f,{key:"rtl",value:1},{default:a(()=>[i(s(e.$t("company.rtl")),1)]),_:1}),t(f,{key:"ltr",value:0},{default:a(()=>[i(s(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:n.rules.shortcut_menus?n.rules.shortcut_menus.message:null,validateStatus:n.rules.shortcut_menus?"error":null,class:"required"},{default:a(()=>[t(g,{value:n.formData.shortcut_menus,"onUpdate:value":l[16]||(l[16]=T=>n.formData.shortcut_menus=T),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[t(f,{key:"top_bottom",value:"top_bottom"},{default:a(()=>[i(s(e.$t("company.top_and_bottom")),1)]),_:1}),t(f,{key:"top",value:"top"},{default:a(()=>[i(s(e.$t("company.top_header")),1)]),_:1}),t(f,{key:"bottom",value:"bottom"},{default:a(()=>[i(s(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),w("div",Pk,[t(u,null,{default:a(()=>[i(s(e.$t("setup_company.logo_settings")),1)]),_:1})]),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(m,{label:e.$t("company.dark_logo"),name:"dark_logo",help:n.rules.dark_logo?n.rules.dark_logo.message:null,validateStatus:n.rules.dark_logo?"error":null},{default:a(()=>[t(D,{formData:n.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:l[17]||(l[17]=T=>{n.formData.dark_logo=T.file,n.formData.dark_logo_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(m,{label:e.$t("company.light_logo"),name:"light_logo",help:n.rules.light_logo?n.rules.light_logo.message:null,validateStatus:n.rules.light_logo?"error":null},{default:a(()=>[t(D,{formData:n.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:l[18]||(l[18]=T=>{n.formData.light_logo=T.file,n.formData.light_logo_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(m,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:n.rules.small_dark_logo?n.rules.small_dark_logo.message:null,validateStatus:n.rules.small_dark_logo?"error":null},{default:a(()=>[t(D,{formData:n.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:l[19]||(l[19]=T=>{n.formData.small_dark_logo=T.file,n.formData.small_dark_logo_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(m,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:n.rules.small_light_logo?n.rules.small_light_logo.message:null,validateStatus:n.rules.small_light_logo?"error":null},{default:a(()=>[t(D,{formData:n.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:l[20]||(l[20]=T=>{n.formData.small_light_logo=T.file,n.formData.small_light_logo_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.appType=="non-saas"?(r(),C(_,{key:0,gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(m,{label:e.$t("company.login_image"),name:"login_image",help:n.rules.login_image?n.rules.login_image.message:null,validateStatus:n.rules.login_image?"error":null},{default:a(()=>[t(D,{formData:n.formData,folder:"company",imageField:"login_image",onOnFileUploaded:l[21]||(l[21]=T=>{n.formData.login_image=T.file,n.formData.login_image_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),c.showSubmitButton?(r(),C(_,{key:1,gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(m,null,{default:a(()=>[t(F,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(I)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})):A("",!0)]),_:1})}const Fk=B(Ak,[["render",Uk]]),qk=Z({components:{PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,DoubleRightOutlined:Un,DoubleLeftOutlined:zl,SaveOutlined:he,SyncOutlined:jt,CheckCircleOutlined:Wn,HomeOutlined:Sa,InfoCircleOutlined:It,WarehouseTable:gk,CurrencyTable:vk,PaymentModeTable:Dk,EditSetupSetting:Fk},setup(){Y();const e=qe(),l=Ce(),c=E(null),n=E(null),h=E(null),y=E(null),u=E([]),d=E(0),m=E(0),p=Se({warehouseStepStatus:"wait",currencyStepStatus:"wait",paymentModeStepStatus:"wait",companySettingStepStatus:"wait"}),_=E(!1),f=E(!1);ee(()=>{g()});const g=()=>{axiosAdmin.get("app").then(V=>{u.value=V.data,p.warehouseStepStatus=u.value.total_warehouses>0?"finish":"wait",p.currencyStepStatus=u.value.total_currencies>0?"finish":"wait",p.paymentModeStepStatus=u.value.total_payment_modes>0?"finish":"wait",p.companySettingStepStatus=b()==!1?"finish":"wait",u.value.total_warehouses==0?(d.value=0,m.value=0,p.warehouseStepStatus="error"):u.value.total_currencies==0?(d.value=1,m.value=1,p.currencyStepStatus="error"):u.value.total_payment_modes==0?(d.value=2,m.value=2,p.paymentModeStepStatus="error"):b()?(d.value=3,m.value=3,p.companySettingStepStatus="error"):(d.value=3,m.value=3,f.value=!0,_.value=!0)})},b=()=>u.value.app.x_warehouse_id==null||u.value.app.x_currency_id==null,v=()=>{c.value.addItem()},k=V=>{g()},$=()=>{n.value.addItem()},D=V=>{g()},I=()=>{h.value.addItem()},F=V=>{g()},P=()=>{y.value.onSubmit()},T=()=>{_.value=!0,axiosAdmin.post("/user").then(function(V){l.commit("auth/updateUser",V.data.user),axiosAdmin.post("change-warehouse",{warehouse_id:V.data.user.x_warehouse_id}).then(K=>{l.commit("auth/updateWarehouse",K.data.warehouse),f.value=!0})}).catch(function(V){})},U=()=>{_.value=!1,e.push({name:"admin.dashboard.index"})},M=()=>{d.value=d.value==0?0:d.value-1},W=()=>{d.value=d.value>=3?3:d.value+1};return{appDetails:u,currentStep:d,correctStep:m,...rt(p),warhouseTableRef:c,addWarehouse:v,warehouseAddSuccess:k,currencyTableRef:n,addCurrency:$,currencyAddSuccess:D,paymentModeTableRef:h,addPaymentMode:I,paymentModeAddSuccess:F,companySettingRef:y,submitCompanySetting:P,companySettingUpdated:T,showFinalModal:_,setupCompleted:f,goToDashboard:U,goBack:M,goNext:W}}}),Mk={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"left",zIndex:1,marginBottom:"10px"}},Rk={key:0,style:{color:"#7676e3"}},Kk={key:1,style:{color:"#7676e3"}};function Vk(e,l,c,n,h,y){const u=o("a-alert"),d=o("a-step"),m=o("a-steps"),p=o("a-divider"),_=o("PlusOutlined"),f=o("a-button"),g=o("WarehouseTable"),b=o("CurrencyTable"),v=o("PaymentModeTable"),k=o("EditSetupSetting"),$=o("a-col"),D=o("a-row"),I=o("a-card"),F=o("DoubleLeftOutlined"),P=o("DoubleRightOutlined"),T=o("SaveOutlined"),U=o("a-space"),M=o("CheckCircleOutlined"),W=o("InfoCircleOutlined"),V=o("HomeOutlined"),K=o("SyncOutlined"),q=o("a-result"),L=o("a-modal");return r(),S(O,null,[t(u,{message:e.$t("setup_company.setup_not_completed"),description:e.$t("setup_company.setup_not_completed_description"),type:"error","show-icon":""},null,8,["message","description"]),t(I,{class:"setup-page-content-container"},{default:a(()=>[t(D,{class:"mt-40"},{default:a(()=>[t($,{span:20,offset:1},{default:a(()=>[t(m,{current:e.currentStep},{default:a(()=>[t(d,{status:e.warehouseStepStatus},{title:a(()=>[i(s(e.$t("setup_company.warehouse")),1)]),description:a(()=>[w("span",null,s(e.$t("setup_company.add_first_warehouse")),1)]),_:1},8,["status"]),t(d,{status:e.currencyStepStatus},{title:a(()=>[i(s(e.$t("setup_company.currency")),1)]),description:a(()=>[w("span",null,s(e.$t("setup_company.add_first_currency")),1)]),_:1},8,["status"]),t(d,{status:e.paymentModeStepStatus},{title:a(()=>[i(s(e.$t("setup_company.payment_mode")),1)]),description:a(()=>[w("span",null,s(e.$t("setup_company.add_payment_mode")),1)]),_:1},8,["status"]),t(d,{status:e.companySettingStepStatus},{title:a(()=>[i(s(e.$t("setup_company.company_settings")),1)]),description:a(()=>[w("span",null,s(e.$t("setup_company.set_company_basic_settings")),1)]),_:1},8,["status"])]),_:1},8,["current"]),t(p),e.appDetails&&e.appDetails.app&&e.appDetails.app.name?(r(),S(O,{key:0},[e.currentStep==0?(r(),S(O,{key:0},[t(f,{type:"primary",onClick:e.addWarehouse},{default:a(()=>[t(_),i(" "+s(e.$t("warehouse.add")),1)]),_:1},8,["onClick"]),t(g,{class:"mb-40",ref:"warhouseTableRef",showFilter:!1,onAddOrEditSuccess:e.warehouseAddSuccess},null,8,["onAddOrEditSuccess"])],64)):A("",!0),e.currentStep==1?(r(),S(O,{key:1},[t(f,{type:"primary",onClick:e.addCurrency},{default:a(()=>[t(_),i(" "+s(e.$t("currency.add")),1)]),_:1},8,["onClick"]),t(b,{class:"mb-40",ref:"currencyTableRef",showFilter:!1,onAddOrEditSuccess:e.currencyAddSuccess},null,8,["onAddOrEditSuccess"])],64)):A("",!0),e.currentStep==2?(r(),S(O,{key:2},[t(f,{type:"primary",onClick:e.addPaymentMode},{default:a(()=>[t(_),i(" "+s(e.$t("payment_mode.add")),1)]),_:1},8,["onClick"]),t(v,{class:"mb-40",ref:"paymentModeTableRef",showFilter:!1,onAddOrEditSuccess:e.paymentModeAddSuccess},null,8,["onAddOrEditSuccess"])],64)):A("",!0),e.currentStep==3?(r(),C(k,{key:3,class:"mb-40",ref:"companySettingRef",showSubmitButton:!1,onUpdateSuccess:e.companySettingUpdated},null,8,["onUpdateSuccess"])):A("",!0)],64)):A("",!0)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t($,{span:20,offset:1},{default:a(()=>[w("div",Mk,[t(U,null,{default:a(()=>[e.currentStep>=1&&e.currentStep!=3?(r(),C(f,{key:0,type:"primary",style:{backgroundColor:"#faad14",border:"#faad14"},onClick:e.goBack},{default:a(()=>[t(F),i(" "+s(e.$t("setup_company.previous_step")),1)]),_:1},8,["onClick"])):A("",!0),e.currentStep<3?(r(),C(f,{key:1,type:"primary",onClick:e.goNext,disabled:e.currentStep>=e.correctStep},{default:a(()=>[i(s(e.$t("setup_company.next_step"))+" ",1),t(P)]),_:1},8,["onClick","disabled"])):A("",!0),e.currentStep==3&&e.companySettingRef?(r(),C(f,{key:2,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.submitCompanySetting,loading:e.companySettingRef.loading},{default:a(()=>[t(T),i(" "+s(e.$t("setup_company.save_finish_setup")),1)]),_:1},8,["onClick","loading"])):A("",!0)]),_:1})])]),_:1})]),_:1}),t(L,{open:e.showFinalModal,"onUpdate:open":l[0]||(l[0]=X=>e.showFinalModal=X),maskClosable:!1,closable:!1,footer:null,centered:""},{default:a(()=>[t(q,null,{title:a(()=>[e.setupCompleted?(r(),S("span",Rk,s(e.$t("setup_company.setup_complete_message")),1)):(r(),S("span",Kk,s(e.$t("setup_company.setup_running_message")),1))]),icon:a(()=>[e.setupCompleted?(r(),C(M,{key:0})):(r(),C(W,{key:1}))]),extra:a(()=>[e.setupCompleted?(r(),C(f,{key:0,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.goToDashboard},{default:a(()=>[t(V),i(" "+s(e.$t("setup_company.go_to_dashboard")),1)]),_:1},8,["onClick"])):(r(),C(K,{key:1,style:{fontSize:"38px",color:"#5254cf"},spin:""}))]),_:1})]),_:1},8,["open"])],64)}const zk=B(qk,[["render",Vk]]),Ha=[{path:"/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/setup",component:zk,name:"admin.setup_app.index",meta:{requireAuth:!0,menuParent:"",menuKey:"setup_company"}}]}];const Lk={props:["product","currency"],components:{ShoppingCartOutlined:yt,MinusOutlined:Ll,PlusOutlined:ne},setup(e){const{formatAmountCurrency:l}=kt(),c=Ce(),n=E(!1),h=E(1),y=E({});ee(()=>{const m=c.getters["front/storeCartItems"];let p=0;we(m,_=>{_.xid==e.product.xid&&(p=_.cart_quantity)}),y.value={...e.product,cart_quantity:p}});const u=()=>{n.value=!0},d=m=>{const p=c.getters["front/storeCartItems"],_=Xe(p,f=>f.xid!=m.xid);m.cart_quantity>0&&_.push({...m,cart_quantity:m.cart_quantity}),c.commit("front/addCartItems",_),Oe.success("Item updated in cart")};return me(c.state.front,(m,p)=>{let _=0;we(c.getters["front/storeCartItems"],f=>{f.xid==y.value.xid&&(_=f.cart_quantity)}),y.value={...y.value,cart_quantity:_}}),{currentProduct:y,formatAmountCurrency:l,visible:n,productQuantity:h,showModal:u,addItem:d,getSalesPriceWithTax:Pt}}},Bk={key:0,class:"product"},Wk={class:"product-top"},jk=["src"],Hk={class:"product-bottom"},Nk={class:"product-category"},Yk={class:"product-title"},Gk={class:"product-details"},Jk={class:"product-price"},Qk=w("br",null,null,-1),Xk={class:"product-card-add-edit"},Zk={class:"product-details-image"},xk=["src"],e0={key:0,class:"mt-10"},t0={class:"mt-10 mb-20"};function a0(e,l,c,n,h,y){const u=o("minus-outlined"),d=o("a-button"),m=o("plus-outlined"),p=o("a-button-group"),_=o("ShoppingCartOutlined"),f=o("a-col"),g=o("a-typography-title"),b=o("a-tag"),v=o("a-row"),k=o("a-modal");return r(),S(O,null,[n.currentProduct&&n.currentProduct.xid?(r(),S("div",Bk,[w("div",Wk,[w("a",{href:"javascript:void(0)",onClick:l[0]||(l[0]=(...$)=>n.showModal&&n.showModal(...$))},[w("img",{src:n.currentProduct.image_url,class:"img-fit"},null,8,jk)])]),w("div",Hk,[w("div",null,[w("span",Nk,s(n.currentProduct.category.name),1),w("h5",Yk,s(n.currentProduct.name),1)]),w("div",Gk,[w("div",Jk,[w("span",null,s(n.formatAmountCurrency(n.getSalesPriceWithTax(n.currentProduct))),1),Qk,w("del",null,s(n.formatAmountCurrency(n.currentProduct.details.mrp)),1)]),w("div",Xk,[n.currentProduct.cart_quantity>0?(r(),C(p,{key:0},{default:a(()=>[t(d,{onClick:l[1]||(l[1]=$=>{n.currentProduct.cart_quantity-=1,n.addItem(n.currentProduct)}),size:"small"},{default:a(()=>[t(u)]),_:1}),t(d,{size:"small"},{default:a(()=>[i(s(n.currentProduct.cart_quantity),1)]),_:1}),t(d,{onClick:l[2]||(l[2]=$=>{n.currentProduct.cart_quantity+=1,n.addItem(n.currentProduct)}),size:"small"},{default:a(()=>[t(m)]),_:1})]),_:1})):(r(),C(d,{key:1,onClick:l[3]||(l[3]=$=>{n.currentProduct.cart_quantity++,n.addItem(n.currentProduct)}),type:"primary"},{icon:a(()=>[t(_)]),_:1}))])])])])):A("",!0),t(k,{open:n.visible,"onUpdate:open":l[7]||(l[7]=$=>n.visible=$),centered:"",footer:null,title:null,width:850},{default:a(()=>[t(v,{gutter:[16,16]},{default:a(()=>[t(f,{span:12},{default:a(()=>[w("div",Zk,[w("span",null,[w("img",{src:n.currentProduct.image_url},null,8,xk)])])]),_:1}),t(f,{span:12},{default:a(()=>[t(g,{level:3},{default:a(()=>[i(s(n.currentProduct.name),1)]),_:1}),w("div",null,[n.currentProduct.category_id?(r(),C(b,{key:0,color:"purple"},{default:a(()=>[i(s(n.currentProduct.category.name),1)]),_:1})):A("",!0),n.currentProduct.brand_id?(r(),C(b,{key:1,color:"cyan"},{default:a(()=>[i(s(n.currentProduct.brand.name),1)]),_:1})):A("",!0)]),n.currentProduct.description?(r(),S("p",e0,s(n.currentProduct.description),1)):A("",!0),t(g,{class:"mt-20",level:3},{default:a(()=>[i(s(n.formatAmountCurrency(n.getSalesPriceWithTax(n.currentProduct))),1)]),_:1}),w("div",t0,[n.currentProduct.cart_quantity>0?(r(),C(p,{key:0},{default:a(()=>[t(d,{onClick:l[4]||(l[4]=$=>{n.currentProduct.cart_quantity-=1,n.addItem(n.currentProduct)}),size:"large"},{default:a(()=>[t(u)]),_:1}),t(d,{size:"large"},{default:a(()=>[i(s(n.currentProduct.cart_quantity),1)]),_:1}),t(d,{onClick:l[5]||(l[5]=$=>{n.currentProduct.cart_quantity+=1,n.addItem(n.currentProduct)}),size:"large"},{default:a(()=>[t(m)]),_:1})]),_:1})):(r(),C(d,{key:1,onClick:l[6]||(l[6]=$=>{n.currentProduct.cart_quantity++,n.addItem(n.currentProduct)}),type:"primary",size:"large"},{default:a(()=>[t(_),i(" "+s(e.$t("front_setting.add_to_cart")),1)]),_:1}))])]),_:1})]),_:1})]),_:1},8,["open"])],64)}const Ka=B(Lk,[["render",a0]]);const n0={props:["warehouse"],components:{ShoppingCartOutlined:yt,FacebookFilled:Bl,LinkedinFilled:Wl,InstagramFilled:jl,YoutubeFilled:Hl,TwitterCircleFilled:Nl},setup(){const{formatAmountCurrency:e,frontAppSetting:l,frontWarehouse:c}=kt();return{frontAppSetting:l,formatAmountCurrency:e,frontWarehouse:c}}},o0={key:0,class:"footer"},l0=["src"],s0={class:"site-description mt-20"},r0={class:"mt-10"},d0={class:"social-icon-list"},i0=["href"],u0=["href"],m0=["href"],c0=["href"],p0=["href"],_0={class:"footer-links"},f0=["href"],g0={class:"footer-links"},y0=["href"],h0=w("br",null,null,-1),b0={style:{"font-size":"13px"}},v0={key:1,class:"footer-copyright"};function k0(e,l,c,n,h,y){const u=o("a-typography-title"),d=o("FacebookFilled"),m=o("TwitterCircleFilled"),p=o("InstagramFilled"),_=o("LinkedinFilled"),f=o("YoutubeFilled"),g=o("a-col"),b=o("a-row");return r(),S(O,null,[n.frontAppSetting&&n.frontAppSetting.footer_company_description?(r(),S("div",o0,[t(b,{type:"flex",justify:"center"},{default:a(()=>[t(g,{span:20},{default:a(()=>[t(b,{gutter:[30,30]},{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:10,xl:10},{default:a(()=>[w("img",{src:n.frontWarehouse.dark_logo_url,class:"footer-logo"},null,8,l0),w("p",s0,s(n.frontAppSetting.footer_company_description),1),w("div",r0,[t(u,{level:5},{default:a(()=>[i(s(e.$t("front.follow_us")),1)]),_:1}),w("div",d0,[w("a",{href:n.frontAppSetting.facebook_url!=""?n.frontAppSetting.facebook_url:"#",target:"_blank",class:"social-icon facebook-color"},[t(d)],8,i0),w("a",{href:n.frontAppSetting.twitter_url!=""?n.frontAppSetting.twitter_url:"#",target:"_blank",class:"social-icon twitter-color ml-5"},[t(m)],8,u0),w("a",{href:n.frontAppSetting.instagram_url!=""?n.frontAppSetting.instagram_url:"#",target:"_blank",class:"social-icon instagram-color ml-5"},[t(p)],8,m0),w("a",{href:n.frontAppSetting.linkedin_url!=""?n.frontAppSetting.linkedin_url:"#",target:"_blank",class:"social-icon linkedin-color ml-5"},[t(_)],8,c0),w("a",{href:n.frontAppSetting.youtube_url!=""?n.frontAppSetting.youtube_url:"#",target:"_blank",class:"social-icon youtube-color ml-5"},[t(f)],8,p0)])])]),_:1}),t(g,{xs:24,sm:24,md:24,lg:14,xl:14},{default:a(()=>[t(b,{gutter:[30,30]},{default:a(()=>[t(g,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(u,{level:5},{default:a(()=>[i(s(e.$t("front_setting.useful_links")),1)]),_:1}),w("ul",_0,[(r(!0),S(O,null,G(n.frontAppSetting.links_widget,(v,k)=>(r(),S("li",{key:k},[w("a",{href:v.value,target:"_blank"},s(v.title),9,f0)]))),128))])]),_:1}),t(g,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(u,{level:5},{default:a(()=>[i(s(e.$t("front_setting.pages")),1)]),_:1}),w("ul",g0,[(r(!0),S(O,null,G(n.frontAppSetting.pages_widget,(v,k)=>(r(),S("li",{key:k},[w("a",{href:v.value,target:"_blank"},s(v.title),9,y0)]))),128))])]),_:1}),t(g,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(u,{level:5},{default:a(()=>[i(s(e.$t("front_setting.contact")),1)]),_:1}),(r(!0),S(O,null,G(n.frontAppSetting.contact_info_widget,(v,k)=>(r(),S("div",{key:k,class:"mt-10"},[w("strong",null,s(v.title),1),i(" :"),h0,w("span",b0,s(v.value),1)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):A("",!0),n.frontAppSetting&&n.frontAppSetting.footer_company_description?(r(),S("div",v0,[t(b,{type:"flex",justify:"center"},{default:a(()=>[t(g,{span:18},{default:a(()=>[w("div",null,s(n.frontAppSetting.footer_copyright_text),1)]),_:1})]),_:1})])):A("",!0)],64)}const w0=B(n0,[["render",k0]]),C0=Z({emits:["openLoginModal"],components:{ShoppingCartOutlined:yt,ShoppingOutlined:Ot,CloseOutlined:Hn,DeleteOutlined:fe,RightOutlined:Wt},setup(e,{emit:l}){const c=Ce(),n=E(!1),h=qe(),{products:y,updateCart:u,removeItem:d,total:m,formatAmountCurrency:p,frontWarehouse:_}=kt(),f=()=>n.value=!0,g=()=>n.value=!1,b=pe(()=>c.getters["front/isLoggedIn"]),v=()=>{n.value=!1,b.value?h.push({name:"front.checkout"}):l("openLoginModal")};return{visible:n,showDrawer:f,closeDrawer:g,totalCartItems:pe(()=>c.getters["front/totalCartItems"]),products:y,removeItem:d,updateCart:u,formatAmountCurrency:p,total:m,proceedCheckout:v,getSalesPriceWithTax:Pt,frontWarehouse:_,innerWidth:window.innerWidth}}}),S0=w("br",null,null,-1);function $0(e,l,c,n,h,y){const u=o("shopping-cart-outlined"),d=o("a-badge"),m=o("a-button"),p=o("shopping-outlined"),_=o("close-outlined"),f=o("a-avatar"),g=o("a-list-item-meta"),b=o("a-input-number"),v=o("delete-outlined"),k=o("a-list-item"),$=o("a-list"),D=o("a-typography-title"),I=o("a-col"),F=o("right-outlined"),P=o("a-row"),T=o("a-drawer");return r(),S(O,null,[t(m,{type:"link",onClick:e.showDrawer},{default:a(()=>[t(d,{count:e.totalCartItems},{default:a(()=>[t(u,{style:{fontSize:"24px",color:"#fff",verticalAlign:"middle"}})]),_:1},8,["count"])]),_:1},8,["onClick"]),t(T,{open:e.visible,"onUpdate:open":l[0]||(l[0]=U=>e.visible=U),width:e.innerWidth<=768?"80%":500,placement:"right",closable:!1,headerStyle:{backgroundColor:"#eef2ff"}},{title:a(()=>[t(p,{style:{fontSize:"20px"}}),i(" Shopping Cart ")]),extra:a(()=>[t(m,{type:"link",onClick:e.closeDrawer},{default:a(()=>[t(_,{style:{fontSize:"14px"}})]),_:1},8,["onClick"])]),footer:a(()=>[t(P,{type:"flex",justify:"start"},{default:a(()=>[t(I,{span:12},{default:a(()=>[t(D,{level:5},{default:a(()=>[i(" Subtotal: "+s(e.formatAmountCurrency(e.total)),1)]),_:1})]),_:1}),t(I,{span:12},{default:a(()=>[t(m,{type:"primary",onClick:e.proceedCheckout,block:""},{default:a(()=>[i(" Checkout "),t(F)]),_:1},8,["onClick"])]),_:1})]),_:1})]),default:a(()=>[t($,{class:"demo-loadmore-list","item-layout":"horizontal","data-source":e.products},{renderItem:a(({item:U})=>[t(k,null,{actions:a(()=>[t(m,{type:"link",onClick:M=>e.removeItem(U.xid)},{default:a(()=>[t(v,{style:{fontSize:"20px",color:"#f87171"}})]),_:2},1032,["onClick"])]),default:a(()=>[t(g,null,{title:a(()=>[i(s(U.name)+" ",1),S0,w("small",{style:Ve({color:"rgba(0, 0, 0, 0.45)"})}," Price: "+s(e.formatAmountCurrency(e.getSalesPriceWithTax(U))),5)]),avatar:a(()=>[t(f,{src:U.image_url,size:"large"},null,8,["src"])]),description:a(()=>[i(s(e.formatAmountCurrency(e.getSalesPriceWithTax(U)*U.cart_quantity)),1)]),_:2},1024),w("div",null,[t(b,{value:U.cart_quantity,"onUpdate:value":M=>U.cart_quantity=M,min:1,style:{width:"60px"},onChange:e.updateCart},null,8,["value","onUpdate:value","onChange"])])]),_:2},1024)]),_:1},8,["data-source"])]),_:1},8,["open","width"])],64)}const D0=B(C0,[["render",$0]]),sa=()=>{const e=E(!1),l=E({}),{t:c}=te(),n=Ce(),h=pe(()=>n.state.front.warehouseSlug);return{loading:e,rules:l,addEditRequestFront:d=>{e.value=!0;const{url:m,data:p,success:_}=d;var f={};we(p,function(g,b){g==null?f[b]=null:f[b]=g}),f.warehouse=h.value,axiosFront.post(m,f).then(g=>{d.successMessage&&Ee.success({placement:"bottomRight",message:c("common.success"),description:d.successMessage}),_(g.data),e.value=!1,l.value={}}).catch(g=>{var b=g.data;const v=g.status;var k={};if(v==422){if(b.error&&typeof b.error.details<"u")for(var $=Object.keys(b.error.details),D=0;D<$.length;D++){var I=$[D].replace(".","\\.");k[I]={required:!0,message:b.error.details[$[D]][0]}}l.value=k,Oe.error(c("common.fix_errors"))}b&&b.message&&(Oe.error(b.message),b={error:{...b}}),d.error&&d.error(b),e.value=!1})},addEditFileRequestFront:d=>{e.value=!0;const{url:m,data:p,success:_}=d,f=new FormData;we(p,function(g,b){g==null?f.append(b,null):f.append(b,g.originFileObj)}),axiosAdmin.post(m,f,{headers:{"Content-Type":"multipart/form-data"}}).then(g=>{d.successMessage&&Ee.success({placement:"bottomRight",message:c("common.success"),description:d.successMessage}),_(g.data),e.value=!1,l.value={}}).catch(g=>{var b=g.data;const v=g.status;var k={};if(v==422){if(b.error&&typeof b.error.details<"u")for(var $=Object.keys(b.error.details),D=0;D<$.length;D++){var I=$[D].replace(".","\\.");k[I]={required:!0,message:b.error.details[$[D]][0]}}l.value=k,Oe.error(c("common.fix_errors"))}b&&b.message&&(Oe.error(b.message),b={error:{...b}}),d.error&&d.error(b),e.value=!1})}}};const A0=Z({props:["modalVisible"],emits:["modalClosed"],components:{UserOutlined:va,MailOutlined:ka,LockOutlined:Yl,PhoneOutlined:Gl},setup(e,{emit:l}){const c=Ce(),n=E({email:null,password:null}),h=E({name:null,phone:null,email:null,password:null}),y=E(!1),{t:u}=te(),d=qe(),m=E(!0),p=E(!1),{addEditRequestFront:_,loading:f,rules:g}=sa(),{frontWarehouse:b}=Y(),v=E(""),k=()=>{y.value=!0},$=()=>{v.value="",_({url:"front/login",data:n.value,successMessage:u("front.logged_in_successfully"),success:F=>{c.commit("front/updateUser",F.user),c.commit("front/updateToken",F.token),c.commit("front/updateExpires",F.expires_in),y.value=!1,d.push({name:"front.dashboard",params:{warehouse:b.value.slug}})},error:F=>{F.error_message&&(v.value=F.error_message)}})},D=()=>{v.value="",_({url:"front/signup",data:h.value,successMessage:u("front.register_successfully"),success:F=>{p.value=!0},error:F=>{F.error_message&&(v.value=F.error_message)}})},I=()=>{l("modalClosed"),m.value=!0};return me(e,(F,P)=>{y.value=F.modalVisible}),{credentials:n,rules:g,visible:y,showLogin:k,onLogin:$,errorMessage:v,loading:f,frontWarehouse:b,user:pe(()=>c.state.front.user),isLoggedIn:pe(()=>c.getters["front/isLoggedIn"]),loginModalClosed:I,loginForm:m,signupCredentials:h,onSignup:D,signupSuccess:p}}}),T0={key:0},E0={style:{textAlign:"center"},class:"mt-10"},O0={style:{color:"#6b7280",fontSize:"16px"}},I0={key:1},P0={style:{textAlign:"center"},class:"mt-10"},U0={style:{color:"#6b7280",fontSize:"16px"}};function F0(e,l,c,n,h,y){const u=o("a-avatar"),d=o("router-link"),m=o("a-button"),p=o("user-outlined"),_=o("a-typography-title"),f=o("a-alert"),g=o("mail-outlined"),b=o("a-input"),v=o("a-form-item"),k=o("lock-outlined"),$=o("a-input-password"),D=o("a-typography-text"),I=o("a-form"),F=o("UserOutlined"),P=o("MailOutlined"),T=o("PhoneOutlined"),U=o("a-modal");return r(),S(O,null,[e.isLoggedIn?(r(),C(m,{key:0,type:"link"},{default:a(()=>[t(d,{to:{name:"front.dashboard",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[t(u,{src:e.user.profile_image_url,size:28},null,8,["src"])]),_:1},8,["to"])]),_:1})):(r(),C(m,{key:1,type:"link",onClick:e.showLogin},{default:a(()=>[t(p,{style:{fontSize:"24px",color:"#fff",verticalAlign:"top"}})]),_:1},8,["onClick"])),t(U,{open:e.visible,"onUpdate:open":l[9]||(l[9]=M=>e.visible=M),centered:"",footer:null,title:null,width:450,closable:!1,bodyStyle:{borderRadius:"10px"},wrapClassName:"login-register-modal",onCancel:e.loginModalClosed},{default:a(()=>[e.loginForm?(r(),S("div",T0,[w("div",E0,[t(_,{level:2,style:{marginBottom:"0px"}},{default:a(()=>[i(s(e.$t("front.login")),1)]),_:1}),w("p",O0,s(e.$t("front.login_using_email_password")),1)]),t(I,{layout:"vertical",class:"mt-30"},{default:a(()=>[e.errorMessage!=""?(r(),C(f,{key:0,message:e.errorMessage,type:"error",class:"mb-10","show-icon":""},null,8,["message"])):A("",!0),t(v,{label:e.$t("user.email_phone"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:a(()=>[t(b,{value:e.credentials.email,"onUpdate:value":l[0]||(l[0]=M=>e.credentials.email=M),onPressEnter:e.onLogin,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email_phone")])},{prefix:a(()=>[t(g)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(v,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null},{default:a(()=>[t($,{value:e.credentials.password,"onUpdate:value":l[1]||(l[1]=M=>e.credentials.password=M),onPressEnter:e.onLogin,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),autocomplete:"off"},{prefix:a(()=>[t(k)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(v,null,{default:a(()=>[t(m,{type:"primary",class:"mt-10",onClick:e.onLogin,loading:e.loading,block:""},{default:a(()=>[i(s(e.$t("front.login")),1)]),_:1},8,["onClick","loading"])]),_:1}),t(v,null,{default:a(()=>[t(D,{strong:""},{default:a(()=>[i(s(e.$t("front.dont_have_account")+" "),1)]),_:1}),t(m,{onClick:l[2]||(l[2]=M=>e.loginForm=!1),type:"link",class:"p-0"},{default:a(()=>[i(s(e.$t("front.signup")),1)]),_:1})]),_:1})]),_:1})])):(r(),S("div",I0,[w("div",P0,[t(_,{level:2,style:{marginBottom:"0px"}},{default:a(()=>[i(s(e.$t("front.signup")),1)]),_:1}),w("p",U0,s(e.$t("front.signup_using_email_password")),1)]),e.signupSuccess?(r(),C(f,{key:0,type:"success",class:"mt-10","show-icon":""},{message:a(()=>[i(s(e.$t("common.success")),1)]),description:a(()=>[i(s(e.$t("front.register_successfully"))+" ",1),t(m,{onClick:l[3]||(l[3]=M=>e.loginForm=!0),type:"link",class:"p-0"},{default:a(()=>[i(s(e.$t("front.click_here_to_login")),1)]),_:1})]),_:1})):(r(),C(I,{key:1,layout:"vertical",class:"mt-30"},{default:a(()=>[t(v,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null},{default:a(()=>[t(b,{value:e.signupCredentials.name,"onUpdate:value":l[4]||(l[4]=M=>e.signupCredentials.name=M),onPressEnter:e.onSignup,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},{prefix:a(()=>[t(F)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(v,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:a(()=>[t(b,{value:e.signupCredentials.email,"onUpdate:value":l[5]||(l[5]=M=>e.signupCredentials.email=M),onPressEnter:e.onSignup,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},{prefix:a(()=>[t(P)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(v,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null},{default:a(()=>[t(b,{value:e.signupCredentials.phone,"onUpdate:value":l[6]||(l[6]=M=>e.signupCredentials.phone=M),onPressEnter:e.onSignup,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},{prefix:a(()=>[t(T)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(v,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null},{default:a(()=>[t($,{value:e.signupCredentials.password,"onUpdate:value":l[7]||(l[7]=M=>e.signupCredentials.password=M),onPressEnter:e.onSignup,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),autocomplete:"off"},{prefix:a(()=>[t(k)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(v,null,{default:a(()=>[t(m,{type:"primary",class:"mt-10",onClick:e.onSignup,loading:e.loading,block:""},{default:a(()=>[i(s(e.$t("front.signup")),1)]),_:1},8,["onClick","loading"])]),_:1}),t(v,null,{default:a(()=>[t(D,{strong:""},{default:a(()=>[i(s(e.$t("front.already_have_account")+" "),1)]),_:1}),t(m,{onClick:l[8]||(l[8]=M=>e.loginForm=!0),type:"link",class:"p-0"},{default:a(()=>[i(s(e.$t("front.login")),1)]),_:1})]),_:1})]),_:1}))]))]),_:1},8,["open","onCancel"])],64)}const q0=B(A0,[["render",F0]]),M0=Z({name:"category-menu",props:["categories"],setup(){const{frontWarehouse:e}=Y();return{frontWarehouse:e}}});function R0(e,l,c,n,h,y){const u=o("a-avatar"),d=o("category-menu"),m=o("a-sub-menu"),p=o("router-link"),_=o("a-menu-item");return r(!0),S(O,null,G(e.categories,f=>(r(),S(O,{key:f.xid},[f.children&&f.children.length?(r(),C(m,{key:f.xid,title:f.name},{icon:a(()=>[t(u,{size:16,src:f.image_url},null,8,["src"])]),default:a(()=>[t(d,{categories:f.children},null,8,["categories"])]),_:2},1032,["title"])):(r(),C(_,{key:f.xid},{default:a(()=>[t(p,{to:{name:"front.categories",params:{warehouse:e.frontWarehouse.slug,slug:[f.slug]}}},{default:a(()=>[t(u,{size:16,src:f.image_url},null,8,["src"]),i(" "+s(f.name),1)]),_:2},1032,["to"])]),_:2},1024))],64))),128)}const K0=B(M0,[["render",R0]]),V0=Z({props:["catSelectedKeys","catOpenKeys"],components:{MailOutlined:ka,CalendarOutlined:Jl,AppstoreOutlined:Nn,SettingOutlined:pt,CategoryMenu:K0},setup(e){const l=E([]),c=E([]),n=E([]);ee(()=>{c.value=e.catSelectedKeys,h()});const h=()=>{axiosFront.post("front/categories").then(u=>{const d=[];var m=u.data.categories;m.forEach(p=>{if(!p.x_parent_id)return d.push(p);const _=m.findIndex(f=>f.xid===p.x_parent_id);if(!m[_].children)return m[_].children=[p];m[_].children.push(p)}),l.value=d})},y=(u,d)=>{var m,p=u.id;if(!(!u||typeof u!="object"))return u.id===d?[p]:((u.children||[]).some(_=>m=y(_,d)),m&&[p].concat([...m]))};return me(e,(u,d)=>{c.value=u.catSelectedKeys;let m=[];l.value.forEach(p=>{const _=y(p,c.value[0]);_!=null&&_.includes(c.value[0])&&(m=_)}),n.value=m}),{selectedKeys:c,openKeys:n,allCategories:l}}});function z0(e,l,c,n,h,y){const u=o("a-avatar"),d=o("CategoryMenu"),m=o("a-sub-menu"),p=o("a-menu");return r(),C(p,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":l[0]||(l[0]=_=>e.selectedKeys=_),openKeys:e.openKeys,"onUpdate:openKeys":l[1]||(l[1]=_=>e.openKeys=_),style:{width:"100%"},mode:"inline"},{default:a(()=>[(r(!0),S(O,null,G(e.allCategories,_=>(r(),S(O,{key:_.xid},[_.children&&_.children.length?(r(),C(m,{key:_.xid},{icon:a(()=>[t(u,{size:16,src:_.image_url},null,8,["src"])]),title:a(()=>[i(s(_.name),1)]),default:a(()=>[t(d,{categories:_.children},null,8,["categories"])]),_:2},1024)):A("",!0)],64))),128))]),_:1},8,["selectedKeys","openKeys"])}const Lo=B(V0,[["render",z0]]);const L0=Z({components:{MenuOutlined:Yn,CloseOutlined:Hn,ShoppingOutlined:Ot,RightOutlined:Wt,LeftSidebarMenu:Lo},setup(){const{frontWarehouse:e,frontAppSetting:l}=Y(),c=E(!1),n=Se({selectedKeys:[],openKeys:[]}),h=()=>{c.value=!0},y=()=>{c.value=!1},u=()=>{n.selectedKeys=[],n.openKeys=[]};return{...rt(n),frontWarehouse:e,frontAppSetting:l,visible:c,openLeftSidebar:h,closeLeftSidebar:y,drawerClosed:u,innerWidth:pe(()=>window.innerWidth)}}}),B0=["src"],W0={key:0};function j0(e,l,c,n,h,y){const u=o("MenuOutlined"),d=o("close-outlined"),m=o("a-button"),p=o("a-typography-title"),_=o("router-link"),f=o("a-menu-item"),g=o("a-menu"),b=o("a-drawer");return r(),S(O,null,[e.innerWidth<768?(r(),C(u,{key:0,style:{fontSize:"24px",color:"#fff",verticalAlign:"top",paddingTop:"22px"},class:"mr-20",onClick:e.openLeftSidebar},null,8,["onClick"])):A("",!0),t(b,{open:e.visible,"onUpdate:open":l[2]||(l[2]=v=>e.visible=v),width:"300",placement:"left",closable:!1,headerStyle:{backgroundColor:"#2874f0"},bodyStyle:{padding:0},onClose:e.drawerClosed},{title:a(()=>[w("img",{style:{width:"120px"},src:e.frontWarehouse.dark_logo_url},null,8,B0)]),extra:a(()=>[t(m,{type:"link",onClick:e.closeLeftSidebar,class:"close-icon-button"},{default:a(()=>[t(d,{style:{fontSize:"14px",color:"#fff"}})]),_:1},8,["onClick"])]),default:a(()=>[e.frontAppSetting&&e.frontAppSetting.pages_widget&&e.frontAppSetting.pages_widget.length>0?(r(),S("div",W0,[t(p,{class:"pl-24 mt-30 category-menu-title",level:5},{default:a(()=>[i(s(e.$t("front.pages")),1)]),_:1}),t(g,{openKeys:e.openKeys,"onUpdate:openKeys":l[0]||(l[0]=v=>e.openKeys=v),selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":l[1]||(l[1]=v=>e.selectedKeys=v),style:{width:"100%"},mode:"inline"},{default:a(()=>[(r(!0),S(O,null,G(e.frontAppSetting.pages_widget,(v,k)=>(r(),C(f,{key:k},{default:a(()=>[t(_,{to:v.value},{default:a(()=>[i(s(v.title),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},8,["openKeys","selectedKeys"])])):A("",!0)]),_:1},8,["open","onClose"])],64)}const H0=B(L0,[["render",j0],["__scopeId","data-v-4d3e5fb9"]]);const N0=Z({components:{DownOutlined:Ql,MenuOutlined:Yn,AppstoreOutlined:Nn,ProductCard:Ka,Footer:w0,CheckoutDrawer:D0,Login:q0,LeftSidebar:H0},setup(){const e=Ce(),{frontAppSetting:l}=Y(),c=pe(()=>e.getters["auth/frontWarehouse"]),n=E(""),h=E(!1);return{frontAppSetting:l,searchValue:n,openLoginModal:()=>{h.value=!0},loginModalClosed:()=>{h.value=!1},loginModalVisible:h,frontWarehouse:c,innerWidth:window.innerWidth}}}),Y0={class:"logo-container"},G0=["src"],J0={style:{textAlign:"right"}},Q0={style:{background:"#fff"},class:"subheader"},X0={key:1,class:"no-online-store-container"};function Z0(e,l,c,n,h,y){const u=o("LeftSidebar"),d=o("router-link"),m=o("a-col"),p=o("CheckoutDrawer"),_=o("Login"),f=o("a-row"),g=o("a-layout-header"),b=o("router-view"),v=o("Footer"),k=o("a-layout-content"),$=o("a-layout"),D=o("a-result");return e.frontWarehouse.online_store_enabled==1?(r(),C($,{key:0},{default:a(()=>[t(g,{style:{background:"#2874f0",padding:0}},{default:a(()=>[t(f,{type:"flex",justify:"center"},{default:a(()=>[t(m,{span:20},{default:a(()=>[t(f,{type:"flex",justify:"space-between"},{default:a(()=>[e.frontWarehouse&&e.frontWarehouse.slug?(r(),C(m,{key:0,xs:12,sm:12,md:e.innerWidth>=768?6:12,lg:4,xl:4},{default:a(()=>[t(u),t(d,{to:{name:"front.homepage"},class:"logo-link"},{default:a(()=>[w("div",Y0,[w("img",{style:Ve({width:e.innerWidth>=768?"150px":"110px",maxHeight:"50px"}),src:e.frontWarehouse.dark_logo_url,alt:"Warehouse Logo"},null,12,G0),w("span",{style:Ve({fontSize:e.innerWidth>=768?"20px":"16px",fontWeight:"bold",color:"#fff",marginLeft:"10px"})},s(e.frontWarehouse.name),5)])]),_:1},8,["to"])]),_:1},8,["md"])):A("",!0),e.innerWidth>=768?(r(),C(m,{key:1,md:12,lg:12,xl:12})):A("",!0),t(m,{xs:12,sm:12,md:e.innerWidth>=768?6:12,lg:8,xl:8},{default:a(()=>[w("div",J0,[t(p,{onOpenLoginModal:e.openLoginModal},null,8,["onOpenLoginModal"]),t(_,{modalVisible:e.loginModalVisible,onModalClosed:e.loginModalClosed},null,8,["modalVisible","onModalClosed"])])]),_:1},8,["md"])]),_:1})]),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[w("div",null,[w("div",Q0,[t(f,{type:"flex",justify:"center"},{default:a(()=>[t(m,{span:20},{default:a(()=>[t(f)]),_:1})]),_:1})]),t(b),t(v)])]),_:1})]),_:1})):(r(),S("div",X0,[t(D,{status:"warning",title:e.$t("warehouse.no_online_store_exists")},null,8,["title"])]))}const x0=B(N0,[["render",Z0],["__scopeId","data-v-38214f49"]]);const ew=Z({setup(){const e=E([]);return ee(()=>{axiosFront.get("front/homepage").then(l=>{e.value=l.data.categories})}),{categories:e}}}),tw={style:{background:"#fff"},class:"category-box"},aw={class:"category"},nw=["alt","src"];function ow(e,l,c,n,h,y){const u=o("a-col"),d=o("a-row");return r(),S("div",tw,[t(d,{type:"flex",justify:"center"},{default:a(()=>[t(u,{span:20},{default:a(()=>[t(d,{gutter:[16,16]},{default:a(()=>[(r(!0),S(O,null,G(e.categories,m=>(r(),C(u,{key:m.id,xs:24,sm:24,md:6,lg:3,xl:2},{default:a(()=>[w("div",aw,[w("img",{alt:m.name,src:m.image_url,width:"80"},null,8,nw),w("h4",null,s(m.name),1)])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])}const lw=B(ew,[["render",ow],["__scopeId","data-v-7f7214ea"]]);const sw=Z({components:{RightOutlined:Wt,RightCircleOutlined:Ca,LeftCircleOutlined:wa,ProductCard:Ka,CategoryHeader:lw},setup(){const e=Ce(),l=pe(()=>e.getters["auth/frontWarehouse"]);Ye();const c=E({}),n=E([]),h=E([]),y=E({}),u=E([]),d=E([]),m=E(l.value.slug),p=f=>{axiosFront.get(`front/homepage/${f}`).then(g=>{y.value=g.data.currency,c.value=g.data.front_settings,n.value=g.data.front_product_cards,h.value=c.value.featured_products_details})};return ee(()=>{axiosFront.get("front/warehouses").then(f=>{d.value=f.data.warehouses,u.value=d.value.map(g=>({label:g.name,value:g.slug}))}),p(l.value.slug)}),me(m,f=>{l.value=f,window.config.frontStoreWarehouse=d.value.find(g=>g.slug===f),p(f)}),{frontSettings:c,frontProductCards:n,featuredProducts:h,currency:y,allWarehouses:d,selectedWarehouseSlug:m,changeWarehouse:()=>{l.value=m.value,window.config.frontStoreWarehouse=d.value.find(f=>f.slug===m.value),e.commit("auth/updateFrontWarehouse",window.config.frontStoreWarehouse)},warehouseOptions:u}}}),rw={class:"bg-white"},dw={id:"warehouse-container"},iw=w("label",{for:"warehouse-select"},"Select Warehouse:",-1),uw=["src"],mw=["src"],cw=["src"],pw={key:1},_w={style:{"text-align":"center"},class:"mt-50 mb-40"},fw={class:"prdoct-card-list-body mt-20 mb-50"},gw={key:2},yw={style:{"text-align":"center"},class:"mt-50 mb-40"},hw={style:{padding:"0px 10px 0px 10px","border-radius":"10px",border:"1px solid #eee"}},bw={key:3},vw={style:{"text-align":"center"},class:"mt-50 mb-40"},kw={class:"prdoct-card-list-body mt-20 mb-50"},ww={class:"custom-slick-arrow",style:{left:"10px",zindex:"1"}},Cw={class:"custom-slick-arrow",style:{right:"10px"}},Sw=["src"];function $w(e,l,c,n,h,y){const u=o("a-select"),d=o("a-carousel"),m=o("a-col"),p=o("a-row"),_=o("a-divider"),f=o("a-typography-title"),g=o("ProductCard"),b=o("a-avatar"),v=o("a-list-item-meta"),k=o("a-list-item"),$=o("a-list"),D=o("left-circle-outlined"),I=o("RightCircleOutlined");return r(),S("div",rw,[w("div",dw,[iw,t(u,{value:e.selectedWarehouseSlug,"onUpdate:value":l[0]||(l[0]=F=>e.selectedWarehouseSlug=F),placeholder:"Select Warehouse",options:e.warehouseOptions,onChange:e.changeWarehouse},null,8,["value","options","onChange"])]),t(p,{type:"flex",justify:"center"},{default:a(()=>[t(m,{span:20},{default:a(()=>[t(p,{gutter:[20,30],class:"mt-20"},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[t(d,{autoplay:""},{default:a(()=>[(r(!0),S(O,null,G(e.frontSettings.bottom_banners_1_details,F=>(r(),S("div",{key:F.uid},[w("img",{src:F.url,style:{width:"100%"}},null,8,uw)]))),128))]),_:1})]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[t(p,{gutter:[20,20]},{default:a(()=>[t(m,{span:24},{default:a(()=>[t(d,{autoplay:""},{default:a(()=>[(r(!0),S(O,null,G(e.frontSettings.bottom_banners_2_details,F=>(r(),S("div",{key:F.uid},[w("img",{src:F.url,style:{width:"100%"}},null,8,mw)]))),128))]),_:1})]),_:1}),t(m,{span:24},{default:a(()=>[(r(!0),S(O,null,G(e.frontSettings.bottom_banners_3_details,F=>(r(),S("div",{key:F.uid},[w("img",{src:F.url,style:{width:"100%"}},null,8,cw)]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e.frontSettings.bottom_banners_1_details&&e.frontSettings.bottom_banners_1_details.length>0||e.frontSettings.bottom_banners_2_details&&e.frontSettings.bottom_banners_2_details.length>0||e.frontSettings.bottom_banners_3_details&&e.frontSettings.bottom_banners_3_details.length>0?(r(),C(_,{key:0,dashed:""})):A("",!0),e.frontSettings.featured_products_details&&e.frontSettings.featured_products_details.length>0?(r(),S("div",pw,[w("div",_w,[t(f,{level:3,style:{marginBottom:"5px"}},{default:a(()=>[i(s(e.frontSettings.featured_products_title),1)]),_:1}),e.frontSettings.featured_products_subtitle?(r(),C(f,{key:0,type:"secondary",level:5,style:{marginTop:"0px"}},{default:a(()=>[i(s(e.frontSettings.featured_products_subtitle),1)]),_:1})):A("",!0)]),w("div",fw,[t(p,{gutter:[30,30]},{default:a(()=>[(r(!0),S(O,null,G(e.featuredProducts,F=>(r(),C(m,{xs:24,sm:12,md:8,lg:6,xl:4,key:F.id},{default:a(()=>[(r(),C(g,{product:F,key:F.id,currency:e.currency},null,8,["product","currency"]))]),_:2},1024))),128))]),_:1})]),t(_,{dashed:""})])):A("",!0),e.frontSettings.featured_categories_details&&e.frontSettings.featured_categories_details.length>0?(r(),S("div",gw,[w("div",yw,[t(f,{level:3,style:{marginBottom:"5px"}},{default:a(()=>[i(s(e.frontSettings.featured_categories_title),1)]),_:1}),e.frontSettings.featured_categories_subtitle?(r(),C(f,{key:0,type:"secondary",level:5,style:{marginTop:"0px"}},{default:a(()=>[i(s(e.frontSettings.featured_categories_subtitle),1)]),_:1})):A("",!0)]),t(p,{gutter:[10,10],class:"mt-20 mb-50 featured-categories"},{default:a(()=>[(r(!0),S(O,null,G(e.frontSettings.featured_categories_details,F=>(r(),C(m,{xs:24,sm:12,md:8,lg:4,xl:4,key:F.id},{default:a(()=>[w("div",hw,[t($,{"item-layout":"horizontal","data-source":[F]},{renderItem:a(({item:P})=>[t(k,null,{default:a(()=>[t(v,null,{title:a(()=>[i(s(P.name),1)]),avatar:a(()=>[t(b,{src:P.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-source"])])]),_:2},1024))),128))]),_:1}),t(_,{dashed:""})])):A("",!0),e.frontProductCards&&e.frontProductCards.length>0?(r(),S("div",bw,[(r(!0),S(O,null,G(e.frontProductCards,F=>(r(),S("div",{key:F.id,class:"prdoct-card-list"},[w("div",vw,[t(f,{level:3,style:{marginBottom:"5px"}},{default:a(()=>[i(s(F.title),1)]),_:2},1024),F.subtitle!=""?(r(),C(f,{key:0,type:"secondary",level:5,style:{marginTop:"0px"}},{default:a(()=>[i(s(F.subtitle),1)]),_:2},1024)):A("",!0)]),w("div",kw,[t(p,{gutter:[30,30]},{default:a(()=>[(r(!0),S(O,null,G(F.products_details,P=>(r(),C(m,{xs:24,sm:12,md:8,lg:6,xl:4,key:P.id},{default:a(()=>[(r(),C(g,{product:P,key:P.xid,currency:e.currency},null,8,["product","currency"]))]),_:2},1024))),128))]),_:2},1024)]),t(_,{dashed:""})]))),128))])):A("",!0),t(p,{class:"mt-20 mb-20"},{default:a(()=>[t(m,{span:24},{default:a(()=>[t(d,{arrows:""},{prevArrow:a(()=>[w("div",ww,[t(D)])]),nextArrow:a(()=>[w("div",Cw,[t(I)])]),default:a(()=>[(r(!0),S(O,null,G(e.frontSettings.top_banners_details,F=>(r(),S("div",{key:F.uid},[w("img",{src:F.url,style:{width:"100%"}},null,8,Sw)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const Dw=B(sw,[["render",$w]]),Aw=Z({components:{LeftSidebarMenu:Lo,ProductCard:Ka},setup(){const e=E([]),l=E([]),c=E([]),n=Ye(),h=E({}),y=E([]),u=E(1),d=E(1),m=E(20);ee(()=>{const g=n.params;p(g)});const p=g=>{if(g&&g.slug){const b=g.slug,v=b[b.length-1];axiosFront.post(`/front/category-by-slug/${v}`).then(k=>{h.value=k.data.category,_(h.value.id),y.value=[h.value.id]})}else y.value=[],h.value={},_()},_=()=>{let g="products?fields=id,xid,name,slug,image,image_url,description,category_id,x_category_id,category{id,xid,name,slug},brand_id,x_brand_id,brand{id,xid,name,slug},unit_id,x_unit_id,unit{id,xid,name,short_name},description,details{stock_quantitiy_alert,opening_stock,opening_stock_date,wholesale_price,wholesale_quantity,mrp,purchase_price,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type,current_stock,warehouse_id,x_warehouse_id,status},details:tax{id,xid,name,rate}";if(h.value&&h.value.id){const k=h.value.id;g+=`&filters=category_id eq ${k}`}const b=m.value,v=(d.value-1)*b;g+=`&offset=${v}&limit=${b}`,axiosFront.get(g).then(k=>{u.value=k.meta.paging.total,c.value=k.data})},f=(g,b)=>{d.value=g,m.value=b,_()};return me(n,(g,b)=>{p(g.params)}),{catSelectedKeys:y,category:h,categoriesSelectedKeys:e,categoriesOpenKeys:l,products:c,currentPage:d,pageSize:m,totalRecords:u,paginationClicked:f}}}),Tw={class:"bg-white"},Ew={key:0},Ow={key:1};function Iw(e,l,c,n,h,y){const u=o("LeftSidebarMenu"),d=o("a-col"),m=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),f=o("a-page-header"),g=o("a-divider"),b=o("ProductCard"),v=o("a-row"),k=o("a-empty"),$=o("a-pagination");return r(),S("div",Tw,[t(v,{type:"flex",justify:"center"},{default:a(()=>[t(d,{span:20},{default:a(()=>[t(v,{gutter:[30,30],class:"mt-30"},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:6,xl:6,style:{"padding-left":"0px"}},{default:a(()=>[t(u,{catSelectedKeys:e.catSelectedKeys,class:"categories-page-lefbar"},null,8,["catSelectedKeys"])]),_:1}),t(d,{xs:24,sm:24,md:24,lg:18,xl:18},{default:a(()=>[t(v,{class:"mt-30 mb-30 category-page-container"},{default:a(()=>[t(d,{span:24},{default:a(()=>[t(f,{style:{"padding-left":"0px"}},{title:a(()=>[e.category&&e.category.name?(r(),S("span",Ew,s(e.category.name),1)):(r(),S("span",Ow,s(e.$t("front_setting.all_categories")),1))]),breadcrumb:a(()=>[t(_,null,{default:a(()=>[t(p,null,{default:a(()=>[t(m,{to:{name:"front.homepage"}},{default:a(()=>[i(s(e.$t("front.home")),1)]),_:1},8,["to"])]),_:1}),t(p,null,{default:a(()=>[t(m,{to:{name:"front.categories"}},{default:a(()=>[i(s(e.$t("menu.categories")),1)]),_:1},8,["to"])]),_:1}),e.category&&e.category.name?(r(),C(p,{key:0},{default:a(()=>[i(s(e.category.name),1)]),_:1})):A("",!0)]),_:1})]),_:1}),t(g,{class:"mt-0"}),e.products&&e.products.length>0?(r(),C(v,{key:0,gutter:[30,30]},{default:a(()=>[(r(!0),S(O,null,G(e.products,D=>(r(),C(d,{xs:24,sm:12,md:8,lg:6,xl:6,key:D.id},{default:a(()=>[(r(),C(b,{product:D,key:D.id},null,8,["product"]))]),_:2},1024))),128))]),_:1})):(r(),C(v,{key:1,gutter:30,class:"mt-30 mb-30"},{default:a(()=>[t(d,{span:24},{default:a(()=>[t(k,{description:e.$t("front_setting.no_results")},null,8,["description"])]),_:1})]),_:1})),e.products&&e.products.length>0?(r(),C(v,{key:2,gutter:30,class:"mt-30 mb-30"},{default:a(()=>[t(d,{span:24},{default:a(()=>[t($,{current:e.currentPage,"onUpdate:current":l[0]||(l[0]=D=>e.currentPage=D),pageSize:e.pageSize,"onUpdate:pageSize":l[1]||(l[1]=D=>e.pageSize=D),total:e.totalRecords,onChange:e.paginationClicked,showSizeChanger:!1},null,8,["current","pageSize","total","onChange"])]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const Pw=B(Aw,[["render",Iw]]),Uw=Z({components:{HomeOutlined:Sa,ShoppingOutlined:Ot,SettingOutlined:pt,LogoutOutlined:Gn},setup(){const e=Ye(),l=Ce(),c=E([]);ee(()=>{const h=typeof e.meta.menuKey=="function"?e.meta.menuKey(e):e.meta.menuKey;c.value=[h.replace("-","_")]});const n=()=>{l.dispatch("front/logout")};return me(e,(h,y)=>{const u=typeof h.meta.menuKey=="function"?h.meta.menuKey(h):h.meta.menuKey;c.value=[u.replace("-","_")]}),{selectedKeys:c,logout:n}}});function Fw(e,l,c,n,h,y){const u=o("home-outlined"),d=o("router-link"),m=o("a-menu-item"),p=o("shopping-outlined"),_=o("setting-outlined"),f=o("logout-outlined"),g=o("a-menu");return r(),C(g,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":l[0]||(l[0]=b=>e.selectedKeys=b),style:{paddingTop:"30px",paddingBottom:"30px",paddingLeft:"25px",paddingRight:"25px",borderRadius:"10px"}},{default:a(()=>[t(m,{key:"dashboard"},{icon:a(()=>[t(u)]),default:a(()=>[t(d,{to:{name:"front.dashboard"}},{default:a(()=>[i(s(e.$t("front.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,{key:"orders"},{icon:a(()=>[t(p)]),default:a(()=>[t(d,{to:{name:"front.orders"}},{default:a(()=>[i(s(e.$t("front.my_orders")),1)]),_:1},8,["to"])]),_:1}),t(m,{key:"profile"},{icon:a(()=>[t(_)]),default:a(()=>[t(d,{to:{name:"front.profile"}},{default:a(()=>[i(s(e.$t("front.my_profile")),1)]),_:1},8,["to"])]),_:1}),t(m,{onClick:e.logout,key:"logout"},{icon:a(()=>[t(f)]),default:a(()=>[i(" "+s(e.$t("front.logout")),1)]),_:1},8,["onClick"])]),_:1},8,["selectedKeys"])}const Va=B(Uw,[["render",Fw]]);const qw=Z({props:["color"],setup(){return{}}}),Mw={class:"state-div"},Rw={class:"state-icon mr-20"},Kw={class:"state-description"};function Vw(e,l,c,n,h,y){const u=o("a-avatar");return r(),S("div",Mw,[w("div",Rw,[t(u,{size:46,style:Ve({backgroundColor:e.color?e.color:"#1890ff"})},{icon:a(()=>[de(e.$slots,"icon",{},void 0,!0)]),_:3},8,["style"])]),w("div",Kw,[w("p",null,[de(e.$slots,"title",{},void 0,!0)]),w("span",null,[de(e.$slots,"description",{},void 0,!0)])])])}const zw=B(qw,[["render",Vw],["__scopeId","data-v-f67bcdf7"]]);const Lw=Z({props:["order"],components:{EyeOutlined:Ze,StopOutlined:Zt,OrderStatus:Zn,PaymentStatus:it,OrderDetails:xn},setup(){const{formatAmountCurrency:e}=kt(),l=E(!1);return{visible:l,showModal:()=>{l.value=!0},columns:[{title:"#",dataIndex:"id"},{title:"Product",dataIndex:"product_id"},{title:"Quantity",dataIndex:"quantity"},{title:"Price",dataIndex:"unit_price"},{title:"Total",dataIndex:"subtotal"}],formatAmountCurrency:e,buildAddress:Da}}});function Bw(e,l,c,n,h,y){const u=o("eye-outlined"),d=o("a-menu-item"),m=o("OrderDetails"),p=o("a-modal");return r(),S(O,null,[t(d,{onClick:e.showModal},{default:a(()=>[t(u),i(" "+s(e.$t("stock.view_order")),1)]),_:1},8,["onClick"]),t(p,{open:e.visible,"onUpdate:open":l[0]||(l[0]=_=>e.visible=_),width:"70%",footer:!1},{title:a(()=>[i(s(e.order.invoice_number),1)]),default:a(()=>[t(m,{order:e.order},null,8,["order"])]),_:1},8,["open"])],64)}const Ww=B(Lw,[["render",Bw]]),jw=Z({props:["data"],emits:["reloadOrders"],components:{EyeOutlined:Ze,DeleteOutlined:fe,MoreOutlined:In,StopOutlined:Zt,DownloadOutlined:Et,PaymentStatus:it,OrderStatus:ta,OrderDetailsModal:Ww},setup(e,{emit:l}){const{t:c}=te(),{formatDateTime:n}=Y(),{formatAmountCurrency:h}=kt();return{columns:[{title:"Date",dataIndex:"order_date"},{title:"Total",dataIndex:"total"},{title:"Order Status",dataIndex:"order_status"},{title:"Payment Status",dataIndex:"payment_status"},{title:"Action",dataIndex:"action"}],cancelOrder:m=>{ze.confirm({title:c("common.delete")+"?",icon:t(Te),content:c("stock.order_cancel_message"),centered:!0,okText:c("common.yes"),okType:"danger",cancelText:c("common.no"),onOk(){axiosFront.post(`front/self/cancel-order/${m}`).then(p=>{l("reloadOrders"),Ee.success({message:c("common.success"),description:c("stock.order_canceled"),placement:"bottomRight"})})},onCancel(){}})},downloadInvoice:m=>{window.location.href=window.config.path+"/api/v1/pdf/"+m},formatAmountCurrency:h,formatDateTime:n}}});function Hw(e,l,c,n,h,y){const u=o("PaymentStatus"),d=o("OrderStatus"),m=o("OrderDetailsModal"),p=o("stop-outlined"),_=o("a-menu-item"),f=o("download-outlined"),g=o("a-menu"),b=o("more-outlined"),v=o("a-dropdown"),k=o("a-table");return r(),C(k,{columns:e.columns,"row-key":$=>$.id,"data-source":e.data,pagination:!1},{bodyCell:a(({column:$,record:D})=>[$.dataIndex==="order_date"?(r(),S(O,{key:0},[i(s(e.formatDateTime(D.order_date)),1)],64)):A("",!0),$.dataIndex==="total"?(r(),S(O,{key:1},[i(s(e.formatAmountCurrency(D.total)),1)],64)):A("",!0),$.dataIndex==="payment_status"?(r(),C(u,{key:2,paymentStatus:D.payment_status},null,8,["paymentStatus"])):A("",!0),$.dataIndex==="order_status"?(r(),C(d,{key:3,data:D},null,8,["data"])):A("",!0),$.dataIndex==="action"?(r(),C(v,{key:4,placement:"bottomRight"},{overlay:a(()=>[t(g,null,{default:a(()=>[t(m,{order:D},null,8,["order"]),D.order_status=="ordered"&&!D.cancelled?(r(),C(_,{key:0,onClick:I=>e.cancelOrder(D.unique_id)},{default:a(()=>[t(p),i(" Cancel Order ")]),_:2},1032,["onClick"])):A("",!0),t(_,{onClick:I=>e.downloadInvoice(D.unique_id)},{default:a(()=>[t(f),i(" Download Invoice ")]),_:2},1032,["onClick"])]),_:2},1024)]),default:a(()=>[t(b,{style:{fontSize:"16px"}})]),_:2},1024)):A("",!0)]),_:1},8,["columns","row-key","data-source"])}const Bo=B(jw,[["render",Hw]]),Nw=Z({components:{DashboardSidebar:Va,ShoppingCartOutlined:yt,SyncOutlined:jt,FieldTimeOutlined:Xl,CheckOutlined:vt,Stats:zw,OrderTable:Bo},setup(){const{frontWarehouse:e}=Y(),{addEditRequestFront:l,loading:c,rules:n}=sa(),h=E({totalOrders:0,pendingOrders:0,processingOrders:0,completedOrders:0}),y=E([]);ee(()=>{u()});const u=()=>{l({url:"front/self/dashboard",data:{},success:d=>{h.value={totalOrders:d.totalOrders,pendingOrders:d.pendingOrders,processingOrders:d.processingOrders,completedOrders:d.completedOrders},y.value=d.recentOrders}})};return{states:h,recentOrders:y,fetchOrders:u,frontWarehouse:e}}}),Yw={class:"mt-30 mb-30"},Gw={class:"table-responsive"};function Jw(e,l,c,n,h,y){const u=o("router-link"),d=o("a-breadcrumb-item"),m=o("a-breadcrumb"),p=o("dashboard-sidebar"),_=o("a-col"),f=o("a-page-header"),g=o("a-row"),b=o("ShoppingCartOutlined"),v=o("Stats"),k=o("SyncOutlined"),$=o("FieldTimeOutlined"),D=o("CheckOutlined"),I=o("OrderTable"),F=o("a-card");return r(),S("div",Yw,[t(g,{type:"flex",justify:"center"},{default:a(()=>[t(_,{span:20},{default:a(()=>[t(m,null,{default:a(()=>[t(d,null,{default:a(()=>[t(u,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[i(s(e.$t("front.home")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[i(s(e.$t("front.dashboard")),1)]),_:1})]),_:1}),t(g,{gutter:[30,30],class:"mt-30"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:6,xl:6},{default:a(()=>[t(p)]),_:1}),t(_,{xs:24,sm:24,md:24,lg:18,xl:18},{default:a(()=>[t(F,{title:null,bordered:!1,style:{borderRadius:"10px"},class:"dashboard-container"},{default:a(()=>[t(g,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[t(f,{title:e.$t("front.dashboard"),style:{"padding-left":"0px"}},null,8,["title"])]),_:1})]),_:1}),t(g,{gutter:[20,20]},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[t(v,{color:"#87d068"},{icon:a(()=>[t(b)]),title:a(()=>[i(s(e.$t("front.total_orders")),1)]),description:a(()=>[i(s(e.states.totalOrders),1)]),_:1})]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[t(v,{color:"#f56a00"},{icon:a(()=>[t(k)]),title:a(()=>[i(s(e.$t("front.pending_orders")),1)]),description:a(()=>[i(s(e.states.pendingOrders),1)]),_:1})]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[t(v,{color:"#7265e6"},{icon:a(()=>[t($)]),title:a(()=>[i(s(e.$t("front.processing_orders")),1)]),description:a(()=>[i(s(e.states.processingOrders),1)]),_:1})]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[t(v,{color:"#ffbf00"},{icon:a(()=>[t(D)]),title:a(()=>[i(s(e.$t("front.completed_orders")),1)]),description:a(()=>[i(s(e.states.completedOrders),1)]),_:1})]),_:1})]),_:1}),t(g,{class:"mt-30"},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(f,{title:e.$t("front.recent_orders"),style:{"padding-left":"0px"}},null,8,["title"])]),_:1})]),_:1}),t(g,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[w("div",Gw,[t(I,{data:e.recentOrders,onReloadOrders:e.fetchOrders},null,8,["data","onReloadOrders"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const Qw=B(Nw,[["render",Jw]]),Wo=e=>{const{url:l,data:c,success:n,error:h,t:y}=e;var u={};we(c,function(d,m){d==null?u[m]=null:u[m]=d}),axiosFront.post(l,u).then(d=>{n(d.data)}).catch(d=>{const m=d.data,p=d.status;var _={};if(p==422){if(m.error&&typeof m.error.details<"u")for(var f=Object.keys(m.error.details),g=0;g<f.length;g++){var b=f[g].replace(".","\\.");_[b]={required:!0,message:m.error.details[f[g]][0]}}h(_)}else p==406?h(m):p==403&&Ee.error({message:y("common.success")})}).then(()=>{})};const Xw=Z({props:{formData:null,folder:String,imageField:{default:"image",type:String},url:{default:"front/upload-file",type:String}},components:{LoadingOutlined:Ie,PlusOutlined:ne},setup(e,{emit:l}){const c=E([]),n=E(!1),{t:h}=te();return{fileList:c,loading:n,customRequest:u=>{const d=new FormData;d.append("image",u.file),d.append("folder",e.folder),n.value=!0,axiosFront.post(e.url,d,{headers:{"Content-Type":"multipart/form-data"}}).then(m=>{c.value=[],n.value=!1,l("onFileUploaded",{file:m.data.file,file_url:m.data.file_url})}).catch(()=>{n.value=!1,Oe.error(h("messages.uploading_failed"))})}}}}),Zw={key:0},xw=["src"],e4={key:1},t4={class:"ant-upload-text"};function a4(e,l,c,n,h,y){const u=o("loading-outlined"),d=o("plus-outlined"),m=o("a-upload");return r(),C(m,{accept:"image/*","file-list":e.fileList,"onUpdate:fileList":l[0]||(l[0]=p=>e.fileList=p),name:"image","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,customRequest:e.customRequest},{default:a(()=>[e.formData[e.imageField]!=null?(r(),S("div",Zw,[w("img",{style:{width:"128px"},src:e.formData[`${e.imageField}_url`],alt:"avatar"},null,8,xw)])):(r(),S("div",e4,[e.loading?(r(),C(u,{key:0})):(r(),C(d,{key:1})),w("div",t4,s(e.$t("common.upload")),1)]))]),_:1},8,["file-list","customRequest"])}const n4=B(Xw,[["render",a4]]),o4={components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,ExclamationCircleOutlined:Te,SaveOutlined:he,DashboardSidebar:Va,UploadFront:n4},setup(){const{t:e}=te(),l=Ce(),c=E({}),n=E({}),h=E({}),y=l.state.front.user,u=E({image:"",image_url:""});return ee(()=>{c.value={name:y.name,email:y.email,password:"",phone:y.phone,address:y.address,shipping_address:y.shipping_address,city:y.city,state:y.state,country:y.country,zipcode:y.zipcode,profile_image:y.profile_image,profile_image_url:y.profile_image_url}}),{formData:c,rules:n,formImage:u,currencies:h,onSubmit:()=>{Wo({url:"front/profile",data:c.value,success:m=>{l.commit("front/updateUser",m.user),Ee.success({placement:"bottomRight",message:e("common.success"),description:e("user.profile_updated")}),n.value={}},error:m=>{n.value=m,message.error(e("common.fix_errors"))}})}}}},l4={class:"mt-30 mb-30"},s4={class:"small-text-message"};function r4(e,l,c,n,h,y){const u=o("router-link"),d=o("a-breadcrumb-item"),m=o("a-breadcrumb"),p=o("dashboard-sidebar"),_=o("a-col"),f=o("a-page-header"),g=o("a-row"),b=o("a-input"),v=o("a-form-item"),k=o("UploadFront"),$=o("a-textarea"),D=o("SaveOutlined"),I=o("a-button"),F=o("a-form"),P=o("a-card");return r(),S("div",l4,[t(g,{type:"flex",justify:"center"},{default:a(()=>[t(_,{span:20},{default:a(()=>[t(m,null,{default:a(()=>[t(d,null,{default:a(()=>[t(u,{to:{name:"front.homepage"}},{default:a(()=>[i(s(e.$t("front.home")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[t(u,{to:{name:"front.dashboard"}},{default:a(()=>[i(s(e.$t("front.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[i(s(e.$t("front.profile")),1)]),_:1})]),_:1}),t(g,{gutter:[30,30],class:"mt-30"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:6,xl:6},{default:a(()=>[t(p)]),_:1}),t(_,{xs:24,sm:24,md:24,lg:18,xl:18},{default:a(()=>[t(P,{title:null,bordered:!1,style:{borderRadius:"10px"}},{default:a(()=>[t(g,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[t(f,{title:e.$t("front.profile_settings"),style:{"padding-left":"0px"}},null,8,["title"])]),_:1})]),_:1}),t(F,{layout:"vertical"},{default:a(()=>[t(g,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(v,{label:e.$t("user.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null},{default:a(()=>[t(b,{value:n.formData.name,"onUpdate:value":l[0]||(l[0]=T=>n.formData.name=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(v,{label:e.$t("user.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null},{default:a(()=>[t(b,{value:n.formData.email,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")]),disabled:""},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(g,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(v,{label:e.$t("user.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null},{default:a(()=>[t(b,{value:n.formData.phone,"onUpdate:value":l[1]||(l[1]=T=>n.formData.phone=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(v,{label:e.$t("user.password"),name:"password",help:n.rules.password?n.rules.password.message:null,validateStatus:n.rules.password?"error":null},{default:a(()=>[t(b,{value:n.formData.password,"onUpdate:value":l[2]||(l[2]=T=>n.formData.password=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),type:"password",autocomplete:"off"},null,8,["value","placeholder"]),w("small",s4,s(e.$t("user.password_blank")),1)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(g,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("user.profile_image"),name:"profile_image",help:n.rules.profile_image?n.rules.profile_image.message:null,validateStatus:n.rules.profile_image?"error":null},{default:a(()=>[t(k,{formData:n.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:l[3]||(l[3]=T=>{n.formData.profile_image=T.file,n.formData.profile_image_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(g,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("user.billing_address"),name:"address",help:n.rules.address?n.rules.address.message:null,validateStatus:n.rules.address?"error":null},{default:a(()=>[t($,{value:n.formData.address,"onUpdate:value":l[4]||(l[4]=T=>n.formData.address=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.billing_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(g,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,{label:e.$t("user.shipping_address"),name:"shipping_address",help:n.rules.shipping_address?n.rules.shipping_address.message:null,validateStatus:n.rules.shipping_address?"error":null},{default:a(()=>[t($,{value:n.formData.shipping_address,"onUpdate:value":l[5]||(l[5]=T=>n.formData.shipping_address=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.shipping_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(g,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(v,null,{default:a(()=>[t(I,{type:"primary",onClick:n.onSubmit},{icon:a(()=>[t(D)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const d4=B(o4,[["render",r4]]),i4={components:{DashboardSidebar:Va,OrderTable:Bo},setup(){const{addEditRequestFront:e}=sa(),{orderStatus:l}=Y(),c=E([]),n=Se({order_status_type:"all",dates:[]}),h="YYYY-MM-DD";ee(()=>{y()});const y=()=>{e({url:"front/self/orders",data:n,success:d=>{c.value=d.orders}})};return{myOrders:c,filters:n,orderStatus:l,fetchOrders:y,dateFormat:h}}},u4={class:"mt-30 mb-30"},m4={class:"table-responsive"};function c4(e,l,c,n,h,y){const u=o("router-link"),d=o("a-breadcrumb-item"),m=o("a-breadcrumb"),p=o("dashboard-sidebar"),_=o("a-col"),f=o("a-range-picker"),g=o("a-page-header"),b=o("a-row"),v=o("a-tab-pane"),k=o("a-tabs"),$=o("OrderTable"),D=o("a-card");return r(),S("div",u4,[t(b,{type:"flex",justify:"center"},{default:a(()=>[t(_,{span:20},{default:a(()=>[t(m,null,{default:a(()=>[t(d,null,{default:a(()=>[t(u,{to:{name:"front.homepage"}},{default:a(()=>[i(s(e.$t("front.home")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[t(u,{to:{name:"front.dashboard"}},{default:a(()=>[i(s(e.$t("front.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[i(s(e.$t("front.my_orders")),1)]),_:1})]),_:1}),t(b,{gutter:[30,30],class:"mt-30"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:6,xl:6},{default:a(()=>[t(p)]),_:1}),t(_,{xs:24,sm:24,md:24,lg:18,xl:18},{default:a(()=>[t(D,{title:null,bordered:!1,style:{borderRadius:"10px"},class:"dashboard-container"},{default:a(()=>[t(b,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[t(g,{title:e.$t("front.order_history"),style:{"padding-left":"0px"}},{extra:a(()=>[t(f,{value:n.filters.dates,"onUpdate:value":l[0]||(l[0]=I=>n.filters.dates=I),placeholder:[e.$t("common.start_date"),e.$t("common.end_date")],style:{width:"100%"},onChange:n.fetchOrders,valueFormat:n.dateFormat},null,8,["value","placeholder","onChange","valueFormat"])]),_:1},8,["title"])]),_:1})]),_:1}),t(b,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[t(k,{activeKey:n.filters.order_status_type,"onUpdate:activeKey":l[1]||(l[1]=I=>n.filters.order_status_type=I),onChange:n.fetchOrders},{default:a(()=>[t(v,{key:"all",tab:"All Orders"}),(r(!0),S(O,null,G(n.orderStatus,I=>(r(),C(v,{key:I.key,tab:`${I.value}`},null,8,["tab"]))),128))]),_:1},8,["activeKey","onChange"]),w("div",m4,[t($,{data:n.myOrders,onReloadOrders:n.fetchOrders},null,8,["data","onReloadOrders"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const p4=B(i4,[["render",c4]]),_4=Z({props:["formData","addEditVisible","addEditId"],emits:["addEditSuccess"],components:{SaveOutlined:he},setup(e,{emit:l}){const c=E(!1),n=E({}),h=E({}),y=E(null),{t:u}=te();ee(()=>{c.value=e.addEditVisible,n.value=e.formData,y.value=e.addEditId});const d=()=>{var p="front/self/address";e.addEditId!=null&&(p=`front/self/address/${e.addEditId}`),Wo({url:p,data:n.value,success:_=>{Ee.success({placement:"bottomRight",message:u("common.success"),description:u("front.address_saved")}),l("addEditSuccess"),h.value={},c.value=!1},error:_=>{h.value=_,Oe.error(u("common.fix_errors"))}})},m=()=>{c.value=!1};return me(e,(p,_)=>{c.value=p.addEditVisible,n.value=p.formData,y.value=p.addEditId}),{address:n,rules:h,visible:c,onSubmit:d,onClose:m}}});function f4(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-textarea"),f=o("a-form"),g=o("SaveOutlined"),b=o("a-button"),v=o("a-modal");return r(),C(v,{open:e.visible,"onUpdate:open":l[9]||(l[9]=k=>e.visible=k),width:"700px",title:e.addEditId==null?e.$t("front.add_new_address"):e.$t("front.edit_address")},{footer:a(()=>[t(b,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"}},{icon:a(()=>[t(g)]),default:a(()=>[i(" "+s(e.$t("common.save")),1)]),_:1},8,["onClick"]),t(b,{onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null},{default:a(()=>[t(u,{value:e.address.name,"onUpdate:value":l[0]||(l[0]=k=>e.address.name=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:a(()=>[t(u,{value:e.address.email,"onUpdate:value":l[1]||(l[1]=k=>e.address.email=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null},{default:a(()=>[t(u,{value:e.address.phone,"onUpdate:value":l[2]||(l[2]=k=>e.address.phone=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.billing_address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:a(()=>[t(_,{value:e.address.address,"onUpdate:value":l[3]||(l[3]=k=>e.address.address=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.billing_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.shipping_address"),name:"shipping_address",help:e.rules.shipping_address?e.rules.shipping_address.message:null,validateStatus:e.rules.shipping_address?"error":null},{default:a(()=>[t(_,{value:e.address.shipping_address,"onUpdate:value":l[4]||(l[4]=k=>e.address.shipping_address=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.shipping_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.city"),name:"city",help:e.rules.city?e.rules.city.message:null,validateStatus:e.rules.city?"error":null},{default:a(()=>[t(u,{value:e.address.city,"onUpdate:value":l[5]||(l[5]=k=>e.address.city=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.city")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.state"),name:"state",help:e.rules.state?e.rules.state.message:null,validateStatus:e.rules.state?"error":null},{default:a(()=>[t(u,{value:e.address.state,"onUpdate:value":l[6]||(l[6]=k=>e.address.state=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.state")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.country"),name:"country",help:e.rules.country?e.rules.country.message:null,validateStatus:e.rules.country?"error":null},{default:a(()=>[t(u,{value:e.address.country,"onUpdate:value":l[7]||(l[7]=k=>e.address.country=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.country")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.zipcode"),name:"zipcode",help:e.rules.zipcode?e.rules.zipcode.message:null,validateStatus:e.rules.zipcode?"error":null},{default:a(()=>[t(u,{value:e.address.zipcode,"onUpdate:value":l[8]||(l[8]=k=>e.address.zipcode=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.zipcode")]),type:"number"},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])}const g4=B(_4,[["render",f4]]),y4=Z({props:[],emits:["onAddressSelection"],components:{AddEdit:g4},setup(e,{emit:l}){const c=E(null),n=E([]),h=Ce(),{t:y}=te(),u=h.state.front.user,d="front/self/address?fields=id,xid,name,email,phone,address,shipping_address,city,state,country,zipcode",m=E(!1),p=E({}),_=E(null);ee(()=>{f(),c.value=e.selectedAddress});const f=()=>{axiosFront.get(d).then(D=>{n.value=D.data})};return{userAddresses:n,addAddress:()=>{p.value={name:u.name,phone:u.phone,email:u.email,address:u.address,shipping_address:u.shipping_address,city:u.city,state:u.state,country:u.country,zipcode:u.zipcode},_.value=null,m.value=!0},editAddress:D=>{p.value={name:D.name,email:D.email,phone:D.phone,address:D.address,shipping_address:D.shipping_address,city:D.city,state:D.state,country:D.country,zipcode:D.zipcode,_method:"PUT"},_.value=D.xid,m.value=!0},selectedAddress:c,addressSelected:()=>{l("onAddressSelection",c.value)},buildAddress:Da,addEditVisible:m,addEditAddress:p,addEditId:_,addEditSuccess:()=>{f()},deleteAddress:D=>{ze.confirm({title:y("common.delete")+"?",icon:t(Te),content:y("front.address_delete_message"),centered:!0,okText:y("common.yes"),okType:"danger",cancelText:y("common.no"),onOk(){axiosFront.delete(`front/self/address/${D}`).then(I=>{f(),Ee.success({message:y("common.success"),description:y("front.address_deleted"),placement:"bottomRight"})})},onCancel(){}})}}}}),h4=w("br",null,null,-1);function b4(e,l,c,n,h,y){const u=o("a-button"),d=o("a-radio"),m=o("a-radio-group"),p=o("a-list-item-meta"),_=o("a-list-item"),f=o("a-list"),g=o("AddEdit");return r(),S(O,null,[t(f,{"item-layout":"horizontal","data-source":e.userAddresses},{renderItem:a(({item:b})=>[t(_,null,{actions:a(()=>[t(u,{onClick:v=>e.editAddress(b),class:"p-0",type:"link"},{default:a(()=>[i(s(e.$t("common.edit")),1)]),_:2},1032,["onClick"]),t(u,{onClick:v=>e.deleteAddress(b.xid),class:"p-0",type:"link"},{default:a(()=>[i(s(e.$t("common.delete")),1)]),_:2},1032,["onClick"])]),default:a(()=>[t(p,null,{title:a(()=>[t(m,{value:e.selectedAddress,"onUpdate:value":l[0]||(l[0]=v=>e.selectedAddress=v),name:"addressCheckbox",onChange:e.addressSelected},{default:a(()=>[t(d,{value:b.xid},{default:a(()=>[i(s(b.name),1)]),_:2},1032,["value"])]),_:2},1032,["value","onChange"])]),description:a(()=>[i(s(e.buildAddress(b)),1),h4,i(" "+s(e.$t("user.phone"))+": "+s(b.phone),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"]),t(u,{class:"pl-0",type:"link",onClick:e.addAddress},{default:a(()=>[i(s(e.$t("front.add_new_address")),1)]),_:1},8,["onClick"]),t(g,{addEditVisible:e.addEditVisible,formData:e.addEditAddress,addEditId:e.addEditId,onAddEditSuccess:e.addEditSuccess},null,8,["addEditVisible","formData","addEditId","onAddEditSuccess"])],64)}const v4=B(y4,[["render",b4]]);const k4=Z({components:{DeleteOutlined:fe,WalletOutlined:jn,RollbackOutlined:Zl,RightOutlined:Wt,UserAddress:v4,ExclamationCircleOutlined:Te},setup(){const{products:e,updateCart:l,removeItem:c,subtotal:n,totalTax:h,total:y,formatAmountCurrency:u,frontWarehouse:d}=kt(),m=E(null),p=E(!0),{t:_}=te(),f=qe(),g=Ce(),{loading:b,addEditRequestFront:v}=sa();return ee(()=>{}),{products:e,removeItem:c,updateCart:l,formatAmountCurrency:u,subtotal:n,total:y,totalTax:h,selectedAddress:m,addressSelected:D=>{m.value=D},addressMethod:p,getSalesPriceWithTax:Pt,confirmOrder:()=>{ze.confirm({title:_("front.confirm_order"),icon:t(Te),content:_("front.confirm_order_message"),okText:_("common.yes"),cancelText:_("common.no"),onOk(){v({url:`front/self/checkout-orders/${d.value.slug}`,data:{products:e.value,address_id:m.value,warehouse:d.value.slug},successMessage:_("front.order_placed_message"),success:D=>{g.commit("front/addCartItems",[]),f.push({name:"front.checkout.success"})}})},onCancel(){b.value=!1}})},loading:b,frontWarehouse:d}}}),w4={class:"mt-30 mb-30"},C4={class:"payment-methods"},S4={class:"cod"},$4={class:"icon-text"},D4=w("br",null,null,-1),A4={class:"item-total pd-10"};function T4(e,l,c,n,h,y){const u=o("router-link"),d=o("a-breadcrumb-item"),m=o("a-breadcrumb"),p=o("a-alert"),_=o("a-typography-title"),f=o("UserAddress"),g=o("a-divider"),b=o("wallet-outlined"),v=o("a-radio"),k=o("a-col"),$=o("a-row"),D=o("RollbackOutlined"),I=o("a-button"),F=o("RightOutlined"),P=o("a-card"),T=o("a-avatar"),U=o("a-list-item-meta"),M=o("a-input-number"),W=o("delete-outlined"),V=o("a-list-item"),K=o("a-list");return r(),S("div",w4,[t($,{type:"flex",justify:"center"},{default:a(()=>[t(k,{span:20},{default:a(()=>[t(m,null,{default:a(()=>[t(d,null,{default:a(()=>[t(u,{to:{name:"front.homepage"}},{default:a(()=>[i(s(e.$t("front.home")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[t(u,{to:{name:"front.dashboard"}},{default:a(()=>[i(s(e.$t("front.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[t(u,{to:{name:"front.orders"}},{default:a(()=>[i(s(e.$t("front.my_orders")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[i(s(e.$t("front.checkout_page")),1)]),_:1})]),_:1}),t($,{gutter:[30,30],class:"mt-30"},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:16,xl:16},{default:a(()=>[t(P,{title:null,bordered:!1,style:{borderRadius:"10px"},class:"dashboard-container"},{default:a(()=>[t($,null,{default:a(()=>[t(k,{span:24},{default:a(()=>[e.selectedAddress==null?(r(),C(p,{key:0,message:e.$t("front.select_shipping_address"),type:"error",class:"mb-10","show-icon":""},null,8,["message"])):A("",!0),t(_,{level:3},{default:a(()=>[i(" 1. "+s(e.$t("front.address_details")),1)]),_:1}),t(f,{onOnAddressSelection:e.addressSelected},null,8,["onOnAddressSelection"]),t(g),t(_,{level:3},{default:a(()=>[i(" 2. "+s(e.$t("front.payment_details")),1)]),_:1}),t($,{gutter:30,class:"mt-20"},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:12,xl:12},{default:a(()=>[w("div",C4,[w("div",S4,[w("div",$4,[t(b,{class:"mr-5"}),i(" "+s(e.$t("front.cash_on_delivery")),1)]),t(v,{checked:e.addressMethod,"onUpdate:checked":l[0]||(l[0]=q=>e.addressMethod=q)},null,8,["checked"])])])]),_:1})]),_:1}),t(g),t($,{gutter:[30,10],class:"mt-40"},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:12,xl:12},{default:a(()=>[t(I,{type:"primary",size:"large",block:""},{default:a(()=>[t(u,{to:{name:"front.homepage"}},{default:a(()=>[t(D),i(" "+s(e.$t("front.continue_shopping")),1)]),_:1},8,["to"])]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:24,lg:12,xl:12},{default:a(()=>[t(I,{type:"primary",size:"large",onClick:e.confirmOrder,disabled:e.products.length==0||e.selectedAddress==null,loading:e.loading,block:""},{default:a(()=>[i(s(e.$t("front.confirm_order"))+" ",1),t(F)]),_:1},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:24,lg:8,xl:8},{default:a(()=>[t(P,{title:null,bordered:!1,style:{borderRadius:"10px"}},{default:a(()=>[t(K,{class:"demo-loadmore-list","item-layout":"horizontal","data-source":e.products},{renderItem:a(({item:q})=>[t(V,null,{actions:a(()=>[t(I,{type:"link",onClick:L=>e.removeItem(q.xid)},{default:a(()=>[t(W,{style:{fontSize:"20px",color:"#f87171"}})]),_:2},1032,["onClick"])]),default:a(()=>[t(U,null,{title:a(()=>[i(s(q.name)+" ",1),D4,w("small",{style:Ve({color:"rgba(0, 0, 0, 0.45)"})}," Price: "+s(e.formatAmountCurrency(e.getSalesPriceWithTax(q))),5)]),avatar:a(()=>[t(T,{src:q.image_url,size:"large"},null,8,["src"])]),description:a(()=>[i(s(e.formatAmountCurrency(e.getSalesPriceWithTax(q)*q.cart_quantity)),1)]),_:2},1024),w("div",null,[t(M,{value:q.cart_quantity,"onUpdate:value":L=>q.cart_quantity=L,min:1,style:{width:"60px"},onChange:e.updateCart},null,8,["value","onUpdate:value","onChange"])])]),_:2},1024)]),_:1},8,["data-source"]),t(g),w("div",A4,[t($,{class:"mt-10"},{default:a(()=>[t(k,{span:12},{default:a(()=>[i(s(e.$t("stock.grand_total")),1)]),_:1}),t(k,{span:12,class:"text-right"},{default:a(()=>[i(s(e.formatAmountCurrency(e.total)),1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const E4=B(k4,[["render",T4]]),O4=Z({components:{ShoppingOutlined:Ot},setup(){const{frontWarehouse:e}=Y();return{orderUniqueId:Ye().params.uniqueId,frontWarehouse:e}}}),I4={class:"mt-30 mb-30"};function P4(e,l,c,n,h,y){const u=o("router-link"),d=o("a-breadcrumb-item"),m=o("a-breadcrumb"),p=o("ShoppingOutlined"),_=o("a-button"),f=o("a-space"),g=o("a-result"),b=o("a-card"),v=o("a-col"),k=o("a-row");return r(),S("div",I4,[t(k,{type:"flex",justify:"center"},{default:a(()=>[t(v,{span:20},{default:a(()=>[t(m,null,{default:a(()=>[t(d,null,{default:a(()=>[t(u,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[i(s(e.$t("front.home")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[t(u,{to:{name:"front.dashboard",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[i(s(e.$t("front.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[t(u,{to:{name:"front.orders",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[i(s(e.$t("front.my_orders")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[i(s(e.$t("front.order_placed")),1)]),_:1})]),_:1}),t(k,{class:"mt-30"},{default:a(()=>[t(v,{span:24},{default:a(()=>[t(b,{title:null,bordered:!1,style:{borderRadius:"10px"},class:"dashboard-container"},{default:a(()=>[t(g,{status:"success",title:e.$t("front.order_placed"),"sub-title":e.$t("front.order_placed_message",[e.orderUniqueId])},{extra:a(()=>[t(f,null,{default:a(()=>[t(_,{key:"console",type:"primary"},{default:a(()=>[t(u,{to:{name:"front.orders",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[t(p),i(" "+s(e.$t("front.all_orders")),1)]),_:1},8,["to"])]),_:1}),t(_,{key:"buy"},{default:a(()=>[t(u,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[i(s(e.$t("front.continue_shopping")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:1},8,["title","sub-title"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const U4=B(O4,[["render",P4]]),F4=[{path:"/",component:x0,children:[{path:"/store",component:Dw,name:"front.homepage",meta:{isFrontStore:!0,requireUnauth:!0,menuKey:"homepage"}},{path:"/store/categories/:slug*",component:Pw,name:"front.categories",meta:{isFrontStore:!0,requireUnauth:!0,menuKey:"categories"}},{path:"/store/dashboard",component:Qw,name:"front.dashboard",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"dashboard"}},{path:"/store/profile",component:d4,name:"front.profile",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"profile"}},{path:"/store/orders",component:p4,name:"front.orders",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"orders"}},{path:"/store/checkout",component:E4,name:"front.checkout",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"orders"}},{path:"/store/checkout-success",component:U4,name:"front.checkout.success",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"orders"}}]}],jo=e=>{const{url:l,data:c,success:n,error:h}=e;var y={};we(c,function(u,d){u==null?y[d]=null:y[d]=u}),axiosAdmin.post(l,y).then(u=>{n(u.data)}).catch(u=>{const d=u.data,m=u.status;var p={};if(m==422){if(d.error&&typeof d.error.details<"u")for(var _=Object.keys(d.error.details),f=0;f<_.length;f++){var g=_[f].replace(".","\\.");p[g]={required:!0,message:d.error.details[_[f]][0]}}h(p),e.t&&Oe.error(e.t("common.fix_errors"))}else m==403&&h(d)}).then(()=>{})},q4=Z({props:["formData","data","visible","url","addEditType"],components:{PlusOutlined:ne,LoadingOutlined:Ie,SaveOutlined:he,SearchOutlined:nt,DeleteOutlined:fe},setup(e,{emit:l}){const c=Se({formSubmitting:!1,formData:e.formData}),n=E({}),h=()=>{n.value={},l("closed")},{t:y}=te(),u=Se({orderSearchTerm:[],productFetching:!1,products:[]}),d=E([]),{formatAmountCurrency:m}=Y(),p=pe(()=>e.addEditType=="add"?y("product_card.add"):y("product_card.edit")),_=()=>{c.formSubmitting=!0,jo({url:e.url,data:c.formData,success:v=>{Ee.success({placement:"bottomRight",message:y("common.success"),description:e.addEditType=="add"?y("product_card.created"):y("product_card.updated")}),l("addEditSuccess",v.xid),c.formSubmitting=!1,n.value={}},error:v=>{n.value=v,Oe.error(y("common.fix_errors")),c.formSubmitting=!1}})},f=gt(v=>{if(u.products=[],v!=""){u.productFetching=!0;let k="product-lists/search-products";axiosAdmin.post(k,{search_term:v,except:c.formData.products}).then($=>{u.products=$.data.products,u.productFetching=!1})}},300),g=(v,k)=>{const $=k.product;d.value=[...d.value,$],c.formData.products=[...c.formData.products,$.xid],u.orderSearchTerm=[],u.products=[]},b=v=>{const k=Xe(d.value,D=>D.xid!=v),$=Xe(c.formData.products,D=>D!=v);d.value=k,c.formData.products=$};return me(e,(v,k)=>{c.formData={...v.formData},d.value=v.addEditType=="edit"?v.data.products_details:[]}),{...rt(u),fetchProducts:f,searchValueSelected:g,selectedProducts:d,rules:n,onClose:h,onSubmit:_,pageTitle:p,drawerWidth:window.innerWidth<=991?"90%":"45%",formatAmountCurrency:m,getSalesPriceWithTax:Pt,removeItem:b,addEditForm:c}}}),M4=w("br",null,null,-1);function R4(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("SearchOutlined"),f=o("a-spin"),g=o("a-select-option"),b=o("a-select"),v=o("a-tag"),k=o("a-space"),$=o("a-avatar"),D=o("a-list-item-meta"),I=o("delete-outlined"),F=o("a-button"),P=o("a-list-item"),T=o("a-list"),U=o("a-form"),M=o("SaveOutlined"),W=o("a-modal");return r(),C(W,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(F,{key:"submit",type:"primary",loading:e.addEditForm.formSubmitting,onClick:e.onSubmit},{icon:a(()=>[t(M)]),default:a(()=>[i(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(F,{key:"back",onClick:e.onClose},{default:a(()=>[i(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(U,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("product_card.title"),name:"title",help:e.rules.title?e.rules.title.message:null,validateStatus:e.rules.title?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.title,"onUpdate:value":l[0]||(l[0]=V=>e.addEditForm.formData.title=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.title")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("product_card.subtitle"),name:"subtitle",help:e.rules.subtitle?e.rules.subtitle.message:null,validateStatus:e.rules.subtitle?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.subtitle,"onUpdate:value":l[1]||(l[1]=V=>e.addEditForm.formData.subtitle=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.subtitle")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("product_card.products"),name:"products",help:e.rules.products?e.rules.products.message:null,validateStatus:e.rules.products?"error":null},{default:a(()=>[t(b,{value:e.orderSearchTerm,"onUpdate:value":l[2]||(l[2]=V=>e.orderSearchTerm=V),"show-search":"","filter-option":!1,placeholder:e.$t("common.select_default_text",[e.$t("product_card.products")]),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:e.fetchProducts,"option-label-prop":"label",onFocus:l[3]||(l[3]=V=>e.products=[]),onSelect:e.searchValueSelected},We({suffixIcon:a(()=>[t(_)]),default:a(()=>[(r(!0),S(O,null,G(e.products,V=>(r(),C(g,{key:V.xid,value:V.xid,label:V.name,product:V},{default:a(()=>[i(" => "+s(V.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(f,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onSelect"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(T,{"item-layout":"horizontal","data-source":e.selectedProducts},{renderItem:a(({item:V})=>[t(P,null,{actions:a(()=>[t(F,{type:"link",onClick:K=>e.removeItem(V.xid)},{default:a(()=>[t(I,{style:{fontSize:"20px",color:"#f87171"}})]),_:2},1032,["onClick"])]),default:a(()=>[t(D,null,{title:a(()=>[i(s(V.name),1)]),description:a(()=>[t(k,null,{default:a(()=>[w("div",null,[V.category_id?(r(),C(v,{key:0,color:"purple"},{default:a(()=>[i(s(V.category.name),1)]),_:2},1024)):A("",!0),V.brand_id?(r(),C(v,{key:1,color:"cyan"},{default:a(()=>[i(s(V.brand.name),1)]),_:2},1024)):A("",!0)])]),_:2},1024),M4,t(k,{class:"mt-5"},{default:a(()=>[w("span",null,s(e.$t("product.sales_price"))+": ",1),w("span",null,s(e.formatAmountCurrency(e.getSalesPriceWithTax(V))),1),w("del",null,s(e.formatAmountCurrency(V.details.mrp)),1)]),_:2},1024)]),avatar:a(()=>[t($,{src:V.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const K4=B(q4,[["render",R4]]),V4=()=>{const e="product-cards?fields=xid,title,subtitle,products,x_products,products_details",{t:l}=te(),c=["products"],n={title:"",subtitle:"",products:[]},h=[{title:l("product_card.title"),dataIndex:"title"},{title:l("product_card.products"),dataIndex:"products"},{title:l("common.action"),dataIndex:"action"}],y=[{key:"title",value:l("product_card.title")}];return{url:e,initData:n,columns:h,filterableColumns:y,hashableColumns:c}},z4={components:{EyeOutlined:Ze,PlusOutlined:ne,EditOutlined:$e,DeleteOutlined:fe,AddEdit:K4,AdminPageHeader:ge},setup(){const{formatAmountCurrency:e,selectedWarehouse:l}=Y(),{url:c,initData:n,columns:h,filterableColumns:y,hashableColumns:u}=V4(),d=Me();ee(()=>{m()});const m=()=>{d.tableUrl.value={url:c},d.table.filterableColumns=y,d.fetch({page:1}),d.crudUrl.value="product-cards",d.langKey.value="product_card",d.initData.value={...n},d.formData.value={...n},d.hashableColumns.value=[...u]};return me(l,(p,_)=>{m()}),{columns:h,...d,filterableColumns:y,formatAmountCurrency:e,getSalesPriceWithTax:Pt}}},L4={class:"table-responsive"},B4=w("br",null,null,-1);function W4(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("PlusOutlined"),g=o("a-button"),b=o("DeleteOutlined"),v=o("a-space"),k=o("a-col"),$=o("a-select-option"),D=o("a-select"),I=o("a-input-search"),F=o("a-input-group"),P=o("a-row"),T=o("admin-page-filters"),U=o("AddEdit"),M=o("a-avatar"),W=o("a-list-item-meta"),V=o("a-list-item"),K=o("a-list"),q=o("EditOutlined"),L=o("a-table"),X=o("admin-page-table-content");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.product_cards"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.website_setup")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.product_cards")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(P,{gutter:[16,16]},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(v,null,{default:a(()=>[t(g,{type:"primary",onClick:e.addItem},{default:a(()=>[t(f),i(" "+s(e.$t("product_card.add")),1)]),_:1},8,["onClick"]),e.table.selectedRowKeys.length>0?(r(),C(g,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(P,{gutter:[16,16],justify:"end"},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(F,{compact:""},{default:a(()=>[t(D,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":l[0]||(l[0]=J=>e.table.searchColumn=J),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),S(O,null,G(n.filterableColumns,J=>(r(),C($,{key:J.key},{default:a(()=>[i(s(J.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(I,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":l[1]||(l[1]=J=>e.table.searchString=J),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(X,null,{default:a(()=>[t(U,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data"]),t(P,{class:"mt-20"},{default:a(()=>[t(k,{span:24},{default:a(()=>[w("div",L4,[t(L,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:J=>({disabled:!1,name:J.xid})},columns:n.columns,"row-key":J=>J.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:J,record:le})=>[J.dataIndex==="title"?(r(),S(O,{key:0},[i(s(le.title)+" ",1),B4,w("small",null,s(le.subtitle),1)],64)):A("",!0),J.dataIndex==="products"?(r(),C(K,{key:1,"item-layout":"horizontal","data-source":le.products_details},{renderItem:a(({item:H})=>[t(V,null,{default:a(()=>[t(W,{title:H.name},{avatar:a(()=>[t(M,{src:H.image_url,size:"small"},null,8,["src"])]),_:2},1032,["title"])]),_:2},1024)]),_:2},1032,["data-source"])):A("",!0),J.dataIndex==="action"?(r(),C(v,{key:2},{default:a(()=>[t(g,{type:"primary",onClick:H=>e.editItem(le)},{icon:a(()=>[t(q)]),_:2},1032,["onClick"]),t(g,{type:"primary",onClick:H=>e.showDeleteConfirm(le.xid)},{icon:a(()=>[t(b)]),_:2},1032,["onClick"])]),_:2},1024)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const j4=B(z4,[["render",W4]]),H4=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:he,SearchOutlined:nt,DeleteOutlined:fe},setup(e,{emit:l}){const c=Se({searchTerm:[],productFetching:!1,products:[]}),n=E([]),{formatAmountCurrency:h}=Y(),y=Se({formSubmitting:!1,formData:e.formData});ee(()=>{y.formData=e.formData,n.value=e.data.featured_products_details});const u=gt(_=>{if(c.products=[],_!=""){c.productFetching=!0;const f=y.formData.featured_products;let g="products?fields=id,xid,name,image,image_url,details{id,xid,product_id,x_product_id,sales_price,sales_tax_type,tax_id,x_tax_id,mrp},brand_id,x_brand_id,category_id,x_category_id,details:tax{id,xid,rate},brand{id,xid,name,image,image_url},category{id,xid,name,image,image_url}",b="",v="";if(f.length>0){let k="";f.forEach($=>{k+=`products.id ne ${$} and `,v+=`${$},`}),b+=`(${k.substring(0,k.length-5)}) and `,v=v.substring(0,v.length-1)}b+=`products.name lk "%${_}%"`,g+=`&filters=${encodeURIComponent(b)}`,g+=`&hashable=${v}`,axiosAdmin.get(g).then(k=>{c.products=k.data,c.productFetching=!1})}},300),d=(_,f)=>{const g=f.product;n.value=[...n.value,g],y.formData.featured_products=[...y.formData.featured_products,g.xid],c.searchTerm=[],c.products=[]},m=_=>{const f=Xe(n.value,b=>b.xid!=_),g=Xe(y.formData.featured_products,b=>b!=_);n.value=f,y.formData.featured_products=g},p=()=>{l("onSubmit",y.formData)};return{...rt(c),fetchProducts:u,searchValueSelected:d,selectedProducts:n,formatAmountCurrency:h,getSalesPriceWithTax:Pt,removeItem:m,onSubmit:p,addEditForm:y}}}),N4=w("br",null,null,-1);function Y4(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("SearchOutlined"),p=o("a-spin"),_=o("a-select-option"),f=o("a-select"),g=o("a-col"),b=o("a-row"),v=o("a-tag"),k=o("a-space"),$=o("a-avatar"),D=o("a-list-item-meta"),I=o("delete-outlined"),F=o("a-button"),P=o("a-list-item"),T=o("a-list"),U=o("SaveOutlined"),M=o("a-form"),W=o("a-card");return r(),C(W,{title:e.$t("front_setting.featured_products"),class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(M,{layout:"vertical"},{default:a(()=>[t(b,{gutter:16},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.featured_products_title"),name:"featured_products_title",help:e.rules.featured_products_title?e.rules.featured_products_title.message:null,validateStatus:e.rules.featured_products_title?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.featured_products_title,"onUpdate:value":l[0]||(l[0]=V=>e.addEditForm.formData.featured_products_title=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.title")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("front_setting.featured_products_subtitle"),name:"featured_products_subtitle",help:e.rules.featured_products_subtitle?e.rules.featured_products_subtitle.message:null,validateStatus:e.rules.featured_products_subtitle?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.featured_products_subtitle,"onUpdate:value":l[1]||(l[1]=V=>e.addEditForm.formData.featured_products_subtitle=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.subtitle")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("product.product"),name:"featured_products",help:e.rules.featured_products?e.rules.featured_products.message:null,validateStatus:e.rules.featured_products?"error":null},{default:a(()=>[t(f,{value:e.searchTerm,"onUpdate:value":l[2]||(l[2]=V=>e.searchTerm=V),"show-search":"","filter-option":!1,placeholder:e.$t("common.select_default_text",[e.$t("product.product")]),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:e.fetchProducts,"option-label-prop":"label",onFocus:l[3]||(l[3]=V=>e.products=[]),onSelect:e.searchValueSelected},We({suffixIcon:a(()=>[t(m)]),default:a(()=>[(r(!0),S(O,null,G(e.products,V=>(r(),C(_,{key:V.xid,value:V.xid,label:V.name,product:V},{default:a(()=>[i(" => "+s(V.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(p,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onSelect"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:12},{default:a(()=>[t(T,{"item-layout":"horizontal","data-source":e.selectedProducts},{renderItem:a(({item:V})=>[t(P,null,{actions:a(()=>[t(F,{type:"link",onClick:K=>e.removeItem(V.xid)},{default:a(()=>[t(I,{style:{fontSize:"20px",color:"#f87171"}})]),_:2},1032,["onClick"])]),default:a(()=>[t(D,null,{title:a(()=>[i(s(V.name),1)]),description:a(()=>[t(k,null,{default:a(()=>[w("div",null,[V.category_id?(r(),C(v,{key:0,color:"purple"},{default:a(()=>[i(s(V.category.name),1)]),_:2},1024)):A("",!0),V.brand_id?(r(),C(v,{key:1,color:"cyan"},{default:a(()=>[i(s(V.brand.name),1)]),_:2},1024)):A("",!0)])]),_:2},1024),N4,t(k,{class:"mt-5"},{default:a(()=>[w("span",null,s(e.$t("product.sales_price"))+": ",1),w("span",null,s(e.formatAmountCurrency(e.getSalesPriceWithTax(V))),1),w("del",null,s(e.formatAmountCurrency(V.details.mrp)),1)]),_:2},1024)]),avatar:a(()=>[t($,{src:V.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(b,{gutter:16,class:"mt-30"},{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(F,{type:"primary",onClick:e.onSubmit},{icon:a(()=>[t(U)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const G4=B(H4,[["render",Y4]]),J4=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:he,SearchOutlined:nt,DeleteOutlined:fe},setup(e,{emit:l}){const c=Se({searchTerm:[],categoryFetching:!1,categories:[]}),n=E([]),h=Se({formSubmitting:!1,formData:e.formData});ee(()=>{h.formData=e.formData,n.value=e.data.featured_categories_details});const y=gt(p=>{if(c.categories=[],p!=""){c.categoryFetching=!0;const _=h.formData.featured_categories;let f="categories?fields=id,xid,name,image,image_url",g="",b="";if(_.length>0){let v="";_.forEach(k=>{v+=`id ne ${k} and `,b+=`${k},`}),g+=`(${v.substring(0,v.length-5)}) and `}g+=`name lk "%${p}%"`,f+=`&filters=${encodeURIComponent(g)}`,f+=`&hashable=${b}`,axiosAdmin.get(f).then(v=>{c.categories=v.data,c.categoryFetching=!1})}},300),u=(p,_)=>{const f=_.category;n.value=[...n.value,f],h.formData.featured_categories=[...h.formData.featured_categories,f.xid],c.searchTerm=[],c.categories=[]},d=p=>{const _=Xe(n.value,g=>g.xid!=p),f=Xe(h.formData.featured_categories,g=>g!=p);n.value=_,h.formData.featured_categories=f},m=()=>{l("onSubmit",h.formData)};return{...rt(c),fetchCategories:y,searchValueSelected:u,selectedCategoriess:n,removeItem:d,addEditForm:h,onSubmit:m}}});function Q4(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("SearchOutlined"),p=o("a-spin"),_=o("a-select-option"),f=o("a-select"),g=o("a-col"),b=o("a-row"),v=o("a-avatar"),k=o("a-list-item-meta"),$=o("delete-outlined"),D=o("a-button"),I=o("a-list-item"),F=o("a-list"),P=o("SaveOutlined"),T=o("a-form"),U=o("a-card");return r(),C(U,{title:e.$t("front_setting.featured_categories"),class:"page-content-container mt-20 mb-20 mt-20 mb-20"},{default:a(()=>[t(T,{layout:"vertical"},{default:a(()=>[t(b,{gutter:16},{default:a(()=>[t(g,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.featured_categories_title"),name:"featured_categories_title",help:e.rules.featured_categories_title?e.rules.featured_categories_title.message:null,validateStatus:e.rules.featured_categories_title?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.featured_categories_title,"onUpdate:value":l[0]||(l[0]=M=>e.addEditForm.formData.featured_categories_title=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.title")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("front_setting.featured_categories_subtitle"),name:"featured_categories_subtitle",help:e.rules.featured_categories_subtitle?e.rules.featured_categories_subtitle.message:null,validateStatus:e.rules.featured_categories_subtitle?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.featured_categories_subtitle,"onUpdate:value":l[1]||(l[1]=M=>e.addEditForm.formData.featured_categories_subtitle=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.subtitle")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("category.category"),name:"featured_categories",help:e.rules.featured_categories?e.rules.featured_categories.message:null,validateStatus:e.rules.featured_categories?"error":null},{default:a(()=>[t(f,{value:e.searchTerm,"onUpdate:value":l[2]||(l[2]=M=>e.searchTerm=M),"show-search":"","filter-option":!1,placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),style:{width:"100%"},"not-found-content":e.categoryFetching?void 0:null,onSearch:e.fetchCategories,"option-label-prop":"label",onFocus:l[3]||(l[3]=M=>e.categories=[]),onSelect:e.searchValueSelected},We({suffixIcon:a(()=>[t(m)]),default:a(()=>[(r(!0),S(O,null,G(e.categories,M=>(r(),C(_,{key:M.xid,value:M.xid,label:M.name,category:M},{default:a(()=>[i(s(M.name),1)]),_:2},1032,["value","label","category"]))),128))]),_:2},[e.categoryFetching?{name:"notFoundContent",fn:a(()=>[t(p,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onSelect"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:12},{default:a(()=>[t(F,{"item-layout":"horizontal","data-source":e.selectedCategoriess,size:"middle"},{renderItem:a(({item:M})=>[t(I,null,{actions:a(()=>[t(D,{type:"link",onClick:W=>e.removeItem(M.xid)},{default:a(()=>[t($,{style:{fontSize:"20px",color:"#f87171"}})]),_:2},1032,["onClick"])]),default:a(()=>[t(k,null,{title:a(()=>[i(s(M.name),1)]),avatar:a(()=>[t(v,{src:M.image_url,size:"small"},null,8,["src"])]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(b,{gutter:16,class:"mt-30"},{default:a(()=>[t(g,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(D,{type:"primary",onClick:e.onSubmit},{icon:a(()=>[t(P)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const X4=B(J4,[["render",Q4]]),Z4=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:he,SearchOutlined:nt,DeleteOutlined:fe},setup(e,{emit:l}){const c=Se({formSubmitting:!1,formData:e.formData});return ee(()=>{c.formData=e.formData}),{addEditForm:c,onSubmit:()=>{l("onSubmit",c.formData)}}}});function x4(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("SaveOutlined"),f=o("a-button"),g=o("a-form"),b=o("a-card");return r(),C(b,{title:e.$t("front_setting.social_links"),class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(g,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.facebook"),name:"name",help:e.rules.facebook_url?e.rules.facebook_url.message:null,validateStatus:e.rules.facebook_url?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.facebook_url,"onUpdate:value":l[0]||(l[0]=v=>e.addEditForm.formData.facebook_url=v),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.facebook")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.twitter"),name:"name",help:e.rules.twitter_url?e.rules.twitter_url.message:null,validateStatus:e.rules.twitter_url?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.twitter_url,"onUpdate:value":l[1]||(l[1]=v=>e.addEditForm.formData.twitter_url=v),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.twitter")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.instagram"),name:"name",help:e.rules.instagram_url?e.rules.instagram_url.message:null,validateStatus:e.rules.instagram_url?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.instagram_url,"onUpdate:value":l[2]||(l[2]=v=>e.addEditForm.formData.instagram_url=v),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.instagram")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.linkedin"),name:"name",help:e.rules.linkedin_url?e.rules.linkedin_url.message:null,validateStatus:e.rules.linkedin_url?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.linkedin_url,"onUpdate:value":l[3]||(l[3]=v=>e.addEditForm.formData.linkedin_url=v),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.linkedin")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.youtube"),name:"name",help:e.rules.youtube_url?e.rules.youtube_url.message:null,validateStatus:e.rules.youtube_url?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.youtube_url,"onUpdate:value":l[4]||(l[4]=v=>e.addEditForm.formData.youtube_url=v),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.youtube")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16,class:"mt-30"},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(f,{type:"primary",onClick:e.onSubmit},{icon:a(()=>[t(_)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const eC=B(Z4,[["render",x4]]),tC=Z({props:["data","addText"],emits:["onEntry"],components:{PlusOutlined:ne,MinusCircleOutlined:$a},setup(e,{emit:l}){const c=E([]);return ee(()=>{c.value=e.data}),{dynamicValidateForm:c,onSubmit:()=>{l("onEntry",c.value)},removeItem:u=>{let d=c.value.indexOf(u);d!==-1&&c.value.splice(d,1)},addItem:()=>{c.value.push({title:"",value:""})}}}});function aC(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("MinusCircleOutlined"),_=o("a-row"),f=o("PlusOutlined"),g=o("a-button");return r(),S("div",null,[(r(!0),S(O,null,G(e.dynamicValidateForm,(b,v)=>(r(),S("div",{key:v},[t(_,{gutter:[16,16]},{default:a(()=>[t(m,{xs:10,sm:10,md:11,lg:11},{default:a(()=>[t(d,{name:["dataArray",v,"title"]},{default:a(()=>[t(u,{value:b.title,"onUpdate:value":k=>b.title=k,placeholder:e.$t("common.title"),rules:{required:!0,message:e.$t("front_setting.required_text",[e.$t("common.title")])}},null,8,["value","onUpdate:value","placeholder","rules"])]),_:2},1032,["name"])]),_:2},1024),t(m,{xs:10,sm:10,md:11,lg:11},{default:a(()=>[t(d,{name:["dataArray",v,"value"]},{default:a(()=>[t(u,{value:b.value,"onUpdate:value":k=>b.value=k,placeholder:e.$t("common.value"),rules:{required:!0,message:e.$t("front_setting.required_text",[e.$t("common.value")])}},null,8,["value","onUpdate:value","placeholder","rules"])]),_:2},1032,["name"])]),_:2},1024),t(m,{xs:4,sm:4,md:2,lg:2},{default:a(()=>[t(p,{onClick:k=>e.removeItem(b)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),t(_,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(g,{type:"dashed",block:"",onClick:e.addItem},{default:a(()=>[t(f),i(" "+s(e.addText),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])}const Ho=B(tC,[["render",aC]]),nC=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:he,SearchOutlined:nt,DeleteOutlined:fe,PlusOutlined:ne,MinusCircleOutlined:$a,DyanmicForm:Ho},setup(e,{emit:l}){const c=Se({formSubmitting:!1,formData:e.formData});ee(()=>{c.formData=e.formData});const n=d=>{c.formData.contact_info_widget=d,u()},h=d=>{c.formData.pages_widget=d,u()},y=d=>{c.formData.links_widget=d,u()},u=()=>{l("onSubmit",c.formData)};return{addEditForm:c,onSubmit:u,updateContactInfoWidget:n,updatePagesWidget:h,updateLinkInfoWidget:y}}});function oC(e,l,c,n,h,y){const u=o("a-input"),d=o("a-form-item"),m=o("a-col"),p=o("a-row"),_=o("a-divider"),f=o("a-typography-title"),g=o("DyanmicForm"),b=o("SaveOutlined"),v=o("a-button"),k=o("a-form"),$=o("a-card");return r(),C($,{title:e.$t("front_setting.footer"),class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(k,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.footer_company_description"),name:"footer_company_description",help:e.rules.footer_company_description?e.rules.footer_company_description.message:null,validateStatus:e.rules.footer_company_description?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.footer_company_description,"onUpdate:value":l[0]||(l[0]=D=>e.addEditForm.formData.footer_company_description=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("front_setting.copyright_text")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("front_setting.copyright_text"),name:"footer_copyright_text",help:e.rules.footer_copyright_text?e.rules.footer_copyright_text.message:null,validateStatus:e.rules.footer_copyright_text?"error":null},{default:a(()=>[t(u,{value:e.addEditForm.formData.footer_copyright_text,"onUpdate:value":l[1]||(l[1]=D=>e.addEditForm.formData.footer_copyright_text=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("front_setting.copyright_text")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(f,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[i(s(e.$t("front_setting.footer_contact_widget")),1)]),_:1}),t(g,{data:e.formData.contact_info_widget,addText:e.$t("front_setting.addContactLink"),onOnEntry:e.updateContactInfoWidget},null,8,["data","addText","onOnEntry"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(f,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[i(s(e.$t("front_setting.footer_page_widget")),1)]),_:1}),t(g,{data:e.formData.pages_widget,addText:e.$t("front_setting.addPageDetails"),onOnEntry:e.updatePagesWidget},null,8,["data","addText","onOnEntry"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(f,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[i(s(e.$t("front_setting.footer_links_widget")),1)]),_:1}),t(g,{data:e.formData.links_widget,addText:e.$t("front_setting.addLink"),onOnEntry:e.updateLinkInfoWidget},null,8,["data","addText","onOnEntry"])]),_:1})]),_:1}),t(_),t(p,{gutter:16,class:"mt-30"},{default:a(()=>[t(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(v,{type:"primary",onClick:e.onSubmit},{icon:a(()=>[t(b)]),default:a(()=>[i(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const lC=B(nC,[["render",oC]]);function sC(e){return new Promise((l,c)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>l(n.result),n.onerror=h=>c(h)})}const rC=Z({props:["fileNames","fileUrls"],emits:["uploadSuccess"],components:{PlusOutlined:ne,LoadingOutlined:Ie},setup(e,{emit:l}){const c=E(!1),n=E(""),h=E([]),y=E([]),u=E([]),d=E(!1);return ee(()=>{h.value=[...e.fileUrls],y.value=[...e.fileNames],u.value=[...e.fileUrls]}),{previewVisible:c,previewImage:n,fileList:h,handleCancel:()=>{c.value=!1},handlePreview:async g=>{!g.url&&!g.preview&&(g.preview=await sC(g.originFileObj)),n.value=g.url||g.preview,c.value=!0},loading:d,customRequest:({onSuccess:g,onError:b,file:v})=>{const k=new FormData;k.append("image",v),k.append("folder","banners"),d.value=!0,axiosAdmin.post("upload-file",k,{headers:{"Content-Type":"multipart/form-data"}}).then($=>{y.value.push($.data.file),d.value=!1,g({name:$.data.file},v),u.value.push({uid:v.uid,name:$.data.file}),l("uploadSuccess",y.value)}).catch(()=>{d.value=!1,Oe.error("upload failed.")})},fileArray:y,handleRemove:g=>{const b=Xe(u.value,k=>k.uid!=g.uid),v=[];we(b,k=>{v.push(k.name)}),u.value=b,y.value=v,l("uploadSuccess",y.value)}}}}),dC={class:"clearfix"},iC={key:0},uC={key:1},mC=w("div",{class:"ant-upload-text"},"Upload",-1),cC=["src"];function pC(e,l,c,n,h,y){const u=o("loading-outlined"),d=o("plus-outlined"),m=o("a-upload"),p=o("a-modal");return r(),S("div",dC,[t(m,{accept:"image/*",name:"image","file-list":e.fileList,"onUpdate:fileList":l[0]||(l[0]=_=>e.fileList=_),"list-type":"picture-card","show-upload-list":!0,onPreview:e.handlePreview,customRequest:e.customRequest,remove:e.handleRemove},{default:a(()=>[e.loading?(r(),S("div",iC,[t(u)])):(r(),S("div",uC,[t(d),mC]))]),_:1},8,["file-list","onPreview","customRequest","remove"]),t(p,{open:e.previewVisible,footer:null,onCancel:e.handleCancel},{default:a(()=>[w("img",{alt:"example",style:{width:"100%"},src:e.previewImage},null,8,cC)]),_:1},8,["open","onCancel"])])}const _C=B(rC,[["render",pC]]),fC=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:he,SearchOutlined:nt,DeleteOutlined:fe,PlusOutlined:ne,MinusCircleOutlined:$a,DyanmicForm:Ho,FileUploader:_C},setup(e,{emit:l}){const c=Se({formSubmitting:!1,formData:e.formData});ee(()=>{c.formData=e.formData});const n=p=>{c.formData.contact_info_widget=p},h=()=>{l("onSubmit",c.formData)};return{addEditForm:c,onSubmit:h,updateContactInfoWidget:n,topBannerUploadSuccess:p=>{c.formData.top_banners=p,h()},bottomBanner1UploadSuccess:p=>{c.formData.bottom_banners_1=p,h()},bottomBanner2UploadSuccess:p=>{c.formData.bottom_banners_2=p,h()},bottomBanner3UploadSuccess:p=>{c.formData.bottom_banners_3=p,h()}}}});function gC(e,l,c,n,h,y){const u=o("a-typography-title"),d=o("FileUploader"),m=o("a-col"),p=o("a-row"),_=o("a-divider"),f=o("a-form"),g=o("a-card");return r(),C(g,{title:e.$t("front_setting.banners"),class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(f,{layout:"vertical",class:"mb-20"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(u,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[i(s(e.$t("front_setting.top_banners_1")),1)]),_:1}),t(d,{key:"bottom_banners_1",fileUrls:e.data.bottom_banners_1_details,fileNames:e.formData.bottom_banners_1,onUploadSuccess:e.bottomBanner1UploadSuccess},null,8,["fileUrls","fileNames","onUploadSuccess"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(u,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[i(s(e.$t("front_setting.top_banners_2")),1)]),_:1}),t(d,{key:"bottom_banners_2",fileUrls:e.data.bottom_banners_2_details,fileNames:e.formData.bottom_banners_2,onUploadSuccess:e.bottomBanner2UploadSuccess},null,8,["fileUrls","fileNames","onUploadSuccess"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(u,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[i(s(e.$t("front_setting.top_banners_3")),1)]),_:1}),t(d,{key:"bottom_banners_3",fileUrls:e.data.bottom_banners_3_details,fileNames:e.formData.bottom_banners_3,onUploadSuccess:e.bottomBanner3UploadSuccess},null,8,["fileUrls","fileNames","onUploadSuccess"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(u,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[i(s(e.$t("front_setting.bottom_banners")),1)]),_:1}),t(d,{key:"top_banners_details",fileUrls:e.data.top_banners_details,fileNames:e.formData.top_banners,onUploadSuccess:e.topBannerUploadSuccess},null,8,["fileUrls","fileNames","onUploadSuccess"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const yC=B(fC,[["render",gC]]);const hC=Z({components:{FeaturedCategories:X4,FeaturedProducts:G4,SocialLinks:eC,Footers:lC,Banners:yC,HomeOutlined:Sa,ShoppingOutlined:Ot,SettingOutlined:pt,LogoutOutlined:Gn,SaveOutlined:he,AdminPageHeader:ge},setup(){const{selectedWarehouse:e}=Y(),{t:l}=te(),c=E({}),n=E({}),h=E({}),y=E(["featured_categories"]);ee(()=>{u()});const u=()=>{const m="front-settings?fields=id,xid,featured_categories,x_featured_categories,featured_products_details,featured_categories_title,featured_categories_subtitle,featured_products,x_featured_products,featured_categories_details,featured_products_title,featured_products_subtitle,facebook_url,twitter_url,instagram_url,linkedin_url,youtube_url,pages_widget,contact_info_widget,links_widget,footer_copyright_text,top_banners,top_banners_details,bottom_banners_1,bottom_banners_1_details,bottom_banners_2,bottom_banners_2_details,bottom_banners_3,bottom_banners_3_details,footer_company_description";axiosAdmin.get(m).then(p=>{const _=p.data[0];n.value={featured_categories:_.x_featured_categories,featured_categories_title:_.featured_categories_title,featured_categories_subtitle:_.featured_categories_subtitle,featured_products:_.x_featured_products,featured_products_title:_.featured_products_title,featured_products_subtitle:_.featured_products_subtitle,facebook_url:_.facebook_url,twitter_url:_.twitter_url,instagram_url:_.instagram_url,linkedin_url:_.linkedin_url,youtube_url:_.youtube_url,pages_widget:_.pages_widget,contact_info_widget:_.contact_info_widget,links_widget:_.links_widget,footer_company_description:_.footer_company_description,footer_copyright_text:_.footer_copyright_text,top_banners:_.top_banners,bottom_banners_1:_.bottom_banners_1,bottom_banners_2:_.bottom_banners_2,bottom_banners_3:_.bottom_banners_3},h.value=_})},d=m=>{jo({url:`front-settings/${h.value.xid}`,data:{...m,_method:"PUT"},success:p=>{Ee.success({placement:"bottomRight",message:l("common.success"),description:l("front.setting_updated_successfully")}),c.value={}},error:p=>{c.value=p,message.error(l("common.fix_errors"))}})};return me(e,(m,p)=>{n.value={},h.value={},u()}),{rules:c,formData:n,frontSettingsData:h,onSubmit:d,activeKey:y}}}),bC={class:"setting-sidebar"};function vC(e,l,c,n,h,y){const u=o("a-page-header"),d=o("router-link"),m=o("a-breadcrumb-item"),p=o("a-breadcrumb"),_=o("AdminPageHeader"),f=o("a-menu-item"),g=o("a-menu"),b=o("perfect-scrollbar"),v=o("a-col"),k=o("FeaturedCategories"),$=o("FeaturedProducts"),D=o("SocialLinks"),I=o("Footers"),F=o("Banners"),P=o("admin-page-table-content"),T=o("a-row");return r(),S(O,null,[t(_,null,{header:a(()=>[t(u,{title:e.$t("menu.front_settings"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[i(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.website_setup")),1)]),_:1}),t(m,null,{default:a(()=>[i(s(e.$t("menu.front_settings")),1)]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[w("div",bC,[t(b,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[t(g,{selectedKeys:e.activeKey,"onUpdate:selectedKeys":l[0]||(l[0]=U=>e.activeKey=U)},{default:a(()=>[t(f,{key:"featured_categories"},{default:a(()=>[i(s(e.$t("front_setting.featured_categories")),1)]),_:1}),t(f,{key:"featured_producs"},{default:a(()=>[i(s(e.$t("front_setting.featured_products")),1)]),_:1}),t(f,{key:"social_links"},{default:a(()=>[i(s(e.$t("front_setting.social_links")),1)]),_:1}),t(f,{key:"footers"},{default:a(()=>[i(s(e.$t("front_setting.footers")),1)]),_:1}),t(f,{key:"banners"},{default:a(()=>[i(s(e.$t("front_setting.banners")),1)]),_:1})]),_:1},8,["selectedKeys"])]),_:1})])]),_:1}),t(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(P,null,{default:a(()=>[e.formData&&e.formData.featured_categories?(r(),S(O,{key:0},[Dt(t(k,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Kt,e.activeKey[0]=="featured_categories"]]),Dt(t($,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Kt,e.activeKey[0]=="featured_producs"]]),Dt(t(D,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Kt,e.activeKey[0]=="social_links"]]),Dt(t(I,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Kt,e.activeKey[0]=="footers"]]),Dt(t(F,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Kt,e.activeKey[0]=="banners"]])],64)):A("",!0)]),_:1})]),_:1})]),_:1})],64)}const kC=B(hC,[["render",vC]]),wC=[{path:"/admin/website-setup/",component:()=>st(()=>import("./Admin-fe5d8bfe.js"),["assets/Admin-fe5d8bfe.js","assets/vendor-2f9b4e38.js","assets/vendor-dcfd1035.css","assets/Admin-14aea5fe.css"]),children:[{path:"product-cards",component:j4,name:"admin.website-setup.product-cards.index",meta:{requireAuth:!0,menuParent:"website_setup",menuKey:e=>"product-cards",permission:"product_cards_view"}},{path:"front-settings",component:kC,name:"admin.website-setup.front-settings.edit",meta:{requireAuth:!0,menuParent:"website_setup",menuKey:e=>"front-settings",permission:"front_settings_edit"}}]}],za=window.config.app_type,No=window.config.modules,CC=()=>{var e=ke.state.auth.appSetting;return!(e.x_currency_id==null||e.x_warehouse_id==null)},SC=()=>{var e=ke.state.auth.appSetting;return!(e.x_currency_id==null||e.white_label_completed==!1)},Be=xl({history:es(),routes:[...F4,{path:"",redirect:"/admin/login"},...wC,...Uu,...Bg,...py,...Is,..._d,...Py,...mk,...zv],scrollBehavior:()=>({left:0,top:0})}),Na=za=="saas"?"superadmin":"";if(za=="saas"){const e=pa(Object.assign({}),`../../${Na}/router/index.js`),l=pa(Object.assign({}),`../../${Na}/router/admin/index.js`);Promise.all([e,l]).then(([c,n])=>{c.default.forEach(h=>Be.addRoute(h)),n.default.forEach(h=>Be.addRoute(h)),Ha.forEach(h=>Be.addRoute(h))})}else Ha.forEach(e=>Be.addRoute(e));var ct=Bt;function Bt(e,l){var c=Gt();return Bt=function(n,h){n=n-260;var y=c[n];return y},Bt(e,l)}(function(e,l){for(var c=Bt,n=e();[];)try{var h=-parseInt(c(293))/1+-parseInt(c(260))/2*(-parseInt(c(289))/3)+-parseInt(c(324))/4+-parseInt(c(329))/5+-parseInt(c(326))/6+parseInt(c(292))/7*(parseInt(c(279))/8)+parseInt(c(316))/9;if(h===l)break;n.push(n.shift())}catch{n.push(n.shift())}})(Gt,881551);const Ya=(e,l,c)=>{var n=Bt,h=window.config[n(275)]==n(302)?n(281):n(305);const y=e[n(297)][n(314)](".");if(y.length>0&&y[0]==n(305))e.meta[n(300)]&&ke[n(296)][n(271)]&&ke.state[n(295)][n(299)]&&!ke[n(318)].auth[n(299)][n(268)]?(ke.dispatch("auth/logout"),c({name:"admin.login"})):e[n(263)][n(300)]&&SC()==![]&&y[1]!="setup_app"?c({name:"superadmin.setup_app.index"}):e[n(263)][n(300)]&&!ke[n(296)][n(271)]?c({name:n(298)}):e.meta.requireUnauth&&ke.getters[n(271)]?c({name:n(272)}):c();else if(y[n(322)]>0&&y[0]=="admin"&&ke[n(318)].auth&&ke[n(318)][n(295)][n(299)]&&ke.state[n(295)].user[n(268)])c({name:"superadmin.dashboard.index"});else if(y[n(322)]>0&&y[0]==n(281))if(e[n(263)].requireAuth&&!ke[n(296)]["auth/isLoggedIn"])ke[n(265)](n(311)),c({name:n(298)});else if(e[n(263)].requireAuth&&CC()==![]&&y[1]!="setup_app")c({name:n(321)});else if(e[n(263)][n(303)]&&ke[n(296)][n(271)])c({name:n(264)});else if(e[n(297)]==h+n(323))ke[n(328)](n(313),![]),c();else{var u=e[n(263)].permission;y[1]=="stock"&&(u=ts(e[n(263)].permission(e),"-","_")),!e[n(263)][n(284)]||Jn(u,ke.state[n(295)][n(299)])?c():c({name:"admin.dashboard.index"})}else y[n(322)]>0&&y[0]==n(306)&&e.meta[n(300)]&&!ke[n(296)][n(287)]?(ke[n(265)](n(285)),c({name:"front.homepage"})):c()};var mt=["t","S","y","o","i","c","l","k","f"],Lt=""+mt[1]+mt[0]+mt[3]+mt[5]+mt[7]+mt[4]+mt[8]+mt[6]+mt[2];window[ct(270)][ct(275)]=="saas"&&(Lt+=ct(319));var Tt=[{verified_name:Lt,value:![]}];No[ct(317)](e=>{var l=ct;Tt[l(325)]({verified_name:e,value:![]})});function Gt(){var e=["1588490hiraUv","toJSON","auth","getters","name","admin.login","user","requireAuth","module","non-saas","requireUnauth","envato","superadmin","front","verified_name","modules_not_registered","saas","Our license verification server is now offline. Please verify your license manually.","auth/logout","Error","auth/updateAppChecking","split","host","21467601CyhfxU","forEach","state","Saas","Modules Not Verified","admin.setup_app.index","length",".settings.modules.index","4103972tzBeCZ","push","1561668TYsroc","location","commit","110245YavZko","modules","6538nlBscG","check","is_main_product_valid","meta","admin.dashboard.index","dispatch","value","verify.main","is_superadmin","main_product_registered","config","auth/isLoggedIn","superadmin.dashboard.index","beforeEach","url","app_type","charAt",".com/","catch","8FcnhtU","auth/updateActiveModules","admin","error","bottomRight","permission","front/logout","data","front/isLoggedIn","Error!","153rGKDYi","post","appModule","8584471jlRnQW"];return Gt=function(){return e},Gt()}const $C=()=>Qe(Tt,["value",![]]),DC=(e,l,c)=>{var n=ct;return e.length!=5||l[n(322)]!=8||c.length!=6?![]:e[n(276)](3)!="c"||e.charAt(4)!="k"||e[n(276)](0)!="c"||e[n(276)](1)!="h"||e.charAt(2)!="e"?![]:l.charAt(2)!="d"||l[n(276)](3)!="e"||l.charAt(4)!="i"||l[n(276)](0)!="c"||l.charAt(1)!="o"||l[n(276)](5)!="f"||l[n(276)](6)!="l"||l[n(276)](7)!="y"?![]:c[n(276)](2)!="v"||c[n(276)](3)!="a"||c[n(276)](0)!="e"||c[n(276)](1)!="n"||c[n(276)](4)!="t"||c[n(276)](5)!="o"?![]:!![]},Ga=e=>{var l=ct;return e[l(276)](19)!="i"||e[l(276)](13)!="o"||e[l(276)](9)!="n"||e[l(276)](16)!="o"||e.charAt(22)!="y"||e[l(276)](11)!="a"||e.charAt(18)!="e"||e[l(276)](21)!="l"||e.charAt(10)!="v"||e.charAt(20)!="f"||e.charAt(12)!="t"||e.charAt(17)!="d"||e[l(276)](8)!="e"||e[l(276)](15)!="c"||e[l(276)](26)!="m"||e[l(276)](24)!="c"||e.charAt(25)!="o"?![]:!![]};Be[ct(273)]((e,l,c)=>{var n=ct,h=n(304),y="codeifly",u=n(261),d={modules:window[n(270)].modules};if(e[n(263)]&&e.meta[n(291)]&&(d[n(301)]=e[n(263)][n(291)],!et(No,e.meta[n(291)])&&c({name:n(298)})),!DC(u,y,h))ze[n(282)]({title:n(288),content:n(310)});else{var m=window[n(270)][n(275)]=="non-saas"?n(281):n(305);if($C()!==void 0&&e.name&&e[n(297)]!=n(267)&&e.name!=m+".settings.modules.index"){var p="https://"+h+"."+y+n(277)+u;bt({method:n(290),url:p,data:{verified_name:Lt,...d,domain:"demo.stockifly.in"},timeout:4e3}).then(_=>{var f=n;if(!Ga(_[f(270)][f(274)]))ze[f(282)]({title:f(288),content:f(310)});else{ke.commit("auth/updateAppChecking",![]);const g=_[f(286)];if(g[f(269)]&&(Tt.forEach(b=>{var v=f;b[v(307)]==Lt&&(b[v(266)]=!![])}),Tt.forEach(b=>{var v=f;if(et(g[v(308)],b.verified_name)||et(g.multiple_registration_modules,b[v(307)])){if(b[v(307)]!=Lt){var k=[...window[v(270)].modules],$=Tn(k,function(D){var I=v;return D!=b[I(307)]});ke[v(328)](v(280),$),window[v(270)][v(330)]=$}b.value=![]}else b[v(266)]=!![]})),g[f(262)])if(!g.main_product_registered||g.multiple_registration)c({name:f(267)});else if(e[f(263)]&&e.meta[f(291)]&&Qe(Tt,{verified_name:e.meta[f(291)],value:![]})!==void 0){Ee.error({placement:f(283),message:f(312),description:f(320)});const b=za==f(309)?f(305):f(281);c({name:b+f(323)})}else Ya(e,l,c)}})[n(278)](_=>{var f=n;Ga(_[f(294)]()[f(270)][f(274)])?(Tt[f(317)](g=>{g.value=!![]}),ke[f(328)](f(313),![]),c()):ze.error({title:"Error!",content:f(310)})})}else Ya(e,l,c)}});const Ja="auth_user",Qa="auth_token",Xa="expire_key",Za="app_settings",xa="global_settings",en="per_page_item",tn="all_langs",an="selected_lang",nn="page_title",on="dark_theme",ln="active_modules",sn="css_settings",rn="selected_warehouse",dn="front_selected_warehouse",un="all_warehouses",AC="all_front_warehouses",mn="add_menus",cn="all_export_data",pn="email_setting_verified",_n="visible_subscription_modules";at.suppressDeprecationWarnings=!0;const xe=e=>{const l=window.localStorage.getItem(e);return l==="undefined"||l==="null"||l===void 0||l===null?null:JSON.parse(l)},TC=()=>{var e=window.config.defaultLangKey;return e||"en"},EC={namespaced:!0,state(){return{user:xe(Ja),warehouse:xe(rn),front_warehouse:xe(dn)||window.config.frontStoreWarehouse,all_warehouses:xe(un)||[],all_front_warehouses:xe(AC)||[],allLangs:xe(tn)||[],lang:window.localStorage.getItem(an)||TC(),token:window.localStorage.getItem(Qa)||null,expires:window.localStorage.getItem(Xa)||null,globalSetting:xe(xa),appSetting:xe(Za),addMenus:xe(mn)||[],visibleSubscriptionModules:xe(_n)||[],perPage:window.localStorage.getItem(en)||window.config.path,pageTitle:window.localStorage.getItem(nn)||"",darkTheme:xe(on),activeModules:xe(ln),cssSettings:xe(sn)||{leftRightPadding:"50px",headerMenuMode:"vertical"},appChecking:!0,emailSettingVerified:window.localStorage.getItem(pn)||!1,menuCollapsed:window.innerWidth<=991,allExportData:xe(cn)||[]}},mutations:{updateUser(e,l){e.user=l,window.localStorage.setItem(Ja,JSON.stringify(l))},updateWarehouse(e,l){e.warehouse=l,window.localStorage.setItem(rn,JSON.stringify(l))},updateFrontWarehouse(e,l){e.front_warehouse=l,window.localStorage.setItem(dn,JSON.stringify(l))},updateAllWarehouses(e,l){e.all_warehouses=l,window.localStorage.setItem(un,JSON.stringify(l))},updateAppChecking(e,l){e.appChecking=l},updateToken(e,l){e.token=l,window.localStorage.setItem(Qa,l),axiosAdmin.defaults.headers.common.Authorization=`Bearer ${l}`},updateExpires(e,l){e.expires=new Date(l),window.localStorage.setItem(Xa,l)},updateApp(e,l){e.appSetting=l,window.localStorage.setItem(Za,JSON.stringify(l));var c=document.querySelector("link[rel~='icon']");c.href=l.small_light_logo_url},updateGlobalSetting(e,l){e.globalSetting=l,window.localStorage.setItem(xa,JSON.stringify(l));var c=document.querySelector("link[rel~='icon']");c.href=l.small_light_logo_url},updateAddMenus(e,l){e.addMenus=l,window.localStorage.setItem(mn,JSON.stringify(l))},updatePerPage(e,l){e.perPage=l,window.localStorage.setItem(en,l)},updateLang(e,l){e.lang=l,window.localStorage.setItem(an,l)},updatePageTitle(e,l){e.pageTitle=l,window.localStorage.setItem(nn,l),e.appSetting!==null&&e.appSetting!==void 0?document.title=`${l} - ${e.appSetting.name}`:document.title=`${l} - Stockify`},updateDarkTheme(e,l){e.darkTheme=l,window.localStorage.setItem(on,l)},updateActiveModules(e,l){e.activeModules=l,window.localStorage.setItem(ln,JSON.stringify(l))},updateCssSettings(e,l){e.cssSettings=l,window.localStorage.setItem(sn,JSON.stringify(l))},updateAllLangs(e,l){e.allLangs=l,window.localStorage.setItem(tn,JSON.stringify(l))},updateMenuCollapsed(e,l){e.menuCollapsed=l},updatAllExportData(e,l){e.allExportData=l,window.localStorage.setItem(cn,JSON.stringify(l))},updateEmailVerifiedSetting(e,l){e.emailSettingVerified=l,window.localStorage.setItem(pn,l)},updateVisibleSubscriptionModules(e,l){e.visibleSubscriptionModules=l,window.localStorage.setItem(_n,JSON.stringify(l))}},actions:{updateUser(e){axiosAdmin.post("/user").then(function(l){e.commit("updateUser",l.data.user)}).catch(function(l){})},updateGlobalSetting(e){axiosAdmin.get("/global-setting").then(function(l){e.commit("updateGlobalSetting",l.data.global_setting);var c=document.querySelector("link[rel~='icon']");c.href=globalSetting.small_light_logo_url}).catch(function(l){})},updateApp(e){axiosAdmin.get("/app").then(function(l){e.commit("updateApp",l.data.app),e.commit("updateAddMenus",l.data.shortcut_menus.credentials),e.commit("updateEmailVerifiedSetting",l.data.email_setting_verified);var c=document.querySelector("link[rel~='icon']");c.href=l.data.app.small_light_logo_url}).catch(function(l){})},updateAllLangs(e){axiosAdmin.get("/all-langs").then(function(l){e.commit("updateAllLangs",l.data.langs)}).catch(function(l){})},updateAllWarehouses(e){axiosAdmin.get("/warehouses?limit=10000").then(function(l){e.commit("updateAllWarehouses",l.data)}).catch(function(l){})},refreshToken(e){const l=e.state.token;l!==""&&l!=="undefined"&&l!="null"&&l!=null&&axiosAdmin.post("/auth/refresh-token").then(function(c){e.commit("updateUser",c.data.user),e.commit("updateToken",c.data.token),e.commit("updateExpires",c.data.expires_in)}).catch(function(c){})},logout(e){axiosAdmin.post("/auth/logout").then(function(l){window.sessionStorage.clear(),e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),e.commit("updateEmailVerifiedSetting",0),Be.push({name:"admin.login"})}).catch(function(l){})},logoutToRootUrl(e){axiosAdmin.post("/auth/logout").then(function(l){e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),window.location.href=window.config.path}).catch(function(l){})},updateVisibleSubscriptionModules(e){axiosAdmin.post("/visible-subscription-modules").then(function(l){e.commit("updateVisibleSubscriptionModules",l.data)}).catch(function(l){})}},getters:{isLoggedIn:e=>e.token===null||e.token===""?!1:at(e.expires).isAfter(at()),frontWarehouse:e=>e.front_warehouse===null||e.token===""?window.config.frontStoreWarehouse:e.front_warehouse}},fn="cart_items",gn="front_auth_user",yn="front_auth_token",hn="front_expire_key",bn="front_app_settings_key",ia=e=>{const l=window.localStorage.getItem(e);return l==="undefined"||l==="null"||l===void 0||l===null?null:JSON.parse(l)},OC={namespaced:!0,state(){return{appSetting:ia(bn),user:ia(gn),token:window.localStorage.getItem(yn)||null,expires:window.localStorage.getItem(hn)||null,cartItems:ia(fn)||{},warehouseSlug:"",warehouseCurrency:{}}},mutations:{updateApp(e,l){e.appSetting=l,window.localStorage.setItem(bn,JSON.stringify(l))},updateWarehouseCurrency(e,l){e.warehouseCurrency=l},updateUser(e,l){e.user=l,window.localStorage.setItem(gn,JSON.stringify(l))},updateToken(e,l){e.token=l,window.localStorage.setItem(yn,l),axiosFront.defaults.headers.common.Authorization=`Bearer ${l}`},updateExpires(e,l){e.expires=new Date(l),window.localStorage.setItem(hn,l)},addCartItems(e,l){e.cartItems[e.warehouseSlug]=l,window.localStorage.setItem(fn,JSON.stringify(e.cartItems))},updateWarehouseSlug(e,l){e.warehouseSlug=l}},actions:{updateApp(e,l){axiosFront.get(`/front/app/${l}`).then(function(c){e.commit("updateApp",c.data.app)}).catch(function(c){})},updateUser(e){axiosFront.post("/front/user").then(function(l){e.commit("updateUser",l.data.user)}).catch(function(l){})},refreshToken(e){const l=e.state.token;l!==""&&l!=="undefined"&&axiosFront.post(`/front/refresh-token?token=${l}`).then(function(c){e.commit("updateUser",c.data.user),e.commit("updateToken",c.data.token),e.commit("updateExpires",c.data.expires_in)}).catch(function(c){})},logout(e){axiosFront.post("/front/logout").then(function(l){window.sessionStorage.clear(),e.state.token,e.commit("updateToken",null),e.commit("updateExpires",null),Be.push({name:"front.homepage",params:{warehouse:window.config.frontStoreWarehouse.slug}})}).catch(function(l){Be.push({name:"front.homepage",params:{warehouse:window.config.frontStoreWarehouse.slug}})})}},getters:{isLoggedIn:e=>e.token===null||e.token===""?!1:at(e.expires).isAfter(at()),totalCartItems:e=>{var l=0;return e.cartItems&&e.cartItems[e.warehouseSlug]&&we(e.cartItems[e.warehouseSlug],c=>{l+=c.cart_quantity}),l},storeCartItems:e=>e.cartItems&&e.cartItems[e.warehouseSlug]?e.cartItems[e.warehouseSlug]:[]}},ke=as({modules:{auth:EC,front:OC}});var qt=bt.create({baseURL:window.config.path+"/api/v1"});qt.defaults.headers.Accept="application/json";qt.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";qt.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("auth_token")&&(qt.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("auth_token"));qt.interceptors.response.use(function(e){return e.data},function(e){const l=e.response.status;if(l===401||l===500&&e.response&&e.response.data&&e.response.data.message&&e.response.data.message=="UNAUTHORIZED EXCEPTION")window.location.href=window.config.path+"/admin/login",delete window.axiosAdmin.defaults.headers.common.Authorization,localStorage.removeItem("auth_token"),localStorage.setItem("auth_user",null);else if(l===400){var c=e.response.data.error.message;Oe.error(c)}else if(l===403){var c=e.response.data.error.message;Oe.error(c)}else if(l===404){var c=e.response.data.error.message;Oe.error(c)}else l===405&&(ke.dispatch("auth/updateApp"),window.config.app_type=="saas"&&Be.push({name:"admin.subscription.current_plan"}));return Promise.reject(e.response)});window.axiosAdmin=qt;var Mt=bt.create({baseURL:window.config.path+"/api/v1"});Mt.defaults.headers.Accept="application/json";Mt.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Mt.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("front_auth_token")&&(Mt.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("front_auth_token"));Mt.interceptors.response.use(function(e){return e.data},function(e){const l=e.response.status;if(l===401)window.location.href=window.config.path,delete window.axiosFront.defaults.headers.common.Authorization,localStorage.removeItem("front_auth_token"),localStorage.setItem("front_auth_user",null);else if(l===400){var c=e.response.data.error.message;Oe.error(c)}else if(l===403){var c=e.response.data.error.message;Oe.error(c)}else if(l===404){var c=e.response.data.error.message;Oe.error(c)}return Promise.reject(e.response)});window.axiosFront=Mt;at.suppressDeprecationWarnings=!0;window.moment=at;const zt="#5F63F2",IC="#4347D9",PC="#FF69A5",UC="#E34A87",FC="#1890ff",qC="#0D79DF",MC="rgba(0, 0, 0, 0.85)",ua="#20C997",RC="#0CAB7C",ma="#FA8B0C",KC="#D47407",vn="#f5222d",VC="#E30D0F",kn="#2C99FF",zC="#0D79DF",$t="#272B41",LC="#131623",wn="#5A5F7D",Cn="#363A51",BC="#9299B8",WC="#e2e6ea",Sn="#ffffff",jC="#5A5F7D",HC="#5A5F7D",NC="#ADB4D2",YC="#FF4D4F",GC="#E30D0F",$n="#F1F2F6",Dn="#E3E6EF",JC="#C6D0DC",QC="#EFF0F3",XC="#F8F9FB",ZC="#F4F5F7",xC="#868EAE",An="rgba(95,99,242,0.2)",eS="#9299b8",tS="#F63178",aS="48px",nS="36px",oS="29px",Yo={"primary-color":zt,"primary-hover":IC,"secondary-color":PC,"secondary-hover":UC,"link-color":FC,"link-hover":qC,"success-color":ua,"success-hover":RC,"warning-color":ma,"warning-hover":KC,"error-color":vn,"error-hover":VC,"info-color":kn,"info-hover":zC,"dark-color":$t,"dark-hover":LC,"gray-color":wn,"gray-hover":Cn,"light-color":BC,"light-hover":WC,"white-color":Sn,"white-hover":HC,white:Sn,black:"#000",pink:tS,"dash-color":jC,"dash-hover":Cn,"extra-light-color":NC,"danger-color":YC,"danger-hover":GC,"font-family":"'Inter', sans-serif","font-size-base":"14px","heading-color":MC,"text-color":$t,"text-color-secondary":wn,"disabled-color":"rgba(0, 0, 0, 0.25)","border-radius-base":"4px","border-color-base":"#d9d9d9","box-shadow-base":"0 2px 8px rgba(0, 0, 0, 0.15)","border-color-light":$n,"border-color-normal":Dn,"border-color-deep":JC,"bg-color-light":XC,"bg-color-normal":ZC,"bg-color-deep":QC,"light-gray-color":xC,"gray-solid":eS,"btn-height-large":aS,"btn-height-small":nS,"btn-height-extra-small":oS,"btn-default-color":$t,"card-head-background":"#ffffff","card-head-color":$t,"card-background":"#ffffff","card-head-padding":"16px","card-padding-base":"12px","card-radius":"10px","card-shadow":"0 5px 20px rgba(146,153,184,0.03)","layout-body-background":"#F4F5F7","layout-header-background":"#ffffff","layout-footer-background":"#fafafa","layout-header-height":"64px","layout-header-padding":"0 15px","layout-footer-padding":"24px 15px","layout-sider-background":"#ffffff","layout-trigger-height":"48px","layout-trigger-background":"#002140","layout-trigger-color":"#fff","layout-zero-trigger-width":"36px","layout-zero-trigger-height":"42px","layout-sider-background-light":"#fff","layout-trigger-background-light":"#fff","layout-trigger-color-light":"rgba(0, 0, 0, 0.65)","page-header-padding":"24px","page-header-padding-vertical":"16px","page-header-padding-breadcrumb":"12px","page-header-back-color":"#000","page-header-ghost-bg":"inherit","popover-color":$t,"alert-success-border-color":ua,"alert-success-bg-color":ua+15,"alert-error-bg-color":vn+15,"alert-warning-bg-color":ma+15,"alert-info-bg-color":kn+15,"radio-button-checked-bg":zt,"grid-gutter-width":25,"skeleton-color":$n,"slider-rail-background-color":An,"slider-rail-background-color-hover":An,"slider-track-background-color":zt,"slider-track-background-color-hover":zt,"slider-handle-color":zt,"slider-handle-size":"16px","input-height-base":"48px","input-border-color":Dn,"input-height-sm":"30px","input-height-lg":"50px","rate-star-color":ma,"rate-star-size":"13px","switch-min-width":"30px","switch-sm-min-width":"30px","switch-height":"18px","switch-sm-height":"15px","result-title-font-size":"20px","result-subtitle-font-size":"12px","result-icon-font-size":"50px","tabs-horizontal-padding":"12px 15px","tabs-horizontal-margin":"0","list-item-padding":"10px 24px","tag-default-bg":"#EFF0F3","tag-default-color":$t,"tag-font-size":"11px"};({...Yo});const lS=Z({components:{SyncOutlined:jt},setup(){const{appSetting:e}=Y();return{appSetting:e}}}),sS={class:"loading-app-container"},rS={style:{color:"#7676e3"}},dS=["src"];function iS(e,l,c,n,h,y){const u=o("SyncOutlined"),d=o("a-result");return r(),S("div",sS,[t(d,null,{title:a(()=>[w("span",rS,s(e.$t("messages.loading_app_message")),1)]),icon:a(()=>[w("img",{style:{width:"150px"},src:e.appSetting.light_logo_url},null,8,dS)]),extra:a(()=>[t(u,{style:{fontSize:"38px",color:"#5254cf"},spin:""})]),_:1})])}const uS=B(lS,[["render",iS],["__scopeId","data-v-c2a22665"]]);const mS={name:"App",components:{ThemeProvider:ns,LoadingApp:uS},setup(){const e=Ye(),l=qe(),c=Ce(),n="dark",{updatePageTitle:h,appSetting:y,frontWarehouse:u,appType:d}=Y(),m=pe(()=>c.state.auth.appChecking);return ee(()=>{l.currentRoute&&l.currentRoute.value&&l.currentRoute.value.meta.isFrontStore==null&&setInterval(()=>{c.dispatch("auth/refreshToken")},5*60*1e3)}),me(e,(p,_)=>{const f=typeof p.meta.menuKey=="function"?p.meta.menuKey(p):p.meta.menuKey;h(f.replace("-","_")),d=="saas"&&y.value.is_global==0&&y.value.status=="license_expired"&&p&&p.meta&&!(p.meta.menuParent=="subscription"||p.name=="admin.login"||p.name=="verify.main")&&l.push({name:"admin.subscription.current_plan"})}),{theme:os,themeVars:Yo,darkTheme:n,appChecking:m,appSetting:y}}},cS={class:"theme-container"};function pS(e,l,c,n,h,y){const u=o("LoadingApp"),d=o("ThemeProvider"),m=o("a-config-provider"),p=o("router-view");return r(),C(p,null,{default:a(({Component:_,route:f})=>[(r(),C(ls,null,{default:a(()=>[t(m,{theme:{token:{colorPrimary:n.appSetting.primary_color,fontFamily:"Nunito,sans-serif",borderRadius:4}},direction:n.appSetting.rtl?"rtl":"ltr"},{default:a(()=>[w("div",cS,[t(d,{theme:{...n.themeVars}},{default:a(()=>[n.appChecking?(r(),C(u,{key:0})):(r(),C(Vn(_),{key:1}))]),_:2},1032,["theme"])])]),_:2},1032,["theme","direction"])]),fallback:a(()=>[i(" Loading... ")]),_:2},1024))]),_:1})}const _S=B(mS,[["render",pS]]);const fS=Z({setup(){return{}}}),gS={style:{padding:"10px 16px",background:"white"},class:"mb-20"};function yS(e,l,c,n,h,y){return r(),S("div",gS,[de(e.$slots,"default")])}const hS=B(fS,[["render",yS]]),bS=Z({setup(){return{}}}),vS={class:"dashboard-page-content-container"};function kS(e,l,c,n,h,y){return r(),S("div",vS,[de(e.$slots,"default")])}const wS=B(bS,[["render",kS]]);async function CS(){ke.getters["auth/isLoggedIn"]&&ke.dispatch("auth/updateUser"),ke.dispatch("auth/updateGlobalSetting"),ke.dispatch("auth/updateApp"),ke.dispatch("auth/updateAllLangs"),ke.dispatch("auth/updateAllWarehouses"),ke.commit("auth/updateActiveModules",window.config.modules),ke.dispatch("auth/updateVisibleSubscriptionModules"),ke.commit("auth/updateFrontWarehouse",window.config.frontStoreWarehouse);const e=ss(_S),l=eb({legacy:!1,globalInjection:!0,locale:ke.state.auth.lang,warnHtmlMessage:!1});await ab(l,ke.state.auth.lang),e.use(l),e.use(rs),e.use(ds),e.use(ke),e.use(is);const c=window.config.installed_modules,n=[];c.forEach(h=>{const y=h.verified_name,u=pa(Object.assign({}),`../../Modules/${y}/Resources/assets/js/${y}.js`);n.push(u)}),Promise.all(n).then(h=>{h.forEach(y=>{e.use(y.default,{routes:Be,store:ke})}),Be.addRoute({path:"/:catchAll(.*)",redirect:"/"}),e.use(Be)}),e.component("admin-page-filters",hS),e.component("admin-page-table-content",wS),window.i18n=l,Be.isReady().then(()=>{Be.currentRoute&&Be.currentRoute.value&&Be.currentRoute.value.meta&&Be.currentRoute.value.meta.isFrontStore&&(ke.commit("front/updateWarehouseSlug",Be.currentRoute.value.params.warehouse),ke.commit("front/updateWarehouseCurrency",window.config.warehouseCurrency),ke.commit("front/updateApp",window.config.frontStoreSettings)),e.mount("#app")})}CS();export{ry as A,ri as B,vo as C,Zg as E,Ra as L,Ua as P,r_ as R,ay as S,Oa as T,yi as U,Ft as W,v_ as a,mi as b,Y as c,Do as d,Xn as e,dy as f,uS as g,ab as l};
